## 修改计划

### 问题
Agent调用编程工具后，工具返回完整代码，但agent最终输出简短。

### 修改内容

**1. 修改 `app/agents/agent_factory.py`**
- 在 `SYSTEM_PROMPT` 中添加"工具结果输出规则"
- 明确要求原样输出工具返回的代码内容
- 添加 `[ORIGINAL_OUTPUT_REQUIRED]` 标记识别规则

**2. 修改 `app/tools/code_tools.py`**
- 在工具返回内容前添加 `[ORIGINAL_OUTPUT_REQUIRED]` 标记
- 强制agent完整输出，不能总结或省略

**3. 修改 `app/services/chat_service.py`（可选）**
- 在 `generate_response_stream` 中添加工具结果日志
- 便于调试和追踪工具输出

### 预期效果
- Agent收到编程工具结果后，会原样完整输出代码内容
- 用户能看到完整的代码和解释说明