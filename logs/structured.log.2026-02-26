{"timestamp": "2026-02-26 17:46:26,188", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 104}
{"timestamp": "2026-02-26 17:46:26,233", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 初始化成功", "module": "agent_factory", "function": "init_checkpointer", "line": 66}
{"timestamp": "2026-02-26 17:46:26,234", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 107}
{"timestamp": "2026-02-26 17:46:26,234", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 109}
{"timestamp": "2026-02-26 17:46:26,234", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 开始缓存预热 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 159}
{"timestamp": "2026-02-26 17:46:26,234", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热会话列表缓存，限制 100 条", "module": "cache_warmup", "function": "warmup_conversations", "line": 26}
{"timestamp": "2026-02-26 17:46:26,288", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:26,288", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:26,289", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:26,289", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:26,290", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:26,290", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:26,290", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 17:46:26,295", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \n LIMIT $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:26,295", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00020s] (50,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:26,298", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversations:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 17:46:26,300", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.user_id = $1::INTEGER ORDER BY conversations.is_pinned DESC, conversations.updated_at DESC \n LIMIT $2::INTEGER OFFSET $3::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:26,300", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00021s] (1, 100, 0)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:26,302", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversations:user:1:skip:0:limit:100: [{'id': 221, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-26T09:42:18.712045+00:00', 'updated_at': '2026-02-26T09:42:18.712045+00:00'}, {'id': 220, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T20:05:52.426575+00:00', 'updated_at': '2026-02-25T20:05:52.426575+00:00'}, {'id': 219, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T18:35:35.586803+00:00', 'updated_at': '2026-02-25T18:35:35.586803+00:00'}, {'id': 218, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T18:35:17.658631+00:00', 'updated_at': '2026-02-25T18:35:17.658631+00:00'}, {'id': 217, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T18:27:50.787750+00:00', 'updated_at': '2026-02-25T18:27:50.787750+00:00'}, {'id': 216, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T18:18:58.723048+00:00', 'updated_at': '2026-02-25T18:18:58.723048+00:00'}, {'id': 215, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T18:05:04.122315+00:00', 'updated_at': '2026-02-25T18:05:04.122315+00:00'}, {'id': 214, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:46:24.232806+00:00', 'updated_at': '2026-02-25T17:46:24.232806+00:00'}, {'id': 213, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:43:09.146742+00:00', 'updated_at': '2026-02-25T17:43:09.146742+00:00'}, {'id': 212, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:41:10.457397+00:00', 'updated_at': '2026-02-25T17:41:10.457397+00:00'}, {'id': 211, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:36:36.866901+00:00', 'updated_at': '2026-02-25T17:36:36.866901+00:00'}, {'id': 210, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:35:41.686230+00:00', 'updated_at': '2026-02-25T17:35:41.686230+00:00'}, {'id': 209, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:28:46.107951+00:00', 'updated_at': '2026-02-25T17:28:46.107951+00:00'}, {'id': 208, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:24:46.995898+00:00', 'updated_at': '2026-02-25T17:24:46.995898+00:00'}, {'id': 207, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:18:22.171051+00:00', 'updated_at': '2026-02-25T17:18:22.171051+00:00'}, {'id': 206, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:15:32.934734+00:00', 'updated_at': '2026-02-25T17:15:32.934734+00:00'}, {'id': 205, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:12:01.339171+00:00', 'updated_at': '2026-02-25T17:12:01.339171+00:00'}, {'id': 204, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:05:57.701858+00:00', 'updated_at': '2026-02-25T17:05:57.701858+00:00'}, {'id': 203, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:00:11.461904+00:00', 'updated_at': '2026-02-25T17:00:11.461904+00:00'}, {'id': 202, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T16:55:04.663265+00:00', 'updated_at': '2026-02-25T16:55:04.663265+00:00'}, {'id': 201, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T16:51:00.791887+00:00', 'updated_at': '2026-02-25T16:51:00.791887+00:00'}, {'id': 200, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T16:50:44.425883+00:00', 'updated_at': '2026-02-25T16:50:44.425883+00:00'}, {'id': 199, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T16:45:32.330297+00:00', 'updated_at': '2026-02-25T16:45:32.330297+00:00'}, {'id': 198, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T16:45:18.281430+00:00', 'updated_at': '2026-02-25T16:45:18.281430+00:00'}, {'id': 197, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T16:20:51.014190+00:00', 'updated_at': '2026-02-25T16:20:51.014190+00:00'}, {'id': 196, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T15:44:33.502770+00:00', 'updated_at': '2026-02-25T15:44:33.502770+00:00'}, {'id': 195, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T15:38:11.237687+00:00', 'updated_at': '2026-02-25T15:38:11.237687+00:00'}, {'id': 194, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T15:37:53.427931+00:00', 'updated_at': '2026-02-25T15:37:53.427931+00:00'}, {'id': 193, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T15:36:19.760334+00:00', 'updated_at': '2026-02-25T15:36:19.760334+00:00'}, {'id': 192, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T15:35:18.417589+00:00', 'updated_at': '2026-02-25T15:35:18.417589+00:00'}, {'id': 191, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T15:03:14.211782+00:00', 'updated_at': '2026-02-25T15:03:14.211782+00:00'}, {'id': 190, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T14:36:42.154696+00:00', 'updated_at': '2026-02-25T14:36:42.154696+00:00'}, {'id': 189, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T14:31:01.510866+00:00', 'updated_at': '2026-02-25T14:31:01.510866+00:00'}, {'id': 188, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T14:29:53.274194+00:00', 'updated_at': '2026-02-25T14:29:53.274194+00:00'}, {'id': 187, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T13:12:52.546721+00:00', 'updated_at': '2026-02-25T13:12:52.546721+00:00'}, {'id': 186, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T13:10:59.604351+00:00', 'updated_at': '2026-02-25T13:10:59.604351+00:00'}, {'id': 185, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T13:10:27.514931+00:00', 'updated_at': '2026-02-25T13:10:27.514931+00:00'}, {'id': 184, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T13:08:41.882447+00:00', 'updated_at': '2026-02-25T13:08:41.882447+00:00'}, {'id': 183, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T12:27:32.234206+00:00', 'updated_at': '2026-02-25T12:27:32.234206+00:00'}, {'id': 182, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T12:17:23.497578+00:00', 'updated_at': '2026-02-25T12:17:23.497578+00:00'}, {'id': 181, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T12:15:04.054903+00:00', 'updated_at': '2026-02-25T12:15:04.054903+00:00'}, {'id': 180, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T12:11:41.757639+00:00', 'updated_at': '2026-02-25T12:11:41.757639+00:00'}, {'id': 179, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T12:09:15.894955+00:00', 'updated_at': '2026-02-25T12:09:15.894955+00:00'}, {'id': 178, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T12:01:08.835467+00:00', 'updated_at': '2026-02-25T12:01:08.835467+00:00'}, {'id': 177, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T11:56:14.684224+00:00', 'updated_at': '2026-02-25T11:56:14.684224+00:00'}, {'id': 176, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T10:52:03.862026+00:00', 'updated_at': '2026-02-25T10:52:03.862026+00:00'}, {'id': 175, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T10:50:02.518522+00:00', 'updated_at': '2026-02-25T10:50:02.518522+00:00'}, {'id': 174, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T10:42:55.821262+00:00', 'updated_at': '2026-02-25T10:42:55.821262+00:00'}, {'id': 173, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T10:38:49.101647+00:00', 'updated_at': '2026-02-25T10:38:49.101647+00:00'}, {'id': 172, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T10:38:09.353141+00:00', 'updated_at': '2026-02-25T10:38:09.353141+00:00'}, {'id': 171, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T09:21:48.948162+00:00', 'updated_at': '2026-02-25T09:21:48.948162+00:00'}, {'id': 170, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T09:17:55.698363+00:00', 'updated_at': '2026-02-25T09:17:55.698363+00:00'}, {'id': 169, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T09:17:18.775757+00:00', 'updated_at': '2026-02-25T09:17:18.775757+00:00'}, {'id': 168, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T09:16:23.024303+00:00', 'updated_at': '2026-02-25T09:16:23.024303+00:00'}, {'id': 167, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T09:12:41.857175+00:00', 'updated_at': '2026-02-25T09:12:41.857175+00:00'}, {'id': 166, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T08:36:41.383650+00:00', 'updated_at': '2026-02-25T08:36:41.383650+00:00'}, {'id': 165, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T08:34:32.543620+00:00', 'updated_at': '2026-02-25T08:34:32.543620+00:00'}, {'id': 164, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T08:32:11.855646+00:00', 'updated_at': '2026-02-25T08:32:11.855646+00:00'}, {'id': 163, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T08:27:25.972885+00:00', 'updated_at': '2026-02-25T08:27:25.972885+00:00'}, {'id': 162, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T16:10:55.313974+00:00', 'updated_at': '2026-02-24T16:10:55.313974+00:00'}, {'id': 161, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T16:09:08.553629+00:00', 'updated_at': '2026-02-24T16:09:08.553629+00:00'}, {'id': 160, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T16:06:15.394421+00:00', 'updated_at': '2026-02-24T16:06:15.394421+00:00'}, {'id': 159, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T16:05:31.589282+00:00', 'updated_at': '2026-02-24T16:05:31.589282+00:00'}, {'id': 158, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T15:55:30.195931+00:00', 'updated_at': '2026-02-24T15:55:30.195931+00:00'}, {'id': 157, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T15:42:11.582736+00:00', 'updated_at': '2026-02-24T15:42:11.582736+00:00'}, {'id': 156, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T13:54:53.908013+00:00', 'updated_at': '2026-02-24T13:54:53.908013+00:00'}, {'id': 155, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T13:21:34.170984+00:00', 'updated_at': '2026-02-24T13:21:34.170984+00:00'}, {'id': 153, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T13:18:32.014035+00:00', 'updated_at': '2026-02-24T13:18:32.014035+00:00'}, {'id': 152, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T13:15:16.961323+00:00', 'updated_at': '2026-02-24T13:15:16.961323+00:00'}, {'id': 151, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T12:43:20.889833+00:00', 'updated_at': '2026-02-24T12:43:20.889833+00:00'}, {'id': 150, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T12:42:56.016952+00:00', 'updated_at': '2026-02-24T12:42:56.016952+00:00'}, {'id': 149, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:55:56.042369+00:00', 'updated_at': '2026-02-24T10:55:56.042369+00:00'}, {'id': 148, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:55:41.488047+00:00', 'updated_at': '2026-02-24T10:55:41.488047+00:00'}, {'id': 147, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:49:14.817320+00:00', 'updated_at': '2026-02-24T10:49:14.817320+00:00'}, {'id': 146, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:48:57.350358+00:00', 'updated_at': '2026-02-24T10:48:57.350358+00:00'}, {'id': 145, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:46:32.242848+00:00', 'updated_at': '2026-02-24T10:46:32.242848+00:00'}, {'id': 144, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:44:06.957698+00:00', 'updated_at': '2026-02-24T10:44:06.957698+00:00'}, {'id': 143, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:43:36.650302+00:00', 'updated_at': '2026-02-24T10:43:36.650302+00:00'}, {'id': 142, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:41:27.108791+00:00', 'updated_at': '2026-02-24T10:41:27.108791+00:00'}, {'id': 141, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:41:00.283484+00:00', 'updated_at': '2026-02-24T10:41:00.283484+00:00'}, {'id': 140, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:39:47.897467+00:00', 'updated_at': '2026-02-24T10:39:47.897467+00:00'}, {'id': 139, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:34:05.150318+00:00', 'updated_at': '2026-02-24T10:34:05.150318+00:00'}, {'id': 138, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:29:46.478868+00:00', 'updated_at': '2026-02-24T10:29:46.478868+00:00'}, {'id': 137, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:28:45.655878+00:00', 'updated_at': '2026-02-24T10:28:45.655878+00:00'}, {'id': 136, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:05:25.775341+00:00', 'updated_at': '2026-02-24T10:05:25.775341+00:00'}, {'id': 135, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T09:56:25.866934+00:00', 'updated_at': '2026-02-24T09:56:25.866934+00:00'}, {'id': 134, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T09:53:06.440754+00:00', 'updated_at': '2026-02-24T09:53:06.440754+00:00'}, {'id': 133, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T09:51:21.444274+00:00', 'updated_at': '2026-02-24T09:51:21.444274+00:00'}, {'id': 132, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T09:39:42.439041+00:00', 'updated_at': '2026-02-24T09:39:42.439041+00:00'}, {'id': 131, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T09:38:48.866580+00:00', 'updated_at': '2026-02-24T09:38:48.866580+00:00'}, {'id': 130, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T09:28:16.002211+00:00', 'updated_at': '2026-02-24T09:28:16.002211+00:00'}, {'id': 129, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T09:27:49.270616+00:00', 'updated_at': '2026-02-24T09:27:49.270616+00:00'}, {'id': 128, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T09:26:50.501911+00:00', 'updated_at': '2026-02-24T09:26:50.501911+00:00'}, {'id': 127, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T09:22:10.441084+00:00', 'updated_at': '2026-02-24T09:22:10.441084+00:00'}, {'id': 126, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T09:21:30.564128+00:00', 'updated_at': '2026-02-24T09:21:30.564128+00:00'}, {'id': 125, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T09:16:52.709196+00:00', 'updated_at': '2026-02-24T09:16:52.709196+00:00'}, {'id': 124, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T09:15:35.666197+00:00', 'updated_at': '2026-02-24T09:15:35.666197+00:00'}, {'id': 120, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T07:41:15.709524+00:00', 'updated_at': '2026-02-24T07:41:15.709524+00:00'}, {'id': 97, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T04:11:56.505403+00:00', 'updated_at': '2026-02-24T04:11:56.505403+00:00'}, {'id': 96, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T04:09:25.831012+00:00', 'updated_at': '2026-02-24T04:09:25.831012+00:00'}]", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 17:46:26,304", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversations:user:1:skip:0:limit:100, TTL=3728s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 17:46:26,305", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 用户 1 的会话列表已预热", "module": "cache_warmup", "function": "warmup_conversations", "line": 56}
{"timestamp": "2026-02-26 17:46:26,305", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 60}
{"timestamp": "2026-02-26 17:46:26,305", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 17:46:26,305", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热置顶会话详情缓存", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 65}
{"timestamp": "2026-02-26 17:46:26,306", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 17:46:26,307", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.is_pinned = true", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:26,307", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00036s] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:26,308", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 102}
{"timestamp": "2026-02-26 17:46:26,308", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 17:46:26,309", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热最近 24 小时活跃的会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 114}
{"timestamp": "2026-02-26 17:46:26,309", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 17:46:26,310", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.updated_at >= $1::TIMESTAMP WITH TIME ZONE \n LIMIT $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:26,310", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00036s] (datetime.datetime(2026, 2, 25, 9, 46, 26, 309178), 200)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:26,311", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:163:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 17:46:26,312", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:26,312", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00023s] (163, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:26,313", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:163:1: {'id': 163, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T08:27:25.972885+00:00', 'updated_at': '2026-02-25T08:27:25.972885+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 17:46:26,313", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:163:1, TTL=3841s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 17:46:26,314", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:164:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 17:46:26,314", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:26,314", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.002362s ago] (164, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:26,315", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:164:1: {'id': 164, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T08:32:11.855646+00:00', 'updated_at': '2026-02-25T08:32:11.855646+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 17:46:26,315", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:164:1, TTL=3630s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 17:46:26,315", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:165:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 17:46:26,316", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:26,316", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.004s ago] (165, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:26,316", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:165:1: {'id': 165, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T08:34:32.543620+00:00', 'updated_at': '2026-02-25T08:34:32.543620+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 17:46:26,317", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:165:1, TTL=3824s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 17:46:26,317", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:166:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 17:46:26,317", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:26,318", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.00585s ago] (166, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:26,318", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:166:1: {'id': 166, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T08:36:41.383650+00:00', 'updated_at': '2026-02-25T08:36:41.383650+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 17:46:26,319", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:166:1, TTL=3619s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 17:46:26,319", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:167:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 17:46:26,320", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:26,320", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.008304s ago] (167, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:26,321", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:167:1: {'id': 167, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T09:12:41.857175+00:00', 'updated_at': '2026-02-25T09:12:41.857175+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 17:46:26,321", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:167:1, TTL=3808s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 17:46:26,322", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:168:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 17:46:26,322", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:26,322", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.01017s ago] (168, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:26,322", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:168:1: {'id': 168, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T09:16:23.024303+00:00', 'updated_at': '2026-02-25T09:16:23.024303+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 17:46:26,323", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:168:1, TTL=3658s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 17:46:26,323", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:169:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 17:46:26,324", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:26,324", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.01196s ago] (169, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:26,324", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:169:1: {'id': 169, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T09:17:18.775757+00:00', 'updated_at': '2026-02-25T09:17:18.775757+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 17:46:26,325", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:169:1, TTL=3808s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 17:46:26,325", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:170:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 17:46:26,325", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:26,325", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.0134s ago] (170, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:26,326", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:170:1: {'id': 170, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T09:17:55.698363+00:00', 'updated_at': '2026-02-25T09:17:55.698363+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 17:46:26,326", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:170:1, TTL=3838s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 17:46:26,326", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:171:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 17:46:26,326", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:26,327", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.01477s ago] (171, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:26,327", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:171:1: {'id': 171, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T09:21:48.948162+00:00', 'updated_at': '2026-02-25T09:21:48.948162+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 17:46:26,328", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:171:1, TTL=3795s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 17:46:26,329", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:172:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 17:46:26,329", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:26,329", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.0173s ago] (172, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:26,330", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:172:1: {'id': 172, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T10:38:09.353141+00:00', 'updated_at': '2026-02-25T10:38:09.353141+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 17:46:26,330", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:172:1, TTL=3720s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 17:46:26,331", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:173:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 17:46:26,331", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:26,332", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.01972s ago] (173, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:26,332", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:173:1: {'id': 173, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T10:38:49.101647+00:00', 'updated_at': '2026-02-25T10:38:49.101647+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 17:46:26,332", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:173:1, TTL=3857s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 17:46:26,333", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:174:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 17:46:26,333", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:26,333", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.02147s ago] (174, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:26,334", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:174:1: {'id': 174, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T10:42:55.821262+00:00', 'updated_at': '2026-02-25T10:42:55.821262+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 17:46:26,334", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:174:1, TTL=3775s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 17:46:26,334", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:175:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 17:46:26,335", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:176:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 17:46:26,335", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:177:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 17:46:26,335", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:178:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 17:46:26,335", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:179:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 17:46:26,335", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:180:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 17:46:26,336", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:181:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 17:46:26,336", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:182:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 17:46:26,336", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:183:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 17:46:26,336", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:184:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 17:46:26,336", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:185:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 17:46:26,337", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:186:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 17:46:26,337", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:187:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 17:46:26,337", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:188:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 17:46:26,337", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:189:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 17:46:26,338", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:190:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 17:46:26,338", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:191:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 17:46:26,338", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:192:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 17:46:26,339", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:193:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 17:46:26,339", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:194:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 17:46:26,339", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:195:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 17:46:26,339", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:196:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 17:46:26,340", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:197:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 17:46:26,340", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:198:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 17:46:26,340", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:199:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 17:46:26,340", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:200:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 17:46:26,340", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:201:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 17:46:26,340", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:202:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 17:46:26,341", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:203:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 17:46:26,341", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:204:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 17:46:26,341", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:205:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 17:46:26,341", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:206:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 17:46:26,341", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:207:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 17:46:26,341", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:208:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 17:46:26,342", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:209:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 17:46:26,342", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:210:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 17:46:26,342", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:211:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 17:46:26,342", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:212:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 17:46:26,342", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:213:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 17:46:26,343", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:214:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 17:46:26,343", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:215:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 17:46:26,343", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:216:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 17:46:26,343", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:217:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 17:46:26,343", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:218:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 17:46:26,344", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:219:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 17:46:26,344", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:220:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 17:46:26,344", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:221:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 17:46:26,344", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 59 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 154}
{"timestamp": "2026-02-26 17:46:26,344", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 17:46:26,345", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 缓存预热完成 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 165}
{"timestamp": "2026-02-26 17:46:52,727", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 17:46:52,728", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.username = $1::VARCHAR", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:52,728", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00024s] ('qibao1',)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:52,730", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO conversations (user_id, title, is_pinned, model_name) VALUES ($1::INTEGER, $2::VARCHAR, $3::BOOLEAN, $4::VARCHAR) RETURNING conversations.id, conversations.created_at, conversations.updated_at", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:52,730", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00023s] (1, '新会话', False, None)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:52,733", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:52,734", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00086s] (222,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:52,735", "level": "INFO", "logger": "app.services.conversation_service", "message": "[CACHE DELETE] 已删除用户会话列表缓存: user_id=1, keys=1", "module": "conversation_service", "function": "_invalidate_user_cache", "line": 144}
{"timestamp": "2026-02-26 17:46:52,736", "level": "INFO", "logger": "app.core.tracing", "message": "[REQUEST] method=POST path=/api/v1/conversations status_code=201 request_id=7f8586ec-910a-439f-89ef-20fd377d54c8", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 17:46:52,736", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 17:46:52,766", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 17:46:52,766", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.username = $1::VARCHAR", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:52,767", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.03883s ago] ('qibao1',)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:52,769", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:222:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 17:46:52,769", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:52,770", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 26.46s ago] (222, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:52,770", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:222:1: {'id': 222, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-26T09:46:52.728826+00:00', 'updated_at': '2026-02-26T09:46:52.728826+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 17:46:52,771", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:222:1, TTL=3689s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 17:46:52,772", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: messages:conversation:222:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 17:46:52,774", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.metadata, messages.created_at \nFROM messages JOIN conversations ON messages.conversation_id = conversations.id \nWHERE messages.conversation_id = $1::INTEGER AND conversations.user_id = $2::INTEGER ORDER BY messages.created_at ASC \n LIMIT $3::INTEGER OFFSET $4::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:52,774", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00048s] (222, 1, 100, 0)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:52,776", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: messages:conversation:222:user:1:skip:0:limit:100, TTL=3789s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 17:46:52,777", "level": "INFO", "logger": "app.core.tracing", "message": "[REQUEST] method=GET path=/api/v1/chat/conversations/222/history status_code=200 request_id=9b5f514f-1e78-4e77-bed9-e531ddfae806", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 17:46:52,777", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 17:46:54,794", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 17:46:54,794", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.username = $1::VARCHAR", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:54,795", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 2.067s ago] ('qibao1',)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:54,796", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:222:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 17:46:54,797", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:54,797", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 28.49s ago] (222, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:54,799", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO messages (conversation_id, role, content, metadata) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::JSON) RETURNING messages.id, messages.created_at", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:54,799", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00037s] (222, 'user', '帮我写一个小红书文案', 'null')", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:54,802", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.metadata, messages.created_at \nFROM messages \nWHERE messages.id = $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:54,802", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00040s] (605,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:54,803", "level": "INFO", "logger": "app.services.chat_service", "message": "[DB] Saved message id=605, metadata_=None", "module": "chat_service", "function": "create_message", "line": 76}
{"timestamp": "2026-02-26 17:46:54,804", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.metadata, messages.created_at \nFROM messages \nWHERE messages.id = $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:54,804", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00039s] (605,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:54,805", "level": "INFO", "logger": "app.services.chat_service", "message": "[DB] Verify saved: id=605, metadata_=None", "module": "chat_service", "function": "create_message", "line": 83}
{"timestamp": "2026-02-26 17:46:54,806", "level": "INFO", "logger": "app.services.chat_service", "message": "[CACHE DELETE] 已删除消息缓存: conversation_id=222, user_id=1, keys=1", "module": "chat_service", "function": "_invalidate_messages_cache", "line": 546}
{"timestamp": "2026-02-26 17:46:54,806", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: messages:conversation:222:user:1:skip:0:limit:50", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 17:46:54,807", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.metadata, messages.created_at \nFROM messages JOIN conversations ON messages.conversation_id = conversations.id \nWHERE messages.conversation_id = $1::INTEGER AND conversations.user_id = $2::INTEGER ORDER BY messages.created_at ASC \n LIMIT $3::INTEGER OFFSET $4::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:54,807", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 2.033s ago] (222, 1, 50, 0)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:46:54,808", "level": "INFO", "logger": "app.services.chat_service", "message": "[DB] Fetched message id=605, metadata_=None", "module": "chat_service", "function": "fetch", "line": 43}
{"timestamp": "2026-02-26 17:46:54,808", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for messages:conversation:222:user:1:skip:0:limit:50: [{'id': 605, 'conversation_id': 222, 'role': 'user', 'content': '帮我写一个小红书文案', 'metadata': 'MetaData()', 'created_at': '2026-02-26T09:46:54.795475+00:00'}]", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 17:46:54,808", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: messages:conversation:222:user:1:skip:0:limit:50, TTL=3752s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 17:46:54,809", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] 开始生成流式响应: conversation_id=222, enable_thinking=False", "module": "chat_service", "function": "generate_response_stream", "line": 465}
{"timestamp": "2026-02-26 17:46:54,809", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] 开始处理消息: conversation_id=222", "module": "chat_service", "function": "process_message", "line": 103}
{"timestamp": "2026-02-26 17:46:54,809", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] 上下文准备完成，长度: 10", "module": "chat_service", "function": "process_message", "line": 117}
{"timestamp": "2026-02-26 17:46:54,810", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] 创建Agent: is_expert=False, enable_thinking=False", "module": "chat_service", "function": "process_message", "line": 120}
{"timestamp": "2026-02-26 17:46:55,072", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] 初始化技能后端: F:\\code\\dragonai-v2-local\\app\\skills", "module": "agent_factory", "function": "_get_skills_backend", "line": 120}
{"timestamp": "2026-02-26 17:46:55,159", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] 创建并缓存Agent (with Skills): expert_False_thinking_False", "module": "agent_factory", "function": "create_chat_agent", "line": 176}
{"timestamp": "2026-02-26 17:46:55,160", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] Agent创建成功", "module": "chat_service", "function": "process_message", "line": 125}
{"timestamp": "2026-02-26 17:46:55,160", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] Agent配置: {'configurable': {'thread_id': 'conversation_222'}, 'recursion_limit': 25}", "module": "chat_service", "function": "process_message", "line": 128}
{"timestamp": "2026-02-26 17:46:55,161", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] 开始流式执行Agent", "module": "chat_service", "function": "process_message", "line": 130}
{"timestamp": "2026-02-26 17:46:55,164", "level": "INFO", "logger": "app.core.tracing", "message": "[REQUEST] method=POST path=/api/v1/chat/send status_code=200 request_id=cb4285ff-a596-4229-843a-4c7ca11bd68c", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 17:46:55,176", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] updates data: {'SkillsMiddleware.before_agent': {'skills_metadata': [{'name': 'xhs-copywriter', 'description': '小红书平台文案创作专家，帮助用户创作吸引眼球的小红书笔记、种草文案、产品推荐等内容。适用于小红书营销、内容创作、品牌推广等场景。', 'path': '/xhs-copywriter/SKILL.md', 'metadata': {'author': 'dragonai', 'version': '1.0', 'platform': 'xiaohongshu'}, 'license': 'MIT', 'compatibility': '无特殊依赖', 'allowed_tools': ['web_search']}]}}", "module": "chat_service", "function": "process_message", "line": 144}
{"timestamp": "2026-02-26 17:46:55,177", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] source=SkillsMiddleware.before_agent, update keys=dict_keys(['skills_metadata'])", "module": "chat_service", "function": "process_message", "line": 146}
{"timestamp": "2026-02-26 17:46:56,124", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 1: 2 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 17:46:56,179", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 2: 3 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 17:46:56,245", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 3: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 17:46:56,396", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 4: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 17:46:56,489", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 5: 10 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 17:46:56,598", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 6: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 17:46:56,706", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 7: 10 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 17:46:56,816", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 8: 9 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 17:46:56,863", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 9: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 17:46:57,012", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 10: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 17:46:57,081", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 11: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 17:46:57,171", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 12: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 17:46:57,296", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 13: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 17:46:57,411", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 14: 10 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 17:46:57,563", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 15: 11 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 17:46:57,675", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 16: 11 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 17:46:57,764", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 17: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 17:46:57,893", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 18: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 17:46:57,961", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 19: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 17:46:58,054", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 20: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 17:46:58,159", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 21: 9 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 17:46:58,270", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 22: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 17:46:58,359", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 23: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 17:46:58,469", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 24: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 17:46:58,556", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 25: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 17:46:58,665", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 26: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 17:46:58,775", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 27: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 17:46:58,912", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 28: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 17:46:59,017", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 29: 10 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 17:46:59,060", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 30: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 17:46:59,212", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 31: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 17:46:59,281", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 32: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 17:46:59,391", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 33: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 17:46:59,519", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 34: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 17:46:59,589", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 35: 9 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 17:46:59,698", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 36: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 17:46:59,830", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 37: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 17:46:59,920", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 38: 12 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 17:47:00,024", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 39: 9 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 17:47:00,095", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 40: 10 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 17:47:00,255", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 41: 12 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 17:47:00,294", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 42: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 17:47:00,445", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 43: 9 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 17:47:00,513", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 44: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 17:47:00,665", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 45: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 17:47:00,777", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 46: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 17:47:00,932", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 47: 9 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 17:47:00,953", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 48: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 17:47:00,968", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] updates data: {'model': {'messages': [AIMessage(content='好的！我来帮你写一个小红书文案。\\n\\n不过，为了写出更精准、更吸引人的内容，我需要了解一些细节：\\n\\n1. **主题/产品**：你想推广什么？是美妆、穿搭、美食、旅行、学习、家居，还是其他领域？具体是什么产品或服务？\\n2. **目标受众**：你的笔记主要面向谁？（例如：学生党、上班族、宝妈、健身爱好者等）\\n3. **核心亮点/卖点**：这个产品/经历最打动人的1-3个点是什么？（比如：平价好用、效果惊艳、操作简单、颜值超高、有独特故事等）\\n4. **风格偏好**：你希望文案是活泼种草型、干货分享型、真实测评型、还是故事叙述型？是否需要加入emoji或特定话题标签？\\n\\n如果你已经有初步想法，也可以直接告诉我，我会基于你的需求进行创作！\\n\\n另外，小红书文案非常注重“真实感”和“利他性”，所以越具体的细节，越能写出爆款哦～', additional_kwargs={}, response_metadata={'finish_reason': 'stop', 'request_id': 'd403930d-ac28-4656-9426-d24367903577', 'token_usage': {'input_tokens': 3997, 'output_tokens': 220, 'total_tokens': 4217, 'prompt_tokens_details': {'cached_tokens': 0}}}, id='lc_run--019c9958-1f6c-7310-80e1-75396cbb1c1b', tool_calls=[], invalid_tool_calls=[])]}}", "module": "chat_service", "function": "process_message", "line": 144}
{"timestamp": "2026-02-26 17:47:00,969", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] source=model, update keys=dict_keys(['messages'])", "module": "chat_service", "function": "process_message", "line": 146}
{"timestamp": "2026-02-26 17:47:00,969", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] formatted_list=[{'type': 'content', 'data': {'content': '好的！我来帮你写一个小红书文案。\\n\\n不过，为了写出更精准、更吸引人的内容，我需要了解一些细节：\\n\\n1. **主题/产品**：你想推广什么？是美妆、穿搭、美食、旅行、学习、家居，还是其他领域？具体是什么产品或服务？\\n2. **目标受众**：你的笔记主要面向谁？（例如：学生党、上班族、宝妈、健身爱好者等）\\n3. **核心亮点/卖点**：这个产品/经历最打动人的1-3个点是什么？（比如：平价好用、效果惊艳、操作简单、颜值超高、有独特故事等）\\n4. **风格偏好**：你希望文案是活泼种草型、干货分享型、真实测评型、还是故事叙述型？是否需要加入emoji或特定话题标签？\\n\\n如果你已经有初步想法，也可以直接告诉我，我会基于你的需求进行创作！\\n\\n另外，小红书文案非常注重“真实感”和“利他性”，所以越具体的细节，越能写出爆款哦～'}}]", "module": "chat_service", "function": "process_message", "line": 149}
{"timestamp": "2026-02-26 17:47:00,971", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] Agent流式执行完成", "module": "chat_service", "function": "process_message", "line": 159}
{"timestamp": "2026-02-26 17:47:00,971", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Stream complete, total chunks: 48, total chars: 361", "module": "chat", "function": "generate", "line": 127}
{"timestamp": "2026-02-26 17:47:00,972", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Full response content:\n好的！我来帮你写一个小红书文案。\n\n不过，为了写出更精准、更吸引人的内容，我需要了解一些细节：\n\n1. **主题/产品**：你想推广什么？是美妆、穿搭、美食、旅行、学习、家居，还是其他领域？具体是什么产品或服务？\n2. **目标受众**：你的笔记主要面向谁？（例如：学生党、上班族、宝妈、健身爱好者等）\n3. **核心亮点/卖点**：这个产品/经历最打动人的1-3个点是什么？（比如：平价好用、效果惊艳、操作简单、颜值超高、有独特故事等）\n4. **风格偏好**：你希望文案是活泼种草型、干货分享型、真实测评型、还是故事叙述型？是否需要加入emoji或特定话题标签？\n\n如果你已经有初步想法，也可以直接告诉我，我会基于你的需求进行创作！\n\n另外，小红书文案非常注重“真实感”和“利他性”，所以越具体的细节，越能写出爆款哦～", "module": "chat", "function": "generate", "line": 128}
{"timestamp": "2026-02-26 17:47:00,972", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Thinking content length: 0", "module": "chat", "function": "generate", "line": 129}
{"timestamp": "2026-02-26 17:47:00,972", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:47:00,973", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 34.66s ago] (222, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:47:00,974", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO messages (conversation_id, role, content, metadata) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::JSON) RETURNING messages.id, messages.created_at", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:47:00,974", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.176s ago] (222, 'assistant', '好的！我来帮你写一个小红书文案。\\n\\n不过，为了写出更精准、更吸引人的内容，我需要了解一些细节：\\n\\n1. **主题/产品**：你想推广什么？是美妆、穿搭、美食、旅行、学习、家居，还是其他领域？具体是什么产品或服务？\\n2. **目标受众**：你的笔记主要面向谁？（例如：学生党、上班族、宝妈、 ... (74 characters truncated) ... 等）\\n4. **风格偏好**：你希望文案是活泼种草型、干货分享型、真实测评型、还是故事叙述型？是否需要加入emoji或特定话题标签？\\n\\n如果你已经有初步想法，也可以直接告诉我，我会基于你的需求进行创作！\\n\\n另外，小红书文案非常注重“真实感”和“利他性”，所以越具体的细节，越能写出爆款哦～', '{\"model\": \"fast\"}')", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:47:00,976", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.metadata, messages.created_at \nFROM messages \nWHERE messages.id = $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:47:00,976", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.174s ago] (606,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:47:00,976", "level": "INFO", "logger": "app.services.chat_service", "message": "[DB] Saved message id=606, metadata_={'model': 'fast'}", "module": "chat_service", "function": "create_message", "line": 76}
{"timestamp": "2026-02-26 17:47:00,977", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.metadata, messages.created_at \nFROM messages \nWHERE messages.id = $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:47:00,977", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.173s ago] (606,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 17:47:00,977", "level": "INFO", "logger": "app.services.chat_service", "message": "[DB] Verify saved: id=606, metadata_={'model': 'fast'}", "module": "chat_service", "function": "create_message", "line": 83}
{"timestamp": "2026-02-26 17:47:00,978", "level": "INFO", "logger": "app.services.chat_service", "message": "[CACHE DELETE] 已删除消息缓存: conversation_id=222, user_id=1, keys=1", "module": "chat_service", "function": "_invalidate_messages_cache", "line": 546}
{"timestamp": "2026-02-26 17:47:00,978", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:04:47,933", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 连接已关闭", "module": "agent_factory", "function": "close_checkpointer", "line": 84}
{"timestamp": "2026-02-26 18:04:47,949", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 18:04:47,950", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 118}
{"timestamp": "2026-02-26 18:04:50,571", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 104}
{"timestamp": "2026-02-26 18:04:50,624", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 初始化成功", "module": "agent_factory", "function": "init_checkpointer", "line": 71}
{"timestamp": "2026-02-26 18:04:50,624", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 107}
{"timestamp": "2026-02-26 18:04:50,625", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 109}
{"timestamp": "2026-02-26 18:04:50,625", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 开始缓存预热 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 159}
{"timestamp": "2026-02-26 18:04:50,625", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热会话列表缓存，限制 100 条", "module": "cache_warmup", "function": "warmup_conversations", "line": 26}
{"timestamp": "2026-02-26 18:04:50,685", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:04:50,685", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:04:50,686", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:04:50,686", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:04:50,687", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:04:50,687", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:04:50,687", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:04:50,692", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \n LIMIT $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:04:50,692", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00032s] (50,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:04:50,696", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversations:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 18:04:50,697", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.user_id = $1::INTEGER ORDER BY conversations.is_pinned DESC, conversations.updated_at DESC \n LIMIT $2::INTEGER OFFSET $3::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:04:50,698", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00036s] (1, 100, 0)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:04:50,700", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversations:user:1:skip:0:limit:100: [{'id': 222, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-26T09:46:52.728826+00:00', 'updated_at': '2026-02-26T09:46:52.728826+00:00'}, {'id': 221, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-26T09:42:18.712045+00:00', 'updated_at': '2026-02-26T09:42:18.712045+00:00'}, {'id': 220, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T20:05:52.426575+00:00', 'updated_at': '2026-02-25T20:05:52.426575+00:00'}, {'id': 219, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T18:35:35.586803+00:00', 'updated_at': '2026-02-25T18:35:35.586803+00:00'}, {'id': 218, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T18:35:17.658631+00:00', 'updated_at': '2026-02-25T18:35:17.658631+00:00'}, {'id': 217, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T18:27:50.787750+00:00', 'updated_at': '2026-02-25T18:27:50.787750+00:00'}, {'id': 216, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T18:18:58.723048+00:00', 'updated_at': '2026-02-25T18:18:58.723048+00:00'}, {'id': 215, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T18:05:04.122315+00:00', 'updated_at': '2026-02-25T18:05:04.122315+00:00'}, {'id': 214, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:46:24.232806+00:00', 'updated_at': '2026-02-25T17:46:24.232806+00:00'}, {'id': 213, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:43:09.146742+00:00', 'updated_at': '2026-02-25T17:43:09.146742+00:00'}, {'id': 212, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:41:10.457397+00:00', 'updated_at': '2026-02-25T17:41:10.457397+00:00'}, {'id': 211, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:36:36.866901+00:00', 'updated_at': '2026-02-25T17:36:36.866901+00:00'}, {'id': 210, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:35:41.686230+00:00', 'updated_at': '2026-02-25T17:35:41.686230+00:00'}, {'id': 209, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:28:46.107951+00:00', 'updated_at': '2026-02-25T17:28:46.107951+00:00'}, {'id': 208, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:24:46.995898+00:00', 'updated_at': '2026-02-25T17:24:46.995898+00:00'}, {'id': 207, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:18:22.171051+00:00', 'updated_at': '2026-02-25T17:18:22.171051+00:00'}, {'id': 206, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:15:32.934734+00:00', 'updated_at': '2026-02-25T17:15:32.934734+00:00'}, {'id': 205, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:12:01.339171+00:00', 'updated_at': '2026-02-25T17:12:01.339171+00:00'}, {'id': 204, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:05:57.701858+00:00', 'updated_at': '2026-02-25T17:05:57.701858+00:00'}, {'id': 203, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:00:11.461904+00:00', 'updated_at': '2026-02-25T17:00:11.461904+00:00'}, {'id': 202, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T16:55:04.663265+00:00', 'updated_at': '2026-02-25T16:55:04.663265+00:00'}, {'id': 201, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T16:51:00.791887+00:00', 'updated_at': '2026-02-25T16:51:00.791887+00:00'}, {'id': 200, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T16:50:44.425883+00:00', 'updated_at': '2026-02-25T16:50:44.425883+00:00'}, {'id': 199, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T16:45:32.330297+00:00', 'updated_at': '2026-02-25T16:45:32.330297+00:00'}, {'id': 198, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T16:45:18.281430+00:00', 'updated_at': '2026-02-25T16:45:18.281430+00:00'}, {'id': 197, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T16:20:51.014190+00:00', 'updated_at': '2026-02-25T16:20:51.014190+00:00'}, {'id': 196, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T15:44:33.502770+00:00', 'updated_at': '2026-02-25T15:44:33.502770+00:00'}, {'id': 195, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T15:38:11.237687+00:00', 'updated_at': '2026-02-25T15:38:11.237687+00:00'}, {'id': 194, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T15:37:53.427931+00:00', 'updated_at': '2026-02-25T15:37:53.427931+00:00'}, {'id': 193, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T15:36:19.760334+00:00', 'updated_at': '2026-02-25T15:36:19.760334+00:00'}, {'id': 192, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T15:35:18.417589+00:00', 'updated_at': '2026-02-25T15:35:18.417589+00:00'}, {'id': 191, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T15:03:14.211782+00:00', 'updated_at': '2026-02-25T15:03:14.211782+00:00'}, {'id': 190, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T14:36:42.154696+00:00', 'updated_at': '2026-02-25T14:36:42.154696+00:00'}, {'id': 189, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T14:31:01.510866+00:00', 'updated_at': '2026-02-25T14:31:01.510866+00:00'}, {'id': 188, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T14:29:53.274194+00:00', 'updated_at': '2026-02-25T14:29:53.274194+00:00'}, {'id': 187, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T13:12:52.546721+00:00', 'updated_at': '2026-02-25T13:12:52.546721+00:00'}, {'id': 186, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T13:10:59.604351+00:00', 'updated_at': '2026-02-25T13:10:59.604351+00:00'}, {'id': 185, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T13:10:27.514931+00:00', 'updated_at': '2026-02-25T13:10:27.514931+00:00'}, {'id': 184, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T13:08:41.882447+00:00', 'updated_at': '2026-02-25T13:08:41.882447+00:00'}, {'id': 183, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T12:27:32.234206+00:00', 'updated_at': '2026-02-25T12:27:32.234206+00:00'}, {'id': 182, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T12:17:23.497578+00:00', 'updated_at': '2026-02-25T12:17:23.497578+00:00'}, {'id': 181, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T12:15:04.054903+00:00', 'updated_at': '2026-02-25T12:15:04.054903+00:00'}, {'id': 180, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T12:11:41.757639+00:00', 'updated_at': '2026-02-25T12:11:41.757639+00:00'}, {'id': 179, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T12:09:15.894955+00:00', 'updated_at': '2026-02-25T12:09:15.894955+00:00'}, {'id': 178, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T12:01:08.835467+00:00', 'updated_at': '2026-02-25T12:01:08.835467+00:00'}, {'id': 177, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T11:56:14.684224+00:00', 'updated_at': '2026-02-25T11:56:14.684224+00:00'}, {'id': 176, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T10:52:03.862026+00:00', 'updated_at': '2026-02-25T10:52:03.862026+00:00'}, {'id': 175, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T10:50:02.518522+00:00', 'updated_at': '2026-02-25T10:50:02.518522+00:00'}, {'id': 174, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T10:42:55.821262+00:00', 'updated_at': '2026-02-25T10:42:55.821262+00:00'}, {'id': 173, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T10:38:49.101647+00:00', 'updated_at': '2026-02-25T10:38:49.101647+00:00'}, {'id': 172, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T10:38:09.353141+00:00', 'updated_at': '2026-02-25T10:38:09.353141+00:00'}, {'id': 171, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T09:21:48.948162+00:00', 'updated_at': '2026-02-25T09:21:48.948162+00:00'}, {'id': 170, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T09:17:55.698363+00:00', 'updated_at': '2026-02-25T09:17:55.698363+00:00'}, {'id': 169, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T09:17:18.775757+00:00', 'updated_at': '2026-02-25T09:17:18.775757+00:00'}, {'id': 168, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T09:16:23.024303+00:00', 'updated_at': '2026-02-25T09:16:23.024303+00:00'}, {'id': 167, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T09:12:41.857175+00:00', 'updated_at': '2026-02-25T09:12:41.857175+00:00'}, {'id': 166, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T08:36:41.383650+00:00', 'updated_at': '2026-02-25T08:36:41.383650+00:00'}, {'id': 165, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T08:34:32.543620+00:00', 'updated_at': '2026-02-25T08:34:32.543620+00:00'}, {'id': 164, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T08:32:11.855646+00:00', 'updated_at': '2026-02-25T08:32:11.855646+00:00'}, {'id': 163, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T08:27:25.972885+00:00', 'updated_at': '2026-02-25T08:27:25.972885+00:00'}, {'id': 162, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T16:10:55.313974+00:00', 'updated_at': '2026-02-24T16:10:55.313974+00:00'}, {'id': 161, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T16:09:08.553629+00:00', 'updated_at': '2026-02-24T16:09:08.553629+00:00'}, {'id': 160, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T16:06:15.394421+00:00', 'updated_at': '2026-02-24T16:06:15.394421+00:00'}, {'id': 159, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T16:05:31.589282+00:00', 'updated_at': '2026-02-24T16:05:31.589282+00:00'}, {'id': 158, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T15:55:30.195931+00:00', 'updated_at': '2026-02-24T15:55:30.195931+00:00'}, {'id': 157, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T15:42:11.582736+00:00', 'updated_at': '2026-02-24T15:42:11.582736+00:00'}, {'id': 156, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T13:54:53.908013+00:00', 'updated_at': '2026-02-24T13:54:53.908013+00:00'}, {'id': 155, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T13:21:34.170984+00:00', 'updated_at': '2026-02-24T13:21:34.170984+00:00'}, {'id': 153, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T13:18:32.014035+00:00', 'updated_at': '2026-02-24T13:18:32.014035+00:00'}, {'id': 152, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T13:15:16.961323+00:00', 'updated_at': '2026-02-24T13:15:16.961323+00:00'}, {'id': 151, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T12:43:20.889833+00:00', 'updated_at': '2026-02-24T12:43:20.889833+00:00'}, {'id': 150, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T12:42:56.016952+00:00', 'updated_at': '2026-02-24T12:42:56.016952+00:00'}, {'id': 149, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:55:56.042369+00:00', 'updated_at': '2026-02-24T10:55:56.042369+00:00'}, {'id': 148, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:55:41.488047+00:00', 'updated_at': '2026-02-24T10:55:41.488047+00:00'}, {'id': 147, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:49:14.817320+00:00', 'updated_at': '2026-02-24T10:49:14.817320+00:00'}, {'id': 146, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:48:57.350358+00:00', 'updated_at': '2026-02-24T10:48:57.350358+00:00'}, {'id': 145, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:46:32.242848+00:00', 'updated_at': '2026-02-24T10:46:32.242848+00:00'}, {'id': 144, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:44:06.957698+00:00', 'updated_at': '2026-02-24T10:44:06.957698+00:00'}, {'id': 143, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:43:36.650302+00:00', 'updated_at': '2026-02-24T10:43:36.650302+00:00'}, {'id': 142, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:41:27.108791+00:00', 'updated_at': '2026-02-24T10:41:27.108791+00:00'}, {'id': 141, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:41:00.283484+00:00', 'updated_at': '2026-02-24T10:41:00.283484+00:00'}, {'id': 140, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:39:47.897467+00:00', 'updated_at': '2026-02-24T10:39:47.897467+00:00'}, {'id': 139, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:34:05.150318+00:00', 'updated_at': '2026-02-24T10:34:05.150318+00:00'}, {'id': 138, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:29:46.478868+00:00', 'updated_at': '2026-02-24T10:29:46.478868+00:00'}, {'id': 137, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:28:45.655878+00:00', 'updated_at': '2026-02-24T10:28:45.655878+00:00'}, {'id': 136, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:05:25.775341+00:00', 'updated_at': '2026-02-24T10:05:25.775341+00:00'}, {'id': 135, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T09:56:25.866934+00:00', 'updated_at': '2026-02-24T09:56:25.866934+00:00'}, {'id': 134, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T09:53:06.440754+00:00', 'updated_at': '2026-02-24T09:53:06.440754+00:00'}, {'id': 133, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T09:51:21.444274+00:00', 'updated_at': '2026-02-24T09:51:21.444274+00:00'}, {'id': 132, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T09:39:42.439041+00:00', 'updated_at': '2026-02-24T09:39:42.439041+00:00'}, {'id': 131, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T09:38:48.866580+00:00', 'updated_at': '2026-02-24T09:38:48.866580+00:00'}, {'id': 130, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T09:28:16.002211+00:00', 'updated_at': '2026-02-24T09:28:16.002211+00:00'}, {'id': 129, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T09:27:49.270616+00:00', 'updated_at': '2026-02-24T09:27:49.270616+00:00'}, {'id': 128, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T09:26:50.501911+00:00', 'updated_at': '2026-02-24T09:26:50.501911+00:00'}, {'id': 127, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T09:22:10.441084+00:00', 'updated_at': '2026-02-24T09:22:10.441084+00:00'}, {'id': 126, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T09:21:30.564128+00:00', 'updated_at': '2026-02-24T09:21:30.564128+00:00'}, {'id': 125, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T09:16:52.709196+00:00', 'updated_at': '2026-02-24T09:16:52.709196+00:00'}, {'id': 124, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T09:15:35.666197+00:00', 'updated_at': '2026-02-24T09:15:35.666197+00:00'}, {'id': 120, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T07:41:15.709524+00:00', 'updated_at': '2026-02-24T07:41:15.709524+00:00'}, {'id': 97, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T04:11:56.505403+00:00', 'updated_at': '2026-02-24T04:11:56.505403+00:00'}]", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 18:04:50,702", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversations:user:1:skip:0:limit:100, TTL=3606s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 18:04:50,702", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 用户 1 的会话列表已预热", "module": "cache_warmup", "function": "warmup_conversations", "line": 56}
{"timestamp": "2026-02-26 18:04:50,702", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 60}
{"timestamp": "2026-02-26 18:04:50,702", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:04:50,703", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热置顶会话详情缓存", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 65}
{"timestamp": "2026-02-26 18:04:50,703", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:04:50,704", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.is_pinned = true", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:04:50,704", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00040s] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:04:50,705", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 102}
{"timestamp": "2026-02-26 18:04:50,705", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:04:50,706", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热最近 24 小时活跃的会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 114}
{"timestamp": "2026-02-26 18:04:50,706", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:04:50,707", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.updated_at >= $1::TIMESTAMP WITH TIME ZONE \n LIMIT $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:04:50,707", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00032s] (datetime.datetime(2026, 2, 25, 10, 4, 50, 706288), 200)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:04:50,708", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:163:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:04:50,708", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:164:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:04:50,709", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:165:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:04:50,709", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:166:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:04:50,709", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:167:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:04:50,709", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:168:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:04:50,710", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:169:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:04:50,710", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:170:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:04:50,710", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:171:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:04:50,710", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:172:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:04:50,711", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:173:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:04:50,711", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:174:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:04:50,711", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:175:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:04:50,711", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:176:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:04:50,712", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:177:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:04:50,712", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:178:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:04:50,712", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:179:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:04:50,712", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:180:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:04:50,713", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:181:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:04:50,713", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:182:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:04:50,713", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:183:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:04:50,713", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:184:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:04:50,714", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:185:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:04:50,714", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:186:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:04:50,714", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:187:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:04:50,714", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:188:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:04:50,715", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:189:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:04:50,715", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:190:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:04:50,715", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:191:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:04:50,715", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:192:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:04:50,715", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:193:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:04:50,715", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:194:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:04:50,716", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:195:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:04:50,716", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:196:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:04:50,716", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:197:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:04:50,716", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:198:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:04:50,716", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:199:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:04:50,716", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:200:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:04:50,717", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:201:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:04:50,717", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:202:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:04:50,717", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:203:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:04:50,717", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:204:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:04:50,717", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:205:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:04:50,718", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:206:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:04:50,718", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:207:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:04:50,718", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:208:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:04:50,718", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:209:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:04:50,719", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:210:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:04:50,719", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:211:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:04:50,719", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:212:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:04:50,719", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:213:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:04:50,720", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:214:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:04:50,720", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:215:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:04:50,720", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:216:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:04:50,720", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:217:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:04:50,720", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:218:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:04:50,720", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:219:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:04:50,721", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:220:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:04:50,721", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:221:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:04:50,721", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:222:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:04:50,721", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 60 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 154}
{"timestamp": "2026-02-26 18:04:50,721", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:04:50,722", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 缓存预热完成 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 165}
{"timestamp": "2026-02-26 18:06:02,053", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:06:02,054", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.username = $1::VARCHAR", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:06:02,054", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00040s] ('qibao1',)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:06:02,057", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO conversations (user_id, title, is_pinned, model_name) VALUES ($1::INTEGER, $2::VARCHAR, $3::BOOLEAN, $4::VARCHAR) RETURNING conversations.id, conversations.created_at, conversations.updated_at", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:06:02,057", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] (1, '新会话', False, None)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:06:02,060", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:06:02,061", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00036s] (223,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:06:02,062", "level": "INFO", "logger": "app.services.conversation_service", "message": "[CACHE DELETE] 已删除用户会话列表缓存: user_id=1, keys=1", "module": "conversation_service", "function": "_invalidate_user_cache", "line": 144}
{"timestamp": "2026-02-26 18:06:02,063", "level": "INFO", "logger": "app.core.tracing", "message": "[REQUEST] method=POST path=/api/v1/conversations status_code=201 request_id=a0af1759-9a92-464c-a899-76464aeae88d", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 18:06:02,064", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:06:02,085", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:06:02,086", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.username = $1::VARCHAR", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:06:02,086", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.03234s ago] ('qibao1',)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:06:02,087", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:223:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 18:06:02,088", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:06:02,089", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00030s] (223, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:06:02,090", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:223:1: {'id': 223, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-26T10:06:02.054684+00:00', 'updated_at': '2026-02-26T10:06:02.054684+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 18:06:02,090", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:223:1, TTL=3788s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 18:06:02,091", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: messages:conversation:223:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 18:06:02,093", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.metadata, messages.created_at \nFROM messages JOIN conversations ON messages.conversation_id = conversations.id \nWHERE messages.conversation_id = $1::INTEGER AND conversations.user_id = $2::INTEGER ORDER BY messages.created_at ASC \n LIMIT $3::INTEGER OFFSET $4::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:06:02,094", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00068s] (223, 1, 100, 0)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:06:02,096", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: messages:conversation:223:user:1:skip:0:limit:100, TTL=3608s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 18:06:02,097", "level": "INFO", "logger": "app.core.tracing", "message": "[REQUEST] method=GET path=/api/v1/chat/conversations/223/history status_code=200 request_id=614703fc-3c5b-4267-829a-65c64a1f39c3", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 18:06:02,098", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:06:03,901", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:06:03,901", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.username = $1::VARCHAR", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:06:03,902", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 1.848s ago] ('qibao1',)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:06:03,904", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:223:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:06:03,904", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:06:03,905", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 1.816s ago] (223, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:06:03,906", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO messages (conversation_id, role, content, metadata) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::JSON) RETURNING messages.id, messages.created_at", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:06:03,907", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00034s] (223, 'user', '帮我写一个小红书文案', 'null')", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:06:03,909", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.metadata, messages.created_at \nFROM messages \nWHERE messages.id = $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:06:03,910", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00060s] (607,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:06:03,911", "level": "INFO", "logger": "app.services.chat_service", "message": "[DB] Saved message id=607, metadata_=None", "module": "chat_service", "function": "create_message", "line": 76}
{"timestamp": "2026-02-26 18:06:03,912", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.metadata, messages.created_at \nFROM messages \nWHERE messages.id = $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:06:03,912", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00034s] (607,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:06:03,913", "level": "INFO", "logger": "app.services.chat_service", "message": "[DB] Verify saved: id=607, metadata_=None", "module": "chat_service", "function": "create_message", "line": 83}
{"timestamp": "2026-02-26 18:06:03,914", "level": "INFO", "logger": "app.services.chat_service", "message": "[CACHE DELETE] 已删除消息缓存: conversation_id=223, user_id=1, keys=1", "module": "chat_service", "function": "_invalidate_messages_cache", "line": 546}
{"timestamp": "2026-02-26 18:06:03,914", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: messages:conversation:223:user:1:skip:0:limit:50", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 18:06:03,915", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.metadata, messages.created_at \nFROM messages JOIN conversations ON messages.conversation_id = conversations.id \nWHERE messages.conversation_id = $1::INTEGER AND conversations.user_id = $2::INTEGER ORDER BY messages.created_at ASC \n LIMIT $3::INTEGER OFFSET $4::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:06:03,916", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 1.822s ago] (223, 1, 50, 0)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:06:03,916", "level": "INFO", "logger": "app.services.chat_service", "message": "[DB] Fetched message id=607, metadata_=None", "module": "chat_service", "function": "fetch", "line": 43}
{"timestamp": "2026-02-26 18:06:03,917", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for messages:conversation:223:user:1:skip:0:limit:50: [{'id': 607, 'conversation_id': 223, 'role': 'user', 'content': '帮我写一个小红书文案', 'metadata': 'MetaData()', 'created_at': '2026-02-26T10:06:03.902592+00:00'}]", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 18:06:03,917", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: messages:conversation:223:user:1:skip:0:limit:50, TTL=3734s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 18:06:03,918", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] 开始生成流式响应: conversation_id=223, enable_thinking=False", "module": "chat_service", "function": "generate_response_stream", "line": 465}
{"timestamp": "2026-02-26 18:06:03,918", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] 开始处理消息: conversation_id=223", "module": "chat_service", "function": "process_message", "line": 103}
{"timestamp": "2026-02-26 18:06:03,918", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] 上下文准备完成，长度: 10", "module": "chat_service", "function": "process_message", "line": 117}
{"timestamp": "2026-02-26 18:06:03,918", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] 创建Agent: is_expert=False, enable_thinking=False", "module": "chat_service", "function": "process_message", "line": 120}
{"timestamp": "2026-02-26 18:06:04,211", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] 初始化技能后端: F:\\code\\dragonai-v2-local\\app\\skills", "module": "agent_factory", "function": "_get_skills_backend", "line": 125}
{"timestamp": "2026-02-26 18:06:04,307", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] 创建并缓存Agent (with Skills): expert_False_thinking_False", "module": "agent_factory", "function": "create_chat_agent", "line": 181}
{"timestamp": "2026-02-26 18:06:04,307", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] Agent创建成功", "module": "chat_service", "function": "process_message", "line": 125}
{"timestamp": "2026-02-26 18:06:04,308", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] Agent配置: {'configurable': {'thread_id': 'conversation_223'}, 'recursion_limit': 25}", "module": "chat_service", "function": "process_message", "line": 128}
{"timestamp": "2026-02-26 18:06:04,308", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] 开始流式执行Agent", "module": "chat_service", "function": "process_message", "line": 130}
{"timestamp": "2026-02-26 18:06:04,310", "level": "INFO", "logger": "app.core.tracing", "message": "[REQUEST] method=POST path=/api/v1/chat/send status_code=200 request_id=f70f9c13-c270-40c8-bddd-9e099c6873a7", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 18:06:04,317", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] updates data: {'SkillsMiddleware.before_agent': {'skills_metadata': [{'name': 'xhs-copywriter', 'description': '小红书平台文案创作专家，帮助用户创作吸引眼球的小红书笔记、种草文案、产品推荐等内容。适用于小红书营销、内容创作、品牌推广等场景。', 'path': '/xhs-copywriter/SKILL.md', 'metadata': {'author': 'dragonai', 'version': '1.0', 'platform': 'xiaohongshu'}, 'license': 'MIT', 'compatibility': '无特殊依赖', 'allowed_tools': ['web_search']}]}}", "module": "chat_service", "function": "process_message", "line": 144}
{"timestamp": "2026-02-26 18:06:04,318", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] source=SkillsMiddleware.before_agent, update keys=dict_keys(['skills_metadata'])", "module": "chat_service", "function": "process_message", "line": 146}
{"timestamp": "2026-02-26 18:06:05,241", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 1: 1 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:05,282", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 2: 3 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:05,349", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 3: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:05,436", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 4: 3 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:05,546", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 5: 9 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:05,612", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 6: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:05,754", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 7: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:05,832", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 8: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:05,876", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 9: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:06,027", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 10: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:06,140", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 11: 10 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:06,228", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 12: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:06,420", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 13: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:06,441", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 14: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:06,513", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 15: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:06,598", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 16: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:06,690", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 17: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:06,801", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 18: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:06,906", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 19: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:06,998", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 20: 12 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:07,086", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 21: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:07,197", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 22: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:07,307", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 23: 10 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:07,372", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 24: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:07,480", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 25: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:07,569", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 26: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:07,681", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 27: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:07,785", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 28: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:07,900", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 29: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:08,008", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 30: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:08,075", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 31: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:08,163", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 32: 3 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:08,314", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 33: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:08,406", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 34: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:08,494", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 35: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:08,602", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 36: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:08,686", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 37: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:08,786", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 38: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:08,867", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 39: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:08,955", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 40: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:09,042", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 41: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:09,132", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 42: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:09,220", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 43: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:09,327", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 44: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:09,418", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 45: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:09,527", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 46: 9 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:09,572", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 47: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:09,682", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 48: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:09,747", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 49: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:09,759", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] updates data: {'model': {'messages': [AIMessage(content='你希望小红书文案的主题或方向是什么？例如：\\n\\n- 推广某款产品（如护肤品、零食、数码好物）？\\n- 分享某种生活方式（如早八人自律打卡、租房改造、学生党平价穿搭）？\\n- 记录一次旅行/探店/美食体验？\\n- 某个实用技巧类内容（如Excel快捷键、AI工具推荐、雅思备考经验）？\\n\\n另外，是否已有具体产品名、品牌、使用场景、目标人群（如“20岁女生”“职场新人”“宝妈”），或者希望风格是：干货型 / 治愈系 / 幽默吐槽 / 高级简约 / 种草安利？\\n\\n请提供这些信息，我将为你定制一篇符合小红书调性（带emoji、分段清晰、有网感、强互动引导）的优质文案 ✨\\n\\n如果不确定，我也可以先为你生成一个通用爆款模板供参考。', additional_kwargs={}, response_metadata={'finish_reason': 'stop', 'request_id': '18a6f9d0-a857-45e9-8562-f06ae611ba5a', 'token_usage': {'input_tokens': 4068, 'output_tokens': 205, 'total_tokens': 4273, 'prompt_tokens_details': {'cached_tokens': 0}}}, id='lc_run--019c9969-a845-71d2-a7bf-e901ec55082f', tool_calls=[], invalid_tool_calls=[])]}}", "module": "chat_service", "function": "process_message", "line": 144}
{"timestamp": "2026-02-26 18:06:09,760", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] source=model, update keys=dict_keys(['messages'])", "module": "chat_service", "function": "process_message", "line": 146}
{"timestamp": "2026-02-26 18:06:09,760", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] formatted_list=[{'type': 'content', 'data': {'content': '你希望小红书文案的主题或方向是什么？例如：\\n\\n- 推广某款产品（如护肤品、零食、数码好物）？\\n- 分享某种生活方式（如早八人自律打卡、租房改造、学生党平价穿搭）？\\n- 记录一次旅行/探店/美食体验？\\n- 某个实用技巧类内容（如Excel快捷键、AI工具推荐、雅思备考经验）？\\n\\n另外，是否已有具体产品名、品牌、使用场景、目标人群（如“20岁女生”“职场新人”“宝妈”），或者希望风格是：干货型 / 治愈系 / 幽默吐槽 / 高级简约 / 种草安利？\\n\\n请提供这些信息，我将为你定制一篇符合小红书调性（带emoji、分段清晰、有网感、强互动引导）的优质文案 ✨\\n\\n如果不确定，我也可以先为你生成一个通用爆款模板供参考。'}}]", "module": "chat_service", "function": "process_message", "line": 149}
{"timestamp": "2026-02-26 18:06:09,764", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] Agent流式执行完成", "module": "chat_service", "function": "process_message", "line": 159}
{"timestamp": "2026-02-26 18:06:09,765", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Stream complete, total chunks: 49, total chars: 308", "module": "chat", "function": "generate", "line": 127}
{"timestamp": "2026-02-26 18:06:09,765", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Full response content:\n你希望小红书文案的主题或方向是什么？例如：\n\n- 推广某款产品（如护肤品、零食、数码好物）？\n- 分享某种生活方式（如早八人自律打卡、租房改造、学生党平价穿搭）？\n- 记录一次旅行/探店/美食体验？\n- 某个实用技巧类内容（如Excel快捷键、AI工具推荐、雅思备考经验）？\n\n另外，是否已有具体产品名、品牌、使用场景、目标人群（如“20岁女生”“职场新人”“宝妈”），或者希望风格是：干货型 / 治愈系 / 幽默吐槽 / 高级简约 / 种草安利？\n\n请提供这些信息，我将为你定制一篇符合小红书调性（带emoji、分段清晰、有网感、强互动引导）的优质文案 ✨\n\n如果不确定，我也可以先为你生成一个通用爆款模板供参考。", "module": "chat", "function": "generate", "line": 128}
{"timestamp": "2026-02-26 18:06:09,766", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Thinking content length: 0", "module": "chat", "function": "generate", "line": 129}
{"timestamp": "2026-02-26 18:06:09,767", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:06:09,768", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 7.68s ago] (223, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:06:09,771", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO messages (conversation_id, role, content, metadata) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::JSON) RETURNING messages.id, messages.created_at", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:06:09,772", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 5.866s ago] (223, 'assistant', '你希望小红书文案的主题或方向是什么？例如：\\n\\n- 推广某款产品（如护肤品、零食、数码好物）？\\n- 分享某种生活方式（如早八人自律打卡、租房改造、学生党平价穿搭）？\\n- 记录一次旅行/探店/美食体验？\\n- 某个实用技巧类内容（如Excel快捷键、AI工具推荐、雅思备考经验）？\\n\\n另外， ... (21 characters truncated) ... 群（如“20岁女生”“职场新人”“宝妈”），或者希望风格是：干货型 / 治愈系 / 幽默吐槽 / 高级简约 / 种草安利？\\n\\n请提供这些信息，我将为你定制一篇符合小红书调性（带emoji、分段清晰、有网感、强互动引导）的优质文案 ✨\\n\\n如果不确定，我也可以先为你生成一个通用爆款模板供参考。', '{\"model\": \"fast\"}')", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:06:09,775", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.metadata, messages.created_at \nFROM messages \nWHERE messages.id = $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:06:09,776", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 5.866s ago] (608,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:06:09,778", "level": "INFO", "logger": "app.services.chat_service", "message": "[DB] Saved message id=608, metadata_={'model': 'fast'}", "module": "chat_service", "function": "create_message", "line": 76}
{"timestamp": "2026-02-26 18:06:09,779", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.metadata, messages.created_at \nFROM messages \nWHERE messages.id = $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:06:09,779", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 5.867s ago] (608,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:06:09,781", "level": "INFO", "logger": "app.services.chat_service", "message": "[DB] Verify saved: id=608, metadata_={'model': 'fast'}", "module": "chat_service", "function": "create_message", "line": 83}
{"timestamp": "2026-02-26 18:06:09,782", "level": "INFO", "logger": "app.services.chat_service", "message": "[CACHE DELETE] 已删除消息缓存: conversation_id=223, user_id=1, keys=1", "module": "chat_service", "function": "_invalidate_messages_cache", "line": 546}
{"timestamp": "2026-02-26 18:06:09,783", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:06:15,177", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:06:15,178", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.username = $1::VARCHAR", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:06:15,178", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 13.12s ago] ('qibao1',)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:06:15,181", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:223:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:06:15,182", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:06:15,182", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 13.09s ago] (223, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:06:15,184", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO messages (conversation_id, role, content, metadata) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::JSON) RETURNING messages.id, messages.created_at", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:06:15,184", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 11.28s ago] (223, 'user', '护肤品', 'null')", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:06:15,186", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.metadata, messages.created_at \nFROM messages \nWHERE messages.id = $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:06:15,186", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 11.28s ago] (609,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:06:15,186", "level": "INFO", "logger": "app.services.chat_service", "message": "[DB] Saved message id=609, metadata_=None", "module": "chat_service", "function": "create_message", "line": 76}
{"timestamp": "2026-02-26 18:06:15,187", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.metadata, messages.created_at \nFROM messages \nWHERE messages.id = $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:06:15,187", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 11.28s ago] (609,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:06:15,188", "level": "INFO", "logger": "app.services.chat_service", "message": "[DB] Verify saved: id=609, metadata_=None", "module": "chat_service", "function": "create_message", "line": 83}
{"timestamp": "2026-02-26 18:06:15,188", "level": "INFO", "logger": "app.services.chat_service", "message": "[CACHE DELETE] 未找到消息缓存: conversation_id=223, user_id=1", "module": "chat_service", "function": "_invalidate_messages_cache", "line": 548}
{"timestamp": "2026-02-26 18:06:15,189", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: messages:conversation:223:user:1:skip:0:limit:50", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 18:06:15,190", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.metadata, messages.created_at \nFROM messages JOIN conversations ON messages.conversation_id = conversations.id \nWHERE messages.conversation_id = $1::INTEGER AND conversations.user_id = $2::INTEGER ORDER BY messages.created_at ASC \n LIMIT $3::INTEGER OFFSET $4::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:06:15,190", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 13.1s ago] (223, 1, 50, 0)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:06:15,191", "level": "INFO", "logger": "app.services.chat_service", "message": "[DB] Fetched message id=607, metadata_=None", "module": "chat_service", "function": "fetch", "line": 43}
{"timestamp": "2026-02-26 18:06:15,191", "level": "INFO", "logger": "app.services.chat_service", "message": "[DB] Fetched message id=608, metadata_={'model': 'fast'}", "module": "chat_service", "function": "fetch", "line": 43}
{"timestamp": "2026-02-26 18:06:15,191", "level": "INFO", "logger": "app.services.chat_service", "message": "[DB] Fetched message id=609, metadata_=None", "module": "chat_service", "function": "fetch", "line": 43}
{"timestamp": "2026-02-26 18:06:15,191", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for messages:conversation:223:user:1:skip:0:limit:50: [{'id': 607, 'conversation_id': 223, 'role': 'user', 'content': '帮我写一个小红书文案', 'metadata': 'MetaData()', 'created_at': '2026-02-26T10:06:03.902592+00:00'}, {'id': 608, 'conversation_id': 223, 'role': 'assistant', 'content': '你希望小红书文案的主题或方向是什么？例如：\\n\\n- 推广某款产品（如护肤品、零食、数码好物）？\\n- 分享某种生活方式（如早八人自律打卡、租房改造、学生党平价穿搭）？\\n- 记录一次旅行/探店/美食体验？\\n- 某个实用技巧类内容（如Excel快捷键、AI工具推荐、雅思备考经验）？\\n\\n另外，是否已有具体产品名、品牌、使用场景、目标人群（如“20岁女生”“职场新人”“宝妈”），或者希望风格是：干货型 / 治愈系 / 幽默吐槽 / 高级简约 / 种草安利？\\n\\n请提供这些信息，我将为你定制一篇符合小红书调性（带emoji、分段清晰、有网感、强互动引导）的优质文案 ✨\\n\\n如果不确定，我也可以先为你生成一个通用爆款模板供参考。', 'metadata': 'MetaData()', 'created_at': '2026-02-26T10:06:03.902592+00:00'}, {'id': 609, 'conversation_id': 223, 'role': 'user', 'content': '护肤品', 'metadata': 'MetaData()', 'created_at': '2026-02-26T10:06:15.179507+00:00'}]", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 18:06:15,192", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: messages:conversation:223:user:1:skip:0:limit:50, TTL=3755s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 18:06:15,192", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] 开始生成流式响应: conversation_id=223, enable_thinking=False", "module": "chat_service", "function": "generate_response_stream", "line": 465}
{"timestamp": "2026-02-26 18:06:15,193", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] 开始处理消息: conversation_id=223", "module": "chat_service", "function": "process_message", "line": 103}
{"timestamp": "2026-02-26 18:06:15,193", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] 上下文准备完成，长度: 3", "module": "chat_service", "function": "process_message", "line": 117}
{"timestamp": "2026-02-26 18:06:15,193", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] 创建Agent: is_expert=False, enable_thinking=False", "module": "chat_service", "function": "process_message", "line": 120}
{"timestamp": "2026-02-26 18:06:15,193", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] Agent创建成功", "module": "chat_service", "function": "process_message", "line": 125}
{"timestamp": "2026-02-26 18:06:15,194", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] Agent配置: {'configurable': {'thread_id': 'conversation_223'}, 'recursion_limit': 25}", "module": "chat_service", "function": "process_message", "line": 128}
{"timestamp": "2026-02-26 18:06:15,194", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] 开始流式执行Agent", "module": "chat_service", "function": "process_message", "line": 130}
{"timestamp": "2026-02-26 18:06:15,194", "level": "INFO", "logger": "app.core.tracing", "message": "[REQUEST] method=POST path=/api/v1/chat/send status_code=200 request_id=5608119a-0b71-4150-b1ce-0e104722efdc", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 18:06:15,197", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] updates data: {'SkillsMiddleware.before_agent': None}", "module": "chat_service", "function": "process_message", "line": 144}
{"timestamp": "2026-02-26 18:06:15,198", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] source=SkillsMiddleware.before_agent, update keys=<class 'NoneType'>", "module": "chat_service", "function": "process_message", "line": 146}
{"timestamp": "2026-02-26 18:06:16,239", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 1: 2 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:16,269", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 2: 1 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:16,297", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 3: 2 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:16,400", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 4: 2 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:16,516", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 5: 10 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:16,623", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 6: 10 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:16,736", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 7: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:16,868", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 8: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:16,950", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 9: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:17,044", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 10: 13 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:17,170", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 11: 11 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:17,264", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 12: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:17,395", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 13: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:17,903", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] updates data: {'model': {'messages': [AIMessage(content='好的！我们来为护肤品创作一篇小红书风格的种草文案。\\n\\n首先，我需要读取小红书文案专家（xhs-copywriter）的完整技能指令，确保严格遵循其专业流程和模板规范：\\n\\n', additional_kwargs={'tool_calls': [{'index': 0, 'id': 'call_6f76ca76bcdc42ed82aa3b', 'type': 'function', 'function': {'name': 'read_file', 'arguments': '{\"file_path\": \"/xhs-copywriter/SKILL.md\"}'}}]}, response_metadata={'finish_reason': 'tool_calls', 'request_id': '99bbc8b7-dd4b-4235-ad37-1fcdec582b48', 'token_usage': {'input_tokens': 4284, 'output_tokens': 76, 'total_tokens': 4360, 'prompt_tokens_details': {'cached_tokens': 0}}}, id='lc_run--019c9969-d32d-7400-9566-330bcc5f06c6', tool_calls=[{'name': 'read_file', 'args': {'file_path': '/xhs-copywriter/SKILL.md'}, 'id': 'call_6f76ca76bcdc42ed82aa3b', 'type': 'tool_call'}], invalid_tool_calls=[])]}}", "module": "chat_service", "function": "process_message", "line": 144}
{"timestamp": "2026-02-26 18:06:17,903", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] source=model, update keys=dict_keys(['messages'])", "module": "chat_service", "function": "process_message", "line": 146}
{"timestamp": "2026-02-26 18:06:17,903", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] formatted_list=[{'type': 'tool_call', 'data': {'names': ['read_file']}}]", "module": "chat_service", "function": "process_message", "line": 149}
{"timestamp": "2026-02-26 18:06:17,904", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 14: 19 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:17,920", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] updates data: {'tools': {'messages': [ToolMessage(content='     1\\t---\\n     2\\tname: xhs-copywriter\\n     3\\tdescription: 小红书平台文案创作专家，帮助用户创作吸引眼球的小红书笔记、种草文案、产品推荐等内容。适用于小红书营销、内容创作、品牌推广等场景。\\n     4\\tlicense: MIT\\n     5\\tcompatibility: 无特殊依赖\\n     6\\tmetadata:\\n     7\\t  author: dragonai\\n     8\\t  version: \"1.0\"\\n     9\\t  platform: xiaohongshu\\n    10\\tallowed-tools: web_search\\n    11\\t---\\n    12\\t\\n    13\\t# 小红书文案生成助手\\n    14\\t\\n    15\\t## 概述\\n    16\\t\\n    17\\t这是一个专门为小红书平台设计的内容创作技能，帮助用户创作高质量、高互动的小红书笔记。掌握小红书平台的内容特点、用户偏好和爆款文案技巧。\\n    18\\t\\n    19\\t## 核心能力\\n    20\\t\\n    21\\t### 1. 标题创作技巧\\n    22\\t\\n    23\\t**爆款标题公式：**\\n    24\\t- 数字+痛点+解决方案：如\"3个方法让你告别黑头！亲测有效\"\\n    25\\t- 疑问句+好奇心：如\"为什么你的护肤品不吸收？真相是...\"\\n    26\\t- 对比反差：如\"月薪3000和月薪3万的护肤区别\"\\n    27\\t- 情感共鸣：如\"25岁以后才明白的护肤真相\"\\n    28\\t\\n    29\\t**标题优化要点：**\\n    30\\t- 控制在20字以内\\n    31\\t- 使用emoji增加吸引力（最多2-3个）\\n    32\\t- 包含关键词便于搜索\\n    33\\t- 避免标题党，内容要真实\\n    34\\t\\n    35\\t### 2. 正文结构模板\\n    36\\t\\n    37\\t**种草类笔记结构：**\\n    38\\t```\\n    39\\t【开头Hook】用一句话抓住注意力\\n    40\\t【痛点描述】描述用户面临的问题\\n    41\\t【产品/方法介绍】详细介绍解决方案\\n    42\\t【使用体验】真实的感受和效果\\n    43\\t【总结推荐】给出明确的推荐理由\\n    44\\t【互动引导】引导用户评论互动\\n    45\\t```\\n    46\\t\\n    47\\t**教程类笔记结构：**\\n    48\\t```\\n    49\\t【效果展示】先展示最终效果\\n    50\\t【步骤分解】详细步骤+配图说明\\n    51\\t【注意事项】关键要点提醒\\n    52\\t【常见问题】解答可能的问题\\n    53\\t```\\n    54\\t\\n    55\\t### 3. 内容风格指南\\n    56\\t\\n    57\\t**语言风格：**\\n    58\\t- 亲切自然，像朋友聊天\\n    59\\t- 使用\"姐妹们\"\"宝子们\"等亲切称呼\\n    60\\t- 适当使用网络流行语\\n    61\\t- 避免过于正式或营销腔\\n    62\\t\\n    63\\t**排版技巧：**\\n    64\\t- 分段清晰，每段2-3句话\\n    65\\t- 使用emoji分隔内容\\n    66\\t- 重点内容加粗或用emoji标注\\n    67\\t- 适当使用分割线\\n    68\\t\\n    69\\t### 4. 热门话题标签\\n    70\\t\\n    71\\t**常用话题标签：**\\n    72\\t- 美妆护肤：#护肤心得 #美妆分享 #好物推荐\\n    73\\t- 穿搭时尚：#穿搭分享 #时尚穿搭 #OOTD\\n    74\\t- 美食探店：#美食分享 #探店 #美食日常\\n    75\\t- 生活方式：#生活分享 #日常记录 #好物分享\\n    76\\t\\n    77\\t**标签使用规则：**\\n    78\\t- 每篇笔记3-5个话题标签\\n    79\\t- 选择与内容高度相关的标签\\n    80\\t- 优先使用热门标签\\n    81\\t- 可创建个人专属标签\\n    82\\t\\n    83\\t### 5. 互动技巧\\n    84\\t\\n    85\\t**引导评论的话术：**\\n    86\\t- \"姐妹们觉得怎么样？评论区聊聊\"\\n    87\\t- \"你们有用过这个吗？效果如何？\"\\n    88\\t- \"还有什么想了解的，评论区告诉我\"\\n    89\\t- \"点赞收藏不迷路哦~\"\\n    90\\t\\n    91\\t## 使用示例\\n    92\\t\\n    93\\t**示例1：护肤品种草**\\n    94\\t用户输入：帮我写一个关于精华液的小红书文案\\n    95\\t\\n    96\\t输出：\\n    97\\t```\\n    98\\t标题：用了这款精华28天，我的皮肤真的变了！✨\\n    99\\t\\n   100\\t姐妹们！今天要分享一个让我皮肤逆袭的秘密武器！', name='read_file', id='5146e34c-9155-4589-8dfd-df6a9f2a8095', tool_call_id='call_6f76ca76bcdc42ed82aa3b')]}}", "module": "chat_service", "function": "process_message", "line": 144}
{"timestamp": "2026-02-26 18:06:17,920", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] source=tools, update keys=dict_keys(['messages'])", "module": "chat_service", "function": "process_message", "line": 146}
{"timestamp": "2026-02-26 18:06:17,921", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] formatted_list=[{'type': 'tool_result', 'data': {'name': 'read_file', 'content': '     1\\t---\\n     2\\tname: xhs-copywriter\\n     3\\tdescription: 小红书平台文案创作专家，帮助用户创作吸引眼球的小红书笔记、种草文案、产品推荐等内容。适用于小红书营销、内容创作、品牌推广等场景。\\n     4\\tlicense: MIT\\n     5\\tcompatibility: 无特殊依赖\\n     6\\tmetadata:\\n     7\\t  author: dragonai\\n     8\\t  version: \"1.0\"\\n     9\\t  platform: xiaohongshu\\n    10\\tallowed-tools: web_search\\n    11\\t---\\n    12\\t\\n    13\\t# 小红书文案生成助手\\n    14\\t\\n    15\\t## 概述\\n    16\\t\\n    17\\t这是一个专门为小红书平台设计的内容创作技能，帮助用户创作高质量、高互动的小红书笔记。掌握小红书平台的内容特点、用户偏好和爆款文案技巧。\\n    18\\t\\n    19\\t## 核心能力\\n    20\\t\\n    21\\t### 1. 标题创作技巧\\n    22\\t\\n    23\\t**爆款标题公式：**\\n    24\\t- 数字+痛点+解决方案：如\"3个方法让你告别黑头！亲测有效\"\\n    25\\t- 疑问句+好奇心：如\"为什么你的护肤品不吸收？真相是...\"\\n    26\\t- 对比反差：如\"月薪3000和月薪3万的护肤区别\"\\n    27\\t- 情感共鸣：如\"25岁以后才明白的护肤真相\"\\n    28\\t\\n    29\\t**标题优化要点：**\\n    30\\t- 控制在20字以内\\n    31\\t- 使用emoji增加吸引力（最多2-3个）\\n    32\\t- 包含关键词便于搜索\\n    33\\t- 避免标题党，内容要真实\\n    34\\t\\n    35\\t### 2. 正文结构模板\\n    36\\t\\n    37\\t**种草类笔记结构：**\\n    38\\t```\\n    39\\t【开头Hook】用一句话抓住注意力\\n    40\\t【痛点描述】描述用户面临的问题\\n    41\\t【产品/方法介绍】详细介绍解决方案\\n    42\\t【使用体验】真实的感受和效果\\n    43\\t【总结推荐】给出明确的推荐理由\\n    44\\t【互动引导】引导用户评论互动\\n    45\\t```\\n    46\\t\\n    47\\t**教程类笔记结构：**\\n    48\\t```\\n    49\\t【效果展示】先展示最终效果\\n    50\\t【步骤分解】详细步骤+配图说明\\n    51\\t【注意事项】关键要点提醒\\n    52\\t【常见问题】解答可能的问题\\n    53\\t```\\n    54\\t\\n    55\\t### 3. 内容风格指南\\n    56\\t\\n    57\\t**语言风格：**\\n    58\\t- 亲切自然，像朋友聊天\\n    59\\t- 使用\"姐妹们\"\"宝子们\"等亲切称呼\\n    60\\t- 适当使用网络流行语\\n    61\\t- 避免过于正式或营销腔\\n    62\\t\\n    63\\t**排版技巧：**\\n    64\\t- 分段清晰，每段2-3句话\\n    65\\t- 使用emoji分隔内容\\n    66\\t- 重点内容加粗或用emoji标注\\n    67\\t- 适当使用分割线\\n    68\\t\\n    69\\t### 4. 热门话题标签\\n    70\\t\\n    71\\t**常用话题标签：**\\n    72\\t- 美妆护肤：#护肤心得 #美妆分享 #好物推荐\\n    73\\t- 穿搭时尚：#穿搭分享 #时尚穿搭 #OOTD\\n    74\\t- 美食探店：#美食分享 #探店 #美食日常\\n    75\\t- 生活方式：#生活分享 #日常记录 #好物分享\\n    76\\t\\n    77\\t**标签使用规则：**\\n    78\\t- 每篇笔记3-5个话题标签\\n    79\\t- 选择与内容高度相关的标签\\n    80\\t- 优先使用热门标签\\n    81\\t- 可创建个人专属标签\\n    82\\t\\n    83\\t### 5. 互动技巧\\n    84\\t\\n    85\\t**引导评论的话术：**\\n    86\\t- \"姐妹们觉得怎么样？评论区聊聊\"\\n    87\\t- \"你们有用过这个吗？效果如何？\"\\n    88\\t- \"还有什么想了解的，评论区告诉我\"\\n    89\\t- \"点赞收藏不迷路哦~\"\\n    90\\t\\n    91\\t## 使用示例\\n    92\\t\\n    93\\t**示例1：护肤品种草**\\n    94\\t用户输入：帮我写一个关于精华液的小红书文案\\n    95\\t\\n    96\\t输出：\\n    97\\t```\\n    98\\t标题：用了这款精华28天，我的皮肤真的变了！✨\\n    99\\t\\n   100\\t姐妹们！今天要分享一个让我皮肤逆袭的秘密武器！'}}]", "module": "chat_service", "function": "process_message", "line": 149}
{"timestamp": "2026-02-26 18:06:18,986", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 15: 1 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:19,017", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 16: 2 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:19,048", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 17: 9 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:19,154", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 18: 2 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:19,232", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 19: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:19,373", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 20: 11 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:19,444", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 21: 10 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:19,487", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 22: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:19,635", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 23: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:19,707", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 24: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:19,797", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 25: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:19,925", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 26: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:19,995", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 27: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:20,126", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 28: 9 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:20,231", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 29: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:20,282", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 30: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:20,390", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 31: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:20,559", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 32: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:20,610", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 33: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:20,699", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 34: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:20,762", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 35: 9 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:20,873", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 36: 3 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:20,962", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 37: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:21,156", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 38: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:21,211", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 39: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:21,357", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 40: 9 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:21,471", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 41: 9 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:21,573", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 42: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:21,742", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 43: 9 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:21,839", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 44: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:21,955", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 45: 9 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:22,106", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 46: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:22,217", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 47: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:22,343", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 48: 10 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:22,458", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 49: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:22,590", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 50: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:22,723", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 51: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:22,831", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 52: 10 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:22,942", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 53: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:23,029", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 54: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:23,139", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 55: 9 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:23,206", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 56: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:23,354", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 57: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:23,403", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 58: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:23,554", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 59: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:23,667", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 60: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:23,797", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 61: 10 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:23,887", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 62: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:23,976", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 63: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:24,082", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 64: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:24,110", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 65: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:24,196", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 66: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:24,344", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 67: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:24,395", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 68: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:24,504", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 69: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:24,610", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 70: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:24,637", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 71: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:24,768", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 72: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:24,874", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 73: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:24,945", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 74: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:25,032", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 75: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:25,138", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 76: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:25,231", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 77: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:25,319", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 78: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:25,447", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 79: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:25,538", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 80: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:25,670", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 81: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:25,752", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 82: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:25,846", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 83: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:25,890", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 84: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:26,024", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 85: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:26,126", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 86: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:26,242", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 87: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:26,307", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 88: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:26,391", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 89: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:26,511", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 90: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:26,614", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 91: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:26,701", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 92: 12 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:26,714", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 93: 15 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:06:26,738", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] updates data: {'model': {'messages': [AIMessage(content='<INSTRUCTION>请根据小红书文案专家（xhs-copywriter）的完整技能指令，为「护肤品」创作一篇符合平台调性、结构清晰、有网感、带emoji、含互动引导的小红书种草文案。需严格遵循以下要求：\\n\\n- 标题：20字以内，使用爆款公式（如数字+痛点+解决方案 / 疑问句+好奇心 / 对比反差 / 情感共鸣），含2–3个emoji  \\n- 正文结构按种草类模板：【开头Hook】→【痛点描述】→【产品/方法介绍】→【使用体验】→【总结推荐】→【互动引导】  \\n- 语言亲切自然，用“姐妹们”“宝子们”等称呼，避免营销腔  \\n- 每段2–3句话，合理使用emoji分隔与强调，重点内容可加粗（用**加粗**表示）  \\n- 结尾添加3–5个精准热门话题标签（如#护肤心得 #精华推荐 等）  \\n\\n因用户仅指定“护肤品”未提供具体产品名、品牌或肤质信息，需虚构一个真实感强、符合当前小红书趋势的典型场景：  \\n✅ 设定为「油痘肌25岁上班族」  \\n✅ 产品：一款近期口碑爆棚的「控油抗痘维C精华」（非真实品牌，但命名可信，如「澄澈光感维C精华」）  \\n✅ 核心卖点：不闷痘、提亮快、质地清爽、适合刷酸后维稳  \\n\\n现在生成完整文案：</INSTRUCTION>', additional_kwargs={}, response_metadata={'finish_reason': 'stop', 'request_id': '0950d114-a705-44f0-8b50-52583f9a22e0', 'token_usage': {'input_tokens': 5633, 'output_tokens': 353, 'total_tokens': 5986, 'prompt_tokens_details': {'cached_tokens': 0}}}, id='lc_run--019c9969-dd62-7ef2-8ec8-697cef87b08a', tool_calls=[], invalid_tool_calls=[])]}}", "module": "chat_service", "function": "process_message", "line": 144}
{"timestamp": "2026-02-26 18:06:26,739", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] source=model, update keys=dict_keys(['messages'])", "module": "chat_service", "function": "process_message", "line": 146}
{"timestamp": "2026-02-26 18:06:26,739", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] formatted_list=[{'type': 'content', 'data': {'content': '<INSTRUCTION>请根据小红书文案专家（xhs-copywriter）的完整技能指令，为「护肤品」创作一篇符合平台调性、结构清晰、有网感、带emoji、含互动引导的小红书种草文案。需严格遵循以下要求：\\n\\n- 标题：20字以内，使用爆款公式（如数字+痛点+解决方案 / 疑问句+好奇心 / 对比反差 / 情感共鸣），含2–3个emoji  \\n- 正文结构按种草类模板：【开头Hook】→【痛点描述】→【产品/方法介绍】→【使用体验】→【总结推荐】→【互动引导】  \\n- 语言亲切自然，用“姐妹们”“宝子们”等称呼，避免营销腔  \\n- 每段2–3句话，合理使用emoji分隔与强调，重点内容可加粗（用**加粗**表示）  \\n- 结尾添加3–5个精准热门话题标签（如#护肤心得 #精华推荐 等）  \\n\\n因用户仅指定“护肤品”未提供具体产品名、品牌或肤质信息，需虚构一个真实感强、符合当前小红书趋势的典型场景：  \\n✅ 设定为「油痘肌25岁上班族」  \\n✅ 产品：一款近期口碑爆棚的「控油抗痘维C精华」（非真实品牌，但命名可信，如「澄澈光感维C精华」）  \\n✅ 核心卖点：不闷痘、提亮快、质地清爽、适合刷酸后维稳  \\n\\n现在生成完整文案：</INSTRUCTION>'}}]", "module": "chat_service", "function": "process_message", "line": 149}
{"timestamp": "2026-02-26 18:06:26,742", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] Agent流式执行完成", "module": "chat_service", "function": "process_message", "line": 159}
{"timestamp": "2026-02-26 18:06:26,742", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Stream complete, total chunks: 93, total chars: 637", "module": "chat", "function": "generate", "line": 127}
{"timestamp": "2026-02-26 18:06:26,742", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Full response content:\n好的！我们来为护肤品创作一篇小红书风格的种草文案。\n\n首先，我需要读取小红书文案专家（xhs-copywriter）的完整技能指令，确保严格遵循其专业流程和模板规范：\n\n\n[使用工具: read_file]\n<INSTRUCTION>请根据小红书文案专家（xhs-copywriter）的完整技能指令，为「护肤品」创作一篇符合平台调性、结构清晰、有网感、带emoji、含互动引导的小红书种草文案。需严格遵循以下要求：\n\n- 标题：20字以内，使用爆款公式（如数字+痛点+解决方案 / 疑问句+好奇心 / 对比反差 / 情感共鸣），含2–3个emoji  \n- 正文结构按种草类模板：【开头Hook】→【痛点描述】→【产品/方法介绍】→【使用体验】→【总结推荐】→【互动引导】  \n- 语言亲切自然，用“姐妹们”“宝子们”等称呼，避免营销腔  \n- 每段2–3句话，合理使用emoji分隔与强调，重点内容可加粗（用**加粗**表示）  \n- 结尾添加3–5个精准热门话题标签（如#护肤心得 #精华推荐 等）  \n\n因用户仅指定“护肤品”未提供具体产品名、品牌或肤质信息，需虚构一个真实感强、符合当前小红书趋势的典型场景：  \n✅ 设定为「油痘肌25岁上班族」  \n✅ 产品：一款近期口碑爆棚的「控油抗痘维C精华」（非真实品牌，但命名可信，如「澄澈光感维C精华」）  \n✅ 核心卖点：不闷痘、提亮快、质地清爽、适合刷酸后维稳  \n\n现在生成完整文案：</INSTRUCTION>", "module": "chat", "function": "generate", "line": 128}
{"timestamp": "2026-02-26 18:06:26,743", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Thinking content length: 0", "module": "chat", "function": "generate", "line": 129}
{"timestamp": "2026-02-26 18:06:26,744", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:06:26,744", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 24.66s ago] (223, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:06:26,746", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO messages (conversation_id, role, content, metadata) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::JSON) RETURNING messages.id, messages.created_at", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:06:26,746", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 22.84s ago] (223, 'assistant', '好的！我们来为护肤品创作一篇小红书风格的种草文案。\\n\\n首先，我需要读取小红书文案专家（xhs-copywriter）的完整技能指令，确保严格遵循其专业流程和模板规范：\\n\\n\\n[使用工具: read_file]\\n<INSTRUCTION>请根据小红书文案专家（xhs-copywriter） ... (358 characters truncated) ... 、符合当前小红书趋势的典型场景：  \\n✅ 设定为「油痘肌25岁上班族」  \\n✅ 产品：一款近期口碑爆棚的「控油抗痘维C精华」（非真实品牌，但命名可信，如「澄澈光感维C精华」）  \\n✅ 核心卖点：不闷痘、提亮快、质地清爽、适合刷酸后维稳  \\n\\n现在生成完整文案：</INSTRUCTION>', '{\"model\": \"fast\"}')", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:06:26,748", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.metadata, messages.created_at \nFROM messages \nWHERE messages.id = $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:06:26,748", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 22.84s ago] (610,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:06:26,749", "level": "INFO", "logger": "app.services.chat_service", "message": "[DB] Saved message id=610, metadata_={'model': 'fast'}", "module": "chat_service", "function": "create_message", "line": 76}
{"timestamp": "2026-02-26 18:06:26,750", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.metadata, messages.created_at \nFROM messages \nWHERE messages.id = $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:06:26,750", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 22.84s ago] (610,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:06:26,751", "level": "INFO", "logger": "app.services.chat_service", "message": "[DB] Verify saved: id=610, metadata_={'model': 'fast'}", "module": "chat_service", "function": "create_message", "line": 83}
{"timestamp": "2026-02-26 18:06:26,752", "level": "INFO", "logger": "app.services.chat_service", "message": "[CACHE DELETE] 已删除消息缓存: conversation_id=223, user_id=1, keys=1", "module": "chat_service", "function": "_invalidate_messages_cache", "line": 546}
{"timestamp": "2026-02-26 18:06:26,753", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:07:48,662", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:07:48,663", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.username = $1::VARCHAR", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:07:48,663", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 106.6s ago] ('qibao1',)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:07:48,665", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO conversations (user_id, title, is_pinned, model_name) VALUES ($1::INTEGER, $2::VARCHAR, $3::BOOLEAN, $4::VARCHAR) RETURNING conversations.id, conversations.created_at, conversations.updated_at", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:07:48,665", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 106.6s ago] (1, '新会话', False, None)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:07:48,666", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:07:48,667", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 106.6s ago] (224,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:07:48,667", "level": "INFO", "logger": "app.services.conversation_service", "message": "[CACHE DELETE] 未找到用户会话列表缓存: user_id=1", "module": "conversation_service", "function": "_invalidate_user_cache", "line": 146}
{"timestamp": "2026-02-26 18:07:48,668", "level": "INFO", "logger": "app.core.tracing", "message": "[REQUEST] method=POST path=/api/v1/conversations status_code=201 request_id=bb9e64bd-8e5f-4765-befb-335b57e8fc9f", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 18:07:48,668", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:07:48,699", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:07:48,699", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.username = $1::VARCHAR", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:07:48,700", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 106.6s ago] ('qibao1',)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:07:48,702", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:224:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 18:07:48,703", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:07:48,703", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 106.6s ago] (224, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:07:48,704", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:224:1: {'id': 224, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-26T10:07:48.664417+00:00', 'updated_at': '2026-02-26T10:07:48.664417+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 18:07:48,705", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:224:1, TTL=3616s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 18:07:48,706", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: messages:conversation:224:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 18:07:48,707", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.metadata, messages.created_at \nFROM messages JOIN conversations ON messages.conversation_id = conversations.id \nWHERE messages.conversation_id = $1::INTEGER AND conversations.user_id = $2::INTEGER ORDER BY messages.created_at ASC \n LIMIT $3::INTEGER OFFSET $4::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:07:48,707", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 106.6s ago] (224, 1, 100, 0)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:07:48,709", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: messages:conversation:224:user:1:skip:0:limit:100, TTL=3876s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 18:07:48,709", "level": "INFO", "logger": "app.core.tracing", "message": "[REQUEST] method=GET path=/api/v1/chat/conversations/224/history status_code=200 request_id=c36b230c-f168-4410-b40a-4f46e6b5e76d", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 18:07:48,710", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:08:03,207", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:08:03,208", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.username = $1::VARCHAR", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:08:03,208", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 121.2s ago] ('qibao1',)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:08:03,209", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:224:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:08:03,210", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:08:03,210", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 121.1s ago] (224, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:08:03,211", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO messages (conversation_id, role, content, metadata) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::JSON) RETURNING messages.id, messages.created_at", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:08:03,211", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 119.3s ago] (224, 'user', '生成小红书文案，护肤品 海蓝之谜', 'null')", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:08:03,213", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.metadata, messages.created_at \nFROM messages \nWHERE messages.id = $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:08:03,213", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 119.3s ago] (611,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:08:03,214", "level": "INFO", "logger": "app.services.chat_service", "message": "[DB] Saved message id=611, metadata_=None", "module": "chat_service", "function": "create_message", "line": 76}
{"timestamp": "2026-02-26 18:08:03,214", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.metadata, messages.created_at \nFROM messages \nWHERE messages.id = $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:08:03,215", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 119.3s ago] (611,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:08:03,215", "level": "INFO", "logger": "app.services.chat_service", "message": "[DB] Verify saved: id=611, metadata_=None", "module": "chat_service", "function": "create_message", "line": 83}
{"timestamp": "2026-02-26 18:08:03,216", "level": "INFO", "logger": "app.services.chat_service", "message": "[CACHE DELETE] 已删除消息缓存: conversation_id=224, user_id=1, keys=1", "module": "chat_service", "function": "_invalidate_messages_cache", "line": 546}
{"timestamp": "2026-02-26 18:08:03,216", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: messages:conversation:224:user:1:skip:0:limit:50", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 18:08:03,217", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.metadata, messages.created_at \nFROM messages JOIN conversations ON messages.conversation_id = conversations.id \nWHERE messages.conversation_id = $1::INTEGER AND conversations.user_id = $2::INTEGER ORDER BY messages.created_at ASC \n LIMIT $3::INTEGER OFFSET $4::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:08:03,217", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 121.1s ago] (224, 1, 50, 0)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:08:03,218", "level": "INFO", "logger": "app.services.chat_service", "message": "[DB] Fetched message id=611, metadata_=None", "module": "chat_service", "function": "fetch", "line": 43}
{"timestamp": "2026-02-26 18:08:03,218", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for messages:conversation:224:user:1:skip:0:limit:50: [{'id': 611, 'conversation_id': 224, 'role': 'user', 'content': '生成小红书文案，护肤品 海蓝之谜', 'metadata': 'MetaData()', 'created_at': '2026-02-26T10:08:03.208738+00:00'}]", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 18:08:03,219", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: messages:conversation:224:user:1:skip:0:limit:50, TTL=3855s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 18:08:03,219", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] 开始生成流式响应: conversation_id=224, enable_thinking=False", "module": "chat_service", "function": "generate_response_stream", "line": 465}
{"timestamp": "2026-02-26 18:08:03,219", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] 开始处理消息: conversation_id=224", "module": "chat_service", "function": "process_message", "line": 103}
{"timestamp": "2026-02-26 18:08:03,220", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] 上下文准备完成，长度: 16", "module": "chat_service", "function": "process_message", "line": 117}
{"timestamp": "2026-02-26 18:08:03,220", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] 创建Agent: is_expert=False, enable_thinking=False", "module": "chat_service", "function": "process_message", "line": 120}
{"timestamp": "2026-02-26 18:08:03,220", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] Agent创建成功", "module": "chat_service", "function": "process_message", "line": 125}
{"timestamp": "2026-02-26 18:08:03,220", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] Agent配置: {'configurable': {'thread_id': 'conversation_224'}, 'recursion_limit': 25}", "module": "chat_service", "function": "process_message", "line": 128}
{"timestamp": "2026-02-26 18:08:03,220", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] 开始流式执行Agent", "module": "chat_service", "function": "process_message", "line": 130}
{"timestamp": "2026-02-26 18:08:03,221", "level": "INFO", "logger": "app.core.tracing", "message": "[REQUEST] method=POST path=/api/v1/chat/send status_code=200 request_id=d2301dd5-5945-4d7e-9a23-9c1c619c47bc", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 18:08:03,227", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] updates data: {'SkillsMiddleware.before_agent': {'skills_metadata': [{'name': 'xhs-copywriter', 'description': '小红书平台文案创作专家，帮助用户创作吸引眼球的小红书笔记、种草文案、产品推荐等内容。适用于小红书营销、内容创作、品牌推广等场景。', 'path': '/xhs-copywriter/SKILL.md', 'metadata': {'author': 'dragonai', 'version': '1.0', 'platform': 'xiaohongshu'}, 'license': 'MIT', 'compatibility': '无特殊依赖', 'allowed_tools': ['web_search']}]}}", "module": "chat_service", "function": "process_message", "line": 144}
{"timestamp": "2026-02-26 18:08:03,228", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] source=SkillsMiddleware.before_agent, update keys=dict_keys(['skills_metadata'])", "module": "chat_service", "function": "process_message", "line": 146}
{"timestamp": "2026-02-26 18:08:04,457", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 1: 1 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:04,544", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 2: 3 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:04,569", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 3: 1 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:04,640", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 4: 3 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:04,756", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 5: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:04,952", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 6: 10 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:04,974", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 7: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:05,101", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 8: 9 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:05,175", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 9: 10 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:05,309", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 10: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:05,821", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] updates data: {'model': {'messages': [AIMessage(content='我需要为海蓝之谜护肤品生成小红书文案。首先，让我阅读小红书文案创作专家的技能文件，了解具体的创作要求和流程。\\n\\n', additional_kwargs={'tool_calls': [{'index': 0, 'id': 'call_3a67793ad5704f968a2533', 'type': 'function', 'function': {'name': 'read_file', 'arguments': '{\"file_path\": \"/xhs-copywriter/SKILL.md\"}'}}]}, response_metadata={'finish_reason': 'tool_calls', 'request_id': 'e18f0575-fb9e-45ac-aea6-c59cccf9b575', 'token_usage': {'input_tokens': 4074, 'output_tokens': 62, 'total_tokens': 4136, 'prompt_tokens_details': {'cached_tokens': 0}}}, id='lc_run--019c996b-78bc-7451-8da7-0260ca0629fe', tool_calls=[{'name': 'read_file', 'args': {'file_path': '/xhs-copywriter/SKILL.md'}, 'id': 'call_3a67793ad5704f968a2533', 'type': 'tool_call'}], invalid_tool_calls=[])]}}", "module": "chat_service", "function": "process_message", "line": 144}
{"timestamp": "2026-02-26 18:08:05,822", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] source=model, update keys=dict_keys(['messages'])", "module": "chat_service", "function": "process_message", "line": 146}
{"timestamp": "2026-02-26 18:08:05,822", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] formatted_list=[{'type': 'tool_call', 'data': {'names': ['read_file']}}]", "module": "chat_service", "function": "process_message", "line": 149}
{"timestamp": "2026-02-26 18:08:05,822", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 11: 19 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:05,840", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] updates data: {'tools': {'messages': [ToolMessage(content='     1\\t---\\n     2\\tname: xhs-copywriter\\n     3\\tdescription: 小红书平台文案创作专家，帮助用户创作吸引眼球的小红书笔记、种草文案、产品推荐等内容。适用于小红书营销、内容创作、品牌推广等场景。\\n     4\\tlicense: MIT\\n     5\\tcompatibility: 无特殊依赖\\n     6\\tmetadata:\\n     7\\t  author: dragonai\\n     8\\t  version: \"1.0\"\\n     9\\t  platform: xiaohongshu\\n    10\\tallowed-tools: web_search\\n    11\\t---\\n    12\\t\\n    13\\t# 小红书文案生成助手\\n    14\\t\\n    15\\t## 概述\\n    16\\t\\n    17\\t这是一个专门为小红书平台设计的内容创作技能，帮助用户创作高质量、高互动的小红书笔记。掌握小红书平台的内容特点、用户偏好和爆款文案技巧。\\n    18\\t\\n    19\\t## 核心能力\\n    20\\t\\n    21\\t### 1. 标题创作技巧\\n    22\\t\\n    23\\t**爆款标题公式：**\\n    24\\t- 数字+痛点+解决方案：如\"3个方法让你告别黑头！亲测有效\"\\n    25\\t- 疑问句+好奇心：如\"为什么你的护肤品不吸收？真相是...\"\\n    26\\t- 对比反差：如\"月薪3000和月薪3万的护肤区别\"\\n    27\\t- 情感共鸣：如\"25岁以后才明白的护肤真相\"\\n    28\\t\\n    29\\t**标题优化要点：**\\n    30\\t- 控制在20字以内\\n    31\\t- 使用emoji增加吸引力（最多2-3个）\\n    32\\t- 包含关键词便于搜索\\n    33\\t- 避免标题党，内容要真实\\n    34\\t\\n    35\\t### 2. 正文结构模板\\n    36\\t\\n    37\\t**种草类笔记结构：**\\n    38\\t```\\n    39\\t【开头Hook】用一句话抓住注意力\\n    40\\t【痛点描述】描述用户面临的问题\\n    41\\t【产品/方法介绍】详细介绍解决方案\\n    42\\t【使用体验】真实的感受和效果\\n    43\\t【总结推荐】给出明确的推荐理由\\n    44\\t【互动引导】引导用户评论互动\\n    45\\t```\\n    46\\t\\n    47\\t**教程类笔记结构：**\\n    48\\t```\\n    49\\t【效果展示】先展示最终效果\\n    50\\t【步骤分解】详细步骤+配图说明\\n    51\\t【注意事项】关键要点提醒\\n    52\\t【常见问题】解答可能的问题\\n    53\\t```\\n    54\\t\\n    55\\t### 3. 内容风格指南\\n    56\\t\\n    57\\t**语言风格：**\\n    58\\t- 亲切自然，像朋友聊天\\n    59\\t- 使用\"姐妹们\"\"宝子们\"等亲切称呼\\n    60\\t- 适当使用网络流行语\\n    61\\t- 避免过于正式或营销腔\\n    62\\t\\n    63\\t**排版技巧：**\\n    64\\t- 分段清晰，每段2-3句话\\n    65\\t- 使用emoji分隔内容\\n    66\\t- 重点内容加粗或用emoji标注\\n    67\\t- 适当使用分割线\\n    68\\t\\n    69\\t### 4. 热门话题标签\\n    70\\t\\n    71\\t**常用话题标签：**\\n    72\\t- 美妆护肤：#护肤心得 #美妆分享 #好物推荐\\n    73\\t- 穿搭时尚：#穿搭分享 #时尚穿搭 #OOTD\\n    74\\t- 美食探店：#美食分享 #探店 #美食日常\\n    75\\t- 生活方式：#生活分享 #日常记录 #好物分享\\n    76\\t\\n    77\\t**标签使用规则：**\\n    78\\t- 每篇笔记3-5个话题标签\\n    79\\t- 选择与内容高度相关的标签\\n    80\\t- 优先使用热门标签\\n    81\\t- 可创建个人专属标签\\n    82\\t\\n    83\\t### 5. 互动技巧\\n    84\\t\\n    85\\t**引导评论的话术：**\\n    86\\t- \"姐妹们觉得怎么样？评论区聊聊\"\\n    87\\t- \"你们有用过这个吗？效果如何？\"\\n    88\\t- \"还有什么想了解的，评论区告诉我\"\\n    89\\t- \"点赞收藏不迷路哦~\"\\n    90\\t\\n    91\\t## 使用示例\\n    92\\t\\n    93\\t**示例1：护肤品种草**\\n    94\\t用户输入：帮我写一个关于精华液的小红书文案\\n    95\\t\\n    96\\t输出：\\n    97\\t```\\n    98\\t标题：用了这款精华28天，我的皮肤真的变了！✨\\n    99\\t\\n   100\\t姐妹们！今天要分享一个让我皮肤逆袭的秘密武器！', name='read_file', id='e6d515bd-9037-44df-8bc4-60181ddfbc7f', tool_call_id='call_3a67793ad5704f968a2533')]}}", "module": "chat_service", "function": "process_message", "line": 144}
{"timestamp": "2026-02-26 18:08:05,840", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] source=tools, update keys=dict_keys(['messages'])", "module": "chat_service", "function": "process_message", "line": 146}
{"timestamp": "2026-02-26 18:08:05,841", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] formatted_list=[{'type': 'tool_result', 'data': {'name': 'read_file', 'content': '     1\\t---\\n     2\\tname: xhs-copywriter\\n     3\\tdescription: 小红书平台文案创作专家，帮助用户创作吸引眼球的小红书笔记、种草文案、产品推荐等内容。适用于小红书营销、内容创作、品牌推广等场景。\\n     4\\tlicense: MIT\\n     5\\tcompatibility: 无特殊依赖\\n     6\\tmetadata:\\n     7\\t  author: dragonai\\n     8\\t  version: \"1.0\"\\n     9\\t  platform: xiaohongshu\\n    10\\tallowed-tools: web_search\\n    11\\t---\\n    12\\t\\n    13\\t# 小红书文案生成助手\\n    14\\t\\n    15\\t## 概述\\n    16\\t\\n    17\\t这是一个专门为小红书平台设计的内容创作技能，帮助用户创作高质量、高互动的小红书笔记。掌握小红书平台的内容特点、用户偏好和爆款文案技巧。\\n    18\\t\\n    19\\t## 核心能力\\n    20\\t\\n    21\\t### 1. 标题创作技巧\\n    22\\t\\n    23\\t**爆款标题公式：**\\n    24\\t- 数字+痛点+解决方案：如\"3个方法让你告别黑头！亲测有效\"\\n    25\\t- 疑问句+好奇心：如\"为什么你的护肤品不吸收？真相是...\"\\n    26\\t- 对比反差：如\"月薪3000和月薪3万的护肤区别\"\\n    27\\t- 情感共鸣：如\"25岁以后才明白的护肤真相\"\\n    28\\t\\n    29\\t**标题优化要点：**\\n    30\\t- 控制在20字以内\\n    31\\t- 使用emoji增加吸引力（最多2-3个）\\n    32\\t- 包含关键词便于搜索\\n    33\\t- 避免标题党，内容要真实\\n    34\\t\\n    35\\t### 2. 正文结构模板\\n    36\\t\\n    37\\t**种草类笔记结构：**\\n    38\\t```\\n    39\\t【开头Hook】用一句话抓住注意力\\n    40\\t【痛点描述】描述用户面临的问题\\n    41\\t【产品/方法介绍】详细介绍解决方案\\n    42\\t【使用体验】真实的感受和效果\\n    43\\t【总结推荐】给出明确的推荐理由\\n    44\\t【互动引导】引导用户评论互动\\n    45\\t```\\n    46\\t\\n    47\\t**教程类笔记结构：**\\n    48\\t```\\n    49\\t【效果展示】先展示最终效果\\n    50\\t【步骤分解】详细步骤+配图说明\\n    51\\t【注意事项】关键要点提醒\\n    52\\t【常见问题】解答可能的问题\\n    53\\t```\\n    54\\t\\n    55\\t### 3. 内容风格指南\\n    56\\t\\n    57\\t**语言风格：**\\n    58\\t- 亲切自然，像朋友聊天\\n    59\\t- 使用\"姐妹们\"\"宝子们\"等亲切称呼\\n    60\\t- 适当使用网络流行语\\n    61\\t- 避免过于正式或营销腔\\n    62\\t\\n    63\\t**排版技巧：**\\n    64\\t- 分段清晰，每段2-3句话\\n    65\\t- 使用emoji分隔内容\\n    66\\t- 重点内容加粗或用emoji标注\\n    67\\t- 适当使用分割线\\n    68\\t\\n    69\\t### 4. 热门话题标签\\n    70\\t\\n    71\\t**常用话题标签：**\\n    72\\t- 美妆护肤：#护肤心得 #美妆分享 #好物推荐\\n    73\\t- 穿搭时尚：#穿搭分享 #时尚穿搭 #OOTD\\n    74\\t- 美食探店：#美食分享 #探店 #美食日常\\n    75\\t- 生活方式：#生活分享 #日常记录 #好物分享\\n    76\\t\\n    77\\t**标签使用规则：**\\n    78\\t- 每篇笔记3-5个话题标签\\n    79\\t- 选择与内容高度相关的标签\\n    80\\t- 优先使用热门标签\\n    81\\t- 可创建个人专属标签\\n    82\\t\\n    83\\t### 5. 互动技巧\\n    84\\t\\n    85\\t**引导评论的话术：**\\n    86\\t- \"姐妹们觉得怎么样？评论区聊聊\"\\n    87\\t- \"你们有用过这个吗？效果如何？\"\\n    88\\t- \"还有什么想了解的，评论区告诉我\"\\n    89\\t- \"点赞收藏不迷路哦~\"\\n    90\\t\\n    91\\t## 使用示例\\n    92\\t\\n    93\\t**示例1：护肤品种草**\\n    94\\t用户输入：帮我写一个关于精华液的小红书文案\\n    95\\t\\n    96\\t输出：\\n    97\\t```\\n    98\\t标题：用了这款精华28天，我的皮肤真的变了！✨\\n    99\\t\\n   100\\t姐妹们！今天要分享一个让我皮肤逆袭的秘密武器！'}}]", "module": "chat_service", "function": "process_message", "line": 149}
{"timestamp": "2026-02-26 18:08:06,793", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 12: 2 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:06,819", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 13: 3 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:06,848", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 14: 2 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:06,979", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 15: 3 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:07,048", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 16: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:07,157", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 17: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:07,260", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 18: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:07,379", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 19: 10 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:07,464", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 20: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:07,532", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 21: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:07,658", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 22: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:07,774", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 23: 16 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:07,899", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 24: 10 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:08,016", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 25: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:08,609", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] updates data: {'model': {'messages': [AIMessage(content='现在我已经了解了小红书文案创作的规范和技巧，接下来我需要搜索关于海蓝之谜护肤品的相关信息，以便创作出真实、有吸引力的文案。\\n\\n让我使用web_search工具搜索海蓝之谜护肤品的相关信息：\\n\\n', additional_kwargs={'tool_calls': [{'index': 0, 'id': 'call_d338415b2cbd4834aea55d', 'type': 'function', 'function': {'name': 'web_search', 'arguments': '{\"query\": \"海蓝之谜护肤品 最新款 热门产品 用户评价\"}'}}]}, response_metadata={'finish_reason': 'tool_calls', 'request_id': '0d5c3c14-4b1f-42d5-8188-91ecb6e058fe', 'token_usage': {'input_tokens': 5409, 'output_tokens': 83, 'total_tokens': 5492, 'prompt_tokens_details': {'cached_tokens': 0}}}, id='lc_run--019c996b-82f4-7671-9fb6-dae10a77c164', tool_calls=[{'name': 'web_search', 'args': {'query': '海蓝之谜护肤品 最新款 热门产品 用户评价'}, 'id': 'call_d338415b2cbd4834aea55d', 'type': 'tool_call'}], invalid_tool_calls=[])]}}", "module": "chat_service", "function": "process_message", "line": 144}
{"timestamp": "2026-02-26 18:08:08,610", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] source=model, update keys=dict_keys(['messages'])", "module": "chat_service", "function": "process_message", "line": 146}
{"timestamp": "2026-02-26 18:08:08,610", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] formatted_list=[{'type': 'tool_call', 'data': {'names': ['web_search']}}]", "module": "chat_service", "function": "process_message", "line": 149}
{"timestamp": "2026-02-26 18:08:08,611", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 26: 20 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:14,725", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] updates data: {'tools': {'messages': [ToolMessage(content='{\"query\": \"海蓝之谜护肤品 最新款 热门产品 用户评价\", \"follow_up_questions\": null, \"answer\": null, \"images\": [], \"results\": [{\"url\": \"https://www.cosme.net.tw/\", \"title\": \"化妝品使用心得及排行榜綜合網站@cosme\", \"content\": \"150x150 416244 6100df59ddad29e1\\\\n\\\\n 150x150 423175 c4ce065a25d30682\\\\n\\\\n 150x150 479477 f1b3a5ccdc819794\\\\nHat\\\\n\\\\n 150x150 436978 51e82d30efd263a2\\\\n\\\\n 150x150 669947 5b2798ac1762192a\\\\n\\\\n 150x150 618845 f52bbd5e3f8e9c60\\\\nBow\\\\n\\\\n 150x150 21986 eb336d6e6f32e123\\\\n\\\\n 150x150 445948 6c0a82a16fc68806\\\\n\\\\n 150x150 151355 8c49ccc06dc4c4e8\\\\n\\\\n 150x150 21986 eb336d6e6f32e123\\\\n\\\\n 150x150 667328 bb6caf89f49d202c\\\\n\\\\n 150x150 416244 6100df59ddad29e1\\\\n\\\\nNew product 280x80\\\\n\\\\n 150x150 490088 ada03fc860151f40\\\\n\\\\nUser default\\\\n\\\\nNew product 280x80\\\\n\\\\n 150x150 416244 6100df59ddad29e1\\\\n\\\\n 150x150 21986 eb336d6e6f32e123\\\\n\\\\n 150x150 490088 ada03fc860151f40\\\\n\\\\n 150x150 257442 549297ecbc6adec0\\\\n\\\\nUser default\\\\n\\\\nUser default\\\\n\\\\n 150x150 508184 af9057a0b58f5de6\\\\n\\\\n 150x150 151355 8c49ccc06dc4c4e8\\\\n\\\\n 150x150 21986 eb336d6e6f32e123\\\\n\\\\n 150x150 151355 8c49ccc06dc4c4e8 [...] FJ豐傑生醫  FENGJIE BIOMEDICAL\\\\nNaturero 植淨林\\\\nPAULA\\'S CHOICE 寶拉珍選\\\\nReborn 蕊朋\\\\nCyspera 希思珮樂\\\\nSebamed 施巴\\\\nAttenir  艾天然\\\\nMIRAE 未來美\\\\nLogo20210407\\\\n 150x150 479477 f1b3a5ccdc819794\\\\nHat\\\\n 150x150 436978 51e82d30efd263a2\\\\n 150x150 464304 7e6c5aba3ece3ae1\\\\n   enfj\\\\n 150x150 416244 6100df59ddad29e1\\\\n 150x150 618845 f52bbd5e3f8e9c60\\\\nBow\\\\nPR【Attenir  艾天然】 保養界史上首次連霸！Attenir卸妝油二度蟬聯日本綜合大賞，實至名歸的「冠軍卸妝油」台灣網友也愛不釋手\\\\nPR【CAPSULE SERUM 珂蓓思】 日本美妝社群熱銷款精華狂洗版！原來日本女生的透明水光肌才不是靠濾鏡 而是懂用這系列的爆珠精華！ \\\\nPR【Helena Rubinstein 赫蓮娜】 是誰偷走妳的少女感？ 全新#童顏膠原白繃帶 完美高效配方，重塑膠原緊緻網絡、把失去的蘋果肌親手「補」回來！\\\\n【L\\'OCCITANE 歐舒丹】 櫻韻陶然，茶引春禧 白茶櫻花限量香氛系列 2月1日 限定上市\\\\n\\\\n 150x150 659453 fcf90ef6262a2246\\\\n\\\\n 150x150 604716 730d42a24ceb6e19\\\\n\\\\nUser default\\\\n\\\\nUser default\\\\n 150x150 479477 f1b3a5ccdc819794\\\\n\\\\n 150x150 507292 d2fb1e2f05a30506\\\\nDi\\\\n\\\\n 150x150 416244 6100df59ddad29e1 [...] 150x150 151355 8c49ccc06dc4c4e8\\\\n\\\\nNew product 280x80\\\\n\\\\n 150x150 367931 d9efdea48d83787d\\\\n\\\\n 150x150 490088 ada03fc860151f40\\\\n\\\\n 150x150 151355 8c49ccc06dc4c4e8\\\\n\\\\n 150x150 420051 e0bf9218b421c06a\\\\n\\\\n 150x150 472029 c5c1b6b88bf154b0\\\\n\\\\n 150x150 276915 6a07bde515a343d1\\\\n\\\\n 150x150 21986 eb336d6e6f32e123\\\\n\\\\n 150x150 629881 68a222982aad22c9\\\\n\\\\nNew product 280x80\\\\n\\\\n 150x150 629881 68a222982aad22c9\\\\n\\\\n 150x150 21986 eb336d6e6f32e123\\\\n         500x350  18 \\\\n202511 chicchoc            1 \\\\n         500x350  17 \\\\n    500x350  5 \\\\n 340x0    2016 8016  1 \\\\n    500x350     2 \\\\n500  350px  1 \\\\n         500x350          \\\\n 340x0     vip \\\\n 340x0 20260125 20260224\\\\n 340x0          500x350   \\\\n1  1 \\\\n    500x350     \\\\n 340x0          500x350\\\\n     500x350px\\\\n\\\\nRanking no1\\\\n\\\\nRanking no2\\\\n\\\\nRanking no3\\\\n\\\\nRanking no1\\\\n\\\\nRanking no2\\\\n\\\\nRanking no3\", \"score\": 0.25368112, \"raw_content\": null}, {\"url\": \"https://m.amz123.com/t/Gpe0CrdM\", \"title\": \"月销上万！亚马逊最新10大热销产品推荐-AMZ123跨境导航\", \"content\": \"9.Texas科学计算器\\\\n\\\\n4.7星级/44726个评价\\\\n\\\\n这款功能强大、专业级的计算器是数学学习中的必备品，结合了统计和高级科学功能，帮助学生探索数学和科学概念。该产品上月购买量达到惊人的10万+，随着新学年开始将进一步巩固该产品在畅销榜上的地位。\\\\n\\\\n10. KiddyCare尿布收纳篮\\\\n\\\\n4.7星级/5926个评价\\\\n\\\\n这款婴儿尿布收纳盒配有8个宽口袋和4个可拆卸隔板，可以自由调整以获得更合适的收纳空间。产品采用轻质涤纶面料制成，耐用且易于清洗，而内部可拆卸设计便于折叠携带，满足出行需求。该产品的Helium10 listing健康评分也达到10分，获得81%的五星好评率。\\\\n\\\\n作者✎ Rayna/AMZ123\\\\n\\\\n声明：此文章版权归AMZ123所有，未经允许不得转载，如需授权请联系：amz123happy\\\\n\\\\n上一篇\\\\n\\\\n从零到亿！Sweet Furniture如何用社媒营销引领家居出海\\\\n下一篇\\\\n\\\\nYandexQ2财报公布：GMV增长53%，活跃买家达1820万\\\\n\\\\n 热门活动\\\\n\\\\n进行中\\\\n\\\\n链新机 启新局—亚马逊全球开店2026春耕大会·厦门站\\\\n\\\\n 其他\\\\n\\\\n 04-09 周四\\\\n\\\\n立即报名进行中\\\\n\\\\n进化新纪元·AI重构POD全球出海增长峰会\\\\n\\\\n 其他\\\\n\\\\n 04-16 周四\\\\n\\\\n立即报名\\\\n\\\\n 热门报告\\\\n\\\\n1\\\\n\\\\n《2025跨境电商行业年度报告》PDF下载\\\\n\\\\n 01-21 周三\\\\n\\\\n立即领取2\\\\n\\\\n《2025 TikTok Shop 年度调研报告》PDF下载\\\\n\\\\n 02-03 周二\\\\n\\\\n立即领取\\\\n\\\\n《2025上半年TikTok Shop调研报告-TT123》PDF下载\\\\n\\\\n 08-19 周二\\\\n\\\\n立即领取 [...] 突发！特朗普10%的全球关税已经生效\\\\n\\\\nAMZ123获悉，据外媒报道，近日，美国的关税政策经历了剧烈震荡。美东时间2月20日，美国最高法院以6比3的结果作出裁定，认定特朗普政府援引《国际紧急经济权力法》加征关税的做法越权。法院认为，该法并未明确授权总统以紧急状态为由开征大规模进口关税，政府此举缺乏足够法律依据。裁决公布后，特朗普当天即作出回应。他表示不同意法院的决定，但是同时签署行政令，正式终止此前依据《国际紧急经济权力法》实施的相关关税措施。这意味着，自2024年起以芬太尼危机等理由对多国加征的关税失去了法律支撑。但特朗普并未因此停下关税步伐。\\\\n\\\\n\\\\n\\\\n涨幅高达550%！Shopee巴西卖家费用将大幅调整\\\\n\\\\nMZ123获悉，近日，Shopee宣布，自2026年3月1日起，实施新的佣金和费用政策，并大幅调整每件商品的固定费用结构，同时优化免运费和支付补贴规则。相关调整适用于CNPJ和CPF两类卖家。在新的费率体系下，Shopee的基础佣金比例维持不变，仍为14%或20%，具体取决于卖家选择的佣金模式，但每件商品收取的固定费用将进行分级调整。自2026年起，79.99雷亚尔及以下商品固定费用仍为4雷亚尔；80至99.99雷亚尔区间为16雷亚尔；100至199.99雷亚尔为20雷亚尔；200雷亚尔以上为26雷亚尔。部分区间涨幅最高达550%，费率结构较以往更为细分。此次调整的核心变化之一是取消了100雷亚尔佣金上限。\\\\n\\\\n\\\\n\\\\n2025年出口额已突破千亿！SHEIN将投百亿建智慧供应链总部 [...] AMZ123选品观察员\\\\n\\\\n59667\\\\n\\\\n2024-08-20 15:53\\\\n\\\\n2024-08-20 15:53\\\\n\\\\n59667\\\\n\\\\nAMZ123选品观察员\\\\n\\\\nAMZ123获悉，近期，Helium10公布了8月份亚马逊上的10大热销产品，囊括家居、户外、手机配件等品类。\\\\n\\\\n1. LINENSPA记忆泡沫床垫\\\\n\\\\n4.5星级/123152个评价\\\\n\\\\n这款泡沫床垫使用缓解压力的记忆泡沫，可贴合使用者身体曲线，带来舒适感。床垫中含有冷却凝胶，有助于散发热量，以在睡眠时保持凉爽舒适。凭借这款产品，该品牌每月收入超过500万美元，累计获得超8万条五星好评。\\\\n\\\\n2. Zulay Kitchen电动搅拌器\\\\n\\\\n4.4星级/221432个评价\\\\n\\\\n这款搅拌器适用于制作咖啡、冰沙、奶昔等饮品，结构经久耐用，不易生锈或损坏，配套的金属支架使其易于存放。该产品获得了满分10分的Helium10 listing健康评分，上月购买量达到50000+。\\\\n\\\\n3. Apakkai防水贴纸套装\\\\n\\\\n4.4星级/2408个评价\\\\n\\\\n这款贴纸套装包含600张不同图案的帖子，可以轻松定制笔记本电脑、水瓶或其他随身携带的物品，是绝佳的返校季商品。贴纸采用PVC材料，具备防水功能且牢固耐用，撕下不易留痕。该产品的Helium10 listing健康评分达到满分10分，上月购买量超7000+。\\\\n\\\\n4. INIU便携式充电宝\\\\n\\\\n4.6星级/60099个评价\\\\n\\\\n该款充电宝厚度仅为0.5英寸，可轻松放入口袋或包中。充电宝采用3A高速充电，仅需一小时即可为iPhone充电78%。其独特的15层SmartProtect系统可防止设备过热和电池损坏。这款产品同样获得10分的Helium10 listing健康评分，五星好评率达78%。\\\\n\\\\n5. NEW\\'C手机钢化膜\\\\n\\\\n4.5星级/181759个评价\", \"score\": 0.13455996, \"raw_content\": null}, {\"url\": \"https://www.shopify.com/zh/blog/trending-products\", \"title\": \"畅销商品清单：2025年热销的20种在线产品（附营销技巧） - Shopify\", \"content\": \"根据谷歌搜索的数据，“malatonin gummies”（褪黑色素口香糖）这类的助眠补充剂搜索量上升了，而“magnesium spray”（钙镁喷剂）的搜索猛增三倍，说明人们越来越感兴趣探索如何在日常生活中以新的方式使用补充剂。\\\\n\\\\n补充剂产品业务适合大小企业主。Vital Melamins and Apothatote的创立者苏尔塔娜·奈勒（Sultana Nailor）是认证草药师，通过TikTok营销，成功打造了自己的草药王国，并热心帮助其它草药创业者。而像BPI Stores这样的大公司也深受零售商的欢迎。\\\\n\\\\n销售维生素及各类补充剂的主要营销策略：\\\\n\\\\n 与运动和保健网红合作，展示产品优点。\\\\n 突出满意顾客的好评。\\\\n 向常用顾客推销批量折扣或订阅机制。\\\\n\\\\n### 2. 护肤用品\\\\n\\\\n护肤品是又一类有着庞大市场的热销产品类别。现如今，不论年龄性别，人们都需要自我护理产品：洗面奶、润肤露、精华露等等。\\\\n\\\\n消费者们对具有可持续发展和道德理念、无残酷试验的高质量护肤用品越来越感兴趣。“hyaluronic acid serum”（水感玻尿酸超导精华）、“vegan skin care”（全素护肤品）和“retinol”（A醇）这些词的搜索频率都在不断上升。\\\\n\\\\n从2024年初始，“snail slime”（蜗牛精华）的谷歌搜索渐渐成为焦点。该产品内含蜗牛分泌液，可能有助于刺激人体产生更多胶原蛋白，并平缓发红的皮肤。\\\\n\\\\n销售护肤用品的策略：\\\\n\\\\n 与美容网红合作，展示护肤品的日常使用。\\\\n 售卖样品或小份装产品，让顾客有机会试用。\\\\n 展示真实顾客使用前和使用后的效果。\\\\n\\\\n### 3. 化妆品\\\\n\\\\n化妆品一直是热销产品，化妆行业也一直在开发新的工具和技巧，不断创新。\\\\n\\\\n“lip stain”（唇釉）高居热销商品榜，虽然平均每月的搜索量略下降，但搜索量持续不断，2024年势头不减。 [...] “lip stain”（唇釉）高居热销商品榜，虽然平均每月的搜索量略下降，但搜索量持续不断，2024年势头不减。\\\\n\\\\n热门化妆品的营销策略：\\\\n\\\\n像化妆品品牌Rare Beauty学习，通过明星赛琳娜·戈麦斯（Selena Gomez）的走红TikTok视频来给自己作宣传。\\\\n\\\\n制作化妆教程，帮助顾客从购买的产品中获得最大利益。\\\\n\\\\n### 4. 外套和夹克\\\\n\\\\n对外套和夹克的需求来自季节变化、时尚变迁，以及对户外活动日益增长的兴趣。经预测，2027年户外服饰市场将超越450亿美元（约3,150亿人民币）。这一产品类别的热销度仍将持续，后劲很足。\\\\n\\\\n做外套和夹克的代发货业务是个低成本生意好点子，但你必须确保能找到产品质量有保障、发货快速的供应商。\\\\n\\\\n你也可以考虑当某个服装品牌或零售店的联盟营销合作伙伴，销售这类热门产品。建立一个网站或社交媒体频道，做时尚服饰的评点和推销，并附上联盟链接。\\\\n\\\\n### 5. 自行车\\\\n\\\\n电动自行车革新了自行车领域。有了电力加持，日常通勤变得舒适顺畅，哪怕是在起伏不平的地势。这让更多人愿意选择骑自行车。\\\\n\\\\n近五年以来，人们对电动自行车的兴趣越来越大，每到夏季，搜索量便创新高。据估计，从现在起至2030年，电动自行车的销量将以每年10%的增幅上涨。届时，路上将会有770万量电动自行车。\\\\n\\\\n尽管尺寸比较大，也比较重，电动自行车仍可发展为成功的代发货业务。价值百万美元的公司Ebike Generation创始人约翰·墨菲（John Murphy）就是个好例子。他精心打造自己的代发货业务网站，营销内容专门针对特定的目标受众：使用电动自行车的猎人，他们需要安静而快速地游走于不同地区。\\\\n\\\\n📕 更多阅读：代发货策略全解：9步指南助力跨境新手盈利起飞！\\\\n\\\\n### 6. 艺术和手工材料 [...] 趋势变化迅速，所以请在下个季度回访Shopify网站，了解关于热门产品的最新分析。\\\\n\\\\n畅销商品如何评定？\\\\n\\\\n本文的畅销商品是根据Shopify商家数据统计而来，其中包括：\\\\n\\\\n Shopify商家年度销售最多的产品类别。\\\\n Shopify商家销售与上季度相比，涨势最多的产品类别。\\\\n\\\\n本文也参考了谷歌趋势的搜索数据，以及关键词研究工具Ahref，以全面洞察消费趋势。\\\\n\\\\n## 哪些商品已不再畅销？\\\\n\\\\n在瞬息万变的电商领域，今天的畅销的，很可能明天就过时了。\\\\n\\\\n根据最新数据，本文之前列出的以下产品已不再畅销：\\\\n\\\\n1. ### 唇彩\\\\n\\\\n唇彩是一种美容产品，它能提供持久的唇色，却没有不会像传统口红那样褪色，却也没有润唇膏的保湿功效。虽然唇彩仍然流行，但已不在今年的畅销榜单之首了。\\\\n\\\\n1. ### 抹茶\\\\n\\\\n如果你近年来光顾过咖啡店，一定看到过抹茶。抹茶是一种研磨得很细的绿茶粉，已成为一种流行的保健产品。尽管抹茶一直很受欢迎，但它也没有被列入今年的畅销榜单之首。\\\\n\\\\n1. ### 电动工具配件\\\\n\\\\n电动工具配件的全球销售额持续增长，但在今年的更新中，仅位列季度畅销产品。\\\\n\\\\n请记住，流行趋势是波动不止的。如果营销活动恰到好处，又社交媒体网红的支持，今天不畅销的产品在下一季也可能大卖。\\\\n\\\\n密切关注市场变化，确保你的销售产品目录能符合当前市场的需求。\\\\n\\\\n## 如何寻找畅销商品？\\\\n\\\\n若能找到合适的畅销商品线上销售，就能彻底革新你的电商业务。这一切都要靠了解市场，明白消费者所需，并且在合适的时机提供优质客户服务。\\\\n\\\\n以下两种方法可供参考，为你的线上商店寻找有潜力的畅销产品。\\\\n\\\\n### 谷歌趋势（Google Trends）\\\\n\\\\n谷歌趋势是个免费工具，可用来查找全世界的用户都在搜索什么内容。以下是使用谷歌趋势的步骤：\", \"score\": 0.12458555, \"raw_content\": null}, {\"url\": \"https://sell.amazon.com/zh/blog/products-to-sell\", \"title\": \"2026年将有18款高需求和热门产品在网上销售 - Sell on Amazon\", \"content\": \"Sellers are achieving ecommerce growth with Amazon\\\\n\\\\nIndependent sellers in the US averaged more than $290,000 in annual sales in the Amazon store in 2024.\\\\n\\\\nSee more Amazon selling stats\\\\n\\\\n### 3。 美容与个人护理\\\\n\\\\n美容和个人护理类别是另一个表现稳定的行业，对于那些寻求高需求产品销售的人来说，它可能是一个利润丰厚的行业。 客户经常在寻找能够增强外观和健康感的创新、优质的产品。\\\\n\\\\n#### 需要考虑的产品：强大补丁\\\\n\\\\nMighty Patch 在TikTok上因护肤网红而声名鹊起，并获得了名人、美容和时尚杂志编辑以及亚马逊客户的热烈评价。 青春痘补丁已成为一种趋势，以至于在公共场合佩戴它们已成为名人所接受的时尚宣言。\\\\n\\\\n尽管有这种趋势，但客户提到，Mighty Patch 效果不错且易于使用，即使在敏感皮肤上也是如此。 它甚至获得了超过14万的全球收视率，其中近90％是四星或以上。\\\\n\\\\n### 4 和 5。 家居和厨房以及厨房和餐厅\\\\n\\\\n家居和厨房类别涵盖了各种各样的产品，并继续包括亚马逊商店中的许多畅销产品。 客户经常在寻找省时、高效、时尚的家居必需品，让他们的生活更轻松。 同样，厨房和餐饮类别一直被评为电子商务领域表现最好的公司，原因有很多：\\\\n\\\\n 烹饪爱好者和家庭烹饪趋势的兴起增加了人们对厨房用品、炊具和餐饮必需品的兴趣。\\\\n 随着人们花时间在家制作难忘的饭菜，对创新工具和优质产品的需求仍然强劲。\\\\n 举办聚会（例如晚宴和家庭活动）的趋势也增加了人们对时尚餐具和配饰的需求。\\\\n\\\\n#### 值得考虑的产品：Stanley Quencher、Owala 和 HydroJug [...] ### 8。 运动和户外\\\\n\\\\n运动和户外类别是电子商务中另一个受欢迎的类别，客户不断寻找可以增强户外体验或帮助他们实现健身目标的产品。 在夏季和圣诞节等假日季节，这一类别的需求也激增，那时人们更有可能进行户外活动或购买礼物。\\\\n\\\\n#### 需要考虑的产品：冰袋\\\\n\\\\nFit & Fresh Coolers 可重复使用的冰袋因其多功能性和实用性而成为您的电子商务商店的不错选择。 这些冰袋专为长时间保持凉爽温度而设计，非常适合保持午餐的新鲜、支持户外活动和增强运动体验。 它们可重复使用这一事实吸引了具有环保意识的客户，因为它可以减少一次性替代品的浪费。 此外，它们小巧轻便的设计使其便于旅行、野餐和健身包。\\\\n\\\\n随着健康和保健趋势的持续增长，提供可靠的冷却解决方案符合活跃个人和家庭的需求，使其成为满足稳定需求和重复购买的有前途的产品。\\\\n\\\\n### 9。 宝贝\\\\n\\\\n婴儿类是电子商务领域另一个表现最好的产品，他们对满足新生儿和年幼儿童需求的产品需求不断。 当父母优先考虑孩子的健康时，他们一直在寻找高品质、安全和实用的产品。\\\\n\\\\n#### 需要考虑的产品：WaterWipes 婴儿湿巾\\\\n\\\\nWaterWipes 婴儿湿巾凭借其独特的成分和安全性，在竞争激烈的婴儿用品市场中脱颖而出。 这些湿巾由 99.9% 的纯净水和一滴水果提取物制成，不含有害化学物质，非常适合在敏感的新生儿皮肤上使用。\\\\n\\\\n家长们经常称赞 WaterWipes 温和有效，可以缓解与尿布疹和皮肤刺激相关的常见问题。 该品牌在医疗保健专业人士中赢得了良好的声誉，进一步树立了其信誉。\\\\n\\\\n随着人们越来越意识到为儿童提供安全、天然的产品的重要性，WaterWipes有望进入一个父母越来越愿意为宝宝投资优质选择的市场。 这种安全性、有效性和品牌信任的结合使得 WaterWipes 成为一款极具吸引力的在线销售产品。\\\\n\\\\n### 10。 宠物用品 [...] 当您开始在亚马逊商城开店时，可获得超过 $50,000 的潜在奖励。 了解如何操作\\\\n\\\\n 搜索\\\\n English\\\\n\\\\n  ### 选择您的首选语言\\\\n\\\\n  + English - US\\\\n  + Español - US\\\\n  + 中文 - CN\\\\n\\\\n当您开始在亚马逊商城开店时，可获得超过 $50,000 的潜在奖励。 了解如何操作\\\\n\\\\nSTART\\\\n\\\\nSTART  亚马逊畅销书排行榜上有18款高需求商品  1。 电子产品  2。 服装、鞋履和珠宝  3。 美容与个人护理  4 和 5。 家居和厨房以及厨房和餐厅  6。 健康与家居  7。 玩具和游戏  8。 运动和户外  9。 宝贝  10。 宠物用品  11。 家电  12。 手机和配件  13。 电脑和配件  14。 视频游戏  15。 乐器  16。 工具和家居装修  17。 露台、草坪和花园  18。 艺术品、手工艺品和缝纫业  发现热门产品并增加需求的 5 个步骤  4 种工具可帮助您找到要在线销售的高需求产品  1。 产品机会浏览器  2。 成长机会  3。 B2B 产品机会报告  4。 谷歌趋势  吸引客户的6个营销技巧  1。 设定有竞争力的价格  2。 优化房源  3。 提供快速、免费配送  4。 试试用 Prime 购买  5。 做广告  6。 分析销售指标\\\\n\\\\n拓展您的业务\\\\n\\\\n# 2026年将有18款高需求和热门产品在网上销售\\\\n\\\\n## 查看要销售的最新高需求产品，并学习如何使用亚马逊工具找到下一个畅销产品。\\\\n\\\\nJan 16, 2026\\\\n\\\\n6 Min read\\\\n\\\\nMickey Toogood\\\\n\\\\n Copy\\\\n\\\\n  Link copied\\\\n Twitter\\\\n Print)\\\\n LinkedIn\\\\n\\\\n Copy\\\\n\\\\n  Link copied\\\\n Twitter\\\\n Print)\\\\n LinkedIn\\\\n\\\\n注册\\\\\\\\\", \"score\": 0.11585087, \"raw_content\": null}, {\"url\": \"https://m.cifnews.com/article/174765\", \"title\": \"亚马逊选品热门产品解读第64期，今年夏季爆款产品诞生了 - 雨果跨境\", \"content\": \"产品没有查询专利，也没有核算利润，产品能不能做，需要结合自身情况，毕竟总有佼佼者能做出好产品，也能运营好产品，这些都是值得小杜不断学习和思考的。\\\\n\\\\n以上图片均来源于：卖家精灵，shulex VOC\\\\n\\\\n（来源：跨境选品星球）\\\\n\\\\n以上内容属作者个人观点，不代表雨果跨境立场！本文经原作者授权转载，转载需经原作者授权同意。\\u200b\\\\n\\\\n\\\\n\\\\n  跨境选品星球\\\\n\\\\n+ 关注 已关注 取消关注\\\\n\\\\n 关于我们\\\\n 加入我们\\\\n 爆料投稿\\\\n 用户协议\\\\n 隐私政策\\\\n\\\\n 联系我们\\\\n 合作伙伴\\\\n 展会合作\\\\n 意见反馈\\\\n 版权声明\\\\n\\\\n 雨果跨境APP\\\\n CCEE选品\\\\n 雨果果园\\\\n 观察员计划\\\\n 跨境标签\\\\n\\\\n雨果AI活动日精选跨境工具AI内容创作AI选品AI营销AI客服AI办公自动化AI实战视频库AI活动回顾爱创作酷家乐布尔向量Vidaukeble\\\\n\\\\n跨境产业园聚合页汕头（濠江）象屿跨境电商产业园产业园搜索页\\\\n\\\\nTemu半托管Temu全托管速卖通半托管速卖通全托管lazada全托管Shopee全托管TikTok全托管亚马逊全托管TikTok美国站SheinTikTokJumia开店Shopee开店Fruugo开店eprice开店OnBuy开店nocnoc开店Lazada开店美客多开店OZON开店Newegg开店eMAG开店PerFee开店Allegro开店Fnac开店 Wayfair开店ManoMano开店Etsy开店日本乐天开店Fordeal开店沃尔玛开店Gmarket开店\\\\n\\\\n广州产业带深圳产业带义乌产业带东莞产业带南通产业带杭州产业带泉州产业带金华产业带白云产业带昆明产业带温州产业带临沂产业带开封产业带东营产业带大朗产业带重庆产业带汕头产业带佛山产业带 [...] 出海导航TikTok导航节日营销导航海外公司注册跨境电商专利美国商标注册跨境导航亚马逊导航虾皮导航速卖通导航shopify导航ebay导航北美卖家导航欧洲卖家导航东南亚卖家导航澳洲卖家导航南美卖家导航非洲卖家导航南亚卖家导航日韩卖家导航国际站卖家导航外贸导航\\\\n\\\\nCCEE选品展亚马逊知识库亚马逊新手指南亚马逊低价商店TikTokFalabella平台简介oceanweb智能营销平台海外众筹拼多多Temu快手kwai广告SHEIN开店入驻京东物流雨果跨境跨境电商空中云汇派安盈JS桨歌船长biFacebook开户Google开户美国商标注册亚马逊代运营俄罗斯物流跨境电商选品展美国物流万里汇\\\\n\\\\n开发者：雨果跨境（厦门）科技有限公司  \\\\n©2013雨果跨境闽ICP备11004599号-1，闽ICP备11004599号-3，闽ICP备11004599号-4，闽ICP备11004599号-5,闽公网安备35020602003453号 [...] 3.年度增长强化\\\\n\\\\n2017–2018两年，年峰值合计搜索量约123 k–133 k；2019和2020年峰值分别攀升至251 k和307 k；2021–2023年峰值进一步触及312 k、356 k、363 k，2024年更创出513 k的历史最高。近两年（2023→2024）峰值增长率高达≈41%（363 k→513 k），显示出后疫情时代户外家居消费的爆发式增长。\\\\n\\\\n4.关键词结构演变\\\\n\\\\n早期（2017–2018）主导词为“mister”（单机喷雾器）和“misting system”（整体雾化系统），合计占比超80%。\\\\n\\\\n2019起，“misters for outside patio”迅速崛起，从3月的2300次跃升至当年7月的123000次，首度分流主流搜索流量。\\\\n\\\\n2021–2022，“patio misters for cooling outdoor”及“water mister”等更长尾、用途更细分的关键词开始活跃，分别在2021年6月和2022年初首次出现并快速成长，成为进一步挖掘细分用户需求的入口。\\\\n\\\\n04类目分析\\\\n\\\\n通过畅销榜单不难看出，外观可分为软水管和立式的两种：\\\\n\\\\n1.软水管款式\\\\n\\\\nASIN数：75，月总销量：23625，平均bsr：54547，平均价格30.99美金，平均评分4.3，平均评分数：662，平均上架时间2年10个月。\\\\n\\\\n2.立式款式\\\\n\\\\nASIN数：26，月总销量：6950，平均bsr：55601，平均价格30.60美金，平均评分4.4，平均评分数：102，平均上架时间11个月。\", \"score\": 0.087634265, \"raw_content\": null}], \"response_time\": 1.6, \"request_id\": \"54ac2594-3085-48d4-9f06-4d8017bebe18\"}', name='web_search', id='1ead9d86-9e5f-4cbe-ae54-e5766bce80f6', tool_call_id='call_d338415b2cbd4834aea55d')]}}", "module": "chat_service", "function": "process_message", "line": 144}
{"timestamp": "2026-02-26 18:08:14,730", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] source=tools, update keys=dict_keys(['messages'])", "module": "chat_service", "function": "process_message", "line": 146}
{"timestamp": "2026-02-26 18:08:14,730", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] formatted_list=[{'type': 'tool_result', 'data': {'name': 'web_search', 'content': '{\"query\": \"海蓝之谜护肤品 最新款 热门产品 用户评价\", \"follow_up_questions\": null, \"answer\": null, \"images\": [], \"results\": [{\"url\": \"https://www.cosme.net.tw/\", \"title\": \"化妝品使用心得及排行榜綜合網站@cosme\", \"content\": \"150x150 416244 6100df59ddad29e1\\\\n\\\\n 150x150 423175 c4ce065a25d30682\\\\n\\\\n 150x150 479477 f1b3a5ccdc819794\\\\nHat\\\\n\\\\n 150x150 436978 51e82d30efd263a2\\\\n\\\\n 150x150 669947 5b2798ac1762192a\\\\n\\\\n 150x150 618845 f52bbd5e3f8e9c60\\\\nBow\\\\n\\\\n 150x150 21986 eb336d6e6f32e123\\\\n\\\\n 150x150 445948 6c0a82a16fc68806\\\\n\\\\n 150x150 151355 8c49ccc06dc4c4e8\\\\n\\\\n 150x150 21986 eb336d6e6f32e123\\\\n\\\\n 150x150 667328 bb6caf89f49d202c\\\\n\\\\n 150x150 416244 6100df59ddad29e1\\\\n\\\\nNew product 280x80\\\\n\\\\n 150x150 490088 ada03fc860151f40\\\\n\\\\nUser default\\\\n\\\\nNew product 280x80\\\\n\\\\n 150x150 416244 6100df59ddad29e1\\\\n\\\\n 150x150 21986 eb336d6e6f32e123\\\\n\\\\n 150x150 490088 ada03fc860151f40\\\\n\\\\n 150x150 257442 549297ecbc6adec0\\\\n\\\\nUser default\\\\n\\\\nUser default\\\\n\\\\n 150x150 508184 af9057a0b58f5de6\\\\n\\\\n 150x150 151355 8c49ccc06dc4c4e8\\\\n\\\\n 150x150 21986 eb336d6e6f32e123\\\\n\\\\n 150x150 151355 8c49ccc06dc4c4e8 [...] FJ豐傑生醫  FENGJIE BIOMEDICAL\\\\nNaturero 植淨林\\\\nPAULA\\'S CHOICE 寶拉珍選\\\\nReborn 蕊朋\\\\nCyspera 希思珮樂\\\\nSebamed 施巴\\\\nAttenir  艾天然\\\\nMIRAE 未來美\\\\nLogo20210407\\\\n 150x150 479477 f1b3a5ccdc819794\\\\nHat\\\\n 150x150 436978 51e82d30efd263a2\\\\n 150x150 464304 7e6c5aba3ece3ae1\\\\n   enfj\\\\n 150x150 416244 6100df59ddad29e1\\\\n 150x150 618845 f52bbd5e3f8e9c60\\\\nBow\\\\nPR【Attenir  艾天然】 保養界史上首次連霸！Attenir卸妝油二度蟬聯日本綜合大賞，實至名歸的「冠軍卸妝油」台灣網友也愛不釋手\\\\nPR【CAPSULE SERUM 珂蓓思】 日本美妝社群熱銷款精華狂洗版！原來日本女生的透明水光肌才不是靠濾鏡 而是懂用這系列的爆珠精華！ \\\\nPR【Helena Rubinstein 赫蓮娜】 是誰偷走妳的少女感？ 全新#童顏膠原白繃帶 完美高效配方，重塑膠原緊緻網絡、把失去的蘋果肌親手「補」回來！\\\\n【L\\'OCCITANE 歐舒丹】 櫻韻陶然，茶引春禧 白茶櫻花限量香氛系列 2月1日 限定上市\\\\n\\\\n 150x150 659453 fcf90ef6262a2246\\\\n\\\\n 150x150 604716 730d42a24ceb6e19\\\\n\\\\nUser default\\\\n\\\\nUser default\\\\n 150x150 479477 f1b3a5ccdc819794\\\\n\\\\n 150x150 507292 d2fb1e2f05a30506\\\\nDi\\\\n\\\\n 150x150 416244 6100df59ddad29e1 [...] 150x150 151355 8c49ccc06dc4c4e8\\\\n\\\\nNew product 280x80\\\\n\\\\n 150x150 367931 d9efdea48d83787d\\\\n\\\\n 150x150 490088 ada03fc860151f40\\\\n\\\\n 150x150 151355 8c49ccc06dc4c4e8\\\\n\\\\n 150x150 420051 e0bf9218b421c06a\\\\n\\\\n 150x150 472029 c5c1b6b88bf154b0\\\\n\\\\n 150x150 276915 6a07bde515a343d1\\\\n\\\\n 150x150 21986 eb336d6e6f32e123\\\\n\\\\n 150x150 629881 68a222982aad22c9\\\\n\\\\nNew product 280x80\\\\n\\\\n 150x150 629881 68a222982aad22c9\\\\n\\\\n 150x150 21986 eb336d6e6f32e123\\\\n         500x350  18 \\\\n202511 chicchoc            1 \\\\n         500x350  17 \\\\n    500x350  5 \\\\n 340x0    2016 8016  1 \\\\n    500x350     2 \\\\n500  350px  1 \\\\n         500x350          \\\\n 340x0     vip \\\\n 340x0 20260125 20260224\\\\n 340x0          500x350   \\\\n1  1 \\\\n    500x350     \\\\n 340x0          500x350\\\\n     500x350px\\\\n\\\\nRanking no1\\\\n\\\\nRanking no2\\\\n\\\\nRanking no3\\\\n\\\\nRanking no1\\\\n\\\\nRanking no2\\\\n\\\\nRanking no3\", \"score\": 0.25368112, \"raw_content\": null}, {\"url\": \"https://m.amz123.com/t/Gpe0CrdM\", \"title\": \"月销上万！亚马逊最新10大热销产品推荐-AMZ123跨境导航\", \"content\": \"9.Texas科学计算器\\\\n\\\\n4.7星级/44726个评价\\\\n\\\\n这款功能强大、专业级的计算器是数学学习中的必备品，结合了统计和高级科学功能，帮助学生探索数学和科学概念。该产品上月购买量达到惊人的10万+，随着新学年开始将进一步巩固该产品在畅销榜上的地位。\\\\n\\\\n10. KiddyCare尿布收纳篮\\\\n\\\\n4.7星级/5926个评价\\\\n\\\\n这款婴儿尿布收纳盒配有8个宽口袋和4个可拆卸隔板，可以自由调整以获得更合适的收纳空间。产品采用轻质涤纶面料制成，耐用且易于清洗，而内部可拆卸设计便于折叠携带，满足出行需求。该产品的Helium10 listing健康评分也达到10分，获得81%的五星好评率。\\\\n\\\\n作者✎ Rayna/AMZ123\\\\n\\\\n声明：此文章版权归AMZ123所有，未经允许不得转载，如需授权请联系：amz123happy\\\\n\\\\n上一篇\\\\n\\\\n从零到亿！Sweet Furniture如何用社媒营销引领家居出海\\\\n下一篇\\\\n\\\\nYandexQ2财报公布：GMV增长53%，活跃买家达1820万\\\\n\\\\n 热门活动\\\\n\\\\n进行中\\\\n\\\\n链新机 启新局—亚马逊全球开店2026春耕大会·厦门站\\\\n\\\\n 其他\\\\n\\\\n 04-09 周四\\\\n\\\\n立即报名进行中\\\\n\\\\n进化新纪元·AI重构POD全球出海增长峰会\\\\n\\\\n 其他\\\\n\\\\n 04-16 周四\\\\n\\\\n立即报名\\\\n\\\\n 热门报告\\\\n\\\\n1\\\\n\\\\n《2025跨境电商行业年度报告》PDF下载\\\\n\\\\n 01-21 周三\\\\n\\\\n立即领取2\\\\n\\\\n《2025 TikTok Shop 年度调研报告》PDF下载\\\\n\\\\n 02-03 周二\\\\n\\\\n立即领取\\\\n\\\\n《2025上半年TikTok Shop调研报告-TT123》PDF下载\\\\n\\\\n 08-19 周二\\\\n\\\\n立即领取 [...] 突发！特朗普10%的全球关税已经生效\\\\n\\\\nAMZ123获悉，据外媒报道，近日，美国的关税政策经历了剧烈震荡。美东时间2月20日，美国最高法院以6比3的结果作出裁定，认定特朗普政府援引《国际紧急经济权力法》加征关税的做法越权。法院认为，该法并未明确授权总统以紧急状态为由开征大规模进口关税，政府此举缺乏足够法律依据。裁决公布后，特朗普当天即作出回应。他表示不同意法院的决定，但是同时签署行政令，正式终止此前依据《国际紧急经济权力法》实施的相关关税措施。这意味着，自2024年起以芬太尼危机等理由对多国加征的关税失去了法律支撑。但特朗普并未因此停下关税步伐。\\\\n\\\\n\\\\n\\\\n涨幅高达550%！Shopee巴西卖家费用将大幅调整\\\\n\\\\nMZ123获悉，近日，Shopee宣布，自2026年3月1日起，实施新的佣金和费用政策，并大幅调整每件商品的固定费用结构，同时优化免运费和支付补贴规则。相关调整适用于CNPJ和CPF两类卖家。在新的费率体系下，Shopee的基础佣金比例维持不变，仍为14%或20%，具体取决于卖家选择的佣金模式，但每件商品收取的固定费用将进行分级调整。自2026年起，79.99雷亚尔及以下商品固定费用仍为4雷亚尔；80至99.99雷亚尔区间为16雷亚尔；100至199.99雷亚尔为20雷亚尔；200雷亚尔以上为26雷亚尔。部分区间涨幅最高达550%，费率结构较以往更为细分。此次调整的核心变化之一是取消了100雷亚尔佣金上限。\\\\n\\\\n\\\\n\\\\n2025年出口额已突破千亿！SHEIN将投百亿建智慧供应链总部 [...] AMZ123选品观察员\\\\n\\\\n59667\\\\n\\\\n2024-08-20 15:53\\\\n\\\\n2024-08-20 15:53\\\\n\\\\n59667\\\\n\\\\nAMZ123选品观察员\\\\n\\\\nAMZ123获悉，近期，Helium10公布了8月份亚马逊上的10大热销产品，囊括家居、户外、手机配件等品类。\\\\n\\\\n1. LINENSPA记忆泡沫床垫\\\\n\\\\n4.5星级/123152个评价\\\\n\\\\n这款泡沫床垫使用缓解压力的记忆泡沫，可贴合使用者身体曲线，带来舒适感。床垫中含有冷却凝胶，有助于散发热量，以在睡眠时保持凉爽舒适。凭借这款产品，该品牌每月收入超过500万美元，累计获得超8万条五星好评。\\\\n\\\\n2. Zulay Kitchen电动搅拌器\\\\n\\\\n4.4星级/221432个评价\\\\n\\\\n这款搅拌器适用于制作咖啡、冰沙、奶昔等饮品，结构经久耐用，不易生锈或损坏，配套的金属支架使其易于存放。该产品获得了满分10分的Helium10 listing健康评分，上月购买量达到50000+。\\\\n\\\\n3. Apakkai防水贴纸套装\\\\n\\\\n4.4星级/2408个评价\\\\n\\\\n这款贴纸套装包含600张不同图案的帖子，可以轻松定制笔记本电脑、水瓶或其他随身携带的物品，是绝佳的返校季商品。贴纸采用PVC材料，具备防水功能且牢固耐用，撕下不易留痕。该产品的Helium10 listing健康评分达到满分10分，上月购买量超7000+。\\\\n\\\\n4. INIU便携式充电宝\\\\n\\\\n4.6星级/60099个评价\\\\n\\\\n该款充电宝厚度仅为0.5英寸，可轻松放入口袋或包中。充电宝采用3A高速充电，仅需一小时即可为iPhone充电78%。其独特的15层SmartProtect系统可防止设备过热和电池损坏。这款产品同样获得10分的Helium10 listing健康评分，五星好评率达78%。\\\\n\\\\n5. NEW\\'C手机钢化膜\\\\n\\\\n4.5星级/181759个评价\", \"score\": 0.13455996, \"raw_content\": null}, {\"url\": \"https://www.shopify.com/zh/blog/trending-products\", \"title\": \"畅销商品清单：2025年热销的20种在线产品（附营销技巧） - Shopify\", \"content\": \"根据谷歌搜索的数据，“malatonin gummies”（褪黑色素口香糖）这类的助眠补充剂搜索量上升了，而“magnesium spray”（钙镁喷剂）的搜索猛增三倍，说明人们越来越感兴趣探索如何在日常生活中以新的方式使用补充剂。\\\\n\\\\n补充剂产品业务适合大小企业主。Vital Melamins and Apothatote的创立者苏尔塔娜·奈勒（Sultana Nailor）是认证草药师，通过TikTok营销，成功打造了自己的草药王国，并热心帮助其它草药创业者。而像BPI Stores这样的大公司也深受零售商的欢迎。\\\\n\\\\n销售维生素及各类补充剂的主要营销策略：\\\\n\\\\n 与运动和保健网红合作，展示产品优点。\\\\n 突出满意顾客的好评。\\\\n 向常用顾客推销批量折扣或订阅机制。\\\\n\\\\n### 2. 护肤用品\\\\n\\\\n护肤品是又一类有着庞大市场的热销产品类别。现如今，不论年龄性别，人们都需要自我护理产品：洗面奶、润肤露、精华露等等。\\\\n\\\\n消费者们对具有可持续发展和道德理念、无残酷试验的高质量护肤用品越来越感兴趣。“hyaluronic acid serum”（水感玻尿酸超导精华）、“vegan skin care”（全素护肤品）和“retinol”（A醇）这些词的搜索频率都在不断上升。\\\\n\\\\n从2024年初始，“snail slime”（蜗牛精华）的谷歌搜索渐渐成为焦点。该产品内含蜗牛分泌液，可能有助于刺激人体产生更多胶原蛋白，并平缓发红的皮肤。\\\\n\\\\n销售护肤用品的策略：\\\\n\\\\n 与美容网红合作，展示护肤品的日常使用。\\\\n 售卖样品或小份装产品，让顾客有机会试用。\\\\n 展示真实顾客使用前和使用后的效果。\\\\n\\\\n### 3. 化妆品\\\\n\\\\n化妆品一直是热销产品，化妆行业也一直在开发新的工具和技巧，不断创新。\\\\n\\\\n“lip stain”（唇釉）高居热销商品榜，虽然平均每月的搜索量略下降，但搜索量持续不断，2024年势头不减。 [...] “lip stain”（唇釉）高居热销商品榜，虽然平均每月的搜索量略下降，但搜索量持续不断，2024年势头不减。\\\\n\\\\n热门化妆品的营销策略：\\\\n\\\\n像化妆品品牌Rare Beauty学习，通过明星赛琳娜·戈麦斯（Selena Gomez）的走红TikTok视频来给自己作宣传。\\\\n\\\\n制作化妆教程，帮助顾客从购买的产品中获得最大利益。\\\\n\\\\n### 4. 外套和夹克\\\\n\\\\n对外套和夹克的需求来自季节变化、时尚变迁，以及对户外活动日益增长的兴趣。经预测，2027年户外服饰市场将超越450亿美元（约3,150亿人民币）。这一产品类别的热销度仍将持续，后劲很足。\\\\n\\\\n做外套和夹克的代发货业务是个低成本生意好点子，但你必须确保能找到产品质量有保障、发货快速的供应商。\\\\n\\\\n你也可以考虑当某个服装品牌或零售店的联盟营销合作伙伴，销售这类热门产品。建立一个网站或社交媒体频道，做时尚服饰的评点和推销，并附上联盟链接。\\\\n\\\\n### 5. 自行车\\\\n\\\\n电动自行车革新了自行车领域。有了电力加持，日常通勤变得舒适顺畅，哪怕是在起伏不平的地势。这让更多人愿意选择骑自行车。\\\\n\\\\n近五年以来，人们对电动自行车的兴趣越来越大，每到夏季，搜索量便创新高。据估计，从现在起至2030年，电动自行车的销量将以每年10%的增幅上涨。届时，路上将会有770万量电动自行车。\\\\n\\\\n尽管尺寸比较大，也比较重，电动自行车仍可发展为成功的代发货业务。价值百万美元的公司Ebike Generation创始人约翰·墨菲（John Murphy）就是个好例子。他精心打造自己的代发货业务网站，营销内容专门针对特定的目标受众：使用电动自行车的猎人，他们需要安静而快速地游走于不同地区。\\\\n\\\\n📕 更多阅读：代发货策略全解：9步指南助力跨境新手盈利起飞！\\\\n\\\\n### 6. 艺术和手工材料 [...] 趋势变化迅速，所以请在下个季度回访Shopify网站，了解关于热门产品的最新分析。\\\\n\\\\n畅销商品如何评定？\\\\n\\\\n本文的畅销商品是根据Shopify商家数据统计而来，其中包括：\\\\n\\\\n Shopify商家年度销售最多的产品类别。\\\\n Shopify商家销售与上季度相比，涨势最多的产品类别。\\\\n\\\\n本文也参考了谷歌趋势的搜索数据，以及关键词研究工具Ahref，以全面洞察消费趋势。\\\\n\\\\n## 哪些商品已不再畅销？\\\\n\\\\n在瞬息万变的电商领域，今天的畅销的，很可能明天就过时了。\\\\n\\\\n根据最新数据，本文之前列出的以下产品已不再畅销：\\\\n\\\\n1. ### 唇彩\\\\n\\\\n唇彩是一种美容产品，它能提供持久的唇色，却没有不会像传统口红那样褪色，却也没有润唇膏的保湿功效。虽然唇彩仍然流行，但已不在今年的畅销榜单之首了。\\\\n\\\\n1. ### 抹茶\\\\n\\\\n如果你近年来光顾过咖啡店，一定看到过抹茶。抹茶是一种研磨得很细的绿茶粉，已成为一种流行的保健产品。尽管抹茶一直很受欢迎，但它也没有被列入今年的畅销榜单之首。\\\\n\\\\n1. ### 电动工具配件\\\\n\\\\n电动工具配件的全球销售额持续增长，但在今年的更新中，仅位列季度畅销产品。\\\\n\\\\n请记住，流行趋势是波动不止的。如果营销活动恰到好处，又社交媒体网红的支持，今天不畅销的产品在下一季也可能大卖。\\\\n\\\\n密切关注市场变化，确保你的销售产品目录能符合当前市场的需求。\\\\n\\\\n## 如何寻找畅销商品？\\\\n\\\\n若能找到合适的畅销商品线上销售，就能彻底革新你的电商业务。这一切都要靠了解市场，明白消费者所需，并且在合适的时机提供优质客户服务。\\\\n\\\\n以下两种方法可供参考，为你的线上商店寻找有潜力的畅销产品。\\\\n\\\\n### 谷歌趋势（Google Trends）\\\\n\\\\n谷歌趋势是个免费工具，可用来查找全世界的用户都在搜索什么内容。以下是使用谷歌趋势的步骤：\", \"score\": 0.12458555, \"raw_content\": null}, {\"url\": \"https://sell.amazon.com/zh/blog/products-to-sell\", \"title\": \"2026年将有18款高需求和热门产品在网上销售 - Sell on Amazon\", \"content\": \"Sellers are achieving ecommerce growth with Amazon\\\\n\\\\nIndependent sellers in the US averaged more than $290,000 in annual sales in the Amazon store in 2024.\\\\n\\\\nSee more Amazon selling stats\\\\n\\\\n### 3。 美容与个人护理\\\\n\\\\n美容和个人护理类别是另一个表现稳定的行业，对于那些寻求高需求产品销售的人来说，它可能是一个利润丰厚的行业。 客户经常在寻找能够增强外观和健康感的创新、优质的产品。\\\\n\\\\n#### 需要考虑的产品：强大补丁\\\\n\\\\nMighty Patch 在TikTok上因护肤网红而声名鹊起，并获得了名人、美容和时尚杂志编辑以及亚马逊客户的热烈评价。 青春痘补丁已成为一种趋势，以至于在公共场合佩戴它们已成为名人所接受的时尚宣言。\\\\n\\\\n尽管有这种趋势，但客户提到，Mighty Patch 效果不错且易于使用，即使在敏感皮肤上也是如此。 它甚至获得了超过14万的全球收视率，其中近90％是四星或以上。\\\\n\\\\n### 4 和 5。 家居和厨房以及厨房和餐厅\\\\n\\\\n家居和厨房类别涵盖了各种各样的产品，并继续包括亚马逊商店中的许多畅销产品。 客户经常在寻找省时、高效、时尚的家居必需品，让他们的生活更轻松。 同样，厨房和餐饮类别一直被评为电子商务领域表现最好的公司，原因有很多：\\\\n\\\\n 烹饪爱好者和家庭烹饪趋势的兴起增加了人们对厨房用品、炊具和餐饮必需品的兴趣。\\\\n 随着人们花时间在家制作难忘的饭菜，对创新工具和优质产品的需求仍然强劲。\\\\n 举办聚会（例如晚宴和家庭活动）的趋势也增加了人们对时尚餐具和配饰的需求。\\\\n\\\\n#### 值得考虑的产品：Stanley Quencher、Owala 和 HydroJug [...] ### 8。 运动和户外\\\\n\\\\n运动和户外类别是电子商务中另一个受欢迎的类别，客户不断寻找可以增强户外体验或帮助他们实现健身目标的产品。 在夏季和圣诞节等假日季节，这一类别的需求也激增，那时人们更有可能进行户外活动或购买礼物。\\\\n\\\\n#### 需要考虑的产品：冰袋\\\\n\\\\nFit & Fresh Coolers 可重复使用的冰袋因其多功能性和实用性而成为您的电子商务商店的不错选择。 这些冰袋专为长时间保持凉爽温度而设计，非常适合保持午餐的新鲜、支持户外活动和增强运动体验。 它们可重复使用这一事实吸引了具有环保意识的客户，因为它可以减少一次性替代品的浪费。 此外，它们小巧轻便的设计使其便于旅行、野餐和健身包。\\\\n\\\\n随着健康和保健趋势的持续增长，提供可靠的冷却解决方案符合活跃个人和家庭的需求，使其成为满足稳定需求和重复购买的有前途的产品。\\\\n\\\\n### 9。 宝贝\\\\n\\\\n婴儿类是电子商务领域另一个表现最好的产品，他们对满足新生儿和年幼儿童需求的产品需求不断。 当父母优先考虑孩子的健康时，他们一直在寻找高品质、安全和实用的产品。\\\\n\\\\n#### 需要考虑的产品：WaterWipes 婴儿湿巾\\\\n\\\\nWaterWipes 婴儿湿巾凭借其独特的成分和安全性，在竞争激烈的婴儿用品市场中脱颖而出。 这些湿巾由 99.9% 的纯净水和一滴水果提取物制成，不含有害化学物质，非常适合在敏感的新生儿皮肤上使用。\\\\n\\\\n家长们经常称赞 WaterWipes 温和有效，可以缓解与尿布疹和皮肤刺激相关的常见问题。 该品牌在医疗保健专业人士中赢得了良好的声誉，进一步树立了其信誉。\\\\n\\\\n随着人们越来越意识到为儿童提供安全、天然的产品的重要性，WaterWipes有望进入一个父母越来越愿意为宝宝投资优质选择的市场。 这种安全性、有效性和品牌信任的结合使得 WaterWipes 成为一款极具吸引力的在线销售产品。\\\\n\\\\n### 10。 宠物用品 [...] 当您开始在亚马逊商城开店时，可获得超过 $50,000 的潜在奖励。 了解如何操作\\\\n\\\\n 搜索\\\\n English\\\\n\\\\n  ### 选择您的首选语言\\\\n\\\\n  + English - US\\\\n  + Español - US\\\\n  + 中文 - CN\\\\n\\\\n当您开始在亚马逊商城开店时，可获得超过 $50,000 的潜在奖励。 了解如何操作\\\\n\\\\nSTART\\\\n\\\\nSTART  亚马逊畅销书排行榜上有18款高需求商品  1。 电子产品  2。 服装、鞋履和珠宝  3。 美容与个人护理  4 和 5。 家居和厨房以及厨房和餐厅  6。 健康与家居  7。 玩具和游戏  8。 运动和户外  9。 宝贝  10。 宠物用品  11。 家电  12。 手机和配件  13。 电脑和配件  14。 视频游戏  15。 乐器  16。 工具和家居装修  17。 露台、草坪和花园  18。 艺术品、手工艺品和缝纫业  发现热门产品并增加需求的 5 个步骤  4 种工具可帮助您找到要在线销售的高需求产品  1。 产品机会浏览器  2。 成长机会  3。 B2B 产品机会报告  4。 谷歌趋势  吸引客户的6个营销技巧  1。 设定有竞争力的价格  2。 优化房源  3。 提供快速、免费配送  4。 试试用 Prime 购买  5。 做广告  6。 分析销售指标\\\\n\\\\n拓展您的业务\\\\n\\\\n# 2026年将有18款高需求和热门产品在网上销售\\\\n\\\\n## 查看要销售的最新高需求产品，并学习如何使用亚马逊工具找到下一个畅销产品。\\\\n\\\\nJan 16, 2026\\\\n\\\\n6 Min read\\\\n\\\\nMickey Toogood\\\\n\\\\n Copy\\\\n\\\\n  Link copied\\\\n Twitter\\\\n Print)\\\\n LinkedIn\\\\n\\\\n Copy\\\\n\\\\n  Link copied\\\\n Twitter\\\\n Print)\\\\n LinkedIn\\\\n\\\\n注册\\\\\\\\\", \"score\": 0.11585087, \"raw_content\": null}, {\"url\": \"https://m.cifnews.com/article/174765\", \"title\": \"亚马逊选品热门产品解读第64期，今年夏季爆款产品诞生了 - 雨果跨境\", \"content\": \"产品没有查询专利，也没有核算利润，产品能不能做，需要结合自身情况，毕竟总有佼佼者能做出好产品，也能运营好产品，这些都是值得小杜不断学习和思考的。\\\\n\\\\n以上图片均来源于：卖家精灵，shulex VOC\\\\n\\\\n（来源：跨境选品星球）\\\\n\\\\n以上内容属作者个人观点，不代表雨果跨境立场！本文经原作者授权转载，转载需经原作者授权同意。\\u200b\\\\n\\\\n\\\\n\\\\n  跨境选品星球\\\\n\\\\n+ 关注 已关注 取消关注\\\\n\\\\n 关于我们\\\\n 加入我们\\\\n 爆料投稿\\\\n 用户协议\\\\n 隐私政策\\\\n\\\\n 联系我们\\\\n 合作伙伴\\\\n 展会合作\\\\n 意见反馈\\\\n 版权声明\\\\n\\\\n 雨果跨境APP\\\\n CCEE选品\\\\n 雨果果园\\\\n 观察员计划\\\\n 跨境标签\\\\n\\\\n雨果AI活动日精选跨境工具AI内容创作AI选品AI营销AI客服AI办公自动化AI实战视频库AI活动回顾爱创作酷家乐布尔向量Vidaukeble\\\\n\\\\n跨境产业园聚合页汕头（濠江）象屿跨境电商产业园产业园搜索页\\\\n\\\\nTemu半托管Temu全托管速卖通半托管速卖通全托管lazada全托管Shopee全托管TikTok全托管亚马逊全托管TikTok美国站SheinTikTokJumia开店Shopee开店Fruugo开店eprice开店OnBuy开店nocnoc开店Lazada开店美客多开店OZON开店Newegg开店eMAG开店PerFee开店Allegro开店Fnac开店 Wayfair开店ManoMano开店Etsy开店日本乐天开店Fordeal开店沃尔玛开店Gmarket开店\\\\n\\\\n广州产业带深圳产业带义乌产业带东莞产业带南通产业带杭州产业带泉州产业带金华产业带白云产业带昆明产业带温州产业带临沂产业带开封产业带东营产业带大朗产业带重庆产业带汕头产业带佛山产业带 [...] 出海导航TikTok导航节日营销导航海外公司注册跨境电商专利美国商标注册跨境导航亚马逊导航虾皮导航速卖通导航shopify导航ebay导航北美卖家导航欧洲卖家导航东南亚卖家导航澳洲卖家导航南美卖家导航非洲卖家导航南亚卖家导航日韩卖家导航国际站卖家导航外贸导航\\\\n\\\\nCCEE选品展亚马逊知识库亚马逊新手指南亚马逊低价商店TikTokFalabella平台简介oceanweb智能营销平台海外众筹拼多多Temu快手kwai广告SHEIN开店入驻京东物流雨果跨境跨境电商空中云汇派安盈JS桨歌船长biFacebook开户Google开户美国商标注册亚马逊代运营俄罗斯物流跨境电商选品展美国物流万里汇\\\\n\\\\n开发者：雨果跨境（厦门）科技有限公司  \\\\n©2013雨果跨境闽ICP备11004599号-1，闽ICP备11004599号-3，闽ICP备11004599号-4，闽ICP备11004599号-5,闽公网安备35020602003453号 [...] 3.年度增长强化\\\\n\\\\n2017–2018两年，年峰值合计搜索量约123 k–133 k；2019和2020年峰值分别攀升至251 k和307 k；2021–2023年峰值进一步触及312 k、356 k、363 k，2024年更创出513 k的历史最高。近两年（2023→2024）峰值增长率高达≈41%（363 k→513 k），显示出后疫情时代户外家居消费的爆发式增长。\\\\n\\\\n4.关键词结构演变\\\\n\\\\n早期（2017–2018）主导词为“mister”（单机喷雾器）和“misting system”（整体雾化系统），合计占比超80%。\\\\n\\\\n2019起，“misters for outside patio”迅速崛起，从3月的2300次跃升至当年7月的123000次，首度分流主流搜索流量。\\\\n\\\\n2021–2022，“patio misters for cooling outdoor”及“water mister”等更长尾、用途更细分的关键词开始活跃，分别在2021年6月和2022年初首次出现并快速成长，成为进一步挖掘细分用户需求的入口。\\\\n\\\\n04类目分析\\\\n\\\\n通过畅销榜单不难看出，外观可分为软水管和立式的两种：\\\\n\\\\n1.软水管款式\\\\n\\\\nASIN数：75，月总销量：23625，平均bsr：54547，平均价格30.99美金，平均评分4.3，平均评分数：662，平均上架时间2年10个月。\\\\n\\\\n2.立式款式\\\\n\\\\nASIN数：26，月总销量：6950，平均bsr：55601，平均价格30.60美金，平均评分4.4，平均评分数：102，平均上架时间11个月。\", \"score\": 0.087634265, \"raw_content\": null}], \"response_time\": 1.6, \"request_id\": \"54ac2594-3085-48d4-9f06-4d8017bebe18\"}'}}]", "module": "chat_service", "function": "process_message", "line": 149}
{"timestamp": "2026-02-26 18:08:16,253", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 27: 2 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:16,296", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 28: 3 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:16,339", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 29: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:16,468", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 30: 3 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:16,582", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 31: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:16,714", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 32: 10 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:16,845", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 33: 3 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:17,489", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] updates data: {'model': {'messages': [AIMessage(content='让我搜索更具体的信息，关于海蓝之谜护肤品的热门产品和用户评价：\\n\\n\\n', additional_kwargs={'tool_calls': [{'index': 0, 'id': 'call_fbbc58849a0e45608e059d', 'type': 'function', 'function': {'name': 'web_search', 'arguments': '{\"query\": \"海蓝之谜 面霜 精华 用户真实评价 小红书\"}'}}]}, response_metadata={'finish_reason': 'tool_calls', 'request_id': '364b8e2b-6330-422c-8b6c-7efe1c9966c9', 'token_usage': {'input_tokens': 13303, 'output_tokens': 57, 'total_tokens': 13360, 'prompt_tokens_details': {'cached_tokens': 0}}}, id='lc_run--019c996b-a5b1-7a12-9005-362c38bf4921', tool_calls=[{'name': 'web_search', 'args': {'query': '海蓝之谜 面霜 精华 用户真实评价 小红书'}, 'id': 'call_fbbc58849a0e45608e059d', 'type': 'tool_call'}], invalid_tool_calls=[])]}}", "module": "chat_service", "function": "process_message", "line": 144}
{"timestamp": "2026-02-26 18:08:17,491", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] source=model, update keys=dict_keys(['messages'])", "module": "chat_service", "function": "process_message", "line": 146}
{"timestamp": "2026-02-26 18:08:17,492", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] formatted_list=[{'type': 'tool_call', 'data': {'names': ['web_search']}}]", "module": "chat_service", "function": "process_message", "line": 149}
{"timestamp": "2026-02-26 18:08:17,493", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 34: 20 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:23,764", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] updates data: {'tools': {'messages': [ToolMessage(content='{\"query\": \"海蓝之谜 面霜 精华 用户真实评价 小红书\", \"follow_up_questions\": null, \"answer\": null, \"images\": [], \"results\": [{\"url\": \"https://beaut.taobao.com/topic/ruye_13/acb7222891d4ba6fffa3d3baa63ed7bc.html\", \"title\": \"烂脸救星还是智商税？LAMER海蓝之谜精华面霜100ml真实测评  抗痘 ...\", \"content\": \"Slide 1\\\\nSlide 2\\\\nSlide 3\\\\nSlide 4\\\\n\\\\n# 💥烂脸救星还是智商税？LAMER海蓝之谜精华面霜100ml真实测评🔥抗痘修护全攻略！\\\\n\\\\n烂脸期真的能靠LAMER海蓝之谜精华面霜逆袭吗？🔥本敏感肌+痘肌老阿姨亲测1个月，从爆痘红肿到稳定细腻，这罐“面霜界爱马仕”到底值不值得砸钱？本篇无滤镜真实测评，带你全面解析LAMER修护抗痘的隐藏功效，成分党、痘肌姐妹必看！💥\\\\n\\\\n## ✨一、烂脸期的我为什么选了LAMER海蓝之谜精华面霜？\\\\n\\\\n姐妹们，你们有没有那种“明明皮肤已经烂到不行，但市面上的面霜一个都不敢用”的崩溃时刻？😭  \\\\n我就是那种换季必烂脸、熬夜必爆痘的敏感肌+痘肌混合体！  \\\\n之前用过一堆号称“修护力强”的面霜，结果不是闷痘就是刺痛，真的快被折磨疯了..  \\\\n刷到小红书一堆姐妹说LAMER面霜是“烂脸期救星”，我抱着“死马当活马医”的心态入了这罐100ml的精华面霜！  \\\\n✨重点来了：它主打修护+抗痘+维稳，成分党都懂，修护抗痘不冲突才是王道！\\\\n\\\\n## 🌿二、成分党看过来！LAMER面霜到底有什么神仙成分？\\\\n\\\\n作为成分党+护肤狂魔，我必须扒一扒这罐“贵妇面霜”的配方👇  \\\\n✅核心成分：神奇活性精萃（Miracle Broth™）——LAMER的灵魂配方，主打修护屏障、舒缓镇定  \\\\n✅抗痘成分：薄荷醇——有轻微清凉感，帮助舒缓炎症痘痘  \\\\n✅维稳成分：海藻提取物+甘油+矿脂——深层保湿不刺激，敏感肌友好  \\\\n⚠️注意：矿脂（凡士林）成分对部分人可能会闷痘，但我的肤质竟然意外兼容！  \\\\n💡小Tips：LAMER建议使用前先在掌心乳化，质地会更轻薄，吸收更快～我亲测有效！\\\\n\\\\n## 🔥三、实测1个月！LAMER面霜真的能抗痘修护吗？ [...] ## 🔥三、实测1个月！LAMER面霜真的能抗痘修护吗？\\\\n\\\\n姐妹们，我实测了整整一个月，从爆痘期→维稳期→皮肤细腻期，真的有变化！💥  \\\\n🔥爆痘期使用感：  \\\\n- 第1周：刚上脸有点厚重，但没闷痘，反而有种“被保护住”的安心感  \\\\n- 第2周：脸颊泛红明显减轻，痘痘红肿感减弱，上妆不卡粉了！  \\\\n- 第3周：闭口开始平了，皮肤摸起来顺滑很多，毛孔有变小的趋势  \\\\n- 第4周：整张脸状态稳定，没有再爆新痘，素颜也敢开原相机了！📸  \\\\n✨总结：LAMER这款精华面霜对“烂脸期+敏感痘肌”的修护效果是真的可以打！但油痘肌姐妹建议先试小样，毕竟不是所有人都适合矿脂成分～\\\\n\\\\n## 💡四、LAMER精华面霜适合哪些人？避雷指南来啦！\\\\n\\\\n⚠️适合人群：  \\\\n✔️敏感肌+屏障受损肌  \\\\n✔️干皮+混干+轻度痘肌  \\\\n✔️需要修护+维稳+抗老的姐妹  \\\\n❌不适合人群：  \\\\n❌重度油痘肌（矿脂成分可能闷痘）  \\\\n❌预算有限的学生党（价格确实不便宜）  \\\\n❌喜欢清爽水感质地的姐妹（它偏滋润型）  \\\\n✨小建议：如果你是油痘肌但皮肤屏障受损严重，可以尝试“局部点涂”法，避开T区，重点修护脸颊和下巴～\\\\n\\\\n## 🎁五、LAMER精华面霜的隐藏用法！解锁更多护肤玩法！\\\\n\\\\n除了日常面霜使用，我还在护肤达人的安利下解锁了几个隐藏玩法👇  \\\\n1️⃣【急救面膜】：厚厚涂一层当睡眠面膜，第二天皮肤嫩到能掐出水💦  \\\\n2️⃣【妆前打底】：少量涂抹在脸颊干燥区，上妆更服帖不卡粉！  \\\\n3️⃣【局部修护】：点涂在泛红/爆痘处，修复力真的肉眼可见！  \\\\n💡Bonus玩法：搭配美容仪使用，吸收效果翻倍，贵妇感直接拉满👑\\\\n\\\\nLAMER海蓝之谜经典精华面霜100ml修护抗痘神奇面霜\\\\n\\\\n### LAMER海蓝之谜经典精华面霜100ml修护抗痘神奇面霜\\\\n\\\\n## 更多相关推荐\\\\n\\\\n素颜也能美到炸街？这款贵妇膏让我重新定义“懒人养肤” [...] ### 当夜晚成为肌肤的修复仪式——与#SarahChapman少女线面霜的温柔相遇\\\\n\\\\n夜色深沉，城市归于寂静，我常在这一刻打开这瓶#SarahChapman少女线面霜。它不是普通意义上的护肤品，而是一段关于时光、自我关怀和温柔坚持的故事。在这篇文章中，我想分享的是如何让肌肤在夜晚悄然焕活，重拾年轻...\\\\n\\\\n实测暴打！故事与她三型胶原强控吸油百肽霜，抗油抗皱不掉线\\\\n\\\\n### 实测暴打！故事与她三型胶原强控吸油百肽霜，抗油抗皱不掉线\\\\n\\\\n这款故事与她三型胶原强控吸油百肽霜，号称“控油+抗皱二合一”，我们直接上手测试：能不能扛住高强度出油？质地够不够清爽？有没有真正的紧致效果？今天就用最硬核的方式给你答案。\\\\n\\\\n姐妹们！黄黑皮救星来了！这瓶水初语美白淡斑霜我真的太爱了！\\\\n\\\\n### 姐妹们！黄黑皮救星来了！这瓶水初语美白淡斑霜我真的太爱了！\\\\n\\\\n黄黑皮、暗沉肌、小细纹、色斑困扰？这款水初语美白淡斑霜真的让我感动到哭！从成分到质地再到效果，每一处都超乎期待，学生党也能轻松驾驭的宝藏面霜。\\\\n\\\\n【精准护肤推荐】复方熊果苷乳霜：毛孔粗大与暗沉的科学解决方案\\\\n\\\\n### 【精准护肤推荐】复方熊果苷乳霜：毛孔粗大与暗沉的科学解决方案\\\\n\\\\n本文基于成分分析，深入解读复方熊果苷乳霜的核心配方体系及功效机制，适合有改善毛孔粗大、提亮肤色需求的肌肤类型，结合专业质检视角为您解析其科学价值。\\\\n\\\\n【赛博朋克大叔的护肤仪式感！这瓶蓝钻面霜让我从“油腻”到“发光”】\\\\n\\\\n### 【赛博朋克大叔的护肤仪式感！这瓶蓝钻面霜让我从“油腻”到“发光”】\\\\n\\\\n姐妹们！今天要带你们冲一波高端护肤界的“顶流男神”——碧欧泉男士御尊蓝钻面霜！这不是普通的面霜，是为成熟男人量身定制的“反龄神器”！\\\\n\\\\n敏感肌救星来了！麦吉丽肌源修护啫喱实测深度解析\\\\n\\\\n### 敏感肌救星来了！麦吉丽肌源修护啫喱实测深度解析\", \"score\": 0.8036831, \"raw_content\": null}, {\"url\": \"https://beaut.taobao.com/topic/ruye_13/15ecfc298e48c844cea7143da7fc5e32.html\", \"title\": \"值不值？LA MER精华面霜深度测评！60ml究竟能用多久？\", \"content\": \"## 🌟从“豆腐渣”到“水豆腐”，LA MER真的能改善肤质？\\\\n\\\\n我以前是那种皮肤又干又敏感，还容易长闭口的“问题肌”，用了LA MER精华面霜之后，真的有被惊艳到！  \\\\n✨肤质变化：  \\\\n- 皮肤弹性变好了，手指一捏就弹回来  \\\\n- 毛孔细腻了不少，上妆不卡粉  \\\\n- 肤色提亮了，素颜也有光泽感  \\\\n💡搭配建议：  \\\\n- 搭配LA MER精华水，修复力1+1＞2  \\\\n- 晚上用它当睡眠面膜，第二天皮肤超嫩  \\\\n- 搭配按摩手法，提升吸收力  \\\\n🔥真实反馈：它不是那种“立竿见影”的产品，而是慢慢调理皮肤，让肤质变得稳定、健康。坚持用下来，真的能感受到皮肤变“高级”了！\\\\n\\\\n## 💎贵妇护肤的正确打开方式，你get了吗？\\\\n\\\\n姐妹们，护肤不是越贵越好，但如果你的皮肤真的需要修复、保湿、提亮，那LA MER精华面霜绝对值得你拥有！  \\\\n✅适合人群：  \\\\n- 敏感肌、干皮、换季烂脸星人  \\\\n- 想要改善肤质、提升皮肤弹性的姐妹  \\\\n- 想尝试贵妇护肤但又怕踩雷的你  \\\\n💡小建议：  \\\\n- 第一次用可以先从5ml的旅行装开始  \\\\n- 搭配按摩手法效果更佳  \\\\n- 不要贪多，适量使用就好  \\\\n🎉最后敲黑板：贵妇护肤不是智商税，而是对皮肤的投资！如果你的皮肤真的需要修复、保湿、提亮，那这罐“绿瓶子”值得你拥有！\\\\n\\\\nLA MER海蓝之谜精华60ml经典面霜保湿修复嫩肤弹性改善皮肤\\\\n\\\\n### LA MER海蓝之谜精华60ml经典面霜保湿修复嫩肤弹性改善皮肤\\\\n\\\\n## 更多相关推荐\\\\n\\\\n黄皮姐妹听我说！这瓶“肌肤灭火器”真的能救你于水火\\\\n\\\\n### 黄皮姐妹听我说！这瓶“肌肤灭火器”真的能救你于水火 [...] 黄皮姐妹听我说！这瓶“肌肤灭火器”真的能救你于水火\\\\n\\\\n### 黄皮姐妹听我说！这瓶“肌肤灭火器”真的能救你于水火\\\\n\\\\n如果你是那种一换季就脸红、干到起皮、还总感觉皮肤在“闹脾气”的人，那这篇一定要看完。我今天要给你们种草的这款【粉悦之匙神经酰胺舒缓保湿特护乳霜】，是我最近护肤最得力的帮手之一，专治各种“红丝”和“火烧...\\\\n\\\\nCeraVe适乐肤神经酰胺屏障修护润肤霜：重塑肌肤屏障的终极方案\\\\n\\\\n### CeraVe适乐肤神经酰胺屏障修护润肤霜：重塑肌肤屏障的终极方案\\\\n\\\\n在现代高强度的生活节奏下，皮肤屏障受损已成为普遍现象。CeraVe适乐肤神经酰胺屏障修护润肤霜凭借其科学配方与精准功效，为用户提供了一种高效且稳定的修护解决方案。\\\\n\\\\n男士理容新宠：焕颜精华清洁霜，懒人兄弟的清洁王炸\\\\n\\\\n### 男士理容新宠：焕颜精华清洁霜，懒人兄弟的清洁王炸\\\\n\\\\n别再用搓澡巾磨脸了！这款焕颜精华清洁霜，专为男士打造，三分钟搞定深层清洁，省出时间打游戏，还你清爽干净的脸蛋。\\\\n\\\\n金丝玉帛三因抗皱淡纹精华日霜晚霜，我的脸被它宠坏了！✨\\\\n\\\\n### 金丝玉帛三因抗皱淡纹精华日霜晚霜，我的脸被它宠坏了！✨\\\\n\\\\n姐妹们，今天我要和你们聊聊这款让我从“垮脸星人”变身“冻龄女神”的\\\\\\\\金丝玉帛三因抗皱淡纹精华日霜晚霜\\\\\\\\！不仅有玻色因成分加持，还有紧致提亮的魔法力，真的太适合我们这些想要对抗初老的打工人了！...\\\\n\\\\n油皮救星来了！春娟黄芪氨基酸洁面慕斯深度测评\\\\n\\\\n### 油皮救星来了！春娟黄芪氨基酸洁面慕斯深度测评\\\\n\\\\n春娟黄芪氨基酸温和洁面慕斯主打保湿与清洁双重功效，专为油性肌肤设计。通过质地、清洁力和保湿力三大维度评测，确认它在同类产品中具备极强竞争力。\\\\n\\\\n这个肤研美白祛斑霜，让我爱上了护肤的仪式感✨\\\\n\\\\n### 这个肤研美白祛斑霜，让我爱上了护肤的仪式感✨ [...] 这个肤研美白祛斑霜，让我爱上了护肤的仪式感✨\\\\n\\\\n### 这个肤研美白祛斑霜，让我爱上了护肤的仪式感✨\\\\n\\\\n今天要和大家分享一款让我一用就沦陷的\\\\\\\\肤研美白祛斑霜\\\\\\\\，它的质地、功效和香味真的太治愈了，每次使用都像在给皮肤做一场温柔的SPA。如果你也在寻找一支能真正改善肌肤暗沉、淡化色斑的护肤品，那你一定不能错过它...\\\\n\\\\n当生物科技邂逅时光的哲思：ASKE白细胞DNA驻颜能量乳\\\\n\\\\n### 当生物科技邂逅时光的哲思：ASKE白细胞DNA驻颜能量乳\\\\n\\\\n在护肤界，真正的“艺术”从来不是花哨的包装，而是在科学与文化之间找到那条最微妙的平衡线。ASKE白细胞DNA驻颜能量乳，以\\\\\\\\生物活性因子\\\\\\\\为核心，用一场关于细胞修复与肌肤重生的现代寓言，为我们讲述“焕肤”背后...\\\\n\\\\n当肌肤遇见清晨露水，芮俏水晶番茄爆水霜唤醒沉睡的野性之美\\\\n\\\\n### 当肌肤遇见清晨露水，芮俏水晶番茄爆水霜唤醒沉睡的野性之美\\\\n\\\\n这瓶来自大地的馈赠，像清晨第一滴露珠落在脸上，温柔却不失力量。它是\\\\\\\\芮俏水晶番茄爆水霜\\\\\\\\，用植物的力量与自由的灵魂对话。\\\\n\\\\n被四国专利宠爱的美白面霜，让肌肤像春天一样透亮\\\\n\\\\n### 被四国专利宠爱的美白面霜，让肌肤像春天一样透亮\\\\n\\\\n哈喽宝宝们！今天想和大家聊聊这款让我彻底心动的\\\\\\\\宝乐果保乐活美白紧致霜润肤淡斑面霜四国专利淡斑boroh官方正品\\\\\\\\，它不仅有“四国专利”加持，还有超治愈的使用体验，真的是一支能带来好心情的护肤面霜～\\\\n\\\\n敏感肌兄弟别再扛了！这瓶修红霜才是真·救星\\\\n\\\\n### 敏感肌兄弟别再扛了！这瓶修红霜才是真·救星\\\\n\\\\n如果你是那种一换季就红脸、起皮、刺痛的敏感肌，那听我一句劝，赶紧试试薇诺娜舒敏保湿修红霜。这玩意儿不吹不黑，\\\\\\\\修护+保湿+舒缓\\\\\\\\一步到位，省出时间打游戏，省出钱买点好装备。\\\\n\\\\nTaobao | 淘宝\", \"score\": 0.7237202, \"raw_content\": null}, {\"url\": \"https://mall.ifeng.com/c/8R2gKLs46p3\", \"title\": \"终于实现海蓝之谜自由了！大几千的贵妇面霜，4瓶到手才200多\", \"content\": \"# 终于实现海蓝之谜自由了！大几千的贵妇面霜，4瓶到手才200多\\\\n\\\\n我猜有多少小仙女还没重视起保养？\\\\n\\\\n仗着年轻，熬夜、敷衍式护肤，各种“胡作非为”！\\\\n\\\\n照镜子的时候看见脸上的干纹和小细纹才惊觉，已经到了必须要好好养护的时候了！\\\\n\\\\n都说女生过了25岁，脸就开始走下坡路了，出现各种变老特征。\\\\n\\\\n法令纹痕迹变重，面部轮廓不清晰，甚至脸也开始发腮变大，即使微微的改变，视觉造成的差异也甚是明显。👇\\\\n\\\\n所以说抗初老真的越早开始越好，胶原蛋白流逝才不会听你的悔恨！\\\\n\\\\n当你都肉眼可见细纹的时候，有一些皱纹已经是无法补救的了。\\\\n\\\\n但是不知道大家有没有发现，很多明星即便到了一定年纪，也依旧看不出实际年龄。\\\\n\\\\n皮肤水润有光泽，，一言不合就被大家称为“不老女神”。\\\\n\\\\n后来才知道她们日常使用的都是大牌护肤品，尤其是La Mer海蓝之谜，这个数一数二的贵妇级品牌，直接霸屏了她们的梳妆台。\\\\n\\\\n小花赵丽颖参加《中餐厅》，化妆台上就有海蓝之谜的身影↓\\\\n\\\\n要说明星有钱用得起也就算了，可小红书上素人多吧，随便一搜，竟有高达55万+的推荐笔记，\\\\n\\\\n好多姐妹人生第一个大牌护肤品就给了海蓝之谜！\\\\n\\\\n小编也是吃巨资买了这个面霜，皮肤状态好了不止一点点。\\\\n\\\\n小编不得不承认的是：钱多一点，时间就走得慢一点。\\\\n\\\\n起码在我们的脸上，砸下的钱多or少展示出来的年龄——差别真就挺大的，\\\\n\\\\n但是，也着实是太贵了呀！！\\\\n\\\\n30ml容量的面霜，官方售价就要1690元，对上班族妹子来说可能半个月工资就去了！！\\\\n\\\\n作为薅羊毛从不迟到的小编，一听到有一批海蓝之谜经典面霜组合7ml\\\\\\\\4礼盒装\\\\n\\\\n赶紧去要来了库存，今天特惠到手279元/套，折合下来都不到官网零头，直接省下上千！\\\\n\\\\n也就是说279到手接近30ml正装面霜的量，我相信会算账的姐妹肯定已经在下单了，真的无敌巨划算！！！\\\\n\\\\n这下还用等什么618？闭眼入也不吃亏啊！ [...] 海蓝之谜面霜强大的养护能量，对受损肌肤有很好的维稳作用。\\\\n\\\\n作为Lamer家的招牌，这款面霜被誉为化妆品界的奇迹。\\\\n\\\\n那么，鼎鼎大名的贵妇品牌海蓝之谜（Lamer）的面霜，到底为什么这么神奇且万能？\\\\n\\\\n主要是靠着2大专利成分：\\\\n\\\\n核心成分1——神奇活性精萃Miracle Broth™，它的诞生背后还有一个小故事：\\\\n\\\\n半个世纪前，美国太空物理学家麦克斯·贺伯博士，不幸在一次实验室的爆炸事故中，灼伤了面部皮肤。\\\\n\\\\n为了找回容颜，创始人麦克斯·贺伯博士用超乎寻常的提炼方法——低温低压的生物发酵技术。\\\\n\\\\n配合模拟海底自然环境的“声纳”和特定频率的闪烁光线，让海藻像在海底一样发酵。\\\\n\\\\n经过12年、6000多次试验才研究出的活性复活物，终焕变他的肌肤。\\\\n\\\\n海蓝之谜也将神奇活性精萃Miracle Broth™融入了每一件产品中，是别家护肤品都没有的成分。\\\\n\\\\n这是从美国加州无污染海域里的巨藻中提取的发酵物，具有非常强大的养护能力。\\\\n\\\\n它是海蓝之谜的专利核心成分，这是别家都没有的技术，也是它强于其他护肤品的原由。\\\\n\\\\n特别是换季过敏、经常“烂脸”的皮肤，精萃水的维稳力真的是一绝。\\\\n\\\\n不仅能够给肌肤长效保湿，还能够使肌肤变的透亮有光彩。\\\\n\\\\n核心成分2——酸橙茶精华\\\\n\\\\n这个成分能够帮助肌肤抵御外界伤害，预防肤色不均的问题。它跟神奇活性精萃可谓理想搭档。\\\\n\\\\n保存以上两种核心成分的，是靠它的液态晶体结构，所以这个面霜经过手指温热乳化之后，会更能释放鲜活能量。\\\\n\\\\n很多姑娘都说用过它之后，这辈子就再也没办法换面霜了，因为用过就不想要将就别的！\\\\n\\\\n3、\\\\n\\\\n冰激凌奶油质地，轻盈易吸收\\\\n\\\\n包装奢华大气 ，送礼之选~\\\\n\\\\n海蓝之谜的套盒永远不会令人失望，光是包装的颜值就已经让小编被吸引住了，非常奢华大气\\\\n\\\\n打开后就是我们的4个7ml的小面霜，非常精致，送人真的是非常不错的选择~ [...] 打开后就是我们的4个7ml的小面霜，非常精致，送人真的是非常不错的选择~\\\\n\\\\n打开面霜，就忍不住夸一下它的冰激凌奶油状质地，抹在手上顺滑，能感觉到比平常面霜的手感更加细腻。\\\\n\\\\n与别的面霜不同的是，这款面霜使用的时候，一定要先用双手揉搓乳化一下！才更能释放鲜活的修护能量。\\\\n\\\\n等它乳化成半透明的状态再上脸，这样是为了让皮肤的吸收变得更好。\\\\n\\\\n把它轻轻抹在脸颊上，就能很容易被皮肤吸收。\\\\n\\\\n在脸上最干的地方就先轻轻按压上去，其它地方再慢慢摩擦均匀，脸上就会变得滋润却不油腻了。\\\\n\\\\n换季的时候，每天涂抹海蓝之谜面霜，来维稳修护，用完皮肤像喝饱水一样，皮肤慢慢恢复健康状态。\\\\n\\\\n小样不仅方便旅行出差携带，还能够让新手尝试，看是否适合自己的肤感，再考虑入手正装~\\\\n\\\\n护肤一步到位，比正装更利于保鲜，即开即用。\\\\n\\\\n关键咱们资质齐全，品质保证，大家可以放心买，而且这样的大牌护肤品，不管是自己用还是送人都是非常不错的选择哦\\\\n\\\\n凰家尚品微信小程序二维码\\\\n\\\\n[责任编辑：陈鹏 PSY226]\\\\n\\\\n(本文章版权归凤凰网所有，未经授权，不得转载)\\\\n\\\\n2026央视春晚放大招！\\\\n\\\\n剃须刀界“劳S莱斯”，速抢！\\\\n\\\\n九龙窠的香喝过的人才懂！\\\\n\\\\n2025年全年三联生活周刊现在预定！\\\\n\\\\n听劝！秋冬把羽绒服换成它试试！\\\\n\\\\n2026央视春晚放大招！\\\\n\\\\n剃须刀界“劳S莱斯”，速抢！\", \"score\": 0.69274646, \"raw_content\": null}, {\"url\": \"https://www.chinanews.com.cn/cj/2024/08-16/10269870.shtml\", \"title\": \"揭秘小红书大牌护肤品“临期打折”陷阱 - 中国新闻网\", \"content\": \"难不成是换个“马甲”卷土重来？账号“Meeting好物优选”没有蓝V认证，也没有营业执照，仅显示店铺经营类型为“个人从事零星小额交易活动”。但是，该账号的笔记风格和此前一模一样，都是打着免税临期的名义低价卖货，在售的兰蔻系列商品也非常相似，已售数量最高达670。当要求商家提供品牌正品授权证书或者正品进货渠道证明，客服的回答较为模糊，“肯定有，但不给看”“老板不在，我也就是个客服，没有这些”。8月12日，记者再次点击进去，发现该账号店铺入口也已消失。\\\\n\\\\n\\u3000\\u3000值得关注的是，巫女士的遭遇并非个例。“我就是那个上当的人，买回来一眼假，对方也没出示品牌授权。”来自山东的李女士花费79元在小红书蓝V店铺“北风破美妆好物优选”买了临期特价的兰蔻菁纯面霜，最后只得凭借第三方平台鉴定证明才可退货退款。来自北京的方女士亦在相同店铺购买了同款产品，“目前还没退货成功，售后窗口也被关闭，正在等12315走流程处理。”\\\\n\\\\n\\u3000\\u3000在小红书平台，这股“临期打折”风越吹越烈，已波及众多大牌。“原价1180元的兰蔻小黑瓶精华液临期到手88元”“原价960元的海蓝之谜精粹水临期到手99元”……类似的蓝V店铺不在少数，且涉及CPB、阿玛尼、雅诗兰黛、LAMER等知名大牌，成为吸引消费者的“流量密码”，销量颇高，且过一段时间会以“短期清货完成”为由清空店铺和商品。\\\\n\\\\n\\u3000\\u3000一位海淘代购的从业人员告诉记者，未开封护肤品的保质期一般是两三年，距离限用期不足6个月可算临期产品，但这个没有明确的规范界定。另外，临期商品的来源很多，包括库存积压、撤柜回收、内购会员运损、消费退回等等，也由此衍生出了不少山寨货。 [...] 中新画报|国内|社会|国际|娱乐|体育|军事|科技|   \\\\n港澳台侨|凡人歌\\\\n\\\\n创意\\\\n\\\\n理论\\\\n\\\\n直播\\\\n\\\\n专题\\\\n\\\\n专栏\\\\n\\\\n     ，实付85元。“我之前在拼多多百亿补贴和丝芙兰线下专柜都有买过这款面霜，售价600多元或800多元，第一回看到价格这么低，就抱有了一丝侥幸心理。”她告诉羊城晚报记者，由于到手价与市场价有较大差异，购买前，她向店铺商家进行了多次确认。\\\\n\\\\n\\u3000\\u3000根据聊天记录截图，该店铺客服解释：“咱们家产品是海外免税版正品，2025年10月到期，海南三亚发货，产品支持7天无理由退货，有运费险，产品便宜是因为临期并且淡季特卖，请放心购买。”并明确向消费者承诺“支持验证”。\\\\n\\\\n\\u3000\\u3000三天后，巫女士收到了包裹，拆开后却发现“不太妙”。其一，商品介绍页面的发货地是海南三亚，但包裹快递单显示由汕头寄来；其二，她通过小程序查询批号，显示面霜生产日期是2023年10月1日，过期日期是2026年10月1日，不仅与商家描述不符，且距离到期还有两年多，与“临期”介绍也不相符；其三，她对比了之前手头的正品，发现气味、包装等各方面的差距都很大。\\\\n\\\\n\\u3000\\u3000令人哭笑不得的是，面霜的塑封包装上贴了一个“海南离岛免税商品溯源码”。从巫女士向记者提供的照片可以看到，该溯源码中间是一个二维码，下方则有“防伪标签涂层”，刮开后会获得一组“防伪密码”。用手机扫码后，会弹出一个名为“商品防伪查询中心”的网站，提示输入密码验证产品真伪。\\\\n\\\\n\\u3000\\u3000对此，业内相关人士向记者表示，海南离岛免税商品的溯源码没有需要刮开的防伪涂层，且个人消费者即使扫码后仅呈现“暂无权限查看”。记者通过阿里巴巴平台查询发现，类似海南离岛免税商品溯源码有多个商家出售，产品真假难辨。 [...] “浙BA”赋能文旅 新春延续“长尾效应”\\\\n\\\\n  2026年02月18日 16:13:32\\\\n\\\\n换一批\\\\n\\\\n推荐阅读\\\\n\\\\n1/62/63/64/65/66/6\\\\n\\\\n \\\\n\\\\n  盲盒不能七天无理由退换，合法吗？\\\\n\\\\n  \\\\n\\\\n  德国总理用中文连续发帖：德中经贸合作能够释放巨大潜力\\\\n\\\\n  \\\\n\\\\n  豆瓣8.2，网友边学边追剧，《太平年》是如何做到的？\\\\n \\\\n\\\\n  春季如何养生？内调滋阴生津 做好皮肤护理\\\\n\\\\n  \\\\n\\\\n  特朗普演讲遭美媒集体“打脸”：充斥谎言 背离民生\\\\n\\\\n  \\\\n\\\\n  全球种子植物3.6亿年前如何大爆发？中国团队最新研究探寻谜底\\\\n \\\\n\\\\n  马神话如何传承古今跨越东西？\\\\n\\\\n  \\\\n\\\\n  为何徐悲鸿笔下的马，总在奔跑与嘶鸣？\\\\n\\\\n  \\\\n\\\\n  海南自贸港免税政策发力 “乐购中国”成新风尚\\\\n \\\\n\\\\n  A股收评：超3700只个股飘红，三大指数集体收涨\\\\n\\\\n  \\\\n\\\\n  “扫码送鸡蛋”瞬间套走个人信息 警方提醒\\\\n\\\\n  \\\\n\\\\n  默茨：中国已成为全球重要力量，德中应合作应对挑战\\\\n \\\\n\\\\n  各地“新春第一会”密集召开，释放“十五五”开局强烈信号\\\\n\\\\n  \\\\n\\\\n  丙午马年春节消费市场热力全开\\\\n\\\\n  \\\\n\\\\n  新春第一会，风向标来了！\\\\n \\\\n\\\\n  长三角年轻人化身“春节主理人” 随心松弛感漫游成潮流\\\\n\\\\n  \\\\n\\\\n  低GI食品一定是健康食品？\\\\n\\\\n  \\\\n\\\\n  马年开门红！A股三大股指集体上涨\\\\n\\\\n热点视频\\\\n\\\\n奇闻趣事\\\\n\\\\n- \\\\n\\\\n  陕西汉中：美人梅盛开惹人醉\\\\n- \\\\n\\\\n  广东潮州乡村传统民俗与机器人共舞\\\\n- \\\\n\\\\n  云南务工专列暖心出发 铁路护航返岗增收路\\\\n- \\\\n\\\\n  鄱阳湖畔春意暖：江豚逐浪 候鸟翩跹\\\\n- \\\\n\\\\n  十余只野生海豚现身海南三亚\\\\n- \\\\n\\\\n  内蒙古：民警暴风雪夜寻回走失羊群\\\\n- \\\\n\\\\n  杨柳青新生代借AI为传统年画添“新衣”\\\\n- \\\\n\\\\n  暴风雪袭击美国纽约\\\\n\\\\n- \\\\n\\\\n  机器人变身街头售货员\\\\n-\", \"score\": 0.5342973, \"raw_content\": null}, {\"url\": \"https://www.reddit.com/r/SkincareAddictionLux/comments/10cvm5m/la_mer_cream_moisturizer_worth_it/?tl=zh-hans\", \"title\": \"海蓝之谜面霜- 值得买吗？ : r/SkincareAddictionLux - Reddit\", \"content\": \"Translations active   Show original\\\\n\\\\n## Thanks for the feedback!\\\\n\\\\nTell us more about why this content is not helpful.\\\\n\\\\nGo to SkincareAddictionLux   \\\\n\\\\nr/SkincareAddictionLux   • \\\\n\\\\nbaaducky\\\\n\\\\n# 海蓝之谜面霜 - 值得买吗？\\\\n\\\\n我最近在用海蓝之谜面霜。在有人评论香味之前，我先说，我喜欢它的味道，而且我的皮肤也不会过敏。我只是想知道...它真的值那么多钱吗？确实挺贵的。有没有人能推荐一些效果一样好，甚至更好的，但没那么贵的替代品？想知道 SkinCeuticals Triple Lipid Restore 效果会不会一样好。\\\\n\\\\n另外，你们觉得海蓝之谜的其他产品也值得买吗？我也在用他们的精华，我其实挺喜欢的。还是那句话，太贵了。欢迎推荐平替！\\\\n\\\\n              \\\\n\\\\nReddit Rules    Privacy Policy    User Agreement    Accessibility   Reddit, Inc. © 2026. All rights reserved.\", \"score\": 0.5120832, \"raw_content\": null}], \"response_time\": 3.18, \"request_id\": \"739a7e96-d4b0-4261-af1f-7895b4fc518c\"}', name='web_search', id='0cfac100-cd75-4dcc-95ff-41fd346359d0', tool_call_id='call_fbbc58849a0e45608e059d')]}}", "module": "chat_service", "function": "process_message", "line": 144}
{"timestamp": "2026-02-26 18:08:23,766", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] source=tools, update keys=dict_keys(['messages'])", "module": "chat_service", "function": "process_message", "line": 146}
{"timestamp": "2026-02-26 18:08:23,766", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] formatted_list=[{'type': 'tool_result', 'data': {'name': 'web_search', 'content': '{\"query\": \"海蓝之谜 面霜 精华 用户真实评价 小红书\", \"follow_up_questions\": null, \"answer\": null, \"images\": [], \"results\": [{\"url\": \"https://beaut.taobao.com/topic/ruye_13/acb7222891d4ba6fffa3d3baa63ed7bc.html\", \"title\": \"烂脸救星还是智商税？LAMER海蓝之谜精华面霜100ml真实测评  抗痘 ...\", \"content\": \"Slide 1\\\\nSlide 2\\\\nSlide 3\\\\nSlide 4\\\\n\\\\n# 💥烂脸救星还是智商税？LAMER海蓝之谜精华面霜100ml真实测评🔥抗痘修护全攻略！\\\\n\\\\n烂脸期真的能靠LAMER海蓝之谜精华面霜逆袭吗？🔥本敏感肌+痘肌老阿姨亲测1个月，从爆痘红肿到稳定细腻，这罐“面霜界爱马仕”到底值不值得砸钱？本篇无滤镜真实测评，带你全面解析LAMER修护抗痘的隐藏功效，成分党、痘肌姐妹必看！💥\\\\n\\\\n## ✨一、烂脸期的我为什么选了LAMER海蓝之谜精华面霜？\\\\n\\\\n姐妹们，你们有没有那种“明明皮肤已经烂到不行，但市面上的面霜一个都不敢用”的崩溃时刻？😭  \\\\n我就是那种换季必烂脸、熬夜必爆痘的敏感肌+痘肌混合体！  \\\\n之前用过一堆号称“修护力强”的面霜，结果不是闷痘就是刺痛，真的快被折磨疯了..  \\\\n刷到小红书一堆姐妹说LAMER面霜是“烂脸期救星”，我抱着“死马当活马医”的心态入了这罐100ml的精华面霜！  \\\\n✨重点来了：它主打修护+抗痘+维稳，成分党都懂，修护抗痘不冲突才是王道！\\\\n\\\\n## 🌿二、成分党看过来！LAMER面霜到底有什么神仙成分？\\\\n\\\\n作为成分党+护肤狂魔，我必须扒一扒这罐“贵妇面霜”的配方👇  \\\\n✅核心成分：神奇活性精萃（Miracle Broth™）——LAMER的灵魂配方，主打修护屏障、舒缓镇定  \\\\n✅抗痘成分：薄荷醇——有轻微清凉感，帮助舒缓炎症痘痘  \\\\n✅维稳成分：海藻提取物+甘油+矿脂——深层保湿不刺激，敏感肌友好  \\\\n⚠️注意：矿脂（凡士林）成分对部分人可能会闷痘，但我的肤质竟然意外兼容！  \\\\n💡小Tips：LAMER建议使用前先在掌心乳化，质地会更轻薄，吸收更快～我亲测有效！\\\\n\\\\n## 🔥三、实测1个月！LAMER面霜真的能抗痘修护吗？ [...] ## 🔥三、实测1个月！LAMER面霜真的能抗痘修护吗？\\\\n\\\\n姐妹们，我实测了整整一个月，从爆痘期→维稳期→皮肤细腻期，真的有变化！💥  \\\\n🔥爆痘期使用感：  \\\\n- 第1周：刚上脸有点厚重，但没闷痘，反而有种“被保护住”的安心感  \\\\n- 第2周：脸颊泛红明显减轻，痘痘红肿感减弱，上妆不卡粉了！  \\\\n- 第3周：闭口开始平了，皮肤摸起来顺滑很多，毛孔有变小的趋势  \\\\n- 第4周：整张脸状态稳定，没有再爆新痘，素颜也敢开原相机了！📸  \\\\n✨总结：LAMER这款精华面霜对“烂脸期+敏感痘肌”的修护效果是真的可以打！但油痘肌姐妹建议先试小样，毕竟不是所有人都适合矿脂成分～\\\\n\\\\n## 💡四、LAMER精华面霜适合哪些人？避雷指南来啦！\\\\n\\\\n⚠️适合人群：  \\\\n✔️敏感肌+屏障受损肌  \\\\n✔️干皮+混干+轻度痘肌  \\\\n✔️需要修护+维稳+抗老的姐妹  \\\\n❌不适合人群：  \\\\n❌重度油痘肌（矿脂成分可能闷痘）  \\\\n❌预算有限的学生党（价格确实不便宜）  \\\\n❌喜欢清爽水感质地的姐妹（它偏滋润型）  \\\\n✨小建议：如果你是油痘肌但皮肤屏障受损严重，可以尝试“局部点涂”法，避开T区，重点修护脸颊和下巴～\\\\n\\\\n## 🎁五、LAMER精华面霜的隐藏用法！解锁更多护肤玩法！\\\\n\\\\n除了日常面霜使用，我还在护肤达人的安利下解锁了几个隐藏玩法👇  \\\\n1️⃣【急救面膜】：厚厚涂一层当睡眠面膜，第二天皮肤嫩到能掐出水💦  \\\\n2️⃣【妆前打底】：少量涂抹在脸颊干燥区，上妆更服帖不卡粉！  \\\\n3️⃣【局部修护】：点涂在泛红/爆痘处，修复力真的肉眼可见！  \\\\n💡Bonus玩法：搭配美容仪使用，吸收效果翻倍，贵妇感直接拉满👑\\\\n\\\\nLAMER海蓝之谜经典精华面霜100ml修护抗痘神奇面霜\\\\n\\\\n### LAMER海蓝之谜经典精华面霜100ml修护抗痘神奇面霜\\\\n\\\\n## 更多相关推荐\\\\n\\\\n素颜也能美到炸街？这款贵妇膏让我重新定义“懒人养肤” [...] ### 当夜晚成为肌肤的修复仪式——与#SarahChapman少女线面霜的温柔相遇\\\\n\\\\n夜色深沉，城市归于寂静，我常在这一刻打开这瓶#SarahChapman少女线面霜。它不是普通意义上的护肤品，而是一段关于时光、自我关怀和温柔坚持的故事。在这篇文章中，我想分享的是如何让肌肤在夜晚悄然焕活，重拾年轻...\\\\n\\\\n实测暴打！故事与她三型胶原强控吸油百肽霜，抗油抗皱不掉线\\\\n\\\\n### 实测暴打！故事与她三型胶原强控吸油百肽霜，抗油抗皱不掉线\\\\n\\\\n这款故事与她三型胶原强控吸油百肽霜，号称“控油+抗皱二合一”，我们直接上手测试：能不能扛住高强度出油？质地够不够清爽？有没有真正的紧致效果？今天就用最硬核的方式给你答案。\\\\n\\\\n姐妹们！黄黑皮救星来了！这瓶水初语美白淡斑霜我真的太爱了！\\\\n\\\\n### 姐妹们！黄黑皮救星来了！这瓶水初语美白淡斑霜我真的太爱了！\\\\n\\\\n黄黑皮、暗沉肌、小细纹、色斑困扰？这款水初语美白淡斑霜真的让我感动到哭！从成分到质地再到效果，每一处都超乎期待，学生党也能轻松驾驭的宝藏面霜。\\\\n\\\\n【精准护肤推荐】复方熊果苷乳霜：毛孔粗大与暗沉的科学解决方案\\\\n\\\\n### 【精准护肤推荐】复方熊果苷乳霜：毛孔粗大与暗沉的科学解决方案\\\\n\\\\n本文基于成分分析，深入解读复方熊果苷乳霜的核心配方体系及功效机制，适合有改善毛孔粗大、提亮肤色需求的肌肤类型，结合专业质检视角为您解析其科学价值。\\\\n\\\\n【赛博朋克大叔的护肤仪式感！这瓶蓝钻面霜让我从“油腻”到“发光”】\\\\n\\\\n### 【赛博朋克大叔的护肤仪式感！这瓶蓝钻面霜让我从“油腻”到“发光”】\\\\n\\\\n姐妹们！今天要带你们冲一波高端护肤界的“顶流男神”——碧欧泉男士御尊蓝钻面霜！这不是普通的面霜，是为成熟男人量身定制的“反龄神器”！\\\\n\\\\n敏感肌救星来了！麦吉丽肌源修护啫喱实测深度解析\\\\n\\\\n### 敏感肌救星来了！麦吉丽肌源修护啫喱实测深度解析\", \"score\": 0.8036831, \"raw_content\": null}, {\"url\": \"https://beaut.taobao.com/topic/ruye_13/15ecfc298e48c844cea7143da7fc5e32.html\", \"title\": \"值不值？LA MER精华面霜深度测评！60ml究竟能用多久？\", \"content\": \"## 🌟从“豆腐渣”到“水豆腐”，LA MER真的能改善肤质？\\\\n\\\\n我以前是那种皮肤又干又敏感，还容易长闭口的“问题肌”，用了LA MER精华面霜之后，真的有被惊艳到！  \\\\n✨肤质变化：  \\\\n- 皮肤弹性变好了，手指一捏就弹回来  \\\\n- 毛孔细腻了不少，上妆不卡粉  \\\\n- 肤色提亮了，素颜也有光泽感  \\\\n💡搭配建议：  \\\\n- 搭配LA MER精华水，修复力1+1＞2  \\\\n- 晚上用它当睡眠面膜，第二天皮肤超嫩  \\\\n- 搭配按摩手法，提升吸收力  \\\\n🔥真实反馈：它不是那种“立竿见影”的产品，而是慢慢调理皮肤，让肤质变得稳定、健康。坚持用下来，真的能感受到皮肤变“高级”了！\\\\n\\\\n## 💎贵妇护肤的正确打开方式，你get了吗？\\\\n\\\\n姐妹们，护肤不是越贵越好，但如果你的皮肤真的需要修复、保湿、提亮，那LA MER精华面霜绝对值得你拥有！  \\\\n✅适合人群：  \\\\n- 敏感肌、干皮、换季烂脸星人  \\\\n- 想要改善肤质、提升皮肤弹性的姐妹  \\\\n- 想尝试贵妇护肤但又怕踩雷的你  \\\\n💡小建议：  \\\\n- 第一次用可以先从5ml的旅行装开始  \\\\n- 搭配按摩手法效果更佳  \\\\n- 不要贪多，适量使用就好  \\\\n🎉最后敲黑板：贵妇护肤不是智商税，而是对皮肤的投资！如果你的皮肤真的需要修复、保湿、提亮，那这罐“绿瓶子”值得你拥有！\\\\n\\\\nLA MER海蓝之谜精华60ml经典面霜保湿修复嫩肤弹性改善皮肤\\\\n\\\\n### LA MER海蓝之谜精华60ml经典面霜保湿修复嫩肤弹性改善皮肤\\\\n\\\\n## 更多相关推荐\\\\n\\\\n黄皮姐妹听我说！这瓶“肌肤灭火器”真的能救你于水火\\\\n\\\\n### 黄皮姐妹听我说！这瓶“肌肤灭火器”真的能救你于水火 [...] 黄皮姐妹听我说！这瓶“肌肤灭火器”真的能救你于水火\\\\n\\\\n### 黄皮姐妹听我说！这瓶“肌肤灭火器”真的能救你于水火\\\\n\\\\n如果你是那种一换季就脸红、干到起皮、还总感觉皮肤在“闹脾气”的人，那这篇一定要看完。我今天要给你们种草的这款【粉悦之匙神经酰胺舒缓保湿特护乳霜】，是我最近护肤最得力的帮手之一，专治各种“红丝”和“火烧...\\\\n\\\\nCeraVe适乐肤神经酰胺屏障修护润肤霜：重塑肌肤屏障的终极方案\\\\n\\\\n### CeraVe适乐肤神经酰胺屏障修护润肤霜：重塑肌肤屏障的终极方案\\\\n\\\\n在现代高强度的生活节奏下，皮肤屏障受损已成为普遍现象。CeraVe适乐肤神经酰胺屏障修护润肤霜凭借其科学配方与精准功效，为用户提供了一种高效且稳定的修护解决方案。\\\\n\\\\n男士理容新宠：焕颜精华清洁霜，懒人兄弟的清洁王炸\\\\n\\\\n### 男士理容新宠：焕颜精华清洁霜，懒人兄弟的清洁王炸\\\\n\\\\n别再用搓澡巾磨脸了！这款焕颜精华清洁霜，专为男士打造，三分钟搞定深层清洁，省出时间打游戏，还你清爽干净的脸蛋。\\\\n\\\\n金丝玉帛三因抗皱淡纹精华日霜晚霜，我的脸被它宠坏了！✨\\\\n\\\\n### 金丝玉帛三因抗皱淡纹精华日霜晚霜，我的脸被它宠坏了！✨\\\\n\\\\n姐妹们，今天我要和你们聊聊这款让我从“垮脸星人”变身“冻龄女神”的\\\\\\\\金丝玉帛三因抗皱淡纹精华日霜晚霜\\\\\\\\！不仅有玻色因成分加持，还有紧致提亮的魔法力，真的太适合我们这些想要对抗初老的打工人了！...\\\\n\\\\n油皮救星来了！春娟黄芪氨基酸洁面慕斯深度测评\\\\n\\\\n### 油皮救星来了！春娟黄芪氨基酸洁面慕斯深度测评\\\\n\\\\n春娟黄芪氨基酸温和洁面慕斯主打保湿与清洁双重功效，专为油性肌肤设计。通过质地、清洁力和保湿力三大维度评测，确认它在同类产品中具备极强竞争力。\\\\n\\\\n这个肤研美白祛斑霜，让我爱上了护肤的仪式感✨\\\\n\\\\n### 这个肤研美白祛斑霜，让我爱上了护肤的仪式感✨ [...] 这个肤研美白祛斑霜，让我爱上了护肤的仪式感✨\\\\n\\\\n### 这个肤研美白祛斑霜，让我爱上了护肤的仪式感✨\\\\n\\\\n今天要和大家分享一款让我一用就沦陷的\\\\\\\\肤研美白祛斑霜\\\\\\\\，它的质地、功效和香味真的太治愈了，每次使用都像在给皮肤做一场温柔的SPA。如果你也在寻找一支能真正改善肌肤暗沉、淡化色斑的护肤品，那你一定不能错过它...\\\\n\\\\n当生物科技邂逅时光的哲思：ASKE白细胞DNA驻颜能量乳\\\\n\\\\n### 当生物科技邂逅时光的哲思：ASKE白细胞DNA驻颜能量乳\\\\n\\\\n在护肤界，真正的“艺术”从来不是花哨的包装，而是在科学与文化之间找到那条最微妙的平衡线。ASKE白细胞DNA驻颜能量乳，以\\\\\\\\生物活性因子\\\\\\\\为核心，用一场关于细胞修复与肌肤重生的现代寓言，为我们讲述“焕肤”背后...\\\\n\\\\n当肌肤遇见清晨露水，芮俏水晶番茄爆水霜唤醒沉睡的野性之美\\\\n\\\\n### 当肌肤遇见清晨露水，芮俏水晶番茄爆水霜唤醒沉睡的野性之美\\\\n\\\\n这瓶来自大地的馈赠，像清晨第一滴露珠落在脸上，温柔却不失力量。它是\\\\\\\\芮俏水晶番茄爆水霜\\\\\\\\，用植物的力量与自由的灵魂对话。\\\\n\\\\n被四国专利宠爱的美白面霜，让肌肤像春天一样透亮\\\\n\\\\n### 被四国专利宠爱的美白面霜，让肌肤像春天一样透亮\\\\n\\\\n哈喽宝宝们！今天想和大家聊聊这款让我彻底心动的\\\\\\\\宝乐果保乐活美白紧致霜润肤淡斑面霜四国专利淡斑boroh官方正品\\\\\\\\，它不仅有“四国专利”加持，还有超治愈的使用体验，真的是一支能带来好心情的护肤面霜～\\\\n\\\\n敏感肌兄弟别再扛了！这瓶修红霜才是真·救星\\\\n\\\\n### 敏感肌兄弟别再扛了！这瓶修红霜才是真·救星\\\\n\\\\n如果你是那种一换季就红脸、起皮、刺痛的敏感肌，那听我一句劝，赶紧试试薇诺娜舒敏保湿修红霜。这玩意儿不吹不黑，\\\\\\\\修护+保湿+舒缓\\\\\\\\一步到位，省出时间打游戏，省出钱买点好装备。\\\\n\\\\nTaobao | 淘宝\", \"score\": 0.7237202, \"raw_content\": null}, {\"url\": \"https://mall.ifeng.com/c/8R2gKLs46p3\", \"title\": \"终于实现海蓝之谜自由了！大几千的贵妇面霜，4瓶到手才200多\", \"content\": \"# 终于实现海蓝之谜自由了！大几千的贵妇面霜，4瓶到手才200多\\\\n\\\\n我猜有多少小仙女还没重视起保养？\\\\n\\\\n仗着年轻，熬夜、敷衍式护肤，各种“胡作非为”！\\\\n\\\\n照镜子的时候看见脸上的干纹和小细纹才惊觉，已经到了必须要好好养护的时候了！\\\\n\\\\n都说女生过了25岁，脸就开始走下坡路了，出现各种变老特征。\\\\n\\\\n法令纹痕迹变重，面部轮廓不清晰，甚至脸也开始发腮变大，即使微微的改变，视觉造成的差异也甚是明显。👇\\\\n\\\\n所以说抗初老真的越早开始越好，胶原蛋白流逝才不会听你的悔恨！\\\\n\\\\n当你都肉眼可见细纹的时候，有一些皱纹已经是无法补救的了。\\\\n\\\\n但是不知道大家有没有发现，很多明星即便到了一定年纪，也依旧看不出实际年龄。\\\\n\\\\n皮肤水润有光泽，，一言不合就被大家称为“不老女神”。\\\\n\\\\n后来才知道她们日常使用的都是大牌护肤品，尤其是La Mer海蓝之谜，这个数一数二的贵妇级品牌，直接霸屏了她们的梳妆台。\\\\n\\\\n小花赵丽颖参加《中餐厅》，化妆台上就有海蓝之谜的身影↓\\\\n\\\\n要说明星有钱用得起也就算了，可小红书上素人多吧，随便一搜，竟有高达55万+的推荐笔记，\\\\n\\\\n好多姐妹人生第一个大牌护肤品就给了海蓝之谜！\\\\n\\\\n小编也是吃巨资买了这个面霜，皮肤状态好了不止一点点。\\\\n\\\\n小编不得不承认的是：钱多一点，时间就走得慢一点。\\\\n\\\\n起码在我们的脸上，砸下的钱多or少展示出来的年龄——差别真就挺大的，\\\\n\\\\n但是，也着实是太贵了呀！！\\\\n\\\\n30ml容量的面霜，官方售价就要1690元，对上班族妹子来说可能半个月工资就去了！！\\\\n\\\\n作为薅羊毛从不迟到的小编，一听到有一批海蓝之谜经典面霜组合7ml\\\\\\\\4礼盒装\\\\n\\\\n赶紧去要来了库存，今天特惠到手279元/套，折合下来都不到官网零头，直接省下上千！\\\\n\\\\n也就是说279到手接近30ml正装面霜的量，我相信会算账的姐妹肯定已经在下单了，真的无敌巨划算！！！\\\\n\\\\n这下还用等什么618？闭眼入也不吃亏啊！ [...] 海蓝之谜面霜强大的养护能量，对受损肌肤有很好的维稳作用。\\\\n\\\\n作为Lamer家的招牌，这款面霜被誉为化妆品界的奇迹。\\\\n\\\\n那么，鼎鼎大名的贵妇品牌海蓝之谜（Lamer）的面霜，到底为什么这么神奇且万能？\\\\n\\\\n主要是靠着2大专利成分：\\\\n\\\\n核心成分1——神奇活性精萃Miracle Broth™，它的诞生背后还有一个小故事：\\\\n\\\\n半个世纪前，美国太空物理学家麦克斯·贺伯博士，不幸在一次实验室的爆炸事故中，灼伤了面部皮肤。\\\\n\\\\n为了找回容颜，创始人麦克斯·贺伯博士用超乎寻常的提炼方法——低温低压的生物发酵技术。\\\\n\\\\n配合模拟海底自然环境的“声纳”和特定频率的闪烁光线，让海藻像在海底一样发酵。\\\\n\\\\n经过12年、6000多次试验才研究出的活性复活物，终焕变他的肌肤。\\\\n\\\\n海蓝之谜也将神奇活性精萃Miracle Broth™融入了每一件产品中，是别家护肤品都没有的成分。\\\\n\\\\n这是从美国加州无污染海域里的巨藻中提取的发酵物，具有非常强大的养护能力。\\\\n\\\\n它是海蓝之谜的专利核心成分，这是别家都没有的技术，也是它强于其他护肤品的原由。\\\\n\\\\n特别是换季过敏、经常“烂脸”的皮肤，精萃水的维稳力真的是一绝。\\\\n\\\\n不仅能够给肌肤长效保湿，还能够使肌肤变的透亮有光彩。\\\\n\\\\n核心成分2——酸橙茶精华\\\\n\\\\n这个成分能够帮助肌肤抵御外界伤害，预防肤色不均的问题。它跟神奇活性精萃可谓理想搭档。\\\\n\\\\n保存以上两种核心成分的，是靠它的液态晶体结构，所以这个面霜经过手指温热乳化之后，会更能释放鲜活能量。\\\\n\\\\n很多姑娘都说用过它之后，这辈子就再也没办法换面霜了，因为用过就不想要将就别的！\\\\n\\\\n3、\\\\n\\\\n冰激凌奶油质地，轻盈易吸收\\\\n\\\\n包装奢华大气 ，送礼之选~\\\\n\\\\n海蓝之谜的套盒永远不会令人失望，光是包装的颜值就已经让小编被吸引住了，非常奢华大气\\\\n\\\\n打开后就是我们的4个7ml的小面霜，非常精致，送人真的是非常不错的选择~ [...] 打开后就是我们的4个7ml的小面霜，非常精致，送人真的是非常不错的选择~\\\\n\\\\n打开面霜，就忍不住夸一下它的冰激凌奶油状质地，抹在手上顺滑，能感觉到比平常面霜的手感更加细腻。\\\\n\\\\n与别的面霜不同的是，这款面霜使用的时候，一定要先用双手揉搓乳化一下！才更能释放鲜活的修护能量。\\\\n\\\\n等它乳化成半透明的状态再上脸，这样是为了让皮肤的吸收变得更好。\\\\n\\\\n把它轻轻抹在脸颊上，就能很容易被皮肤吸收。\\\\n\\\\n在脸上最干的地方就先轻轻按压上去，其它地方再慢慢摩擦均匀，脸上就会变得滋润却不油腻了。\\\\n\\\\n换季的时候，每天涂抹海蓝之谜面霜，来维稳修护，用完皮肤像喝饱水一样，皮肤慢慢恢复健康状态。\\\\n\\\\n小样不仅方便旅行出差携带，还能够让新手尝试，看是否适合自己的肤感，再考虑入手正装~\\\\n\\\\n护肤一步到位，比正装更利于保鲜，即开即用。\\\\n\\\\n关键咱们资质齐全，品质保证，大家可以放心买，而且这样的大牌护肤品，不管是自己用还是送人都是非常不错的选择哦\\\\n\\\\n凰家尚品微信小程序二维码\\\\n\\\\n[责任编辑：陈鹏 PSY226]\\\\n\\\\n(本文章版权归凤凰网所有，未经授权，不得转载)\\\\n\\\\n2026央视春晚放大招！\\\\n\\\\n剃须刀界“劳S莱斯”，速抢！\\\\n\\\\n九龙窠的香喝过的人才懂！\\\\n\\\\n2025年全年三联生活周刊现在预定！\\\\n\\\\n听劝！秋冬把羽绒服换成它试试！\\\\n\\\\n2026央视春晚放大招！\\\\n\\\\n剃须刀界“劳S莱斯”，速抢！\", \"score\": 0.69274646, \"raw_content\": null}, {\"url\": \"https://www.chinanews.com.cn/cj/2024/08-16/10269870.shtml\", \"title\": \"揭秘小红书大牌护肤品“临期打折”陷阱 - 中国新闻网\", \"content\": \"难不成是换个“马甲”卷土重来？账号“Meeting好物优选”没有蓝V认证，也没有营业执照，仅显示店铺经营类型为“个人从事零星小额交易活动”。但是，该账号的笔记风格和此前一模一样，都是打着免税临期的名义低价卖货，在售的兰蔻系列商品也非常相似，已售数量最高达670。当要求商家提供品牌正品授权证书或者正品进货渠道证明，客服的回答较为模糊，“肯定有，但不给看”“老板不在，我也就是个客服，没有这些”。8月12日，记者再次点击进去，发现该账号店铺入口也已消失。\\\\n\\\\n\\u3000\\u3000值得关注的是，巫女士的遭遇并非个例。“我就是那个上当的人，买回来一眼假，对方也没出示品牌授权。”来自山东的李女士花费79元在小红书蓝V店铺“北风破美妆好物优选”买了临期特价的兰蔻菁纯面霜，最后只得凭借第三方平台鉴定证明才可退货退款。来自北京的方女士亦在相同店铺购买了同款产品，“目前还没退货成功，售后窗口也被关闭，正在等12315走流程处理。”\\\\n\\\\n\\u3000\\u3000在小红书平台，这股“临期打折”风越吹越烈，已波及众多大牌。“原价1180元的兰蔻小黑瓶精华液临期到手88元”“原价960元的海蓝之谜精粹水临期到手99元”……类似的蓝V店铺不在少数，且涉及CPB、阿玛尼、雅诗兰黛、LAMER等知名大牌，成为吸引消费者的“流量密码”，销量颇高，且过一段时间会以“短期清货完成”为由清空店铺和商品。\\\\n\\\\n\\u3000\\u3000一位海淘代购的从业人员告诉记者，未开封护肤品的保质期一般是两三年，距离限用期不足6个月可算临期产品，但这个没有明确的规范界定。另外，临期商品的来源很多，包括库存积压、撤柜回收、内购会员运损、消费退回等等，也由此衍生出了不少山寨货。 [...] 中新画报|国内|社会|国际|娱乐|体育|军事|科技|   \\\\n港澳台侨|凡人歌\\\\n\\\\n创意\\\\n\\\\n理论\\\\n\\\\n直播\\\\n\\\\n专题\\\\n\\\\n专栏\\\\n\\\\n     ，实付85元。“我之前在拼多多百亿补贴和丝芙兰线下专柜都有买过这款面霜，售价600多元或800多元，第一回看到价格这么低，就抱有了一丝侥幸心理。”她告诉羊城晚报记者，由于到手价与市场价有较大差异，购买前，她向店铺商家进行了多次确认。\\\\n\\\\n\\u3000\\u3000根据聊天记录截图，该店铺客服解释：“咱们家产品是海外免税版正品，2025年10月到期，海南三亚发货，产品支持7天无理由退货，有运费险，产品便宜是因为临期并且淡季特卖，请放心购买。”并明确向消费者承诺“支持验证”。\\\\n\\\\n\\u3000\\u3000三天后，巫女士收到了包裹，拆开后却发现“不太妙”。其一，商品介绍页面的发货地是海南三亚，但包裹快递单显示由汕头寄来；其二，她通过小程序查询批号，显示面霜生产日期是2023年10月1日，过期日期是2026年10月1日，不仅与商家描述不符，且距离到期还有两年多，与“临期”介绍也不相符；其三，她对比了之前手头的正品，发现气味、包装等各方面的差距都很大。\\\\n\\\\n\\u3000\\u3000令人哭笑不得的是，面霜的塑封包装上贴了一个“海南离岛免税商品溯源码”。从巫女士向记者提供的照片可以看到，该溯源码中间是一个二维码，下方则有“防伪标签涂层”，刮开后会获得一组“防伪密码”。用手机扫码后，会弹出一个名为“商品防伪查询中心”的网站，提示输入密码验证产品真伪。\\\\n\\\\n\\u3000\\u3000对此，业内相关人士向记者表示，海南离岛免税商品的溯源码没有需要刮开的防伪涂层，且个人消费者即使扫码后仅呈现“暂无权限查看”。记者通过阿里巴巴平台查询发现，类似海南离岛免税商品溯源码有多个商家出售，产品真假难辨。 [...] “浙BA”赋能文旅 新春延续“长尾效应”\\\\n\\\\n  2026年02月18日 16:13:32\\\\n\\\\n换一批\\\\n\\\\n推荐阅读\\\\n\\\\n1/62/63/64/65/66/6\\\\n\\\\n \\\\n\\\\n  盲盒不能七天无理由退换，合法吗？\\\\n\\\\n  \\\\n\\\\n  德国总理用中文连续发帖：德中经贸合作能够释放巨大潜力\\\\n\\\\n  \\\\n\\\\n  豆瓣8.2，网友边学边追剧，《太平年》是如何做到的？\\\\n \\\\n\\\\n  春季如何养生？内调滋阴生津 做好皮肤护理\\\\n\\\\n  \\\\n\\\\n  特朗普演讲遭美媒集体“打脸”：充斥谎言 背离民生\\\\n\\\\n  \\\\n\\\\n  全球种子植物3.6亿年前如何大爆发？中国团队最新研究探寻谜底\\\\n \\\\n\\\\n  马神话如何传承古今跨越东西？\\\\n\\\\n  \\\\n\\\\n  为何徐悲鸿笔下的马，总在奔跑与嘶鸣？\\\\n\\\\n  \\\\n\\\\n  海南自贸港免税政策发力 “乐购中国”成新风尚\\\\n \\\\n\\\\n  A股收评：超3700只个股飘红，三大指数集体收涨\\\\n\\\\n  \\\\n\\\\n  “扫码送鸡蛋”瞬间套走个人信息 警方提醒\\\\n\\\\n  \\\\n\\\\n  默茨：中国已成为全球重要力量，德中应合作应对挑战\\\\n \\\\n\\\\n  各地“新春第一会”密集召开，释放“十五五”开局强烈信号\\\\n\\\\n  \\\\n\\\\n  丙午马年春节消费市场热力全开\\\\n\\\\n  \\\\n\\\\n  新春第一会，风向标来了！\\\\n \\\\n\\\\n  长三角年轻人化身“春节主理人” 随心松弛感漫游成潮流\\\\n\\\\n  \\\\n\\\\n  低GI食品一定是健康食品？\\\\n\\\\n  \\\\n\\\\n  马年开门红！A股三大股指集体上涨\\\\n\\\\n热点视频\\\\n\\\\n奇闻趣事\\\\n\\\\n- \\\\n\\\\n  陕西汉中：美人梅盛开惹人醉\\\\n- \\\\n\\\\n  广东潮州乡村传统民俗与机器人共舞\\\\n- \\\\n\\\\n  云南务工专列暖心出发 铁路护航返岗增收路\\\\n- \\\\n\\\\n  鄱阳湖畔春意暖：江豚逐浪 候鸟翩跹\\\\n- \\\\n\\\\n  十余只野生海豚现身海南三亚\\\\n- \\\\n\\\\n  内蒙古：民警暴风雪夜寻回走失羊群\\\\n- \\\\n\\\\n  杨柳青新生代借AI为传统年画添“新衣”\\\\n- \\\\n\\\\n  暴风雪袭击美国纽约\\\\n\\\\n- \\\\n\\\\n  机器人变身街头售货员\\\\n-\", \"score\": 0.5342973, \"raw_content\": null}, {\"url\": \"https://www.reddit.com/r/SkincareAddictionLux/comments/10cvm5m/la_mer_cream_moisturizer_worth_it/?tl=zh-hans\", \"title\": \"海蓝之谜面霜- 值得买吗？ : r/SkincareAddictionLux - Reddit\", \"content\": \"Translations active   Show original\\\\n\\\\n## Thanks for the feedback!\\\\n\\\\nTell us more about why this content is not helpful.\\\\n\\\\nGo to SkincareAddictionLux   \\\\n\\\\nr/SkincareAddictionLux   • \\\\n\\\\nbaaducky\\\\n\\\\n# 海蓝之谜面霜 - 值得买吗？\\\\n\\\\n我最近在用海蓝之谜面霜。在有人评论香味之前，我先说，我喜欢它的味道，而且我的皮肤也不会过敏。我只是想知道...它真的值那么多钱吗？确实挺贵的。有没有人能推荐一些效果一样好，甚至更好的，但没那么贵的替代品？想知道 SkinCeuticals Triple Lipid Restore 效果会不会一样好。\\\\n\\\\n另外，你们觉得海蓝之谜的其他产品也值得买吗？我也在用他们的精华，我其实挺喜欢的。还是那句话，太贵了。欢迎推荐平替！\\\\n\\\\n              \\\\n\\\\nReddit Rules    Privacy Policy    User Agreement    Accessibility   Reddit, Inc. © 2026. All rights reserved.\", \"score\": 0.5120832, \"raw_content\": null}], \"response_time\": 3.18, \"request_id\": \"739a7e96-d4b0-4261-af1f-7895b4fc518c\"}'}}]", "module": "chat_service", "function": "process_message", "line": 149}
{"timestamp": "2026-02-26 18:08:25,875", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 35: 2 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:25,907", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 36: 3 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:25,940", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 37: 2 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:26,060", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 38: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:26,153", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 39: 9 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:26,241", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 40: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:26,348", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 41: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:26,439", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 42: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:26,566", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 43: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:26,773", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 44: 9 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:26,813", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 45: 15 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:26,965", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 46: 9 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:27,062", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 47: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:27,166", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 48: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:27,270", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 49: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:27,363", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 50: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:27,558", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 51: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:27,577", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 52: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:27,672", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 53: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:27,877", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 54: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:27,893", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 55: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:27,979", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 56: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:28,125", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 57: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:28,156", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 58: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:28,265", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 59: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:28,384", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 60: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:28,443", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 61: 11 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:28,553", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 62: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:28,643", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 63: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:28,723", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 64: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:28,842", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 65: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:28,925", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 66: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:29,054", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 67: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:29,124", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 68: 9 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:29,276", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 69: 10 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:29,366", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 70: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:29,456", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 71: 9 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:29,566", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 72: 11 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:29,679", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 73: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:29,739", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 74: 9 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:29,805", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 75: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:29,910", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 76: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:30,031", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 77: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:30,136", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 78: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:30,199", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 79: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:30,290", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 80: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:30,421", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 81: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:30,529", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 82: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:30,619", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 83: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:30,771", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 84: 11 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:30,863", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 85: 11 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:30,972", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 86: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:31,080", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 87: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:31,192", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 88: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:31,302", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 89: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:31,440", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 90: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:31,477", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 91: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:31,543", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 92: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:31,609", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 93: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:31,760", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 94: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:31,786", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 95: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:31,935", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 96: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:32,027", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 97: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:32,115", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 98: 3 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:32,226", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 99: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:32,355", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 100: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:32,424", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 101: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:32,511", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 102: 2 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:32,622", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 103: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:32,727", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 104: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:32,776", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 105: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:32,907", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 106: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:33,038", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 107: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:33,083", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 108: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:33,218", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 109: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:33,303", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 110: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:33,409", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 111: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:33,482", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 112: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:33,568", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 113: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:33,675", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 114: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:33,787", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 115: 9 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:33,897", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 116: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:34,006", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 117: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:34,076", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 118: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:34,286", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 119: 10 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:34,340", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 120: 13 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:34,469", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 121: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:34,553", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 122: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:34,645", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 123: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:34,772", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 124: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:34,866", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 125: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:34,978", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 126: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:35,105", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 127: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:35,245", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 128: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:35,354", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 129: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:35,411", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 130: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:35,507", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 131: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:35,637", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 132: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:35,747", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 133: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:35,790", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 134: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:35,900", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 135: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:36,032", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 136: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:36,119", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 137: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:36,207", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 138: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:36,335", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 139: 10 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:36,427", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 140: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:36,580", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 141: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:36,691", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 142: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:36,758", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 143: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:36,907", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 144: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:37,026", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 145: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:37,131", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 146: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:37,242", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 147: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:37,351", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 148: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:37,483", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 149: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:37,619", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 150: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:37,682", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 151: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:37,726", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 152: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:37,896", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 153: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:37,969", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 154: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:38,056", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 155: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:38,185", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 156: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:38,298", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 157: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:38,408", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 158: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:38,516", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 159: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:38,628", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 160: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:38,694", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 161: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:38,845", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 162: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:38,935", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 163: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:39,023", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 164: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:39,253", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 165: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:39,277", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 166: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:39,318", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 167: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:39,419", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 168: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:39,529", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 169: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:39,636", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 170: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:39,725", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 171: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:39,815", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 172: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:39,886", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 173: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:39,989", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 174: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:40,104", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 175: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:40,191", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 176: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:40,255", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 177: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:40,345", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 178: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:40,435", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 179: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:40,584", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 180: 3 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:40,675", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 181: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:40,764", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 182: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:40,852", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 183: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:40,979", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 184: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:41,007", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 185: 3 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:41,137", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 186: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:41,224", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 187: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:41,334", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 188: 10 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:41,463", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 189: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:41,576", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 190: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:41,689", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 191: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:41,772", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 192: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:41,866", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 193: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:42,013", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 194: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:42,107", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 195: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:42,237", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 196: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:42,342", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 197: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:42,413", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 198: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:42,539", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 199: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:42,610", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 200: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:42,699", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 201: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:42,788", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 202: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:42,873", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 203: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:42,986", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 204: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:43,113", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 205: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:43,127", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 206: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:08:43,144", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] updates data: {'model': {'messages': [AIMessage(content='现在我已经收集了关于海蓝之谜护肤品的相关信息，包括其热门产品（经典精华面霜、精粹水等）、核心成分（神奇活性精萃Miracle Broth™、酸橙茶精华）、用户评价（修护效果好、适合敏感肌、需要乳化使用等）以及小红书平台的风格特点。\\n\\n根据小红书文案创作规范，我将为海蓝之谜护肤品创作一篇吸引眼球的小红书笔记。我会遵循以下结构：\\n- 使用爆款标题公式（数字+痛点+解决方案）\\n- 采用亲切自然的语言风格（使用\"姐妹们\"等称呼）\\n- 按照种草类笔记结构：开头Hook→痛点描述→产品介绍→使用体验→总结推荐→互动引导\\n- 添加合适的emoji和话题标签\\n\\n让我为您创作一篇高质量的小红书文案：\\n\\n\\n标题：3个烂脸期自救法！海蓝之谜让我从\"豆腐渣\"变\"水豆腐\"✨\\n\\n姐妹们！今天必须分享一个让我皮肤逆袭的秘密武器！💥\\n\\n【开头Hook】\\n谁懂啊！！换季烂脸+熬夜爆痘+屏障受损三连击，我的脸真的快不能看了😭 用过无数修护面霜都踩雷，直到遇见这罐\"绿瓶子\"！\\n\\n【痛点描述】\\n- 换季必泛红起皮，上妆卡粉到怀疑人生\\n- 熬夜后脸干到能搓出泥，还疯狂冒闭口\\n- 屏障受损严重，连最温和的面霜都刺痛\\n- 试过太多\"修护\"产品，结果不是闷痘就是没效果\\n\\n【产品介绍】\\n海蓝之谜经典精华面霜🌿\\n✅灵魂成分：神奇活性精萃Miracle Broth™（12年6000次实验研发）\\n✅修护力MAX：海藻发酵精华+酸橙茶精华双重维稳\\n✅质地惊喜：冰激凌奶油质地，乳化后超轻薄不油腻\\n✅适用肤质：干皮/混干/敏感肌/烂脸期急救\\n\\n【使用体验】\\n✨实测28天变化：\\n第1周：厚涂当睡眠面膜，第二天脸嫩到掐出水💦\\n第2周：脸颊泛红明显减轻，上妆终于不卡粉了！\\n第3周：闭口开始平复，毛孔肉眼可见变细腻\\n第4周：整张脸状态稳定，素颜敢开原相机📸\\n\\n💡我的独家用法：\\n✔️日常护肤：取黄豆大小，掌心乳化后按压上脸\\n✔️急救修复：厚涂全脸当睡眠面膜\\n✔️妆前打底：少量点涂在干燥区，底妆服帖到哭\\n✔️局部点涂：痘痘红肿处重点照顾，消炎超快\\n\\n【总结推荐】\\n这罐\"面霜界爱马仕\"真的不是智商税！💎\\n✓ 敏感肌的安心感：修护屏障不刺激\\n✓ 干皮的幸福感：深层保湿不拔干\\n✓ 烂脸期的救命稻草：维稳抗痘双效合一\\n✓ 贵妇级的仪式感：每次护肤都是SPA体验\\n\\n【互动引导】\\n姐妹们！你们有用过海蓝之谜吗？效果如何？\\n或者你有什么烂脸期自救妙招？评论区告诉我呀👇\\n点赞收藏不迷路哦～下期分享海蓝之谜精华水搭配技巧！\\n\\n#海蓝之谜 #LAMER #护肤分享 #烂脸救星 #贵妇护肤 #敏感肌护肤 #小红书种草', additional_kwargs={}, response_metadata={'finish_reason': 'stop', 'request_id': '02a274be-e3e5-45fa-a132-1877cdff4b93', 'token_usage': {'input_tokens': 20732, 'output_tokens': 785, 'total_tokens': 21517, 'prompt_tokens_details': {'cached_tokens': 0}}}, id='lc_run--019c996b-c90f-7ba3-95dc-1d7d0ce983d7', tool_calls=[], invalid_tool_calls=[])]}}", "module": "chat_service", "function": "process_message", "line": 144}
{"timestamp": "2026-02-26 18:08:43,145", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] source=model, update keys=dict_keys(['messages'])", "module": "chat_service", "function": "process_message", "line": 146}
{"timestamp": "2026-02-26 18:08:43,145", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] formatted_list=[{'type': 'content', 'data': {'content': '现在我已经收集了关于海蓝之谜护肤品的相关信息，包括其热门产品（经典精华面霜、精粹水等）、核心成分（神奇活性精萃Miracle Broth™、酸橙茶精华）、用户评价（修护效果好、适合敏感肌、需要乳化使用等）以及小红书平台的风格特点。\\n\\n根据小红书文案创作规范，我将为海蓝之谜护肤品创作一篇吸引眼球的小红书笔记。我会遵循以下结构：\\n- 使用爆款标题公式（数字+痛点+解决方案）\\n- 采用亲切自然的语言风格（使用\"姐妹们\"等称呼）\\n- 按照种草类笔记结构：开头Hook→痛点描述→产品介绍→使用体验→总结推荐→互动引导\\n- 添加合适的emoji和话题标签\\n\\n让我为您创作一篇高质量的小红书文案：\\n\\n\\n标题：3个烂脸期自救法！海蓝之谜让我从\"豆腐渣\"变\"水豆腐\"✨\\n\\n姐妹们！今天必须分享一个让我皮肤逆袭的秘密武器！💥\\n\\n【开头Hook】\\n谁懂啊！！换季烂脸+熬夜爆痘+屏障受损三连击，我的脸真的快不能看了😭 用过无数修护面霜都踩雷，直到遇见这罐\"绿瓶子\"！\\n\\n【痛点描述】\\n- 换季必泛红起皮，上妆卡粉到怀疑人生\\n- 熬夜后脸干到能搓出泥，还疯狂冒闭口\\n- 屏障受损严重，连最温和的面霜都刺痛\\n- 试过太多\"修护\"产品，结果不是闷痘就是没效果\\n\\n【产品介绍】\\n海蓝之谜经典精华面霜🌿\\n✅灵魂成分：神奇活性精萃Miracle Broth™（12年6000次实验研发）\\n✅修护力MAX：海藻发酵精华+酸橙茶精华双重维稳\\n✅质地惊喜：冰激凌奶油质地，乳化后超轻薄不油腻\\n✅适用肤质：干皮/混干/敏感肌/烂脸期急救\\n\\n【使用体验】\\n✨实测28天变化：\\n第1周：厚涂当睡眠面膜，第二天脸嫩到掐出水💦\\n第2周：脸颊泛红明显减轻，上妆终于不卡粉了！\\n第3周：闭口开始平复，毛孔肉眼可见变细腻\\n第4周：整张脸状态稳定，素颜敢开原相机📸\\n\\n💡我的独家用法：\\n✔️日常护肤：取黄豆大小，掌心乳化后按压上脸\\n✔️急救修复：厚涂全脸当睡眠面膜\\n✔️妆前打底：少量点涂在干燥区，底妆服帖到哭\\n✔️局部点涂：痘痘红肿处重点照顾，消炎超快\\n\\n【总结推荐】\\n这罐\"面霜界爱马仕\"真的不是智商税！💎\\n✓ 敏感肌的安心感：修护屏障不刺激\\n✓ 干皮的幸福感：深层保湿不拔干\\n✓ 烂脸期的救命稻草：维稳抗痘双效合一\\n✓ 贵妇级的仪式感：每次护肤都是SPA体验\\n\\n【互动引导】\\n姐妹们！你们有用过海蓝之谜吗？效果如何？\\n或者你有什么烂脸期自救妙招？评论区告诉我呀👇\\n点赞收藏不迷路哦～下期分享海蓝之谜精华水搭配技巧！\\n\\n#海蓝之谜 #LAMER #护肤分享 #烂脸救星 #贵妇护肤 #敏感肌护肤 #小红书种草'}}]", "module": "chat_service", "function": "process_message", "line": 149}
{"timestamp": "2026-02-26 18:08:43,150", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] Agent流式执行完成", "module": "chat_service", "function": "process_message", "line": 159}
{"timestamp": "2026-02-26 18:08:43,150", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Stream complete, total chunks: 206, total chars: 1325", "module": "chat", "function": "generate", "line": 127}
{"timestamp": "2026-02-26 18:08:43,150", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Full response content:\n我需要为海蓝之谜护肤品生成小红书文案。首先，让我阅读小红书文案创作专家的技能文件，了解具体的创作要求和流程。\n\n\n[使用工具: read_file]\n现在我已经了解了小红书文案创作的规范和技巧，接下来我需要搜索关于海蓝之谜护肤品的相关信息，以便创作出真实、有吸引力的文案。\n\n让我使用web_search工具搜索海蓝之谜护肤品的相关信息：\n\n\n[使用工具: web_search]\n让我搜索更具体的信息，关于海蓝之谜护肤品的热门产品和用户评价：\n\n\n\n[使用工具: web_search]\n现在我已经收集了关于海蓝之谜护肤品的相关信息，包括其热门产品（经典精华面霜、精粹水等）、核心成分（神奇活性精萃Miracle Broth™、酸橙茶精华）、用户评价（修护效果好、适合敏感肌、需要乳化使用等）以及小红书平台的风格特点。\n\n根据小红书文案创作规范，我将为海蓝之谜护肤品创作一篇吸引眼球的小红书笔记。我会遵循以下结构：\n- 使用爆款标题公式（数字+痛点+解决方案）\n- 采用亲切自然的语言风格（使用\"姐妹们\"等称呼）\n- 按照种草类笔记结构：开头Hook→痛点描述→产品介绍→使用体验→总结推荐→互动引导\n- 添加合适的emoji和话题标签\n\n让我为您创作一篇高质量的小红书文案：\n\n\n标题：3个烂脸期自救法！海蓝之谜让我从\"豆腐渣\"变\"水豆腐\"✨\n\n姐妹们！今天必须分享一个让我皮肤逆袭的秘密武器！💥\n\n【开头Hook】\n谁懂啊！！换季烂脸+熬夜爆痘+屏障受损三连击，我的脸真的快不能看了😭 用过无数修护面霜都踩雷，直到遇见这罐\"绿瓶子\"！\n\n【痛点描述】\n- 换季必泛红起皮，上妆卡粉到怀疑人生\n- 熬夜后脸干到能搓出泥，还疯狂冒闭口\n- 屏障受损严重，连最温和的面霜都刺痛\n- 试过太多\"修护\"产品，结果不是闷痘就是没效果\n\n【产品介绍】\n海蓝之谜经典精华面霜🌿\n✅灵魂成分：神奇活性精萃Miracle Broth™（12年6000次实验研发）\n✅修护力MAX：海藻发酵精华+酸橙茶精华双重维稳\n✅质地惊喜：冰激凌奶油质地，乳化后超轻薄不油腻\n✅适用肤质：干皮/混干/敏感肌/烂脸期急救\n\n【使用体验】\n✨实测28天变化：\n第1周：厚涂当睡眠面膜，第二天脸嫩到掐出水💦\n第2周：脸颊泛红明显减轻，上妆终于不卡粉了！\n第3周：闭口开始平复，毛孔肉眼可见变细腻\n第4周：整张脸状态稳定，素颜敢开原相机📸\n\n💡我的独家用法：\n✔️日常护肤：取黄豆大小，掌心乳化后按压上脸\n✔️急救修复：厚涂全脸当睡眠面膜\n✔️妆前打底：少量点涂在干燥区，底妆服帖到哭\n✔️局部点涂：痘痘红肿处重点照顾，消炎超快\n\n【总结推荐】\n这罐\"面霜界爱马仕\"真的不是智商税！💎\n✓ 敏感肌的安心感：修护屏障不刺激\n✓ 干皮的幸福感：深层保湿不拔干\n✓ 烂脸期的救命稻草：维稳抗痘双效合一\n✓ 贵妇级的仪式感：每次护肤都是SPA体验\n\n【互动引导】\n姐妹们！你们有用过海蓝之谜吗？效果如何？\n或者你有什么烂脸期自救妙招？评论区告诉我呀👇\n点赞收藏不迷路哦～下期分享海蓝之谜精华水搭配技巧！\n\n#海蓝之谜 #LAMER #护肤分享 #烂脸救星 #贵妇护肤 #敏感肌护肤 #小红书种草", "module": "chat", "function": "generate", "line": 128}
{"timestamp": "2026-02-26 18:08:43,152", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Thinking content length: 0", "module": "chat", "function": "generate", "line": 129}
{"timestamp": "2026-02-26 18:08:43,152", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:08:43,153", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 161.1s ago] (224, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:08:43,154", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO messages (conversation_id, role, content, metadata) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::JSON) RETURNING messages.id, messages.created_at", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:08:43,155", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 159.2s ago] (224, 'assistant', '我需要为海蓝之谜护肤品生成小红书文案。首先，让我阅读小红书文案创作专家的技能文件，了解具体的创作要求和流程。\\n\\n\\n[使用工具: read_file]\\n现在我已经了解了小红书文案创作的规范和技巧，接下来我需要搜索关于海蓝之谜护肤品的相关信息，以便创作出真实、有吸引力的文案。\\n\\n让我使用w ... (1098 characters truncated) ... 妇级的仪式感：每次护肤都是SPA体验\\n\\n【互动引导】\\n姐妹们！你们有用过海蓝之谜吗？效果如何？\\n或者你有什么烂脸期自救妙招？评论区告诉我呀👇\\n点赞收藏不迷路哦～下期分享海蓝之谜精华水搭配技巧！\\n\\n#海蓝之谜 #LAMER #护肤分享 #烂脸救星 #贵妇护肤 #敏感肌护肤 #小红书种草', '{\"model\": \"fast\"}')", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:08:43,157", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.metadata, messages.created_at \nFROM messages \nWHERE messages.id = $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:08:43,158", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 159.2s ago] (612,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:08:43,159", "level": "INFO", "logger": "app.services.chat_service", "message": "[DB] Saved message id=612, metadata_={'model': 'fast'}", "module": "chat_service", "function": "create_message", "line": 76}
{"timestamp": "2026-02-26 18:08:43,159", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.metadata, messages.created_at \nFROM messages \nWHERE messages.id = $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:08:43,159", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 159.2s ago] (612,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:08:43,161", "level": "INFO", "logger": "app.services.chat_service", "message": "[DB] Verify saved: id=612, metadata_={'model': 'fast'}", "module": "chat_service", "function": "create_message", "line": 83}
{"timestamp": "2026-02-26 18:08:43,161", "level": "INFO", "logger": "app.services.chat_service", "message": "[CACHE DELETE] 已删除消息缓存: conversation_id=224, user_id=1, keys=1", "module": "chat_service", "function": "_invalidate_messages_cache", "line": 546}
{"timestamp": "2026-02-26 18:08:43,162", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:08:46,091", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:08:46,092", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.username = $1::VARCHAR", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:08:46,092", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 164s ago] ('qibao1',)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:08:46,094", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:223:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:08:46,095", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: messages:conversation:223:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 18:08:46,096", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.metadata, messages.created_at \nFROM messages JOIN conversations ON messages.conversation_id = conversations.id \nWHERE messages.conversation_id = $1::INTEGER AND conversations.user_id = $2::INTEGER ORDER BY messages.created_at ASC \n LIMIT $3::INTEGER OFFSET $4::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:08:46,096", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 164s ago] (223, 1, 100, 0)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:08:46,097", "level": "INFO", "logger": "app.services.chat_service", "message": "[DB] Fetched message id=607, metadata_=None", "module": "chat_service", "function": "fetch", "line": 43}
{"timestamp": "2026-02-26 18:08:46,097", "level": "INFO", "logger": "app.services.chat_service", "message": "[DB] Fetched message id=608, metadata_={'model': 'fast'}", "module": "chat_service", "function": "fetch", "line": 43}
{"timestamp": "2026-02-26 18:08:46,097", "level": "INFO", "logger": "app.services.chat_service", "message": "[DB] Fetched message id=609, metadata_=None", "module": "chat_service", "function": "fetch", "line": 43}
{"timestamp": "2026-02-26 18:08:46,097", "level": "INFO", "logger": "app.services.chat_service", "message": "[DB] Fetched message id=610, metadata_={'model': 'fast'}", "module": "chat_service", "function": "fetch", "line": 43}
{"timestamp": "2026-02-26 18:08:46,098", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for messages:conversation:223:user:1:skip:0:limit:100: [{'id': 607, 'conversation_id': 223, 'role': 'user', 'content': '帮我写一个小红书文案', 'metadata': 'MetaData()', 'created_at': '2026-02-26T10:06:03.902592+00:00'}, {'id': 608, 'conversation_id': 223, 'role': 'assistant', 'content': '你希望小红书文案的主题或方向是什么？例如：\\n\\n- 推广某款产品（如护肤品、零食、数码好物）？\\n- 分享某种生活方式（如早八人自律打卡、租房改造、学生党平价穿搭）？\\n- 记录一次旅行/探店/美食体验？\\n- 某个实用技巧类内容（如Excel快捷键、AI工具推荐、雅思备考经验）？\\n\\n另外，是否已有具体产品名、品牌、使用场景、目标人群（如“20岁女生”“职场新人”“宝妈”），或者希望风格是：干货型 / 治愈系 / 幽默吐槽 / 高级简约 / 种草安利？\\n\\n请提供这些信息，我将为你定制一篇符合小红书调性（带emoji、分段清晰、有网感、强互动引导）的优质文案 ✨\\n\\n如果不确定，我也可以先为你生成一个通用爆款模板供参考。', 'metadata': 'MetaData()', 'created_at': '2026-02-26T10:06:03.902592+00:00'}, {'id': 609, 'conversation_id': 223, 'role': 'user', 'content': '护肤品', 'metadata': 'MetaData()', 'created_at': '2026-02-26T10:06:15.179507+00:00'}, {'id': 610, 'conversation_id': 223, 'role': 'assistant', 'content': '好的！我们来为护肤品创作一篇小红书风格的种草文案。\\n\\n首先，我需要读取小红书文案专家（xhs-copywriter）的完整技能指令，确保严格遵循其专业流程和模板规范：\\n\\n\\n[使用工具: read_file]\\n<INSTRUCTION>请根据小红书文案专家（xhs-copywriter）的完整技能指令，为「护肤品」创作一篇符合平台调性、结构清晰、有网感、带emoji、含互动引导的小红书种草文案。需严格遵循以下要求：\\n\\n- 标题：20字以内，使用爆款公式（如数字+痛点+解决方案 / 疑问句+好奇心 / 对比反差 / 情感共鸣），含2–3个emoji  \\n- 正文结构按种草类模板：【开头Hook】→【痛点描述】→【产品/方法介绍】→【使用体验】→【总结推荐】→【互动引导】  \\n- 语言亲切自然，用“姐妹们”“宝子们”等称呼，避免营销腔  \\n- 每段2–3句话，合理使用emoji分隔与强调，重点内容可加粗（用**加粗**表示）  \\n- 结尾添加3–5个精准热门话题标签（如#护肤心得 #精华推荐 等）  \\n\\n因用户仅指定“护肤品”未提供具体产品名、品牌或肤质信息，需虚构一个真实感强、符合当前小红书趋势的典型场景：  \\n✅ 设定为「油痘肌25岁上班族」  \\n✅ 产品：一款近期口碑爆棚的「控油抗痘维C精华」（非真实品牌，但命名可信，如「澄澈光感维C精华」）  \\n✅ 核心卖点：不闷痘、提亮快、质地清爽、适合刷酸后维稳  \\n\\n现在生成完整文案：</INSTRUCTION>', 'metadata': 'MetaData()', 'created_at': '2026-02-26T10:06:15.179507+00:00'}]", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 18:08:46,098", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: messages:conversation:223:user:1:skip:0:limit:100, TTL=3767s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 18:08:46,099", "level": "INFO", "logger": "app.core.tracing", "message": "[REQUEST] method=GET path=/api/v1/chat/conversations/223/history status_code=200 request_id=68021d02-e809-4082-adeb-87d64cc062f3", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 18:08:46,100", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:08:58,234", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:08:58,235", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.username = $1::VARCHAR", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:08:58,235", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 176.2s ago] ('qibao1',)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:08:58,236", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO conversations (user_id, title, is_pinned, model_name) VALUES ($1::INTEGER, $2::VARCHAR, $3::BOOLEAN, $4::VARCHAR) RETURNING conversations.id, conversations.created_at, conversations.updated_at", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:08:58,237", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 176.2s ago] (1, '新会话', False, None)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:08:58,238", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:08:58,238", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 176.2s ago] (225,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:08:58,239", "level": "INFO", "logger": "app.services.conversation_service", "message": "[CACHE DELETE] 未找到用户会话列表缓存: user_id=1", "module": "conversation_service", "function": "_invalidate_user_cache", "line": 146}
{"timestamp": "2026-02-26 18:08:58,240", "level": "INFO", "logger": "app.core.tracing", "message": "[REQUEST] method=POST path=/api/v1/conversations status_code=201 request_id=891b48c1-3ada-4786-b525-702a1dfdbb38", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 18:08:58,240", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:08:58,268", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:08:58,268", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.username = $1::VARCHAR", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:08:58,269", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 176.2s ago] ('qibao1',)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:08:58,270", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:225:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 18:08:58,271", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:08:58,271", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 176.2s ago] (225, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:08:58,272", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:225:1: {'id': 225, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-26T10:08:58.236057+00:00', 'updated_at': '2026-02-26T10:08:58.236057+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 18:08:58,273", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:225:1, TTL=3765s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 18:08:58,274", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: messages:conversation:225:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 18:08:58,274", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.metadata, messages.created_at \nFROM messages JOIN conversations ON messages.conversation_id = conversations.id \nWHERE messages.conversation_id = $1::INTEGER AND conversations.user_id = $2::INTEGER ORDER BY messages.created_at ASC \n LIMIT $3::INTEGER OFFSET $4::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:08:58,275", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 176.2s ago] (225, 1, 100, 0)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:08:58,276", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: messages:conversation:225:user:1:skip:0:limit:100, TTL=3602s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 18:08:58,276", "level": "INFO", "logger": "app.core.tracing", "message": "[REQUEST] method=GET path=/api/v1/chat/conversations/225/history status_code=200 request_id=956a7da6-ee20-4aa8-83ed-c91ec291871f", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 18:08:58,277", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:09:17,424", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:09:17,425", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.username = $1::VARCHAR", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:09:17,425", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 195.4s ago] ('qibao1',)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:09:17,427", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:225:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:09:17,427", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:09:17,427", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 195.3s ago] (225, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:09:17,428", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO messages (conversation_id, role, content, metadata) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::JSON) RETURNING messages.id, messages.created_at", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:09:17,429", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 193.5s ago] (225, 'user', '帮我写一个小红书文案，护肤品', 'null')", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:09:17,430", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.metadata, messages.created_at \nFROM messages \nWHERE messages.id = $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:09:17,430", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 193.5s ago] (613,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:09:17,431", "level": "INFO", "logger": "app.services.chat_service", "message": "[DB] Saved message id=613, metadata_=None", "module": "chat_service", "function": "create_message", "line": 76}
{"timestamp": "2026-02-26 18:09:17,431", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.metadata, messages.created_at \nFROM messages \nWHERE messages.id = $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:09:17,432", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 193.5s ago] (613,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:09:17,432", "level": "INFO", "logger": "app.services.chat_service", "message": "[DB] Verify saved: id=613, metadata_=None", "module": "chat_service", "function": "create_message", "line": 83}
{"timestamp": "2026-02-26 18:09:17,433", "level": "INFO", "logger": "app.services.chat_service", "message": "[CACHE DELETE] 已删除消息缓存: conversation_id=225, user_id=1, keys=1", "module": "chat_service", "function": "_invalidate_messages_cache", "line": 546}
{"timestamp": "2026-02-26 18:09:17,434", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: messages:conversation:225:user:1:skip:0:limit:50", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 18:09:17,434", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.metadata, messages.created_at \nFROM messages JOIN conversations ON messages.conversation_id = conversations.id \nWHERE messages.conversation_id = $1::INTEGER AND conversations.user_id = $2::INTEGER ORDER BY messages.created_at ASC \n LIMIT $3::INTEGER OFFSET $4::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:09:17,434", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 195.3s ago] (225, 1, 50, 0)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:09:17,435", "level": "INFO", "logger": "app.services.chat_service", "message": "[DB] Fetched message id=613, metadata_=None", "module": "chat_service", "function": "fetch", "line": 43}
{"timestamp": "2026-02-26 18:09:17,435", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for messages:conversation:225:user:1:skip:0:limit:50: [{'id': 613, 'conversation_id': 225, 'role': 'user', 'content': '帮我写一个小红书文案，护肤品', 'metadata': 'MetaData()', 'created_at': '2026-02-26T10:09:17.425897+00:00'}]", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 18:09:17,436", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: messages:conversation:225:user:1:skip:0:limit:50, TTL=3816s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 18:09:17,436", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] 开始生成流式响应: conversation_id=225, enable_thinking=False", "module": "chat_service", "function": "generate_response_stream", "line": 465}
{"timestamp": "2026-02-26 18:09:17,436", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] 开始处理消息: conversation_id=225", "module": "chat_service", "function": "process_message", "line": 103}
{"timestamp": "2026-02-26 18:09:17,437", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] 上下文准备完成，长度: 14", "module": "chat_service", "function": "process_message", "line": 117}
{"timestamp": "2026-02-26 18:09:17,437", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] 创建Agent: is_expert=False, enable_thinking=False", "module": "chat_service", "function": "process_message", "line": 120}
{"timestamp": "2026-02-26 18:09:17,437", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] Agent创建成功", "module": "chat_service", "function": "process_message", "line": 125}
{"timestamp": "2026-02-26 18:09:17,437", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] Agent配置: {'configurable': {'thread_id': 'conversation_225'}, 'recursion_limit': 25}", "module": "chat_service", "function": "process_message", "line": 128}
{"timestamp": "2026-02-26 18:09:17,438", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] 开始流式执行Agent", "module": "chat_service", "function": "process_message", "line": 130}
{"timestamp": "2026-02-26 18:09:17,438", "level": "INFO", "logger": "app.core.tracing", "message": "[REQUEST] method=POST path=/api/v1/chat/send status_code=200 request_id=da9cbaa0-4cfb-440d-9e2b-e1fa522fbf03", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 18:09:17,446", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] updates data: {'SkillsMiddleware.before_agent': {'skills_metadata': [{'name': 'xhs-copywriter', 'description': '小红书平台文案创作专家，帮助用户创作吸引眼球的小红书笔记、种草文案、产品推荐等内容。适用于小红书营销、内容创作、品牌推广等场景。', 'path': '/xhs-copywriter/SKILL.md', 'metadata': {'author': 'dragonai', 'version': '1.0', 'platform': 'xiaohongshu'}, 'license': 'MIT', 'compatibility': '无特殊依赖', 'allowed_tools': ['web_search']}]}}", "module": "chat_service", "function": "process_message", "line": 144}
{"timestamp": "2026-02-26 18:09:17,446", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] source=SkillsMiddleware.before_agent, update keys=dict_keys(['skills_metadata'])", "module": "chat_service", "function": "process_message", "line": 146}
{"timestamp": "2026-02-26 18:09:18,205", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 1: 1 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:18,246", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 2: 3 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:18,266", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 3: 2 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:18,353", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 4: 1 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:18,460", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 5: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:18,529", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 6: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:18,610", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 7: 10 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:18,742", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 8: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:19,254", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] updates data: {'model': {'messages': [AIMessage(content='我需要先阅读小红书文案创作技能的完整指令，以便为您创作专业的护肤品文案。\\n\\n', additional_kwargs={'tool_calls': [{'index': 0, 'id': 'call_42987d218ded408f984080', 'type': 'function', 'function': {'name': 'read_file', 'arguments': '{\"file_path\": \"/xhs-copywriter/SKILL.md\"}'}}]}, response_metadata={'finish_reason': 'tool_calls', 'request_id': '17cfbe90-8205-4798-8ce8-5d4c5c604032', 'token_usage': {'input_tokens': 4070, 'output_tokens': 48, 'total_tokens': 4118, 'prompt_tokens_details': {'cached_tokens': 3968}}}, id='lc_run--019c996c-9aa5-7003-85de-047f19542470', tool_calls=[{'name': 'read_file', 'args': {'file_path': '/xhs-copywriter/SKILL.md'}, 'id': 'call_42987d218ded408f984080', 'type': 'tool_call'}], invalid_tool_calls=[])]}}", "module": "chat_service", "function": "process_message", "line": 144}
{"timestamp": "2026-02-26 18:09:19,254", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] source=model, update keys=dict_keys(['messages'])", "module": "chat_service", "function": "process_message", "line": 146}
{"timestamp": "2026-02-26 18:09:19,255", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] formatted_list=[{'type': 'tool_call', 'data': {'names': ['read_file']}}]", "module": "chat_service", "function": "process_message", "line": 149}
{"timestamp": "2026-02-26 18:09:19,255", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 9: 19 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:19,273", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] updates data: {'tools': {'messages': [ToolMessage(content='     1\\t---\\n     2\\tname: xhs-copywriter\\n     3\\tdescription: 小红书平台文案创作专家，帮助用户创作吸引眼球的小红书笔记、种草文案、产品推荐等内容。适用于小红书营销、内容创作、品牌推广等场景。\\n     4\\tlicense: MIT\\n     5\\tcompatibility: 无特殊依赖\\n     6\\tmetadata:\\n     7\\t  author: dragonai\\n     8\\t  version: \"1.0\"\\n     9\\t  platform: xiaohongshu\\n    10\\tallowed-tools: web_search\\n    11\\t---\\n    12\\t\\n    13\\t# 小红书文案生成助手\\n    14\\t\\n    15\\t## 概述\\n    16\\t\\n    17\\t这是一个专门为小红书平台设计的内容创作技能，帮助用户创作高质量、高互动的小红书笔记。掌握小红书平台的内容特点、用户偏好和爆款文案技巧。\\n    18\\t\\n    19\\t## 核心能力\\n    20\\t\\n    21\\t### 1. 标题创作技巧\\n    22\\t\\n    23\\t**爆款标题公式：**\\n    24\\t- 数字+痛点+解决方案：如\"3个方法让你告别黑头！亲测有效\"\\n    25\\t- 疑问句+好奇心：如\"为什么你的护肤品不吸收？真相是...\"\\n    26\\t- 对比反差：如\"月薪3000和月薪3万的护肤区别\"\\n    27\\t- 情感共鸣：如\"25岁以后才明白的护肤真相\"\\n    28\\t\\n    29\\t**标题优化要点：**\\n    30\\t- 控制在20字以内\\n    31\\t- 使用emoji增加吸引力（最多2-3个）\\n    32\\t- 包含关键词便于搜索\\n    33\\t- 避免标题党，内容要真实\\n    34\\t\\n    35\\t### 2. 正文结构模板\\n    36\\t\\n    37\\t**种草类笔记结构：**\\n    38\\t```\\n    39\\t【开头Hook】用一句话抓住注意力\\n    40\\t【痛点描述】描述用户面临的问题\\n    41\\t【产品/方法介绍】详细介绍解决方案\\n    42\\t【使用体验】真实的感受和效果\\n    43\\t【总结推荐】给出明确的推荐理由\\n    44\\t【互动引导】引导用户评论互动\\n    45\\t```\\n    46\\t\\n    47\\t**教程类笔记结构：**\\n    48\\t```\\n    49\\t【效果展示】先展示最终效果\\n    50\\t【步骤分解】详细步骤+配图说明\\n    51\\t【注意事项】关键要点提醒\\n    52\\t【常见问题】解答可能的问题\\n    53\\t```\\n    54\\t\\n    55\\t### 3. 内容风格指南\\n    56\\t\\n    57\\t**语言风格：**\\n    58\\t- 亲切自然，像朋友聊天\\n    59\\t- 使用\"姐妹们\"\"宝子们\"等亲切称呼\\n    60\\t- 适当使用网络流行语\\n    61\\t- 避免过于正式或营销腔\\n    62\\t\\n    63\\t**排版技巧：**\\n    64\\t- 分段清晰，每段2-3句话\\n    65\\t- 使用emoji分隔内容\\n    66\\t- 重点内容加粗或用emoji标注\\n    67\\t- 适当使用分割线\\n    68\\t\\n    69\\t### 4. 热门话题标签\\n    70\\t\\n    71\\t**常用话题标签：**\\n    72\\t- 美妆护肤：#护肤心得 #美妆分享 #好物推荐\\n    73\\t- 穿搭时尚：#穿搭分享 #时尚穿搭 #OOTD\\n    74\\t- 美食探店：#美食分享 #探店 #美食日常\\n    75\\t- 生活方式：#生活分享 #日常记录 #好物分享\\n    76\\t\\n    77\\t**标签使用规则：**\\n    78\\t- 每篇笔记3-5个话题标签\\n    79\\t- 选择与内容高度相关的标签\\n    80\\t- 优先使用热门标签\\n    81\\t- 可创建个人专属标签\\n    82\\t\\n    83\\t### 5. 互动技巧\\n    84\\t\\n    85\\t**引导评论的话术：**\\n    86\\t- \"姐妹们觉得怎么样？评论区聊聊\"\\n    87\\t- \"你们有用过这个吗？效果如何？\"\\n    88\\t- \"还有什么想了解的，评论区告诉我\"\\n    89\\t- \"点赞收藏不迷路哦~\"\\n    90\\t\\n    91\\t## 使用示例\\n    92\\t\\n    93\\t**示例1：护肤品种草**\\n    94\\t用户输入：帮我写一个关于精华液的小红书文案\\n    95\\t\\n    96\\t输出：\\n    97\\t```\\n    98\\t标题：用了这款精华28天，我的皮肤真的变了！✨\\n    99\\t\\n   100\\t姐妹们！今天要分享一个让我皮肤逆袭的秘密武器！', name='read_file', id='026bce8d-872c-41ed-86e8-7f2147d3e2d6', tool_call_id='call_42987d218ded408f984080')]}}", "module": "chat_service", "function": "process_message", "line": 144}
{"timestamp": "2026-02-26 18:09:19,274", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] source=tools, update keys=dict_keys(['messages'])", "module": "chat_service", "function": "process_message", "line": 146}
{"timestamp": "2026-02-26 18:09:19,274", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] formatted_list=[{'type': 'tool_result', 'data': {'name': 'read_file', 'content': '     1\\t---\\n     2\\tname: xhs-copywriter\\n     3\\tdescription: 小红书平台文案创作专家，帮助用户创作吸引眼球的小红书笔记、种草文案、产品推荐等内容。适用于小红书营销、内容创作、品牌推广等场景。\\n     4\\tlicense: MIT\\n     5\\tcompatibility: 无特殊依赖\\n     6\\tmetadata:\\n     7\\t  author: dragonai\\n     8\\t  version: \"1.0\"\\n     9\\t  platform: xiaohongshu\\n    10\\tallowed-tools: web_search\\n    11\\t---\\n    12\\t\\n    13\\t# 小红书文案生成助手\\n    14\\t\\n    15\\t## 概述\\n    16\\t\\n    17\\t这是一个专门为小红书平台设计的内容创作技能，帮助用户创作高质量、高互动的小红书笔记。掌握小红书平台的内容特点、用户偏好和爆款文案技巧。\\n    18\\t\\n    19\\t## 核心能力\\n    20\\t\\n    21\\t### 1. 标题创作技巧\\n    22\\t\\n    23\\t**爆款标题公式：**\\n    24\\t- 数字+痛点+解决方案：如\"3个方法让你告别黑头！亲测有效\"\\n    25\\t- 疑问句+好奇心：如\"为什么你的护肤品不吸收？真相是...\"\\n    26\\t- 对比反差：如\"月薪3000和月薪3万的护肤区别\"\\n    27\\t- 情感共鸣：如\"25岁以后才明白的护肤真相\"\\n    28\\t\\n    29\\t**标题优化要点：**\\n    30\\t- 控制在20字以内\\n    31\\t- 使用emoji增加吸引力（最多2-3个）\\n    32\\t- 包含关键词便于搜索\\n    33\\t- 避免标题党，内容要真实\\n    34\\t\\n    35\\t### 2. 正文结构模板\\n    36\\t\\n    37\\t**种草类笔记结构：**\\n    38\\t```\\n    39\\t【开头Hook】用一句话抓住注意力\\n    40\\t【痛点描述】描述用户面临的问题\\n    41\\t【产品/方法介绍】详细介绍解决方案\\n    42\\t【使用体验】真实的感受和效果\\n    43\\t【总结推荐】给出明确的推荐理由\\n    44\\t【互动引导】引导用户评论互动\\n    45\\t```\\n    46\\t\\n    47\\t**教程类笔记结构：**\\n    48\\t```\\n    49\\t【效果展示】先展示最终效果\\n    50\\t【步骤分解】详细步骤+配图说明\\n    51\\t【注意事项】关键要点提醒\\n    52\\t【常见问题】解答可能的问题\\n    53\\t```\\n    54\\t\\n    55\\t### 3. 内容风格指南\\n    56\\t\\n    57\\t**语言风格：**\\n    58\\t- 亲切自然，像朋友聊天\\n    59\\t- 使用\"姐妹们\"\"宝子们\"等亲切称呼\\n    60\\t- 适当使用网络流行语\\n    61\\t- 避免过于正式或营销腔\\n    62\\t\\n    63\\t**排版技巧：**\\n    64\\t- 分段清晰，每段2-3句话\\n    65\\t- 使用emoji分隔内容\\n    66\\t- 重点内容加粗或用emoji标注\\n    67\\t- 适当使用分割线\\n    68\\t\\n    69\\t### 4. 热门话题标签\\n    70\\t\\n    71\\t**常用话题标签：**\\n    72\\t- 美妆护肤：#护肤心得 #美妆分享 #好物推荐\\n    73\\t- 穿搭时尚：#穿搭分享 #时尚穿搭 #OOTD\\n    74\\t- 美食探店：#美食分享 #探店 #美食日常\\n    75\\t- 生活方式：#生活分享 #日常记录 #好物分享\\n    76\\t\\n    77\\t**标签使用规则：**\\n    78\\t- 每篇笔记3-5个话题标签\\n    79\\t- 选择与内容高度相关的标签\\n    80\\t- 优先使用热门标签\\n    81\\t- 可创建个人专属标签\\n    82\\t\\n    83\\t### 5. 互动技巧\\n    84\\t\\n    85\\t**引导评论的话术：**\\n    86\\t- \"姐妹们觉得怎么样？评论区聊聊\"\\n    87\\t- \"你们有用过这个吗？效果如何？\"\\n    88\\t- \"还有什么想了解的，评论区告诉我\"\\n    89\\t- \"点赞收藏不迷路哦~\"\\n    90\\t\\n    91\\t## 使用示例\\n    92\\t\\n    93\\t**示例1：护肤品种草**\\n    94\\t用户输入：帮我写一个关于精华液的小红书文案\\n    95\\t\\n    96\\t输出：\\n    97\\t```\\n    98\\t标题：用了这款精华28天，我的皮肤真的变了！✨\\n    99\\t\\n   100\\t姐妹们！今天要分享一个让我皮肤逆袭的秘密武器！'}}]", "module": "chat_service", "function": "process_message", "line": 149}
{"timestamp": "2026-02-26 18:09:20,279", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 10: 2 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:20,291", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 11: 1 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:20,343", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 12: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:20,536", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 13: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:20,563", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 14: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:20,651", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 15: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:20,738", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 16: 9 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:20,828", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 17: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:20,978", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 18: 11 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:21,091", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 19: 9 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:21,198", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 20: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:21,245", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 21: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:21,355", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 22: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:21,463", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 23: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:21,554", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 24: 9 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:21,642", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 25: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:21,771", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 26: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:21,887", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 27: 11 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:22,033", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 28: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:22,149", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 29: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:22,233", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 30: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:22,323", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 31: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:22,439", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 32: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:22,589", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 33: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:22,632", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 34: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:22,762", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 35: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:22,876", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 36: 11 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:23,003", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 37: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:23,072", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 38: 10 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:23,221", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 39: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:23,314", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 40: 10 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:23,475", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 41: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:23,558", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 42: 11 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:23,711", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 43: 12 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:23,800", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 44: 13 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:23,868", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 45: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:24,019", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 46: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:24,083", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 47: 11 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:24,149", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 48: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:24,306", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 49: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:24,380", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 50: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:24,436", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 51: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:24,587", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 52: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:24,656", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 53: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:24,787", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 54: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:24,895", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 55: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:25,010", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 56: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:25,095", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 57: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:25,196", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 58: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:25,291", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 59: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:25,318", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 60: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:25,429", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 61: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:25,578", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 62: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:25,646", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 63: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:25,798", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 64: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:25,843", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 65: 9 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:25,974", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 66: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:26,065", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 67: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:26,151", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 68: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:26,239", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 69: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:26,391", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 70: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:26,437", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 71: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:26,554", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 72: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:26,617", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 73: 10 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:26,722", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 74: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:26,812", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 75: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:26,900", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 76: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:27,031", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 77: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:27,098", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 78: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:27,187", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 79: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:27,314", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 80: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:27,364", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 81: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:27,449", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 82: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:27,579", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 83: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:27,692", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 84: 9 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:27,735", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 85: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:27,887", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 86: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:27,954", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 87: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:28,044", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 88: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:28,150", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 89: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:28,265", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 90: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:28,380", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 91: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:28,503", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 92: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:28,527", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 93: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:28,733", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 94: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:28,789", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 95: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:28,857", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 96: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:29,008", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 97: 9 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:29,099", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 98: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:29,236", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 99: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:29,345", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 100: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:29,372", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 101: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:29,495", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 102: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:29,584", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 103: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:29,691", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 104: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:29,783", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 105: 9 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:29,892", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 106: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:30,020", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 107: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:30,111", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 108: 10 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:30,199", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 109: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:30,308", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 110: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:30,375", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 111: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:30,508", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 112: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:30,570", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 113: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:30,662", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 114: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:30,794", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 115: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:30,945", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 116: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:30,991", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 117: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:31,101", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 118: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:31,190", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 119: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:31,272", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 120: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:31,344", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 121: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:31,558", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 122: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:31,577", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 123: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:31,631", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 124: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:31,739", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 125: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:31,806", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 126: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:31,915", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 127: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:32,006", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 128: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:32,114", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 129: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:32,180", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 130: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:32,223", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 131: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:32,378", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 132: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:32,465", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 133: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:32,551", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 134: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:32,664", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 135: 9 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:32,750", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 136: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:32,859", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 137: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:32,871", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 138: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:09:32,886", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] updates data: {'model': {'messages': [AIMessage(content='感谢您提供小红书文案创作技能的详细指南！现在我将为您创作一篇专业的护肤品小红书文案。\\n\\n为了确保文案内容准确、有吸引力，我需要了解一些关于您要推广的具体护肤品信息。不过由于您只提到了\"护肤品\"这个宽泛类别，我将基于小红书平台最受欢迎的护肤品类（如精华液、面霜、面膜等）创作一篇通用但高质量的种草文案。\\n\\n根据小红书文案创作指南，我将：\\n- 使用爆款标题公式（数字+痛点+解决方案）\\n- 采用种草类笔记结构：开头Hook→痛点描述→产品介绍→使用体验→总结推荐→互动引导\\n- 使用亲切自然的语言风格和适当emoji\\n- 添加相关热门话题标签\\n\\n让我为您创作这篇护肤品小红书文案：\\n\\n```\\n标题：3个被忽略的护肤误区！90%的人越护越差💔\\n\\n姐妹们！今天必须说点大实话！\\n你是不是也这样：\\n✅ 每天认真洗脸、涂水乳、敷面膜\\n✅ 护肤品买了一堆，价格不菲\\n✅ 但皮肤还是暗沉、长痘、泛红、干燥...\\n\\n真相是：90%的人护肤都踩了这些坑！\\n我花了2年时间研究皮肤科医生建议+成分党测评\\n终于找到了真正有效的护肤逻辑👇\\n\\n【误区1】过度清洁=毁脸元凶！\\n❌ 早晚用强力洁面+去角质\\n✅ 改用氨基酸洁面，每天1次就够了\\n我的皮肤屏障修复后，泛红直接消失！\\n\\n【误区2】猛药堆叠=灾难现场！\\n❌ A醇+烟酰胺+VC同时上脸\\n✅ 成分搭配要科学，新手从单一功效开始\\n现在我的精华只用1瓶，效果反而翻倍！\\n\\n【误区3】忽略防晒=所有护肤白做！\\n❌ 只在夏天/晴天才涂防晒\\n✅ 全年365天，室内也要SPF30+\\n坚持3个月，色斑淡了，肤色真的均匀了！\\n\\n💡我的护肤三件套（平价又好用）：\\n✨ 温和洁面：某品牌氨基酸洁面（59元）\\n✨ 修护精华：某品牌B5精华（129元）\\n✨ 防晒乳：某品牌清透防晒（89元）\\n\\n真实感受：用满28天，皮肤状态稳定到不敢相信！\\n再也不用每天看镜子叹气了😭\\n\\n你们还在踩哪些护肤坑？\\n评论区告诉我，帮你避雷！👇\\n#护肤干货 #护肤误区 #精简护肤 #好物分享 #护肤心得\\n```', additional_kwargs={}, response_metadata={'finish_reason': 'stop', 'request_id': '3832c23c-3368-45d2-a804-b4a964d2098b', 'token_usage': {'input_tokens': 5391, 'output_tokens': 573, 'total_tokens': 5964, 'prompt_tokens_details': {'cached_tokens': 0}}}, id='lc_run--019c996c-a1d0-7332-b0ac-5a1f7ef8cd38', tool_calls=[], invalid_tool_calls=[])]}}", "module": "chat_service", "function": "process_message", "line": 144}
{"timestamp": "2026-02-26 18:09:32,889", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] source=model, update keys=dict_keys(['messages'])", "module": "chat_service", "function": "process_message", "line": 146}
{"timestamp": "2026-02-26 18:09:32,891", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] formatted_list=[{'type': 'content', 'data': {'content': '感谢您提供小红书文案创作技能的详细指南！现在我将为您创作一篇专业的护肤品小红书文案。\\n\\n为了确保文案内容准确、有吸引力，我需要了解一些关于您要推广的具体护肤品信息。不过由于您只提到了\"护肤品\"这个宽泛类别，我将基于小红书平台最受欢迎的护肤品类（如精华液、面霜、面膜等）创作一篇通用但高质量的种草文案。\\n\\n根据小红书文案创作指南，我将：\\n- 使用爆款标题公式（数字+痛点+解决方案）\\n- 采用种草类笔记结构：开头Hook→痛点描述→产品介绍→使用体验→总结推荐→互动引导\\n- 使用亲切自然的语言风格和适当emoji\\n- 添加相关热门话题标签\\n\\n让我为您创作这篇护肤品小红书文案：\\n\\n```\\n标题：3个被忽略的护肤误区！90%的人越护越差💔\\n\\n姐妹们！今天必须说点大实话！\\n你是不是也这样：\\n✅ 每天认真洗脸、涂水乳、敷面膜\\n✅ 护肤品买了一堆，价格不菲\\n✅ 但皮肤还是暗沉、长痘、泛红、干燥...\\n\\n真相是：90%的人护肤都踩了这些坑！\\n我花了2年时间研究皮肤科医生建议+成分党测评\\n终于找到了真正有效的护肤逻辑👇\\n\\n【误区1】过度清洁=毁脸元凶！\\n❌ 早晚用强力洁面+去角质\\n✅ 改用氨基酸洁面，每天1次就够了\\n我的皮肤屏障修复后，泛红直接消失！\\n\\n【误区2】猛药堆叠=灾难现场！\\n❌ A醇+烟酰胺+VC同时上脸\\n✅ 成分搭配要科学，新手从单一功效开始\\n现在我的精华只用1瓶，效果反而翻倍！\\n\\n【误区3】忽略防晒=所有护肤白做！\\n❌ 只在夏天/晴天才涂防晒\\n✅ 全年365天，室内也要SPF30+\\n坚持3个月，色斑淡了，肤色真的均匀了！\\n\\n💡我的护肤三件套（平价又好用）：\\n✨ 温和洁面：某品牌氨基酸洁面（59元）\\n✨ 修护精华：某品牌B5精华（129元）\\n✨ 防晒乳：某品牌清透防晒（89元）\\n\\n真实感受：用满28天，皮肤状态稳定到不敢相信！\\n再也不用每天看镜子叹气了😭\\n\\n你们还在踩哪些护肤坑？\\n评论区告诉我，帮你避雷！👇\\n#护肤干货 #护肤误区 #精简护肤 #好物分享 #护肤心得\\n```'}}]", "module": "chat_service", "function": "process_message", "line": 149}
{"timestamp": "2026-02-26 18:09:32,899", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] Agent流式执行完成", "module": "chat_service", "function": "process_message", "line": 159}
{"timestamp": "2026-02-26 18:09:32,900", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Stream complete, total chunks: 138, total chars: 904", "module": "chat", "function": "generate", "line": 127}
{"timestamp": "2026-02-26 18:09:32,900", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Full response content:\n我需要先阅读小红书文案创作技能的完整指令，以便为您创作专业的护肤品文案。\n\n\n[使用工具: read_file]\n感谢您提供小红书文案创作技能的详细指南！现在我将为您创作一篇专业的护肤品小红书文案。\n\n为了确保文案内容准确、有吸引力，我需要了解一些关于您要推广的具体护肤品信息。不过由于您只提到了\"护肤品\"这个宽泛类别，我将基于小红书平台最受欢迎的护肤品类（如精华液、面霜、面膜等）创作一篇通用但高质量的种草文案。\n\n根据小红书文案创作指南，我将：\n- 使用爆款标题公式（数字+痛点+解决方案）\n- 采用种草类笔记结构：开头Hook→痛点描述→产品介绍→使用体验→总结推荐→互动引导\n- 使用亲切自然的语言风格和适当emoji\n- 添加相关热门话题标签\n\n让我为您创作这篇护肤品小红书文案：\n\n```\n标题：3个被忽略的护肤误区！90%的人越护越差💔\n\n姐妹们！今天必须说点大实话！\n你是不是也这样：\n✅ 每天认真洗脸、涂水乳、敷面膜\n✅ 护肤品买了一堆，价格不菲\n✅ 但皮肤还是暗沉、长痘、泛红、干燥...\n\n真相是：90%的人护肤都踩了这些坑！\n我花了2年时间研究皮肤科医生建议+成分党测评\n终于找到了真正有效的护肤逻辑👇\n\n【误区1】过度清洁=毁脸元凶！\n❌ 早晚用强力洁面+去角质\n✅ 改用氨基酸洁面，每天1次就够了\n我的皮肤屏障修复后，泛红直接消失！\n\n【误区2】猛药堆叠=灾难现场！\n❌ A醇+烟酰胺+VC同时上脸\n✅ 成分搭配要科学，新手从单一功效开始\n现在我的精华只用1瓶，效果反而翻倍！\n\n【误区3】忽略防晒=所有护肤白做！\n❌ 只在夏天/晴天才涂防晒\n✅ 全年365天，室内也要SPF30+\n坚持3个月，色斑淡了，肤色真的均匀了！\n\n💡我的护肤三件套（平价又好用）：\n✨ 温和洁面：某品牌氨基酸洁面（59元）\n✨ 修护精华：某品牌B5精华（129元）\n✨ 防晒乳：某品牌清透防晒（89元）\n\n真实感受：用满28天，皮肤状态稳定到不敢相信！\n再也不用每天看镜子叹气了😭\n\n你们还在踩哪些护肤坑？\n评论区告诉我，帮你避雷！👇\n#护肤干货 #护肤误区 #精简护肤 #好物分享 #护肤心得\n```", "module": "chat", "function": "generate", "line": 128}
{"timestamp": "2026-02-26 18:09:32,901", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Thinking content length: 0", "module": "chat", "function": "generate", "line": 129}
{"timestamp": "2026-02-26 18:09:32,902", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:09:32,903", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 210.8s ago] (225, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:09:32,905", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO messages (conversation_id, role, content, metadata) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::JSON) RETURNING messages.id, messages.created_at", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:09:32,906", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 209s ago] (225, 'assistant', '我需要先阅读小红书文案创作技能的完整指令，以便为您创作专业的护肤品文案。\\n\\n\\n[使用工具: read_file]\\n感谢您提供小红书文案创作技能的详细指南！现在我将为您创作一篇专业的护肤品小红书文案。\\n\\n为了确保文案内容准确、有吸引力，我需要了解一些关于您要推广的具体护肤品信息。不过由于 ... (661 characters truncated) ... n✨ 修护精华：某品牌B5精华（129元）\\n✨ 防晒乳：某品牌清透防晒（89元）\\n\\n真实感受：用满28天，皮肤状态稳定到不敢相信！\\n再也不用每天看镜子叹气了😭\\n\\n你们还在踩哪些护肤坑？\\n评论区告诉我，帮你避雷！👇\\n#护肤干货 #护肤误区 #精简护肤 #好物分享 #护肤心得\\n```', '{\"model\": \"fast\"}')", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:09:32,907", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.metadata, messages.created_at \nFROM messages \nWHERE messages.id = $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:09:32,908", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 209s ago] (614,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:09:32,908", "level": "INFO", "logger": "app.services.chat_service", "message": "[DB] Saved message id=614, metadata_={'model': 'fast'}", "module": "chat_service", "function": "create_message", "line": 76}
{"timestamp": "2026-02-26 18:09:32,909", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.metadata, messages.created_at \nFROM messages \nWHERE messages.id = $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:09:32,909", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 209s ago] (614,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:09:32,910", "level": "INFO", "logger": "app.services.chat_service", "message": "[DB] Verify saved: id=614, metadata_={'model': 'fast'}", "module": "chat_service", "function": "create_message", "line": 83}
{"timestamp": "2026-02-26 18:09:32,911", "level": "INFO", "logger": "app.services.chat_service", "message": "[CACHE DELETE] 已删除消息缓存: conversation_id=225, user_id=1, keys=1", "module": "chat_service", "function": "_invalidate_messages_cache", "line": 546}
{"timestamp": "2026-02-26 18:09:32,912", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:09:35,871", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:09:35,872", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.username = $1::VARCHAR", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:09:35,872", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 213.8s ago] ('qibao1',)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:09:35,874", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:224:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:09:35,875", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: messages:conversation:224:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 18:09:35,875", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.metadata, messages.created_at \nFROM messages JOIN conversations ON messages.conversation_id = conversations.id \nWHERE messages.conversation_id = $1::INTEGER AND conversations.user_id = $2::INTEGER ORDER BY messages.created_at ASC \n LIMIT $3::INTEGER OFFSET $4::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:09:35,876", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 213.8s ago] (224, 1, 100, 0)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:09:35,877", "level": "INFO", "logger": "app.services.chat_service", "message": "[DB] Fetched message id=611, metadata_=None", "module": "chat_service", "function": "fetch", "line": 43}
{"timestamp": "2026-02-26 18:09:35,877", "level": "INFO", "logger": "app.services.chat_service", "message": "[DB] Fetched message id=612, metadata_={'model': 'fast'}", "module": "chat_service", "function": "fetch", "line": 43}
{"timestamp": "2026-02-26 18:09:35,877", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for messages:conversation:224:user:1:skip:0:limit:100: [{'id': 611, 'conversation_id': 224, 'role': 'user', 'content': '生成小红书文案，护肤品 海蓝之谜', 'metadata': 'MetaData()', 'created_at': '2026-02-26T10:08:03.208738+00:00'}, {'id': 612, 'conversation_id': 224, 'role': 'assistant', 'content': '我需要为海蓝之谜护肤品生成小红书文案。首先，让我阅读小红书文案创作专家的技能文件，了解具体的创作要求和流程。\\n\\n\\n[使用工具: read_file]\\n现在我已经了解了小红书文案创作的规范和技巧，接下来我需要搜索关于海蓝之谜护肤品的相关信息，以便创作出真实、有吸引力的文案。\\n\\n让我使用web_search工具搜索海蓝之谜护肤品的相关信息：\\n\\n\\n[使用工具: web_search]\\n让我搜索更具体的信息，关于海蓝之谜护肤品的热门产品和用户评价：\\n\\n\\n\\n[使用工具: web_search]\\n现在我已经收集了关于海蓝之谜护肤品的相关信息，包括其热门产品（经典精华面霜、精粹水等）、核心成分（神奇活性精萃Miracle Broth™、酸橙茶精华）、用户评价（修护效果好、适合敏感肌、需要乳化使用等）以及小红书平台的风格特点。\\n\\n根据小红书文案创作规范，我将为海蓝之谜护肤品创作一篇吸引眼球的小红书笔记。我会遵循以下结构：\\n- 使用爆款标题公式（数字+痛点+解决方案）\\n- 采用亲切自然的语言风格（使用\"姐妹们\"等称呼）\\n- 按照种草类笔记结构：开头Hook→痛点描述→产品介绍→使用体验→总结推荐→互动引导\\n- 添加合适的emoji和话题标签\\n\\n让我为您创作一篇高质量的小红书文案：\\n\\n\\n标题：3个烂脸期自救法！海蓝之谜让我从\"豆腐渣\"变\"水豆腐\"✨\\n\\n姐妹们！今天必须分享一个让我皮肤逆袭的秘密武器！💥\\n\\n【开头Hook】\\n谁懂啊！！换季烂脸+熬夜爆痘+屏障受损三连击，我的脸真的快不能看了😭 用过无数修护面霜都踩雷，直到遇见这罐\"绿瓶子\"！\\n\\n【痛点描述】\\n- 换季必泛红起皮，上妆卡粉到怀疑人生\\n- 熬夜后脸干到能搓出泥，还疯狂冒闭口\\n- 屏障受损严重，连最温和的面霜都刺痛\\n- 试过太多\"修护\"产品，结果不是闷痘就是没效果\\n\\n【产品介绍】\\n海蓝之谜经典精华面霜🌿\\n✅灵魂成分：神奇活性精萃Miracle Broth™（12年6000次实验研发）\\n✅修护力MAX：海藻发酵精华+酸橙茶精华双重维稳\\n✅质地惊喜：冰激凌奶油质地，乳化后超轻薄不油腻\\n✅适用肤质：干皮/混干/敏感肌/烂脸期急救\\n\\n【使用体验】\\n✨实测28天变化：\\n第1周：厚涂当睡眠面膜，第二天脸嫩到掐出水💦\\n第2周：脸颊泛红明显减轻，上妆终于不卡粉了！\\n第3周：闭口开始平复，毛孔肉眼可见变细腻\\n第4周：整张脸状态稳定，素颜敢开原相机📸\\n\\n💡我的独家用法：\\n✔️日常护肤：取黄豆大小，掌心乳化后按压上脸\\n✔️急救修复：厚涂全脸当睡眠面膜\\n✔️妆前打底：少量点涂在干燥区，底妆服帖到哭\\n✔️局部点涂：痘痘红肿处重点照顾，消炎超快\\n\\n【总结推荐】\\n这罐\"面霜界爱马仕\"真的不是智商税！💎\\n✓ 敏感肌的安心感：修护屏障不刺激\\n✓ 干皮的幸福感：深层保湿不拔干\\n✓ 烂脸期的救命稻草：维稳抗痘双效合一\\n✓ 贵妇级的仪式感：每次护肤都是SPA体验\\n\\n【互动引导】\\n姐妹们！你们有用过海蓝之谜吗？效果如何？\\n或者你有什么烂脸期自救妙招？评论区告诉我呀👇\\n点赞收藏不迷路哦～下期分享海蓝之谜精华水搭配技巧！\\n\\n#海蓝之谜 #LAMER #护肤分享 #烂脸救星 #贵妇护肤 #敏感肌护肤 #小红书种草', 'metadata': 'MetaData()', 'created_at': '2026-02-26T10:08:03.208738+00:00'}]", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 18:09:35,878", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: messages:conversation:224:user:1:skip:0:limit:100, TTL=3787s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 18:09:35,879", "level": "INFO", "logger": "app.core.tracing", "message": "[REQUEST] method=GET path=/api/v1/chat/conversations/224/history status_code=200 request_id=01193208-9e61-4dcc-a7b4-c8ca2319e4ad", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 18:09:35,879", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:09:37,882", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:09:37,882", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.username = $1::VARCHAR", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:09:37,883", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 215.8s ago] ('qibao1',)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:09:37,885", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:223:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:09:37,886", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: messages:conversation:223:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:09:37,886", "level": "INFO", "logger": "app.core.tracing", "message": "[REQUEST] method=GET path=/api/v1/chat/conversations/223/history status_code=200 request_id=20e1e411-8bc9-4f32-a7e0-f06098bc203b", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 18:09:37,887", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:09:45,032", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:09:45,033", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.username = $1::VARCHAR", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:09:45,033", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 223s ago] ('qibao1',)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:09:45,039", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:225:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:09:45,041", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: messages:conversation:225:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 18:09:45,045", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.metadata, messages.created_at \nFROM messages JOIN conversations ON messages.conversation_id = conversations.id \nWHERE messages.conversation_id = $1::INTEGER AND conversations.user_id = $2::INTEGER ORDER BY messages.created_at ASC \n LIMIT $3::INTEGER OFFSET $4::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:09:45,048", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 223s ago] (225, 1, 100, 0)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:09:45,052", "level": "INFO", "logger": "app.services.chat_service", "message": "[DB] Fetched message id=613, metadata_=None", "module": "chat_service", "function": "fetch", "line": 43}
{"timestamp": "2026-02-26 18:09:45,053", "level": "INFO", "logger": "app.services.chat_service", "message": "[DB] Fetched message id=614, metadata_={'model': 'fast'}", "module": "chat_service", "function": "fetch", "line": 43}
{"timestamp": "2026-02-26 18:09:45,055", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for messages:conversation:225:user:1:skip:0:limit:100: [{'id': 613, 'conversation_id': 225, 'role': 'user', 'content': '帮我写一个小红书文案，护肤品', 'metadata': 'MetaData()', 'created_at': '2026-02-26T10:09:17.425897+00:00'}, {'id': 614, 'conversation_id': 225, 'role': 'assistant', 'content': '我需要先阅读小红书文案创作技能的完整指令，以便为您创作专业的护肤品文案。\\n\\n\\n[使用工具: read_file]\\n感谢您提供小红书文案创作技能的详细指南！现在我将为您创作一篇专业的护肤品小红书文案。\\n\\n为了确保文案内容准确、有吸引力，我需要了解一些关于您要推广的具体护肤品信息。不过由于您只提到了\"护肤品\"这个宽泛类别，我将基于小红书平台最受欢迎的护肤品类（如精华液、面霜、面膜等）创作一篇通用但高质量的种草文案。\\n\\n根据小红书文案创作指南，我将：\\n- 使用爆款标题公式（数字+痛点+解决方案）\\n- 采用种草类笔记结构：开头Hook→痛点描述→产品介绍→使用体验→总结推荐→互动引导\\n- 使用亲切自然的语言风格和适当emoji\\n- 添加相关热门话题标签\\n\\n让我为您创作这篇护肤品小红书文案：\\n\\n```\\n标题：3个被忽略的护肤误区！90%的人越护越差💔\\n\\n姐妹们！今天必须说点大实话！\\n你是不是也这样：\\n✅ 每天认真洗脸、涂水乳、敷面膜\\n✅ 护肤品买了一堆，价格不菲\\n✅ 但皮肤还是暗沉、长痘、泛红、干燥...\\n\\n真相是：90%的人护肤都踩了这些坑！\\n我花了2年时间研究皮肤科医生建议+成分党测评\\n终于找到了真正有效的护肤逻辑👇\\n\\n【误区1】过度清洁=毁脸元凶！\\n❌ 早晚用强力洁面+去角质\\n✅ 改用氨基酸洁面，每天1次就够了\\n我的皮肤屏障修复后，泛红直接消失！\\n\\n【误区2】猛药堆叠=灾难现场！\\n❌ A醇+烟酰胺+VC同时上脸\\n✅ 成分搭配要科学，新手从单一功效开始\\n现在我的精华只用1瓶，效果反而翻倍！\\n\\n【误区3】忽略防晒=所有护肤白做！\\n❌ 只在夏天/晴天才涂防晒\\n✅ 全年365天，室内也要SPF30+\\n坚持3个月，色斑淡了，肤色真的均匀了！\\n\\n💡我的护肤三件套（平价又好用）：\\n✨ 温和洁面：某品牌氨基酸洁面（59元）\\n✨ 修护精华：某品牌B5精华（129元）\\n✨ 防晒乳：某品牌清透防晒（89元）\\n\\n真实感受：用满28天，皮肤状态稳定到不敢相信！\\n再也不用每天看镜子叹气了😭\\n\\n你们还在踩哪些护肤坑？\\n评论区告诉我，帮你避雷！👇\\n#护肤干货 #护肤误区 #精简护肤 #好物分享 #护肤心得\\n```', 'metadata': 'MetaData()', 'created_at': '2026-02-26T10:09:17.425897+00:00'}]", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 18:09:45,057", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: messages:conversation:225:user:1:skip:0:limit:100, TTL=3821s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 18:09:45,061", "level": "INFO", "logger": "app.core.tracing", "message": "[REQUEST] method=GET path=/api/v1/chat/conversations/225/history status_code=200 request_id=159a3b5b-e482-40c8-b76e-d36bb25e28f9", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 18:09:45,065", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:10:40,440", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:10:40,441", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.username = $1::VARCHAR", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:10:40,441", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 278.4s ago] ('qibao1',)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:10:40,443", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO conversations (user_id, title, is_pinned, model_name) VALUES ($1::INTEGER, $2::VARCHAR, $3::BOOLEAN, $4::VARCHAR) RETURNING conversations.id, conversations.created_at, conversations.updated_at", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:10:40,443", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 278.4s ago] (1, '新会话', False, None)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:10:40,444", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:10:40,444", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 278.4s ago] (226,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:10:40,445", "level": "INFO", "logger": "app.services.conversation_service", "message": "[CACHE DELETE] 未找到用户会话列表缓存: user_id=1", "module": "conversation_service", "function": "_invalidate_user_cache", "line": 146}
{"timestamp": "2026-02-26 18:10:40,445", "level": "INFO", "logger": "app.core.tracing", "message": "[REQUEST] method=POST path=/api/v1/conversations status_code=201 request_id=2063b2a0-5a4f-4741-bbd2-e80ddfb6d819", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 18:10:40,446", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:10:40,465", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:10:40,465", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.username = $1::VARCHAR", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:10:40,466", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 278.4s ago] ('qibao1',)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:10:40,467", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:226:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 18:10:40,468", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:10:40,468", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 278.4s ago] (226, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:10:40,469", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:226:1: {'id': 226, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-26T10:10:40.442180+00:00', 'updated_at': '2026-02-26T10:10:40.442180+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 18:10:40,470", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:226:1, TTL=3654s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 18:10:40,471", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: messages:conversation:226:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 18:10:40,471", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.metadata, messages.created_at \nFROM messages JOIN conversations ON messages.conversation_id = conversations.id \nWHERE messages.conversation_id = $1::INTEGER AND conversations.user_id = $2::INTEGER ORDER BY messages.created_at ASC \n LIMIT $3::INTEGER OFFSET $4::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:10:40,471", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 278.4s ago] (226, 1, 100, 0)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:10:40,472", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: messages:conversation:226:user:1:skip:0:limit:100, TTL=3627s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 18:10:40,473", "level": "INFO", "logger": "app.core.tracing", "message": "[REQUEST] method=GET path=/api/v1/chat/conversations/226/history status_code=200 request_id=add2bfbf-7899-4ab3-a998-4d68a29f906b", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 18:10:40,473", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:10:43,069", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:10:43,070", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.username = $1::VARCHAR", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:10:43,071", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 281s ago] ('qibao1',)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:10:43,072", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:226:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:10:43,073", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:10:43,073", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 281s ago] (226, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:10:43,074", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO messages (conversation_id, role, content, metadata) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::JSON) RETURNING messages.id, messages.created_at", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:10:43,074", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 279.2s ago] (226, 'user', '你好', 'null')", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:10:43,076", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.metadata, messages.created_at \nFROM messages \nWHERE messages.id = $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:10:43,076", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 279.2s ago] (615,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:10:43,077", "level": "INFO", "logger": "app.services.chat_service", "message": "[DB] Saved message id=615, metadata_=None", "module": "chat_service", "function": "create_message", "line": 76}
{"timestamp": "2026-02-26 18:10:43,077", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.metadata, messages.created_at \nFROM messages \nWHERE messages.id = $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:10:43,077", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 279.2s ago] (615,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:10:43,078", "level": "INFO", "logger": "app.services.chat_service", "message": "[DB] Verify saved: id=615, metadata_=None", "module": "chat_service", "function": "create_message", "line": 83}
{"timestamp": "2026-02-26 18:10:43,079", "level": "INFO", "logger": "app.services.chat_service", "message": "[CACHE DELETE] 已删除消息缓存: conversation_id=226, user_id=1, keys=1", "module": "chat_service", "function": "_invalidate_messages_cache", "line": 546}
{"timestamp": "2026-02-26 18:10:43,079", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: messages:conversation:226:user:1:skip:0:limit:50", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 18:10:43,080", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.metadata, messages.created_at \nFROM messages JOIN conversations ON messages.conversation_id = conversations.id \nWHERE messages.conversation_id = $1::INTEGER AND conversations.user_id = $2::INTEGER ORDER BY messages.created_at ASC \n LIMIT $3::INTEGER OFFSET $4::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:10:43,080", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 281s ago] (226, 1, 50, 0)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:10:43,081", "level": "INFO", "logger": "app.services.chat_service", "message": "[DB] Fetched message id=615, metadata_=None", "module": "chat_service", "function": "fetch", "line": 43}
{"timestamp": "2026-02-26 18:10:43,081", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for messages:conversation:226:user:1:skip:0:limit:50: [{'id': 615, 'conversation_id': 226, 'role': 'user', 'content': '你好', 'metadata': 'MetaData()', 'created_at': '2026-02-26T10:10:43.071513+00:00'}]", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 18:10:43,082", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: messages:conversation:226:user:1:skip:0:limit:50, TTL=3889s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 18:10:43,082", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] 开始生成流式响应: conversation_id=226, enable_thinking=False", "module": "chat_service", "function": "generate_response_stream", "line": 465}
{"timestamp": "2026-02-26 18:10:43,082", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] 开始处理消息: conversation_id=226", "module": "chat_service", "function": "process_message", "line": 103}
{"timestamp": "2026-02-26 18:10:43,083", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] 上下文准备完成，长度: 2", "module": "chat_service", "function": "process_message", "line": 117}
{"timestamp": "2026-02-26 18:10:43,083", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] 创建Agent: is_expert=False, enable_thinking=False", "module": "chat_service", "function": "process_message", "line": 120}
{"timestamp": "2026-02-26 18:10:43,083", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] Agent创建成功", "module": "chat_service", "function": "process_message", "line": 125}
{"timestamp": "2026-02-26 18:10:43,083", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] Agent配置: {'configurable': {'thread_id': 'conversation_226'}, 'recursion_limit': 25}", "module": "chat_service", "function": "process_message", "line": 128}
{"timestamp": "2026-02-26 18:10:43,083", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] 开始流式执行Agent", "module": "chat_service", "function": "process_message", "line": 130}
{"timestamp": "2026-02-26 18:10:43,084", "level": "INFO", "logger": "app.core.tracing", "message": "[REQUEST] method=POST path=/api/v1/chat/send status_code=200 request_id=117cd8e1-d78e-4ec7-9903-d88b92ecdccf", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 18:10:43,092", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] updates data: {'SkillsMiddleware.before_agent': {'skills_metadata': [{'name': 'xhs-copywriter', 'description': '小红书平台文案创作专家，帮助用户创作吸引眼球的小红书笔记、种草文案、产品推荐等内容。适用于小红书营销、内容创作、品牌推广等场景。', 'path': '/xhs-copywriter/SKILL.md', 'metadata': {'author': 'dragonai', 'version': '1.0', 'platform': 'xiaohongshu'}, 'license': 'MIT', 'compatibility': '无特殊依赖', 'allowed_tools': ['web_search']}]}}", "module": "chat_service", "function": "process_message", "line": 144}
{"timestamp": "2026-02-26 18:10:43,092", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] source=SkillsMiddleware.before_agent, update keys=dict_keys(['skills_metadata'])", "module": "chat_service", "function": "process_message", "line": 146}
{"timestamp": "2026-02-26 18:10:43,972", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 1: 2 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:10:44,010", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 2: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:10:44,034", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 3: 2 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:10:44,163", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 4: 2 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:10:44,258", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 5: 11 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:10:44,280", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 6: 1 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:10:44,295", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] updates data: {'model': {'messages': [AIMessage(content='你好！很高兴见到你，有什么我可以帮你的吗？😊', additional_kwargs={}, response_metadata={'finish_reason': 'stop', 'request_id': 'cace3754-18af-47ac-99ae-09fa2c4ef52c', 'token_usage': {'input_tokens': 4063, 'output_tokens': 13, 'total_tokens': 4076, 'prompt_tokens_details': {'cached_tokens': 0}}}, id='lc_run--019c996d-e935-7da0-b404-4c26cac1eb03', tool_calls=[], invalid_tool_calls=[])]}}", "module": "chat_service", "function": "process_message", "line": 144}
{"timestamp": "2026-02-26 18:10:44,295", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] source=model, update keys=dict_keys(['messages'])", "module": "chat_service", "function": "process_message", "line": 146}
{"timestamp": "2026-02-26 18:10:44,296", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] formatted_list=[{'type': 'content', 'data': {'content': '你好！很高兴见到你，有什么我可以帮你的吗？😊'}}]", "module": "chat_service", "function": "process_message", "line": 149}
{"timestamp": "2026-02-26 18:10:44,297", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] Agent流式执行完成", "module": "chat_service", "function": "process_message", "line": 159}
{"timestamp": "2026-02-26 18:10:44,298", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Stream complete, total chunks: 6, total chars: 22", "module": "chat", "function": "generate", "line": 127}
{"timestamp": "2026-02-26 18:10:44,298", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Full response content:\n你好！很高兴见到你，有什么我可以帮你的吗？😊", "module": "chat", "function": "generate", "line": 128}
{"timestamp": "2026-02-26 18:10:44,298", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Thinking content length: 0", "module": "chat", "function": "generate", "line": 129}
{"timestamp": "2026-02-26 18:10:44,298", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:10:44,298", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 282.2s ago] (226, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:10:44,299", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO messages (conversation_id, role, content, metadata) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::JSON) RETURNING messages.id, messages.created_at", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:10:44,300", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 280.4s ago] (226, 'assistant', '你好！很高兴见到你，有什么我可以帮你的吗？😊', '{\"model\": \"fast\"}')", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:10:44,301", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.metadata, messages.created_at \nFROM messages \nWHERE messages.id = $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:10:44,301", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 280.4s ago] (616,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:10:44,302", "level": "INFO", "logger": "app.services.chat_service", "message": "[DB] Saved message id=616, metadata_={'model': 'fast'}", "module": "chat_service", "function": "create_message", "line": 76}
{"timestamp": "2026-02-26 18:10:44,303", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.metadata, messages.created_at \nFROM messages \nWHERE messages.id = $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:10:44,303", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 280.4s ago] (616,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:10:44,304", "level": "INFO", "logger": "app.services.chat_service", "message": "[DB] Verify saved: id=616, metadata_={'model': 'fast'}", "module": "chat_service", "function": "create_message", "line": 83}
{"timestamp": "2026-02-26 18:10:44,304", "level": "INFO", "logger": "app.services.chat_service", "message": "[CACHE DELETE] 已删除消息缓存: conversation_id=226, user_id=1, keys=1", "module": "chat_service", "function": "_invalidate_messages_cache", "line": 546}
{"timestamp": "2026-02-26 18:10:44,305", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:13:35,642", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 连接已关闭", "module": "agent_factory", "function": "close_checkpointer", "line": 89}
{"timestamp": "2026-02-26 18:13:35,661", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 18:13:35,661", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 118}
{"timestamp": "2026-02-26 18:13:38,376", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 104}
{"timestamp": "2026-02-26 18:13:38,419", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 初始化成功", "module": "agent_factory", "function": "init_checkpointer", "line": 71}
{"timestamp": "2026-02-26 18:13:38,419", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 107}
{"timestamp": "2026-02-26 18:13:38,420", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 109}
{"timestamp": "2026-02-26 18:13:38,420", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 开始缓存预热 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 159}
{"timestamp": "2026-02-26 18:13:38,420", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热会话列表缓存，限制 100 条", "module": "cache_warmup", "function": "warmup_conversations", "line": 26}
{"timestamp": "2026-02-26 18:13:38,472", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:38,472", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:38,473", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:38,473", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:38,474", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:38,474", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:38,474", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:13:38,479", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \n LIMIT $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:38,479", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00022s] (50,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:38,482", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversations:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 18:13:38,484", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.user_id = $1::INTEGER ORDER BY conversations.is_pinned DESC, conversations.updated_at DESC \n LIMIT $2::INTEGER OFFSET $3::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:38,484", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00031s] (1, 100, 0)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:38,486", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversations:user:1:skip:0:limit:100: [{'id': 226, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-26T10:10:40.442180+00:00', 'updated_at': '2026-02-26T10:10:40.442180+00:00'}, {'id': 225, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-26T10:08:58.236057+00:00', 'updated_at': '2026-02-26T10:08:58.236057+00:00'}, {'id': 224, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-26T10:07:48.664417+00:00', 'updated_at': '2026-02-26T10:07:48.664417+00:00'}, {'id': 223, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-26T10:06:02.054684+00:00', 'updated_at': '2026-02-26T10:06:02.054684+00:00'}, {'id': 222, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-26T09:46:52.728826+00:00', 'updated_at': '2026-02-26T09:46:52.728826+00:00'}, {'id': 221, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-26T09:42:18.712045+00:00', 'updated_at': '2026-02-26T09:42:18.712045+00:00'}, {'id': 220, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T20:05:52.426575+00:00', 'updated_at': '2026-02-25T20:05:52.426575+00:00'}, {'id': 219, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T18:35:35.586803+00:00', 'updated_at': '2026-02-25T18:35:35.586803+00:00'}, {'id': 218, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T18:35:17.658631+00:00', 'updated_at': '2026-02-25T18:35:17.658631+00:00'}, {'id': 217, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T18:27:50.787750+00:00', 'updated_at': '2026-02-25T18:27:50.787750+00:00'}, {'id': 216, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T18:18:58.723048+00:00', 'updated_at': '2026-02-25T18:18:58.723048+00:00'}, {'id': 215, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T18:05:04.122315+00:00', 'updated_at': '2026-02-25T18:05:04.122315+00:00'}, {'id': 214, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:46:24.232806+00:00', 'updated_at': '2026-02-25T17:46:24.232806+00:00'}, {'id': 213, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:43:09.146742+00:00', 'updated_at': '2026-02-25T17:43:09.146742+00:00'}, {'id': 212, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:41:10.457397+00:00', 'updated_at': '2026-02-25T17:41:10.457397+00:00'}, {'id': 211, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:36:36.866901+00:00', 'updated_at': '2026-02-25T17:36:36.866901+00:00'}, {'id': 210, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:35:41.686230+00:00', 'updated_at': '2026-02-25T17:35:41.686230+00:00'}, {'id': 209, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:28:46.107951+00:00', 'updated_at': '2026-02-25T17:28:46.107951+00:00'}, {'id': 208, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:24:46.995898+00:00', 'updated_at': '2026-02-25T17:24:46.995898+00:00'}, {'id': 207, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:18:22.171051+00:00', 'updated_at': '2026-02-25T17:18:22.171051+00:00'}, {'id': 206, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:15:32.934734+00:00', 'updated_at': '2026-02-25T17:15:32.934734+00:00'}, {'id': 205, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:12:01.339171+00:00', 'updated_at': '2026-02-25T17:12:01.339171+00:00'}, {'id': 204, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:05:57.701858+00:00', 'updated_at': '2026-02-25T17:05:57.701858+00:00'}, {'id': 203, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:00:11.461904+00:00', 'updated_at': '2026-02-25T17:00:11.461904+00:00'}, {'id': 202, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T16:55:04.663265+00:00', 'updated_at': '2026-02-25T16:55:04.663265+00:00'}, {'id': 201, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T16:51:00.791887+00:00', 'updated_at': '2026-02-25T16:51:00.791887+00:00'}, {'id': 200, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T16:50:44.425883+00:00', 'updated_at': '2026-02-25T16:50:44.425883+00:00'}, {'id': 199, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T16:45:32.330297+00:00', 'updated_at': '2026-02-25T16:45:32.330297+00:00'}, {'id': 198, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T16:45:18.281430+00:00', 'updated_at': '2026-02-25T16:45:18.281430+00:00'}, {'id': 197, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T16:20:51.014190+00:00', 'updated_at': '2026-02-25T16:20:51.014190+00:00'}, {'id': 196, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T15:44:33.502770+00:00', 'updated_at': '2026-02-25T15:44:33.502770+00:00'}, {'id': 195, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T15:38:11.237687+00:00', 'updated_at': '2026-02-25T15:38:11.237687+00:00'}, {'id': 194, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T15:37:53.427931+00:00', 'updated_at': '2026-02-25T15:37:53.427931+00:00'}, {'id': 193, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T15:36:19.760334+00:00', 'updated_at': '2026-02-25T15:36:19.760334+00:00'}, {'id': 192, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T15:35:18.417589+00:00', 'updated_at': '2026-02-25T15:35:18.417589+00:00'}, {'id': 191, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T15:03:14.211782+00:00', 'updated_at': '2026-02-25T15:03:14.211782+00:00'}, {'id': 190, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T14:36:42.154696+00:00', 'updated_at': '2026-02-25T14:36:42.154696+00:00'}, {'id': 189, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T14:31:01.510866+00:00', 'updated_at': '2026-02-25T14:31:01.510866+00:00'}, {'id': 188, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T14:29:53.274194+00:00', 'updated_at': '2026-02-25T14:29:53.274194+00:00'}, {'id': 187, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T13:12:52.546721+00:00', 'updated_at': '2026-02-25T13:12:52.546721+00:00'}, {'id': 186, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T13:10:59.604351+00:00', 'updated_at': '2026-02-25T13:10:59.604351+00:00'}, {'id': 185, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T13:10:27.514931+00:00', 'updated_at': '2026-02-25T13:10:27.514931+00:00'}, {'id': 184, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T13:08:41.882447+00:00', 'updated_at': '2026-02-25T13:08:41.882447+00:00'}, {'id': 183, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T12:27:32.234206+00:00', 'updated_at': '2026-02-25T12:27:32.234206+00:00'}, {'id': 182, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T12:17:23.497578+00:00', 'updated_at': '2026-02-25T12:17:23.497578+00:00'}, {'id': 181, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T12:15:04.054903+00:00', 'updated_at': '2026-02-25T12:15:04.054903+00:00'}, {'id': 180, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T12:11:41.757639+00:00', 'updated_at': '2026-02-25T12:11:41.757639+00:00'}, {'id': 179, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T12:09:15.894955+00:00', 'updated_at': '2026-02-25T12:09:15.894955+00:00'}, {'id': 178, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T12:01:08.835467+00:00', 'updated_at': '2026-02-25T12:01:08.835467+00:00'}, {'id': 177, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T11:56:14.684224+00:00', 'updated_at': '2026-02-25T11:56:14.684224+00:00'}, {'id': 176, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T10:52:03.862026+00:00', 'updated_at': '2026-02-25T10:52:03.862026+00:00'}, {'id': 175, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T10:50:02.518522+00:00', 'updated_at': '2026-02-25T10:50:02.518522+00:00'}, {'id': 174, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T10:42:55.821262+00:00', 'updated_at': '2026-02-25T10:42:55.821262+00:00'}, {'id': 173, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T10:38:49.101647+00:00', 'updated_at': '2026-02-25T10:38:49.101647+00:00'}, {'id': 172, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T10:38:09.353141+00:00', 'updated_at': '2026-02-25T10:38:09.353141+00:00'}, {'id': 171, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T09:21:48.948162+00:00', 'updated_at': '2026-02-25T09:21:48.948162+00:00'}, {'id': 170, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T09:17:55.698363+00:00', 'updated_at': '2026-02-25T09:17:55.698363+00:00'}, {'id': 169, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T09:17:18.775757+00:00', 'updated_at': '2026-02-25T09:17:18.775757+00:00'}, {'id': 168, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T09:16:23.024303+00:00', 'updated_at': '2026-02-25T09:16:23.024303+00:00'}, {'id': 167, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T09:12:41.857175+00:00', 'updated_at': '2026-02-25T09:12:41.857175+00:00'}, {'id': 166, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T08:36:41.383650+00:00', 'updated_at': '2026-02-25T08:36:41.383650+00:00'}, {'id': 165, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T08:34:32.543620+00:00', 'updated_at': '2026-02-25T08:34:32.543620+00:00'}, {'id': 164, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T08:32:11.855646+00:00', 'updated_at': '2026-02-25T08:32:11.855646+00:00'}, {'id': 163, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T08:27:25.972885+00:00', 'updated_at': '2026-02-25T08:27:25.972885+00:00'}, {'id': 162, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T16:10:55.313974+00:00', 'updated_at': '2026-02-24T16:10:55.313974+00:00'}, {'id': 161, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T16:09:08.553629+00:00', 'updated_at': '2026-02-24T16:09:08.553629+00:00'}, {'id': 160, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T16:06:15.394421+00:00', 'updated_at': '2026-02-24T16:06:15.394421+00:00'}, {'id': 159, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T16:05:31.589282+00:00', 'updated_at': '2026-02-24T16:05:31.589282+00:00'}, {'id': 158, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T15:55:30.195931+00:00', 'updated_at': '2026-02-24T15:55:30.195931+00:00'}, {'id': 157, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T15:42:11.582736+00:00', 'updated_at': '2026-02-24T15:42:11.582736+00:00'}, {'id': 156, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T13:54:53.908013+00:00', 'updated_at': '2026-02-24T13:54:53.908013+00:00'}, {'id': 155, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T13:21:34.170984+00:00', 'updated_at': '2026-02-24T13:21:34.170984+00:00'}, {'id': 153, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T13:18:32.014035+00:00', 'updated_at': '2026-02-24T13:18:32.014035+00:00'}, {'id': 152, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T13:15:16.961323+00:00', 'updated_at': '2026-02-24T13:15:16.961323+00:00'}, {'id': 151, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T12:43:20.889833+00:00', 'updated_at': '2026-02-24T12:43:20.889833+00:00'}, {'id': 150, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T12:42:56.016952+00:00', 'updated_at': '2026-02-24T12:42:56.016952+00:00'}, {'id': 149, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:55:56.042369+00:00', 'updated_at': '2026-02-24T10:55:56.042369+00:00'}, {'id': 148, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:55:41.488047+00:00', 'updated_at': '2026-02-24T10:55:41.488047+00:00'}, {'id': 147, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:49:14.817320+00:00', 'updated_at': '2026-02-24T10:49:14.817320+00:00'}, {'id': 146, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:48:57.350358+00:00', 'updated_at': '2026-02-24T10:48:57.350358+00:00'}, {'id': 145, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:46:32.242848+00:00', 'updated_at': '2026-02-24T10:46:32.242848+00:00'}, {'id': 144, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:44:06.957698+00:00', 'updated_at': '2026-02-24T10:44:06.957698+00:00'}, {'id': 143, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:43:36.650302+00:00', 'updated_at': '2026-02-24T10:43:36.650302+00:00'}, {'id': 142, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:41:27.108791+00:00', 'updated_at': '2026-02-24T10:41:27.108791+00:00'}, {'id': 141, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:41:00.283484+00:00', 'updated_at': '2026-02-24T10:41:00.283484+00:00'}, {'id': 140, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:39:47.897467+00:00', 'updated_at': '2026-02-24T10:39:47.897467+00:00'}, {'id': 139, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:34:05.150318+00:00', 'updated_at': '2026-02-24T10:34:05.150318+00:00'}, {'id': 138, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:29:46.478868+00:00', 'updated_at': '2026-02-24T10:29:46.478868+00:00'}, {'id': 137, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:28:45.655878+00:00', 'updated_at': '2026-02-24T10:28:45.655878+00:00'}, {'id': 136, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:05:25.775341+00:00', 'updated_at': '2026-02-24T10:05:25.775341+00:00'}, {'id': 135, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T09:56:25.866934+00:00', 'updated_at': '2026-02-24T09:56:25.866934+00:00'}, {'id': 134, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T09:53:06.440754+00:00', 'updated_at': '2026-02-24T09:53:06.440754+00:00'}, {'id': 133, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T09:51:21.444274+00:00', 'updated_at': '2026-02-24T09:51:21.444274+00:00'}, {'id': 132, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T09:39:42.439041+00:00', 'updated_at': '2026-02-24T09:39:42.439041+00:00'}, {'id': 131, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T09:38:48.866580+00:00', 'updated_at': '2026-02-24T09:38:48.866580+00:00'}, {'id': 130, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T09:28:16.002211+00:00', 'updated_at': '2026-02-24T09:28:16.002211+00:00'}, {'id': 129, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T09:27:49.270616+00:00', 'updated_at': '2026-02-24T09:27:49.270616+00:00'}, {'id': 128, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T09:26:50.501911+00:00', 'updated_at': '2026-02-24T09:26:50.501911+00:00'}, {'id': 127, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T09:22:10.441084+00:00', 'updated_at': '2026-02-24T09:22:10.441084+00:00'}, {'id': 126, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T09:21:30.564128+00:00', 'updated_at': '2026-02-24T09:21:30.564128+00:00'}]", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 18:13:38,487", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversations:user:1:skip:0:limit:100, TTL=3732s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 18:13:38,488", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 用户 1 的会话列表已预热", "module": "cache_warmup", "function": "warmup_conversations", "line": 56}
{"timestamp": "2026-02-26 18:13:38,488", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 60}
{"timestamp": "2026-02-26 18:13:38,488", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:13:38,488", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热置顶会话详情缓存", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 65}
{"timestamp": "2026-02-26 18:13:38,489", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:13:38,489", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.is_pinned = true", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:38,490", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00019s] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:38,490", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 102}
{"timestamp": "2026-02-26 18:13:38,490", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:13:38,491", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热最近 24 小时活跃的会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 114}
{"timestamp": "2026-02-26 18:13:38,491", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:13:38,492", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.updated_at >= $1::TIMESTAMP WITH TIME ZONE \n LIMIT $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:38,492", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00026s] (datetime.datetime(2026, 2, 25, 10, 13, 38, 491359), 200)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:38,493", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:163:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,493", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:164:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,493", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:165:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,494", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:166:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,494", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:167:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,494", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:168:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,494", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:169:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,494", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:170:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,495", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:171:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,495", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:172:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,495", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:173:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,495", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:174:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,496", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:175:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,496", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:176:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,496", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:177:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,496", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:178:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,497", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:179:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,497", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:180:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,497", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:181:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,497", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:182:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,497", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:183:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,498", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:184:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,498", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:185:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,499", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:186:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,499", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:187:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,499", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:188:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,499", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:189:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,500", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:190:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,500", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:191:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,500", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:192:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,500", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:193:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,500", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:194:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,500", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:195:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,501", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:196:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,501", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:197:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,501", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:198:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,501", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:199:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,501", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:200:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,501", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:201:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,502", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:202:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,502", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:203:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,502", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:204:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,502", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:205:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,502", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:206:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,502", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:207:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,503", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:208:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,503", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:209:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,503", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:210:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,503", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:211:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,503", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:212:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,504", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:213:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,504", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:214:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,504", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:215:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,504", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:216:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,504", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:217:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,505", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:218:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,505", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:219:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,505", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:220:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,506", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:221:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,506", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:222:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,506", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:223:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,506", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:224:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,506", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:225:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,506", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:226:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:38,506", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 64 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 154}
{"timestamp": "2026-02-26 18:13:38,507", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:13:38,507", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 缓存预热完成 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 165}
{"timestamp": "2026-02-26 18:13:38,618", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 连接已关闭", "module": "agent_factory", "function": "close_checkpointer", "line": 89}
{"timestamp": "2026-02-26 18:13:38,633", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 18:13:38,633", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 118}
{"timestamp": "2026-02-26 18:13:41,327", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 104}
{"timestamp": "2026-02-26 18:13:41,370", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 初始化成功", "module": "agent_factory", "function": "init_checkpointer", "line": 71}
{"timestamp": "2026-02-26 18:13:41,371", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 107}
{"timestamp": "2026-02-26 18:13:41,371", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 109}
{"timestamp": "2026-02-26 18:13:41,371", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 开始缓存预热 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 159}
{"timestamp": "2026-02-26 18:13:41,371", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热会话列表缓存，限制 100 条", "module": "cache_warmup", "function": "warmup_conversations", "line": 26}
{"timestamp": "2026-02-26 18:13:41,424", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:41,425", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:41,426", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:41,426", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:41,426", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:41,427", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:41,428", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:13:41,432", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \n LIMIT $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:41,432", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00023s] (50,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:41,436", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversations:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,436", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 用户 1 的会话列表已预热", "module": "cache_warmup", "function": "warmup_conversations", "line": 56}
{"timestamp": "2026-02-26 18:13:41,436", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 60}
{"timestamp": "2026-02-26 18:13:41,436", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:13:41,437", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热置顶会话详情缓存", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 65}
{"timestamp": "2026-02-26 18:13:41,437", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:13:41,438", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.is_pinned = true", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:41,438", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00027s] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:41,439", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 102}
{"timestamp": "2026-02-26 18:13:41,440", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:13:41,440", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热最近 24 小时活跃的会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 114}
{"timestamp": "2026-02-26 18:13:41,440", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:13:41,441", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.updated_at >= $1::TIMESTAMP WITH TIME ZONE \n LIMIT $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:41,441", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00024s] (datetime.datetime(2026, 2, 25, 10, 13, 41, 440533), 200)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:41,442", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:163:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,443", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:164:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,443", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:165:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,443", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:166:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,443", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:167:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,444", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:168:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,444", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:169:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,444", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:170:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,444", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:171:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,444", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:172:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,444", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:173:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,445", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:174:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,445", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:175:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,446", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:176:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,446", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:177:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,446", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:178:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,447", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:179:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,447", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:180:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,447", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:181:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,447", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:182:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,447", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:183:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,447", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:184:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,448", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:185:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,448", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:186:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,448", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:187:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,449", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:188:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,449", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:189:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,449", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:190:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,449", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:191:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,449", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:192:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,450", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:193:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,450", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:194:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,450", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:195:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,450", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:196:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,451", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:197:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,451", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:198:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,451", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:199:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,451", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:200:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,452", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:201:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,452", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:202:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,452", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:203:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,452", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:204:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,453", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:205:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,453", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:206:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,453", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:207:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,453", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:208:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,453", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:209:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,453", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:210:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,454", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:211:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,454", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:212:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,454", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:213:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,454", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:214:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,454", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:215:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,454", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:216:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,455", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:217:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,455", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:218:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,455", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:219:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,455", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:220:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,455", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:221:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,456", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:222:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,456", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:223:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,456", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:224:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,456", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:225:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,456", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:226:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:41,456", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 64 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 154}
{"timestamp": "2026-02-26 18:13:41,456", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:13:41,457", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 缓存预热完成 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 165}
{"timestamp": "2026-02-26 18:13:41,567", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 连接已关闭", "module": "agent_factory", "function": "close_checkpointer", "line": 89}
{"timestamp": "2026-02-26 18:13:41,584", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 18:13:41,585", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 118}
{"timestamp": "2026-02-26 18:13:44,321", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 104}
{"timestamp": "2026-02-26 18:13:44,366", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 初始化成功", "module": "agent_factory", "function": "init_checkpointer", "line": 71}
{"timestamp": "2026-02-26 18:13:44,366", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 107}
{"timestamp": "2026-02-26 18:13:44,366", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 109}
{"timestamp": "2026-02-26 18:13:44,367", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 开始缓存预热 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 159}
{"timestamp": "2026-02-26 18:13:44,367", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热会话列表缓存，限制 100 条", "module": "cache_warmup", "function": "warmup_conversations", "line": 26}
{"timestamp": "2026-02-26 18:13:44,419", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:44,419", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:44,421", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:44,421", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:44,422", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:44,422", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:44,423", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:13:44,427", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \n LIMIT $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:44,427", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00023s] (50,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:44,431", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversations:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,431", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 用户 1 的会话列表已预热", "module": "cache_warmup", "function": "warmup_conversations", "line": 56}
{"timestamp": "2026-02-26 18:13:44,431", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 60}
{"timestamp": "2026-02-26 18:13:44,431", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:13:44,431", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热置顶会话详情缓存", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 65}
{"timestamp": "2026-02-26 18:13:44,432", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:13:44,433", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.is_pinned = true", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:44,433", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00024s] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:44,434", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 102}
{"timestamp": "2026-02-26 18:13:44,434", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:13:44,435", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热最近 24 小时活跃的会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 114}
{"timestamp": "2026-02-26 18:13:44,435", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:13:44,436", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.updated_at >= $1::TIMESTAMP WITH TIME ZONE \n LIMIT $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:44,436", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00021s] (datetime.datetime(2026, 2, 25, 10, 13, 44, 435252), 200)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:44,437", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:163:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,438", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:164:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,438", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:165:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,438", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:166:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,438", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:167:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,438", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:168:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,439", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:169:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,439", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:170:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,439", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:171:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,439", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:172:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,439", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:173:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,440", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:174:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,440", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:175:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,440", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:176:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,440", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:177:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,440", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:178:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,440", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:179:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,441", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:180:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,441", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:181:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,441", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:182:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,441", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:183:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,441", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:184:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,442", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:185:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,442", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:186:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,442", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:187:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,442", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:188:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,442", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:189:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,442", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:190:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,442", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:191:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,443", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:192:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,443", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:193:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,443", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:194:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,443", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:195:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,443", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:196:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,444", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:197:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,444", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:198:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,444", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:199:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,444", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:200:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,444", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:201:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,444", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:202:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,445", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:203:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,445", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:204:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,445", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:205:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,445", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:206:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,445", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:207:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,445", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:208:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,445", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:209:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,446", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:210:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,446", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:211:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,446", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:212:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,446", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:213:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,446", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:214:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,447", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:215:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,447", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:216:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,447", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:217:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,447", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:218:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,447", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:219:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,448", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:220:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,448", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:221:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,448", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:222:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,448", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:223:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,449", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:224:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,449", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:225:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,449", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:226:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:44,449", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 64 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 154}
{"timestamp": "2026-02-26 18:13:44,449", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:13:44,450", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 缓存预热完成 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 165}
{"timestamp": "2026-02-26 18:13:44,561", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 连接已关闭", "module": "agent_factory", "function": "close_checkpointer", "line": 89}
{"timestamp": "2026-02-26 18:13:44,577", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 18:13:44,577", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 118}
{"timestamp": "2026-02-26 18:13:47,358", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 104}
{"timestamp": "2026-02-26 18:13:47,400", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 初始化成功", "module": "agent_factory", "function": "init_checkpointer", "line": 71}
{"timestamp": "2026-02-26 18:13:47,400", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 107}
{"timestamp": "2026-02-26 18:13:47,400", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 109}
{"timestamp": "2026-02-26 18:13:47,401", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 开始缓存预热 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 159}
{"timestamp": "2026-02-26 18:13:47,401", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热会话列表缓存，限制 100 条", "module": "cache_warmup", "function": "warmup_conversations", "line": 26}
{"timestamp": "2026-02-26 18:13:47,452", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:47,452", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:47,453", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:47,453", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:47,454", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:47,454", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:47,454", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:13:47,459", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \n LIMIT $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:47,459", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00026s] (50,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:47,462", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversations:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,462", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 用户 1 的会话列表已预热", "module": "cache_warmup", "function": "warmup_conversations", "line": 56}
{"timestamp": "2026-02-26 18:13:47,463", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 60}
{"timestamp": "2026-02-26 18:13:47,463", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:13:47,463", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热置顶会话详情缓存", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 65}
{"timestamp": "2026-02-26 18:13:47,464", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:13:47,465", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.is_pinned = true", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:47,465", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00024s] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:47,466", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 102}
{"timestamp": "2026-02-26 18:13:47,466", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:13:47,466", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热最近 24 小时活跃的会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 114}
{"timestamp": "2026-02-26 18:13:47,467", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:13:47,467", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.updated_at >= $1::TIMESTAMP WITH TIME ZONE \n LIMIT $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:47,468", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00024s] (datetime.datetime(2026, 2, 25, 10, 13, 47, 467103), 200)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:47,469", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:163:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,469", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:164:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,469", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:165:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,470", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:166:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,470", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:167:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,470", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:168:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,470", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:169:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,470", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:170:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,470", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:171:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,471", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:172:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,471", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:173:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,471", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:174:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,471", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:175:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,471", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:176:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,471", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:177:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,472", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:178:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,472", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:179:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,472", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:180:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,472", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:181:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,472", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:182:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,472", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:183:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,473", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:184:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,473", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:185:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,473", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:186:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,473", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:187:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,473", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:188:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,473", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:189:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,474", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:190:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,474", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:191:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,474", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:192:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,474", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:193:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,474", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:194:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,474", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:195:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,474", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:196:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,475", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:197:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,475", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:198:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,475", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:199:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,475", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:200:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,475", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:201:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,476", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:202:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,476", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:203:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,476", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:204:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,476", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:205:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,476", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:206:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,476", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:207:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,476", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:208:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,477", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:209:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,477", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:210:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,477", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:211:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,477", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:212:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,477", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:213:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,477", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:214:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,478", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:215:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,478", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:216:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,478", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:217:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,478", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:218:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,479", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:219:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,479", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:220:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,479", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:221:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,479", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:222:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,479", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:223:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,479", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:224:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,480", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:225:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,480", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:226:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:47,480", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 64 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 154}
{"timestamp": "2026-02-26 18:13:47,480", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:13:47,480", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 缓存预热完成 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 165}
{"timestamp": "2026-02-26 18:13:47,588", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 连接已关闭", "module": "agent_factory", "function": "close_checkpointer", "line": 89}
{"timestamp": "2026-02-26 18:13:47,604", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 18:13:47,604", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 118}
{"timestamp": "2026-02-26 18:13:50,233", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 104}
{"timestamp": "2026-02-26 18:13:50,278", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 初始化成功", "module": "agent_factory", "function": "init_checkpointer", "line": 71}
{"timestamp": "2026-02-26 18:13:50,278", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 107}
{"timestamp": "2026-02-26 18:13:50,278", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 109}
{"timestamp": "2026-02-26 18:13:50,278", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 开始缓存预热 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 159}
{"timestamp": "2026-02-26 18:13:50,278", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热会话列表缓存，限制 100 条", "module": "cache_warmup", "function": "warmup_conversations", "line": 26}
{"timestamp": "2026-02-26 18:13:50,331", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:50,331", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:50,332", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:50,332", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:50,333", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:50,333", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:50,333", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:13:50,338", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \n LIMIT $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:50,338", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00038s] (50,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:50,342", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversations:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,342", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 用户 1 的会话列表已预热", "module": "cache_warmup", "function": "warmup_conversations", "line": 56}
{"timestamp": "2026-02-26 18:13:50,342", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 60}
{"timestamp": "2026-02-26 18:13:50,342", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:13:50,343", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热置顶会话详情缓存", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 65}
{"timestamp": "2026-02-26 18:13:50,343", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:13:50,344", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.is_pinned = true", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:50,344", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00025s] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:50,345", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 102}
{"timestamp": "2026-02-26 18:13:50,346", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:13:50,346", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热最近 24 小时活跃的会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 114}
{"timestamp": "2026-02-26 18:13:50,346", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:13:50,347", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.updated_at >= $1::TIMESTAMP WITH TIME ZONE \n LIMIT $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:50,347", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00022s] (datetime.datetime(2026, 2, 25, 10, 13, 50, 346632), 200)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:13:50,349", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:163:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,349", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:164:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,349", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:165:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,350", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:166:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,350", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:167:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,350", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:168:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,350", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:169:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,351", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:170:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,351", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:171:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,351", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:172:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,351", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:173:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,351", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:174:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,352", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:175:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,352", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:176:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,352", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:177:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,352", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:178:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,353", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:179:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,353", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:180:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,353", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:181:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,354", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:182:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,354", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:183:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,354", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:184:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,354", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:185:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,355", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:186:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,355", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:187:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,355", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:188:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,356", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:189:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,357", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:190:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,357", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:191:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,357", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:192:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,357", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:193:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,358", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:194:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,358", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:195:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,358", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:196:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,358", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:197:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,358", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:198:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,359", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:199:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,359", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:200:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,359", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:201:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,359", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:202:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,360", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:203:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,360", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:204:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,360", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:205:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,360", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:206:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,360", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:207:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,361", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:208:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,361", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:209:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,361", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:210:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,361", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:211:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,362", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:212:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,362", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:213:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,362", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:214:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,362", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:215:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,362", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:216:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,363", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:217:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,363", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:218:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,363", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:219:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,363", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:220:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,364", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:221:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,364", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:222:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,364", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:223:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,364", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:224:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,365", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:225:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,365", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:226:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:13:50,365", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 64 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 154}
{"timestamp": "2026-02-26 18:13:50,365", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:13:50,365", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 缓存预热完成 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 165}
{"timestamp": "2026-02-26 18:16:07,740", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 连接已关闭", "module": "agent_factory", "function": "close_checkpointer", "line": 89}
{"timestamp": "2026-02-26 18:16:07,755", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 18:16:07,756", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 118}
{"timestamp": "2026-02-26 18:16:10,527", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 104}
{"timestamp": "2026-02-26 18:16:10,574", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 初始化成功", "module": "agent_factory", "function": "init_checkpointer", "line": 71}
{"timestamp": "2026-02-26 18:16:10,575", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 107}
{"timestamp": "2026-02-26 18:16:10,575", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 109}
{"timestamp": "2026-02-26 18:16:10,575", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 开始缓存预热 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 159}
{"timestamp": "2026-02-26 18:16:10,575", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热会话列表缓存，限制 100 条", "module": "cache_warmup", "function": "warmup_conversations", "line": 26}
{"timestamp": "2026-02-26 18:16:10,645", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:16:10,645", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:16:10,647", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:16:10,647", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:16:10,648", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:16:10,648", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:16:10,648", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:16:10,653", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \n LIMIT $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:16:10,653", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00032s] (50,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:16:10,657", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversations:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,657", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 用户 1 的会话列表已预热", "module": "cache_warmup", "function": "warmup_conversations", "line": 56}
{"timestamp": "2026-02-26 18:16:10,657", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 60}
{"timestamp": "2026-02-26 18:16:10,658", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:16:10,658", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热置顶会话详情缓存", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 65}
{"timestamp": "2026-02-26 18:16:10,659", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:16:10,659", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.is_pinned = true", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:16:10,660", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00023s] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:16:10,661", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 102}
{"timestamp": "2026-02-26 18:16:10,661", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:16:10,661", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热最近 24 小时活跃的会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 114}
{"timestamp": "2026-02-26 18:16:10,662", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:16:10,662", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.updated_at >= $1::TIMESTAMP WITH TIME ZONE \n LIMIT $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:16:10,663", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00020s] (datetime.datetime(2026, 2, 25, 10, 16, 10, 662085), 200)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:16:10,664", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:163:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,664", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:164:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,664", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:165:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,665", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:166:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,665", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:167:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,665", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:168:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,665", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:169:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,665", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:170:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,666", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:171:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,666", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:172:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,666", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:173:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,666", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:174:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,666", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:175:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,666", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:176:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,667", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:177:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,667", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:178:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,667", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:179:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,667", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:180:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,667", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:181:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,668", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:182:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,668", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:183:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,668", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:184:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,668", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:185:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,669", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:186:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,669", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:187:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,669", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:188:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,669", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:189:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,669", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:190:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,669", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:191:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,670", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:192:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,670", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:193:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,670", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:194:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,670", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:195:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,670", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:196:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,671", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:197:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,671", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:198:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,671", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:199:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,671", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:200:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,671", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:201:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,671", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:202:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,672", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:203:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,672", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:204:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,672", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:205:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,672", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:206:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,672", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:207:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,672", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:208:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,673", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:209:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,673", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:210:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,673", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:211:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,673", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:212:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,673", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:213:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,674", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:214:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,674", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:215:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,674", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:216:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,674", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:217:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,675", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:218:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,675", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:219:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,675", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:220:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,675", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:221:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,675", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:222:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,676", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:223:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,676", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:224:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,676", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:225:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,676", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:226:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:10,676", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 64 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 154}
{"timestamp": "2026-02-26 18:16:10,677", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:16:10,677", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 缓存预热完成 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 165}
{"timestamp": "2026-02-26 18:16:33,040", "level": "INFO", "logger": "app.core.tracing", "message": "[REQUEST] method=GET path=/api/v1/chat/conversations/225/history status_code=401 request_id=cdcef32f-7ab6-4035-bef6-e893715503db", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 18:16:34,326", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:16:34,327", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.username = $1::VARCHAR", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:16:34,328", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00058s] ('qibao1',)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:16:34,524", "level": "INFO", "logger": "app.core.tracing", "message": "[REQUEST] method=POST path=/api/v1/auth/login status_code=200 request_id=4acfcacf-b335-4161-bb13-bf2f34f05c7f", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 18:16:34,526", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:16:34,533", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:16:34,534", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.username = $1::VARCHAR", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:16:34,534", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.2068s ago] ('qibao1',)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:16:34,540", "level": "INFO", "logger": "app.core.tracing", "message": "[REQUEST] method=GET path=/api/v1/auth/me status_code=200 request_id=8e4b13a0-73a4-4950-ad1e-45f728f5d9ad", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 18:16:34,541", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:16:34,547", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:16:34,548", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.username = $1::VARCHAR", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:16:34,548", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.221s ago] ('qibao1',)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:16:34,550", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversations:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:34,551", "level": "INFO", "logger": "app.core.tracing", "message": "[REQUEST] method=GET path=/api/v1/conversations status_code=200 request_id=1e3be64c-815f-422e-b593-63d760c49280", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 18:16:34,552", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:16:34,678", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:16:34,679", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.username = $1::VARCHAR", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:16:34,679", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.3519s ago] ('qibao1',)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:16:34,681", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversations:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:34,682", "level": "INFO", "logger": "app.core.tracing", "message": "[REQUEST] method=GET path=/api/v1/conversations status_code=200 request_id=6eb5d3a2-6d53-4557-b8aa-c69034a5043c", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 18:16:34,683", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:16:36,119", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:16:36,120", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.username = $1::VARCHAR", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:16:36,120", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 1.793s ago] ('qibao1',)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:16:36,122", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:226:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:36,123", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: messages:conversation:226:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 18:16:36,125", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.metadata, messages.created_at \nFROM messages JOIN conversations ON messages.conversation_id = conversations.id \nWHERE messages.conversation_id = $1::INTEGER AND conversations.user_id = $2::INTEGER ORDER BY messages.created_at ASC \n LIMIT $3::INTEGER OFFSET $4::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:16:36,126", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00064s] (226, 1, 100, 0)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:16:36,128", "level": "INFO", "logger": "app.services.chat_service", "message": "[DB] Fetched message id=615, metadata_=None", "module": "chat_service", "function": "fetch", "line": 43}
{"timestamp": "2026-02-26 18:16:36,129", "level": "INFO", "logger": "app.services.chat_service", "message": "[DB] Fetched message id=616, metadata_={'model': 'fast'}", "module": "chat_service", "function": "fetch", "line": 43}
{"timestamp": "2026-02-26 18:16:36,129", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for messages:conversation:226:user:1:skip:0:limit:100: [{'id': 615, 'conversation_id': 226, 'role': 'user', 'content': '你好', 'metadata': 'MetaData()', 'created_at': '2026-02-26T10:10:43.071513+00:00'}, {'id': 616, 'conversation_id': 226, 'role': 'assistant', 'content': '你好！很高兴见到你，有什么我可以帮你的吗？😊', 'metadata': 'MetaData()', 'created_at': '2026-02-26T10:10:43.071513+00:00'}]", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 18:16:36,130", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: messages:conversation:226:user:1:skip:0:limit:100, TTL=3892s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 18:16:36,131", "level": "INFO", "logger": "app.core.tracing", "message": "[REQUEST] method=GET path=/api/v1/chat/conversations/226/history status_code=200 request_id=4d4a500c-ceb8-48b9-9dcd-68d43257fc9a", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 18:16:36,131", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:16:36,952", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:16:36,953", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.username = $1::VARCHAR", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:16:36,953", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 2.626s ago] ('qibao1',)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:16:36,955", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:225:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:36,955", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: messages:conversation:225:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:16:36,956", "level": "INFO", "logger": "app.core.tracing", "message": "[REQUEST] method=GET path=/api/v1/chat/conversations/225/history status_code=200 request_id=3305e0a5-5e74-4b6f-8b66-d3e25e15e0ee", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 18:16:36,957", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:19:11,858", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 连接已关闭", "module": "agent_factory", "function": "close_checkpointer", "line": 89}
{"timestamp": "2026-02-26 18:19:11,874", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 18:19:11,874", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 118}
{"timestamp": "2026-02-26 18:19:14,569", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 104}
{"timestamp": "2026-02-26 18:19:14,616", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 初始化成功", "module": "agent_factory", "function": "init_checkpointer", "line": 71}
{"timestamp": "2026-02-26 18:19:14,616", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 107}
{"timestamp": "2026-02-26 18:19:14,617", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 109}
{"timestamp": "2026-02-26 18:19:14,617", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 开始缓存预热 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 159}
{"timestamp": "2026-02-26 18:19:14,617", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热会话列表缓存，限制 100 条", "module": "cache_warmup", "function": "warmup_conversations", "line": 26}
{"timestamp": "2026-02-26 18:19:14,672", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:14,672", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:14,673", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:14,673", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:14,674", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:14,674", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:14,675", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:19:14,680", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \n LIMIT $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:14,680", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00039s] (50,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:14,684", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversations:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,684", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 用户 1 的会话列表已预热", "module": "cache_warmup", "function": "warmup_conversations", "line": 56}
{"timestamp": "2026-02-26 18:19:14,684", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 60}
{"timestamp": "2026-02-26 18:19:14,684", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:19:14,685", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热置顶会话详情缓存", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 65}
{"timestamp": "2026-02-26 18:19:14,685", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:19:14,686", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.is_pinned = true", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:14,687", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00025s] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:14,688", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 102}
{"timestamp": "2026-02-26 18:19:14,688", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:19:14,688", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热最近 24 小时活跃的会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 114}
{"timestamp": "2026-02-26 18:19:14,689", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:19:14,690", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.updated_at >= $1::TIMESTAMP WITH TIME ZONE \n LIMIT $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:14,690", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00035s] (datetime.datetime(2026, 2, 25, 10, 19, 14, 688914), 200)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:14,691", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:163:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,692", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:164:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,692", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:165:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,692", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:166:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,692", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:167:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,692", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:168:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,693", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:169:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,693", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:170:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,693", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:171:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,693", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:172:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,693", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:173:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,694", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:174:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,694", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:175:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,694", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:176:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,694", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:177:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,694", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:178:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,695", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:179:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,695", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:180:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,695", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:181:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,695", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:182:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,696", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:183:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,696", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:184:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,696", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:185:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,696", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:186:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,697", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:187:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,697", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:188:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,697", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:189:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,697", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:190:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,698", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:191:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,698", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:192:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,698", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:193:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,698", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:194:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,699", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:195:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,699", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:196:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,699", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:197:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,699", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:198:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,699", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:199:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,700", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:200:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,700", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:201:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,700", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:202:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,700", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:203:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,700", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:204:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,701", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:205:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,701", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:206:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,701", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:207:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,701", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:208:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,702", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:209:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,702", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:210:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,702", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:211:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,702", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:212:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,703", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:213:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,703", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:214:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,703", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:215:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,703", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:216:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,704", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:217:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,704", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:218:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,704", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:219:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,704", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:220:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,705", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:221:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,705", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:222:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,705", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:223:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,705", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:224:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,705", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:225:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,706", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:226:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:14,706", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 64 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 154}
{"timestamp": "2026-02-26 18:19:14,706", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:19:14,706", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 缓存预热完成 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 165}
{"timestamp": "2026-02-26 18:19:14,816", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 连接已关闭", "module": "agent_factory", "function": "close_checkpointer", "line": 89}
{"timestamp": "2026-02-26 18:19:14,819", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 18:19:14,820", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 118}
{"timestamp": "2026-02-26 18:19:17,493", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 104}
{"timestamp": "2026-02-26 18:19:17,540", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 初始化成功", "module": "agent_factory", "function": "init_checkpointer", "line": 71}
{"timestamp": "2026-02-26 18:19:17,540", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 107}
{"timestamp": "2026-02-26 18:19:17,541", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 109}
{"timestamp": "2026-02-26 18:19:17,541", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 开始缓存预热 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 159}
{"timestamp": "2026-02-26 18:19:17,541", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热会话列表缓存，限制 100 条", "module": "cache_warmup", "function": "warmup_conversations", "line": 26}
{"timestamp": "2026-02-26 18:19:17,594", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:17,594", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:17,595", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:17,595", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:17,596", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:17,596", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:17,596", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:19:17,601", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \n LIMIT $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:17,601", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00030s] (50,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:17,604", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversations:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,604", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 用户 1 的会话列表已预热", "module": "cache_warmup", "function": "warmup_conversations", "line": 56}
{"timestamp": "2026-02-26 18:19:17,604", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 60}
{"timestamp": "2026-02-26 18:19:17,605", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:19:17,605", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热置顶会话详情缓存", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 65}
{"timestamp": "2026-02-26 18:19:17,606", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:19:17,606", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.is_pinned = true", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:17,607", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00023s] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:17,608", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 102}
{"timestamp": "2026-02-26 18:19:17,608", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:19:17,608", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热最近 24 小时活跃的会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 114}
{"timestamp": "2026-02-26 18:19:17,609", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:19:17,609", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.updated_at >= $1::TIMESTAMP WITH TIME ZONE \n LIMIT $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:17,609", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00022s] (datetime.datetime(2026, 2, 25, 10, 19, 17, 608916), 200)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:17,611", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:163:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,611", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:164:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,611", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:165:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,611", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:166:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,612", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:167:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,612", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:168:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,612", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:169:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,612", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:170:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,612", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:171:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,613", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:172:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,613", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:173:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,613", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:174:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,613", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:175:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,613", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:176:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,614", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:177:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,614", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:178:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,614", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:179:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,614", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:180:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,615", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:181:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,615", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:182:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,615", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:183:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,615", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:184:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,616", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:185:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,616", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:186:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,616", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:187:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,616", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:188:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,616", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:189:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,617", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:190:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,617", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:191:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,617", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:192:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,617", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:193:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,617", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:194:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,617", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:195:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,618", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:196:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,618", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:197:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,618", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:198:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,618", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:199:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,618", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:200:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,618", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:201:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,618", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:202:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,619", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:203:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,619", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:204:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,619", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:205:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,619", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:206:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,619", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:207:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,620", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:208:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,620", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:209:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,620", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:210:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,620", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:211:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,620", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:212:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,620", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:213:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,621", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:214:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,621", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:215:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,621", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:216:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,621", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:217:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,621", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:218:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,622", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:219:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,622", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:220:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,622", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:221:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,622", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:222:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,623", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:223:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,623", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:224:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,623", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:225:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,623", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:226:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:17,623", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 64 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 154}
{"timestamp": "2026-02-26 18:19:17,623", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:19:17,624", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 缓存预热完成 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 165}
{"timestamp": "2026-02-26 18:19:17,730", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 连接已关闭", "module": "agent_factory", "function": "close_checkpointer", "line": 89}
{"timestamp": "2026-02-26 18:19:17,747", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 18:19:17,748", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 118}
{"timestamp": "2026-02-26 18:19:20,427", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 104}
{"timestamp": "2026-02-26 18:19:20,470", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 初始化成功", "module": "agent_factory", "function": "init_checkpointer", "line": 71}
{"timestamp": "2026-02-26 18:19:20,470", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 107}
{"timestamp": "2026-02-26 18:19:20,471", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 109}
{"timestamp": "2026-02-26 18:19:20,471", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 开始缓存预热 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 159}
{"timestamp": "2026-02-26 18:19:20,471", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热会话列表缓存，限制 100 条", "module": "cache_warmup", "function": "warmup_conversations", "line": 26}
{"timestamp": "2026-02-26 18:19:20,523", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:20,523", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:20,524", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:20,524", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:20,525", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:20,525", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:20,526", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:19:20,530", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \n LIMIT $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:20,530", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00025s] (50,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:20,534", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversations:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,534", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 用户 1 的会话列表已预热", "module": "cache_warmup", "function": "warmup_conversations", "line": 56}
{"timestamp": "2026-02-26 18:19:20,534", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 60}
{"timestamp": "2026-02-26 18:19:20,534", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:19:20,535", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热置顶会话详情缓存", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 65}
{"timestamp": "2026-02-26 18:19:20,535", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:19:20,536", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.is_pinned = true", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:20,536", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00027s] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:20,537", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 102}
{"timestamp": "2026-02-26 18:19:20,538", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:19:20,538", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热最近 24 小时活跃的会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 114}
{"timestamp": "2026-02-26 18:19:20,538", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:19:20,539", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.updated_at >= $1::TIMESTAMP WITH TIME ZONE \n LIMIT $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:20,539", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00022s] (datetime.datetime(2026, 2, 25, 10, 19, 20, 538539), 200)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:20,541", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:163:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,541", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:164:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,541", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:165:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,542", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:166:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,542", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:167:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,542", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:168:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,542", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:169:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,543", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:170:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,543", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:171:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,543", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:172:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,544", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:173:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,544", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:174:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,544", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:175:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,545", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:176:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,545", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:177:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,545", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:178:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,545", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:179:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,546", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:180:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,546", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:181:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,546", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:182:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,547", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:183:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,547", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:184:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,547", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:185:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,547", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:186:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,548", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:187:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,548", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:188:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,548", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:189:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,549", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:190:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,549", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:191:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,549", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:192:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,550", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:193:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,550", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:194:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,550", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:195:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,551", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:196:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,551", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:197:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,551", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:198:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,551", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:199:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,552", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:200:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,552", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:201:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,552", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:202:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,552", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:203:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,553", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:204:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,553", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:205:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,553", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:206:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,553", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:207:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,554", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:208:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,554", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:209:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,554", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:210:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,554", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:211:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,555", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:212:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,555", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:213:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,555", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:214:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,555", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:215:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,556", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:216:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,556", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:217:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,556", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:218:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,557", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:219:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,557", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:220:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,557", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:221:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,557", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:222:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,558", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:223:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,558", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:224:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,558", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:225:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,558", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:226:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:20,558", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 64 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 154}
{"timestamp": "2026-02-26 18:19:20,558", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:19:20,559", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 缓存预热完成 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 165}
{"timestamp": "2026-02-26 18:19:20,663", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 连接已关闭", "module": "agent_factory", "function": "close_checkpointer", "line": 89}
{"timestamp": "2026-02-26 18:19:20,680", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 18:19:20,680", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 118}
{"timestamp": "2026-02-26 18:19:23,314", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 104}
{"timestamp": "2026-02-26 18:19:23,371", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 初始化成功", "module": "agent_factory", "function": "init_checkpointer", "line": 71}
{"timestamp": "2026-02-26 18:19:23,372", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 107}
{"timestamp": "2026-02-26 18:19:23,372", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 109}
{"timestamp": "2026-02-26 18:19:23,372", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 开始缓存预热 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 159}
{"timestamp": "2026-02-26 18:19:23,372", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热会话列表缓存，限制 100 条", "module": "cache_warmup", "function": "warmup_conversations", "line": 26}
{"timestamp": "2026-02-26 18:19:23,433", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:23,433", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:23,434", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:23,435", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:23,435", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:23,436", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:23,436", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:19:23,441", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \n LIMIT $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:23,441", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00028s] (50,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:23,444", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversations:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,445", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 用户 1 的会话列表已预热", "module": "cache_warmup", "function": "warmup_conversations", "line": 56}
{"timestamp": "2026-02-26 18:19:23,445", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 60}
{"timestamp": "2026-02-26 18:19:23,445", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:19:23,445", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热置顶会话详情缓存", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 65}
{"timestamp": "2026-02-26 18:19:23,446", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:19:23,447", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.is_pinned = true", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:23,447", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00021s] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:23,448", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 102}
{"timestamp": "2026-02-26 18:19:23,448", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:19:23,449", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热最近 24 小时活跃的会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 114}
{"timestamp": "2026-02-26 18:19:23,449", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:19:23,450", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.updated_at >= $1::TIMESTAMP WITH TIME ZONE \n LIMIT $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:23,450", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00021s] (datetime.datetime(2026, 2, 25, 10, 19, 23, 449290), 200)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:23,451", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:163:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,452", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:164:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,452", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:165:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,452", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:166:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,452", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:167:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,453", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:168:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,453", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:169:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,453", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:170:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,453", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:171:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,453", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:172:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,454", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:173:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,454", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:174:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,454", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:175:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,454", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:176:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,455", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:177:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,455", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:178:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,455", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:179:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,456", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:180:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,456", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:181:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,456", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:182:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,456", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:183:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,457", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:184:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,457", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:185:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,457", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:186:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,458", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:187:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,458", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:188:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,458", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:189:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,459", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:190:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,459", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:191:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,459", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:192:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,459", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:193:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,460", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:194:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,460", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:195:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,460", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:196:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,461", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:197:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,461", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:198:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,461", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:199:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,462", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:200:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,462", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:201:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,462", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:202:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,462", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:203:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,462", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:204:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,463", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:205:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,463", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:206:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,463", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:207:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,463", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:208:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,463", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:209:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,464", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:210:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,464", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:211:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,464", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:212:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,464", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:213:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,465", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:214:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,465", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:215:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,465", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:216:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,465", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:217:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,465", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:218:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,466", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:219:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,466", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:220:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,466", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:221:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,466", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:222:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,467", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:223:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,467", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:224:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,468", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:225:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,468", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:226:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:23,468", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 64 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 154}
{"timestamp": "2026-02-26 18:19:23,468", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:19:23,468", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 缓存预热完成 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 165}
{"timestamp": "2026-02-26 18:19:23,578", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 连接已关闭", "module": "agent_factory", "function": "close_checkpointer", "line": 89}
{"timestamp": "2026-02-26 18:19:23,595", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 18:19:23,595", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 118}
{"timestamp": "2026-02-26 18:19:26,313", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 104}
{"timestamp": "2026-02-26 18:19:26,360", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 初始化成功", "module": "agent_factory", "function": "init_checkpointer", "line": 71}
{"timestamp": "2026-02-26 18:19:26,360", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 107}
{"timestamp": "2026-02-26 18:19:26,360", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 109}
{"timestamp": "2026-02-26 18:19:26,360", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 开始缓存预热 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 159}
{"timestamp": "2026-02-26 18:19:26,360", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热会话列表缓存，限制 100 条", "module": "cache_warmup", "function": "warmup_conversations", "line": 26}
{"timestamp": "2026-02-26 18:19:26,414", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:26,414", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:26,415", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:26,416", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:26,416", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:26,416", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:26,417", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:19:26,422", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \n LIMIT $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:26,422", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00032s] (50,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:26,426", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversations:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,426", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 用户 1 的会话列表已预热", "module": "cache_warmup", "function": "warmup_conversations", "line": 56}
{"timestamp": "2026-02-26 18:19:26,426", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 60}
{"timestamp": "2026-02-26 18:19:26,426", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:19:26,427", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热置顶会话详情缓存", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 65}
{"timestamp": "2026-02-26 18:19:26,427", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:19:26,428", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.is_pinned = true", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:26,428", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00039s] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:26,430", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 102}
{"timestamp": "2026-02-26 18:19:26,430", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:19:26,430", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热最近 24 小时活跃的会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 114}
{"timestamp": "2026-02-26 18:19:26,431", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:19:26,431", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.updated_at >= $1::TIMESTAMP WITH TIME ZONE \n LIMIT $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:26,432", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00025s] (datetime.datetime(2026, 2, 25, 10, 19, 26, 431041), 200)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:26,433", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:163:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,434", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:164:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,434", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:165:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,435", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:166:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,435", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:167:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,436", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:168:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,436", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:169:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,436", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:170:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,436", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:171:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,437", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:172:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,437", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:173:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,437", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:174:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,438", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:175:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,438", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:176:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,438", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:177:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,439", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:178:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,439", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:179:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,440", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:180:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,440", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:181:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,440", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:182:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,441", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:183:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,441", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:184:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,441", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:185:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,442", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:186:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,442", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:187:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,442", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:188:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,442", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:189:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,443", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:190:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,443", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:191:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,443", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:192:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,443", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:193:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,444", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:194:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,444", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:195:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,444", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:196:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,445", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:197:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,445", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:198:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,445", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:199:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,445", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:200:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,445", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:201:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,446", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:202:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,446", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:203:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,446", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:204:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,447", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:205:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,447", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:206:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,447", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:207:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,448", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:208:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,449", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:209:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,449", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:210:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,449", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:211:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,449", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:212:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,450", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:213:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,450", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:214:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,450", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:215:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,450", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:216:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,450", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:217:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,451", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:218:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,452", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:219:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,452", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:220:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,452", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:221:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,452", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:222:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,452", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:223:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,453", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:224:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,453", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:225:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,453", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:226:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:26,453", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 64 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 154}
{"timestamp": "2026-02-26 18:19:26,454", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:19:26,454", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 缓存预热完成 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 165}
{"timestamp": "2026-02-26 18:19:26,567", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 连接已关闭", "module": "agent_factory", "function": "close_checkpointer", "line": 89}
{"timestamp": "2026-02-26 18:19:26,582", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 18:19:26,583", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 118}
{"timestamp": "2026-02-26 18:19:29,297", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 104}
{"timestamp": "2026-02-26 18:19:29,341", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 初始化成功", "module": "agent_factory", "function": "init_checkpointer", "line": 71}
{"timestamp": "2026-02-26 18:19:29,342", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 107}
{"timestamp": "2026-02-26 18:19:29,342", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 109}
{"timestamp": "2026-02-26 18:19:29,342", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 开始缓存预热 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 159}
{"timestamp": "2026-02-26 18:19:29,342", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热会话列表缓存，限制 100 条", "module": "cache_warmup", "function": "warmup_conversations", "line": 26}
{"timestamp": "2026-02-26 18:19:29,395", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:29,395", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:29,396", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:29,396", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:29,397", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:29,397", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:29,398", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:19:29,402", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \n LIMIT $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:29,403", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00027s] (50,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:29,406", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversations:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,406", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 用户 1 的会话列表已预热", "module": "cache_warmup", "function": "warmup_conversations", "line": 56}
{"timestamp": "2026-02-26 18:19:29,406", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 60}
{"timestamp": "2026-02-26 18:19:29,406", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:19:29,407", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热置顶会话详情缓存", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 65}
{"timestamp": "2026-02-26 18:19:29,407", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:19:29,408", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.is_pinned = true", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:29,408", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00024s] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:29,410", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 102}
{"timestamp": "2026-02-26 18:19:29,410", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:19:29,410", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热最近 24 小时活跃的会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 114}
{"timestamp": "2026-02-26 18:19:29,411", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:19:29,411", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.updated_at >= $1::TIMESTAMP WITH TIME ZONE \n LIMIT $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:29,412", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00028s] (datetime.datetime(2026, 2, 25, 10, 19, 29, 410870), 200)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:29,413", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:163:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,413", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:164:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,413", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:165:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,414", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:166:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,414", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:167:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,414", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:168:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,414", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:169:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,414", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:170:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,415", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:171:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,415", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:172:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,415", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:173:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,415", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:174:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,415", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:175:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,415", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:176:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,416", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:177:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,416", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:178:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,416", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:179:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,416", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:180:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,416", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:181:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,416", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:182:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,417", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:183:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,417", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:184:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,417", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:185:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,417", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:186:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,417", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:187:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,418", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:188:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,418", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:189:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,418", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:190:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,418", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:191:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,418", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:192:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,418", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:193:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,418", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:194:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,419", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:195:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,419", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:196:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,419", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:197:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,419", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:198:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,419", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:199:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,419", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:200:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,420", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:201:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,420", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:202:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,420", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:203:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,420", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:204:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,420", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:205:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,421", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:206:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,421", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:207:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,421", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:208:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,421", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:209:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,421", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:210:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,422", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:211:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,422", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:212:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,423", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:213:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,423", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:214:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,423", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:215:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,423", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:216:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,424", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:217:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,424", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:218:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,424", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:219:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,424", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:220:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,424", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:221:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,425", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:222:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,425", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:223:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,425", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:224:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,425", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:225:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,425", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:226:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:29,425", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 64 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 154}
{"timestamp": "2026-02-26 18:19:29,426", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:19:29,426", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 缓存预热完成 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 165}
{"timestamp": "2026-02-26 18:19:29,528", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 连接已关闭", "module": "agent_factory", "function": "close_checkpointer", "line": 89}
{"timestamp": "2026-02-26 18:19:29,545", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 18:19:29,545", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 118}
{"timestamp": "2026-02-26 18:19:32,355", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 104}
{"timestamp": "2026-02-26 18:19:32,403", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 初始化成功", "module": "agent_factory", "function": "init_checkpointer", "line": 71}
{"timestamp": "2026-02-26 18:19:32,403", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 107}
{"timestamp": "2026-02-26 18:19:32,403", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 109}
{"timestamp": "2026-02-26 18:19:32,403", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 开始缓存预热 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 159}
{"timestamp": "2026-02-26 18:19:32,403", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热会话列表缓存，限制 100 条", "module": "cache_warmup", "function": "warmup_conversations", "line": 26}
{"timestamp": "2026-02-26 18:19:32,458", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:32,458", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:32,460", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:32,460", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:32,461", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:32,461", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:32,462", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:19:32,466", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \n LIMIT $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:32,466", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00029s] (50,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:32,470", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversations:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,470", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 用户 1 的会话列表已预热", "module": "cache_warmup", "function": "warmup_conversations", "line": 56}
{"timestamp": "2026-02-26 18:19:32,470", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 60}
{"timestamp": "2026-02-26 18:19:32,470", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:19:32,471", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热置顶会话详情缓存", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 65}
{"timestamp": "2026-02-26 18:19:32,471", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:19:32,472", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.is_pinned = true", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:32,472", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00021s] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:32,474", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 102}
{"timestamp": "2026-02-26 18:19:32,474", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:19:32,474", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热最近 24 小时活跃的会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 114}
{"timestamp": "2026-02-26 18:19:32,475", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:19:32,475", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.updated_at >= $1::TIMESTAMP WITH TIME ZONE \n LIMIT $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:32,476", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00023s] (datetime.datetime(2026, 2, 25, 10, 19, 32, 474818), 200)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:32,477", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:163:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,478", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:164:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,478", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:165:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,478", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:166:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,479", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:167:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,479", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:168:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,479", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:169:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,480", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:170:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,481", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:171:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,481", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:172:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,481", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:173:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,482", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:174:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,482", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:175:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,482", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:176:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,482", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:177:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,483", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:178:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,483", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:179:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,483", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:180:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,484", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:181:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,484", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:182:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,484", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:183:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,484", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:184:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,485", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:185:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,485", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:186:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,485", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:187:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,485", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:188:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,485", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:189:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,486", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:190:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,486", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:191:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,486", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:192:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,486", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:193:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,487", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:194:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,487", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:195:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,487", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:196:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,487", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:197:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,488", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:198:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,488", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:199:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,488", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:200:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,488", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:201:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,488", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:202:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,489", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:203:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,489", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:204:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,489", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:205:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,489", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:206:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,490", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:207:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,490", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:208:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,490", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:209:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,490", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:210:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,490", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:211:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,490", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:212:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,491", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:213:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,491", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:214:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,491", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:215:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,491", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:216:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,492", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:217:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,492", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:218:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,492", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:219:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,492", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:220:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,493", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:221:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,493", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:222:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,493", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:223:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,493", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:224:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,493", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:225:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,494", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:226:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:32,494", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 64 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 154}
{"timestamp": "2026-02-26 18:19:32,494", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:19:32,494", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 缓存预热完成 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 165}
{"timestamp": "2026-02-26 18:19:32,602", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 连接已关闭", "module": "agent_factory", "function": "close_checkpointer", "line": 89}
{"timestamp": "2026-02-26 18:19:32,618", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 18:19:32,618", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 118}
{"timestamp": "2026-02-26 18:19:35,306", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 104}
{"timestamp": "2026-02-26 18:19:35,349", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 初始化成功", "module": "agent_factory", "function": "init_checkpointer", "line": 71}
{"timestamp": "2026-02-26 18:19:35,349", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 107}
{"timestamp": "2026-02-26 18:19:35,349", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 109}
{"timestamp": "2026-02-26 18:19:35,349", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 开始缓存预热 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 159}
{"timestamp": "2026-02-26 18:19:35,349", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热会话列表缓存，限制 100 条", "module": "cache_warmup", "function": "warmup_conversations", "line": 26}
{"timestamp": "2026-02-26 18:19:35,401", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:35,401", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:35,402", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:35,403", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:35,403", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:35,403", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:35,404", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:19:35,408", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \n LIMIT $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:35,409", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00027s] (50,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:35,412", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversations:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,412", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 用户 1 的会话列表已预热", "module": "cache_warmup", "function": "warmup_conversations", "line": 56}
{"timestamp": "2026-02-26 18:19:35,412", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 60}
{"timestamp": "2026-02-26 18:19:35,413", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:19:35,413", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热置顶会话详情缓存", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 65}
{"timestamp": "2026-02-26 18:19:35,414", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:19:35,414", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.is_pinned = true", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:35,415", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00024s] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:35,416", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 102}
{"timestamp": "2026-02-26 18:19:35,416", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:19:35,416", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热最近 24 小时活跃的会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 114}
{"timestamp": "2026-02-26 18:19:35,417", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:19:35,417", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.updated_at >= $1::TIMESTAMP WITH TIME ZONE \n LIMIT $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:35,418", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00026s] (datetime.datetime(2026, 2, 25, 10, 19, 35, 417022), 200)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:35,419", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:163:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,419", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:164:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,419", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:165:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,420", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:166:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,420", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:167:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,420", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:168:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,420", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:169:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,420", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:170:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,421", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:171:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,421", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:172:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,421", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:173:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,421", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:174:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,422", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:175:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,422", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:176:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,422", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:177:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,423", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:178:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,423", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:179:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,423", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:180:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,423", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:181:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,424", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:182:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,424", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:183:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,424", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:184:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,424", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:185:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,425", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:186:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,425", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:187:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,425", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:188:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,425", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:189:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,426", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:190:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,426", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:191:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,426", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:192:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,426", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:193:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,426", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:194:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,427", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:195:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,427", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:196:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,427", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:197:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,427", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:198:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,428", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:199:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,428", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:200:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,428", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:201:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,428", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:202:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,428", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:203:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,429", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:204:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,429", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:205:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,429", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:206:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,430", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:207:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,430", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:208:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,430", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:209:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,430", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:210:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,430", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:211:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,431", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:212:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,431", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:213:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,431", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:214:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,431", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:215:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,432", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:216:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,432", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:217:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,432", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:218:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,432", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:219:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,432", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:220:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,432", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:221:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,433", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:222:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,433", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:223:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,433", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:224:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,433", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:225:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,434", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:226:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:35,434", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 64 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 154}
{"timestamp": "2026-02-26 18:19:35,434", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:19:35,434", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 缓存预热完成 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 165}
{"timestamp": "2026-02-26 18:19:35,549", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 连接已关闭", "module": "agent_factory", "function": "close_checkpointer", "line": 89}
{"timestamp": "2026-02-26 18:19:35,565", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 18:19:35,565", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 118}
{"timestamp": "2026-02-26 18:19:38,217", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 104}
{"timestamp": "2026-02-26 18:19:38,276", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 初始化成功", "module": "agent_factory", "function": "init_checkpointer", "line": 71}
{"timestamp": "2026-02-26 18:19:38,276", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 107}
{"timestamp": "2026-02-26 18:19:38,277", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 109}
{"timestamp": "2026-02-26 18:19:38,277", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 开始缓存预热 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 159}
{"timestamp": "2026-02-26 18:19:38,277", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热会话列表缓存，限制 100 条", "module": "cache_warmup", "function": "warmup_conversations", "line": 26}
{"timestamp": "2026-02-26 18:19:38,334", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:38,334", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:38,336", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:38,336", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:38,336", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:38,337", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:38,337", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:19:38,342", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \n LIMIT $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:38,342", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00039s] (50,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:38,345", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversations:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,346", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 用户 1 的会话列表已预热", "module": "cache_warmup", "function": "warmup_conversations", "line": 56}
{"timestamp": "2026-02-26 18:19:38,346", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 60}
{"timestamp": "2026-02-26 18:19:38,346", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:19:38,346", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热置顶会话详情缓存", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 65}
{"timestamp": "2026-02-26 18:19:38,347", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:19:38,348", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.is_pinned = true", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:38,348", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00022s] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:38,349", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 102}
{"timestamp": "2026-02-26 18:19:38,349", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:19:38,349", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热最近 24 小时活跃的会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 114}
{"timestamp": "2026-02-26 18:19:38,350", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:19:38,351", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.updated_at >= $1::TIMESTAMP WITH TIME ZONE \n LIMIT $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:38,351", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00033s] (datetime.datetime(2026, 2, 25, 10, 19, 38, 350062), 200)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:19:38,355", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:163:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,355", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:164:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,356", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:165:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,356", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:166:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,356", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:167:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,356", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:168:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,356", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:169:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,357", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:170:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,357", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:171:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,357", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:172:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,357", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:173:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,357", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:174:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,357", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:175:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,358", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:176:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,358", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:177:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,358", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:178:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,358", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:179:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,358", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:180:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,359", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:181:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,359", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:182:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,359", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:183:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,359", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:184:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,359", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:185:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,359", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:186:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,359", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:187:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,360", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:188:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,360", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:189:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,360", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:190:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,360", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:191:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,360", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:192:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,360", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:193:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,360", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:194:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,361", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:195:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,361", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:196:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,361", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:197:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,361", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:198:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,361", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:199:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,362", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:200:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,362", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:201:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,362", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:202:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,363", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:203:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,363", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:204:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,363", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:205:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,363", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:206:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,363", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:207:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,364", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:208:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,364", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:209:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,364", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:210:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,364", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:211:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,364", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:212:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,364", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:213:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,364", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:214:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,365", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:215:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,365", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:216:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,365", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:217:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,365", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:218:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,365", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:219:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,365", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:220:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,365", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:221:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,366", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:222:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,366", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:223:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,366", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:224:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,366", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:225:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,366", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:226:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:19:38,366", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 64 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 154}
{"timestamp": "2026-02-26 18:19:38,366", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:19:38,367", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 缓存预热完成 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 165}
{"timestamp": "2026-02-26 18:20:30,376", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 连接已关闭", "module": "agent_factory", "function": "close_checkpointer", "line": 89}
{"timestamp": "2026-02-26 18:20:30,393", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 18:20:30,393", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 118}
{"timestamp": "2026-02-26 18:20:35,244", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 104}
{"timestamp": "2026-02-26 18:20:35,296", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 初始化成功", "module": "agent_factory", "function": "init_checkpointer", "line": 72}
{"timestamp": "2026-02-26 18:20:35,296", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 107}
{"timestamp": "2026-02-26 18:20:35,297", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 109}
{"timestamp": "2026-02-26 18:20:35,297", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 开始缓存预热 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 159}
{"timestamp": "2026-02-26 18:20:35,297", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热会话列表缓存，限制 100 条", "module": "cache_warmup", "function": "warmup_conversations", "line": 26}
{"timestamp": "2026-02-26 18:20:35,379", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:20:35,382", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:20:35,387", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:20:35,389", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:20:35,392", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:20:35,393", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:20:35,396", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:20:35,408", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \n LIMIT $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:20:35,408", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00066s] (50,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:20:35,414", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversations:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,414", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 用户 1 的会话列表已预热", "module": "cache_warmup", "function": "warmup_conversations", "line": 56}
{"timestamp": "2026-02-26 18:20:35,414", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 60}
{"timestamp": "2026-02-26 18:20:35,415", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:20:35,415", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热置顶会话详情缓存", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 65}
{"timestamp": "2026-02-26 18:20:35,416", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:20:35,417", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.is_pinned = true", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:20:35,417", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00026s] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:20:35,419", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 102}
{"timestamp": "2026-02-26 18:20:35,419", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:20:35,419", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热最近 24 小时活跃的会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 114}
{"timestamp": "2026-02-26 18:20:35,420", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:20:35,420", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.updated_at >= $1::TIMESTAMP WITH TIME ZONE \n LIMIT $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:20:35,421", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] (datetime.datetime(2026, 2, 25, 10, 20, 35, 419850), 200)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:20:35,423", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:163:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,423", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:164:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,423", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:165:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,424", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:166:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,424", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:167:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,424", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:168:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,424", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:169:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,425", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:170:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,425", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:171:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,426", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:172:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,426", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:173:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,427", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:174:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,427", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:175:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,427", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:176:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,428", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:177:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,428", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:178:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,429", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:179:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,429", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:180:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,430", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:181:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,430", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:182:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,431", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:183:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,431", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:184:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,432", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:185:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,432", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:186:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,433", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:187:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,433", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:188:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,434", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:189:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,434", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:190:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,435", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:191:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,435", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:192:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,436", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:193:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,436", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:194:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,437", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:195:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,437", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:196:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,438", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:197:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,438", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:198:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,439", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:199:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,439", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:200:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,440", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:201:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,440", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:202:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,441", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:203:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,441", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:204:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,442", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:205:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,442", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:206:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,442", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:207:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,443", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:208:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,443", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:209:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,444", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:210:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,444", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:211:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,445", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:212:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,445", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:213:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,446", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:214:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,446", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:215:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,447", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:216:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,447", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:217:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,448", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:218:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,448", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:219:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,449", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:220:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,449", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:221:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,450", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:222:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,450", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:223:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,451", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:224:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,451", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:225:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,451", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:226:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:35,452", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 64 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 154}
{"timestamp": "2026-02-26 18:20:35,452", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:20:35,453", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 缓存预热完成 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 165}
{"timestamp": "2026-02-26 18:20:54,783", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 连接已关闭", "module": "agent_factory", "function": "close_checkpointer", "line": 90}
{"timestamp": "2026-02-26 18:20:54,786", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 18:20:54,786", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 118}
{"timestamp": "2026-02-26 18:20:59,662", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 104}
{"timestamp": "2026-02-26 18:20:59,708", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 初始化成功", "module": "agent_factory", "function": "init_checkpointer", "line": 72}
{"timestamp": "2026-02-26 18:20:59,708", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 107}
{"timestamp": "2026-02-26 18:20:59,709", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 109}
{"timestamp": "2026-02-26 18:20:59,709", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 开始缓存预热 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 159}
{"timestamp": "2026-02-26 18:20:59,709", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热会话列表缓存，限制 100 条", "module": "cache_warmup", "function": "warmup_conversations", "line": 26}
{"timestamp": "2026-02-26 18:20:59,791", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:20:59,791", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:20:59,793", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:20:59,793", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:20:59,794", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:20:59,794", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:20:59,796", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:20:59,803", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \n LIMIT $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:20:59,804", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00055s] (50,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:20:59,809", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversations:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,809", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 用户 1 的会话列表已预热", "module": "cache_warmup", "function": "warmup_conversations", "line": 56}
{"timestamp": "2026-02-26 18:20:59,810", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 60}
{"timestamp": "2026-02-26 18:20:59,810", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:20:59,811", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热置顶会话详情缓存", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 65}
{"timestamp": "2026-02-26 18:20:59,812", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:20:59,814", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.is_pinned = true", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:20:59,814", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00042s] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:20:59,816", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 102}
{"timestamp": "2026-02-26 18:20:59,816", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:20:59,816", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热最近 24 小时活跃的会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 114}
{"timestamp": "2026-02-26 18:20:59,817", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:20:59,818", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.updated_at >= $1::TIMESTAMP WITH TIME ZONE \n LIMIT $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:20:59,819", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00046s] (datetime.datetime(2026, 2, 25, 10, 20, 59, 817214), 200)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:20:59,821", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:163:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,821", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:164:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,822", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:165:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,822", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:166:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,823", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:167:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,823", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:168:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,824", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:169:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,824", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:170:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,825", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:171:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,825", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:172:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,826", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:173:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,826", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:174:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,826", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:175:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,827", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:176:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,827", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:177:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,828", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:178:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,828", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:179:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,828", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:180:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,829", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:181:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,829", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:182:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,830", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:183:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,830", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:184:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,831", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:185:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,831", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:186:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,831", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:187:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,832", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:188:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,832", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:189:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,833", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:190:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,833", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:191:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,833", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:192:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,834", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:193:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,834", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:194:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,835", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:195:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,835", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:196:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,836", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:197:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,836", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:198:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,836", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:199:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,837", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:200:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,837", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:201:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,838", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:202:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,838", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:203:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,839", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:204:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,839", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:205:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,839", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:206:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,840", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:207:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,840", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:208:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,841", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:209:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,841", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:210:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,842", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:211:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,842", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:212:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,842", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:213:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,843", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:214:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,843", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:215:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,843", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:216:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,844", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:217:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,845", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:218:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,845", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:219:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,846", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:220:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,846", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:221:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,846", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:222:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,847", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:223:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,847", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:224:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,848", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:225:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,848", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:226:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:20:59,848", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 64 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 154}
{"timestamp": "2026-02-26 18:20:59,849", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:20:59,850", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 缓存预热完成 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 165}
{"timestamp": "2026-02-26 18:33:04,893", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:33:04,894", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.username = $1::VARCHAR", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:33:04,895", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00059s] ('qibao1',)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:33:04,898", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO conversations (user_id, title, is_pinned, model_name) VALUES ($1::INTEGER, $2::VARCHAR, $3::BOOLEAN, $4::VARCHAR) RETURNING conversations.id, conversations.created_at, conversations.updated_at", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:33:04,898", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00037s] (1, '新会话', False, None)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:33:04,901", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:33:04,901", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00038s] (227,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:33:04,903", "level": "INFO", "logger": "app.services.conversation_service", "message": "[CACHE DELETE] 已删除用户会话列表缓存: user_id=1, keys=1", "module": "conversation_service", "function": "_invalidate_user_cache", "line": 144}
{"timestamp": "2026-02-26 18:33:04,903", "level": "INFO", "logger": "app.core.tracing", "message": "[REQUEST] method=POST path=/api/v1/conversations status_code=201 request_id=f4c2efb3-908b-4862-80be-7382b65fb77b", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 18:33:04,904", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:33:04,931", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:33:04,931", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.username = $1::VARCHAR", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:33:04,931", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.03724s ago] ('qibao1',)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:33:04,934", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:227:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 18:33:04,935", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:33:04,935", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00031s] (227, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:33:04,936", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:227:1: {'id': 227, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-26T10:33:04.895417+00:00', 'updated_at': '2026-02-26T10:33:04.895417+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 18:33:04,936", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:227:1, TTL=3659s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 18:33:04,937", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: messages:conversation:227:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 18:33:04,940", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.metadata, messages.created_at \nFROM messages JOIN conversations ON messages.conversation_id = conversations.id \nWHERE messages.conversation_id = $1::INTEGER AND conversations.user_id = $2::INTEGER ORDER BY messages.created_at ASC \n LIMIT $3::INTEGER OFFSET $4::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:33:04,940", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00035s] (227, 1, 100, 0)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:33:04,942", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: messages:conversation:227:user:1:skip:0:limit:100, TTL=3882s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 18:33:04,943", "level": "INFO", "logger": "app.core.tracing", "message": "[REQUEST] method=GET path=/api/v1/chat/conversations/227/history status_code=200 request_id=8b05f531-943f-47f5-a573-a960dd870eab", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 18:33:04,944", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:33:13,926", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:33:13,926", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.username = $1::VARCHAR", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:33:13,927", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 9.033s ago] ('qibao1',)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:33:13,929", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:227:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:33:13,929", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:33:13,929", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 8.995s ago] (227, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:33:13,931", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO messages (conversation_id, role, content, metadata) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::JSON) RETURNING messages.id, messages.created_at", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:33:13,931", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00038s] (227, 'user', '你好', 'null')", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:33:13,933", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.metadata, messages.created_at \nFROM messages \nWHERE messages.id = $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:33:13,934", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00070s] (617,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:33:13,936", "level": "INFO", "logger": "app.services.chat_service", "message": "[DB] Saved message id=617, metadata_=None", "module": "chat_service", "function": "create_message", "line": 76}
{"timestamp": "2026-02-26 18:33:13,936", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.metadata, messages.created_at \nFROM messages \nWHERE messages.id = $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:33:13,937", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00034s] (617,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:33:13,937", "level": "INFO", "logger": "app.services.chat_service", "message": "[DB] Verify saved: id=617, metadata_=None", "module": "chat_service", "function": "create_message", "line": 83}
{"timestamp": "2026-02-26 18:33:13,938", "level": "INFO", "logger": "app.services.chat_service", "message": "[CACHE DELETE] 已删除消息缓存: conversation_id=227, user_id=1, keys=1", "module": "chat_service", "function": "_invalidate_messages_cache", "line": 546}
{"timestamp": "2026-02-26 18:33:13,939", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: messages:conversation:227:user:1:skip:0:limit:50", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 18:33:13,939", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.metadata, messages.created_at \nFROM messages JOIN conversations ON messages.conversation_id = conversations.id \nWHERE messages.conversation_id = $1::INTEGER AND conversations.user_id = $2::INTEGER ORDER BY messages.created_at ASC \n LIMIT $3::INTEGER OFFSET $4::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:33:13,940", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 9s ago] (227, 1, 50, 0)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:33:13,941", "level": "INFO", "logger": "app.services.chat_service", "message": "[DB] Fetched message id=617, metadata_=None", "module": "chat_service", "function": "fetch", "line": 43}
{"timestamp": "2026-02-26 18:33:13,941", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for messages:conversation:227:user:1:skip:0:limit:50: [{'id': 617, 'conversation_id': 227, 'role': 'user', 'content': '你好', 'metadata': 'MetaData()', 'created_at': '2026-02-26T10:33:13.927660+00:00'}]", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 18:33:13,941", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: messages:conversation:227:user:1:skip:0:limit:50, TTL=3808s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 18:33:13,942", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] 开始生成流式响应: conversation_id=227, enable_thinking=False", "module": "chat_service", "function": "generate_response_stream", "line": 465}
{"timestamp": "2026-02-26 18:33:13,942", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] 开始处理消息: conversation_id=227", "module": "chat_service", "function": "process_message", "line": 103}
{"timestamp": "2026-02-26 18:33:13,943", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] 上下文准备完成，长度: 2", "module": "chat_service", "function": "process_message", "line": 117}
{"timestamp": "2026-02-26 18:33:13,943", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] 创建Agent: is_expert=False, enable_thinking=False", "module": "chat_service", "function": "process_message", "line": 120}
{"timestamp": "2026-02-26 18:33:14,212", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] 初始化技能后端: F:\\code\\dragonai-v2-local\\app\\skills", "module": "agent_factory", "function": "_get_skills_backend", "line": 126}
{"timestamp": "2026-02-26 18:33:14,297", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] 创建并缓存Agent (with Skills): expert_False_thinking_False", "module": "agent_factory", "function": "create_chat_agent", "line": 183}
{"timestamp": "2026-02-26 18:33:14,297", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] Agent创建成功", "module": "chat_service", "function": "process_message", "line": 125}
{"timestamp": "2026-02-26 18:33:14,298", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] Agent配置: {'configurable': {'thread_id': 'conversation_227'}, 'recursion_limit': 25}", "module": "chat_service", "function": "process_message", "line": 128}
{"timestamp": "2026-02-26 18:33:14,298", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] 开始流式执行Agent", "module": "chat_service", "function": "process_message", "line": 130}
{"timestamp": "2026-02-26 18:33:14,300", "level": "INFO", "logger": "app.core.tracing", "message": "[REQUEST] method=POST path=/api/v1/chat/send status_code=200 request_id=8bc74499-84d7-40a1-824f-8d3c3f8ad687", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 18:33:14,315", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] updates data: {'SkillsMiddleware.before_agent': {'skills_metadata': [{'name': 'xhs-copywriter', 'description': '小红书平台文案创作专家，帮助用户创作吸引眼球的小红书笔记、种草文案、产品推荐等内容。适用于小红书营销、内容创作、品牌推广等场景。', 'path': '/xhs-copywriter/SKILL.md', 'metadata': {'author': 'dragonai', 'version': '1.0', 'platform': 'xiaohongshu'}, 'license': 'MIT', 'compatibility': '无特殊依赖', 'allowed_tools': ['web_search']}]}}", "module": "chat_service", "function": "process_message", "line": 144}
{"timestamp": "2026-02-26 18:33:14,316", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] source=SkillsMiddleware.before_agent, update keys=dict_keys(['skills_metadata'])", "module": "chat_service", "function": "process_message", "line": 146}
{"timestamp": "2026-02-26 18:33:14,318", "level": "INFO", "logger": "app.agents.debug_middleware", "message": "[DEBUG-MIDDLEWARE] System prompt (3 chars):\n[{'type': 'text', 'text': '你是一个强大的AI助手，能够帮助用户处理各种任务。\\n\\n你可以使用多种工具来帮助用户，工具的功能说明已内置在系统中。\\n\\n**工具调用重要规则**：\\n- 如果调用工具缺少必填参数，不要调用工具，应该先询问用户提供缺失的信息\\n- 根据用户需求选择最合适的工具，避免不必要的工具调用\\n\\n**工具结果输出规则（非常重要）**：\\n- 当工具返回结果包含代码、完整答案或详细内容时，你必须原样完整输出给用户\\n- 禁止对工具返回的代码进行总结、省略、改写或简化\\n- 禁止使用\"代码如下\"、\"这是代码\"等简短描述代替完整输出\\n- 如果工具结果包含<INSTRUCTION>标签，必须严格遵循标签内的指令\\n- 当看到<INSTRUCTION>标签时，只输出标签后的内容，不要输出标签本身，不要做任何修改\\n\\n**技能使用规则（非常重要）**：\\n- 当用户请求匹配某个技能的描述时，你必须先调用 read_file 读取该技能的完整指令\\n- 禁止在没有读取技能文件的情况下直接回答相关任务\\n- 读取技能文件后，必须严格按照技能中的流程和模板执行任务\\n\\n请根据用户的需求，合理选择和使用工具。如果用户请求不明确，请主动询问以澄清需求。\\n'}, {'type': 'text', 'text': '\\n\\n## Following Conventions\\n\\n- Read files before editing — understand existing content before making changes\\n- Mimic existing style, naming conventions, and patterns\\n\\n## Tool Usage and File Reading\\n\\nFollow the tool docs for the available tools. In particular, for filesystem tools, use pagination (offset/limit) when reading large files.\\n\\n## Filesystem Tools `ls`, `read_file`, `write_file`, `edit_file`, `glob`, `grep`\\n\\nYou have access to a filesystem which you can interact with using these tools.\\nAll file paths must start with a /.\\n\\n- ls: list files in a directory (requires absolute path)\\n- read_file: read a file from the filesystem\\n- write_file: write to a file in the filesystem\\n- edit_file: edit a file in the filesystem\\n- glob: find files matching a pattern (e.g., \"**/*.py\")\\n- grep: search for text within files'}, {'type': 'text', 'text': '\\n\\n\\n\\n## Skills System\\n\\nYou have access to a skills library that provides specialized capabilities and domain knowledge.\\n\\n** Skills**: `/` (higher priority)\\n\\n**Available Skills:**\\n\\n- **xhs-copywriter**: 小红书平台文案创作专家，帮助用户创作吸引眼球的小红书笔记、种草文案、产品推荐等内容。适用于小红书营销、内容创作、品牌推广等场景。 (License: MIT, Compatibility: 无特殊依赖)\\n  -> Allowed tools: web_search\\n  -> Read `/xhs-copywriter/SKILL.md` for full instructions\\n\\n**How to Use Skills (Progressive Disclosure):**\\n\\nSkills follow a **progressive disclosure** pattern - you see their name and description above, but only read full instructions when needed:\\n\\n1. **Recognize when a skill applies**: Check if the user\\'s task matches a skill\\'s description\\n2. **Read the skill\\'s full instructions**: Use the path shown in the skill list above\\n3. **Follow the skill\\'s instructions**: SKILL.md contains step-by-step workflows, best practices, and examples\\n4. **Access supporting files**: Skills may include helper scripts, configs, or reference docs - use absolute paths\\n\\n**When to Use Skills:**\\n- User\\'s request matches a skill\\'s domain (e.g., \"research X\" -> web-research skill)\\n- You need specialized knowledge or structured workflows\\n- A skill provides proven patterns for complex tasks\\n\\n**Executing Skill Scripts:**\\nSkills may contain Python scripts or other executable files. Always use absolute paths from the skill list.\\n\\n**Example Workflow:**\\n\\nUser: \"Can you research the latest developments in quantum computing?\"\\n\\n1. Check available skills -> See \"web-research\" skill with its path\\n2. Read the skill using the path shown\\n3. Follow the skill\\'s research workflow (search -> organize -> synthesize)\\n4. Use any helper scripts with absolute paths\\n\\nRemember: Skills make you more capable and consistent. When in doubt, check if a skill exists for the task!\\n'}]", "module": "debug_middleware", "function": "_log_system_prompt", "line": 72}
{"timestamp": "2026-02-26 18:33:14,322", "level": "ERROR", "logger": "app.services.chat_service", "message": "[CHAT] 处理消息时出错: 'list' object has no attribute 'split'", "module": "chat_service", "function": "process_message", "line": 198, "exception": "Traceback (most recent call last):\n  File \"F:\\code\\dragonai-v2-local\\app\\services\\chat_service.py\", line 132, in process_message\n    async for stream_mode, data in agent.astream(\n    ...<24 lines>...\n                            yield formatted\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\langgraph\\pregel\\main.py\", line 2974, in astream\n    async for _ in runner.atick(\n    ...<13 lines>...\n            yield o\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\langgraph\\pregel\\_runner.py\", line 410, in atick\n    _panic_or_proceed(\n    ~~~~~~~~~~~~~~~~~^\n        futures.done.union(f for f, t in futures.items() if t is not None),\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        timeout_exc_cls=asyncio.TimeoutError,\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        panic=reraise,\n        ^^^^^^^^^^^^^^\n    )\n    ^\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\langgraph\\pregel\\_runner.py\", line 520, in _panic_or_proceed\n    raise exc\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\langgraph\\pregel\\_retry.py\", line 138, in arun_with_retry\n    return await task.proc.ainvoke(task.input, config)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\langgraph\\_internal\\_runnable.py\", line 705, in ainvoke\n    input = await asyncio.create_task(\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^\n        step.ainvoke(input, config, **kwargs), context=context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\langgraph\\_internal\\_runnable.py\", line 473, in ainvoke\n    ret = await self.afunc(*args, **kwargs)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\langchain\\agents\\factory.py\", line 1312, in amodel_node\n    result = await awrap_model_call_handler(request, _execute_model_async)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\langchain\\agents\\factory.py\", line 371, in composed\n    outer_result = await outer(request, inner_handler)\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\deepagents\\middleware\\filesystem.py\", line 1070, in awrap_model_call\n    return await handler(request)\n           ^^^^^^^^^^^^^^^^^^^^^^\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\langchain\\agents\\factory.py\", line 361, in inner_handler\n    inner_result = await inner(req, handler)\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\langchain\\agents\\factory.py\", line 371, in composed\n    outer_result = await outer(request, inner_handler)\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\deepagents\\middleware\\skills.py\", line 833, in awrap_model_call\n    return await handler(modified_request)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\langchain\\agents\\factory.py\", line 361, in inner_handler\n    inner_result = await inner(req, handler)\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"F:\\code\\dragonai-v2-local\\app\\agents\\debug_middleware.py\", line 53, in awrap_model_call\n    self._log_system_prompt(request)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^\n  File \"F:\\code\\dragonai-v2-local\\app\\agents\\debug_middleware.py\", line 74, in _log_system_prompt\n    self._log_skills_info(content)\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^\n  File \"F:\\code\\dragonai-v2-local\\app\\agents\\debug_middleware.py\", line 78, in _log_skills_info\n    lines = content.split('\\n')\n            ^^^^^^^^^^^^^\nAttributeError: 'list' object has no attribute 'split'\nDuring task with name 'model' and id '94b5355a-bbb1-96f5-6229-d123fe40f198'"}
{"timestamp": "2026-02-26 18:33:14,336", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Stream complete, total chunks: 0, total chars: 0", "module": "chat", "function": "generate", "line": 127}
{"timestamp": "2026-02-26 18:33:14,336", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Full response content:\n", "module": "chat", "function": "generate", "line": 128}
{"timestamp": "2026-02-26 18:33:14,337", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Thinking content length: 0", "module": "chat", "function": "generate", "line": 129}
{"timestamp": "2026-02-26 18:33:14,337", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:33:14,338", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 9.404s ago] (227, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:33:14,339", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO messages (conversation_id, role, content, metadata) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::JSON) RETURNING messages.id, messages.created_at", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:33:14,340", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.4089s ago] (227, 'assistant', '', '{\"model\": \"fast\"}')", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:33:14,342", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.metadata, messages.created_at \nFROM messages \nWHERE messages.id = $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:33:14,342", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.4089s ago] (618,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:33:14,343", "level": "INFO", "logger": "app.services.chat_service", "message": "[DB] Saved message id=618, metadata_={'model': 'fast'}", "module": "chat_service", "function": "create_message", "line": 76}
{"timestamp": "2026-02-26 18:33:14,344", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.metadata, messages.created_at \nFROM messages \nWHERE messages.id = $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:33:14,345", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.4088s ago] (618,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:33:14,347", "level": "INFO", "logger": "app.services.chat_service", "message": "[DB] Verify saved: id=618, metadata_={'model': 'fast'}", "module": "chat_service", "function": "create_message", "line": 83}
{"timestamp": "2026-02-26 18:33:14,348", "level": "INFO", "logger": "app.services.chat_service", "message": "[CACHE DELETE] 已删除消息缓存: conversation_id=227, user_id=1, keys=1", "module": "chat_service", "function": "_invalidate_messages_cache", "line": 546}
{"timestamp": "2026-02-26 18:33:14,349", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:36:24,379", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 连接已关闭", "module": "agent_factory", "function": "close_checkpointer", "line": 90}
{"timestamp": "2026-02-26 18:36:24,395", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 18:36:24,396", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 118}
{"timestamp": "2026-02-26 18:36:27,081", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 104}
{"timestamp": "2026-02-26 18:36:27,135", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 初始化成功", "module": "agent_factory", "function": "init_checkpointer", "line": 72}
{"timestamp": "2026-02-26 18:36:27,135", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 107}
{"timestamp": "2026-02-26 18:36:27,135", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 109}
{"timestamp": "2026-02-26 18:36:27,135", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 开始缓存预热 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 159}
{"timestamp": "2026-02-26 18:36:27,136", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热会话列表缓存，限制 100 条", "module": "cache_warmup", "function": "warmup_conversations", "line": 26}
{"timestamp": "2026-02-26 18:36:27,188", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:36:27,189", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:36:27,190", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:36:27,190", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:36:27,190", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:36:27,191", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:36:27,191", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:36:27,196", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \n LIMIT $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:36:27,196", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00029s] (50,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:36:27,199", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversations:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 18:36:27,200", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.user_id = $1::INTEGER ORDER BY conversations.is_pinned DESC, conversations.updated_at DESC \n LIMIT $2::INTEGER OFFSET $3::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:36:27,201", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00023s] (1, 100, 0)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:36:27,203", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversations:user:1:skip:0:limit:100: [{'id': 227, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-26T10:33:04.895417+00:00', 'updated_at': '2026-02-26T10:33:04.895417+00:00'}, {'id': 226, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-26T10:10:40.442180+00:00', 'updated_at': '2026-02-26T10:10:40.442180+00:00'}, {'id': 225, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-26T10:08:58.236057+00:00', 'updated_at': '2026-02-26T10:08:58.236057+00:00'}, {'id': 224, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-26T10:07:48.664417+00:00', 'updated_at': '2026-02-26T10:07:48.664417+00:00'}, {'id': 223, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-26T10:06:02.054684+00:00', 'updated_at': '2026-02-26T10:06:02.054684+00:00'}, {'id': 222, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-26T09:46:52.728826+00:00', 'updated_at': '2026-02-26T09:46:52.728826+00:00'}, {'id': 221, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-26T09:42:18.712045+00:00', 'updated_at': '2026-02-26T09:42:18.712045+00:00'}, {'id': 220, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T20:05:52.426575+00:00', 'updated_at': '2026-02-25T20:05:52.426575+00:00'}, {'id': 219, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T18:35:35.586803+00:00', 'updated_at': '2026-02-25T18:35:35.586803+00:00'}, {'id': 218, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T18:35:17.658631+00:00', 'updated_at': '2026-02-25T18:35:17.658631+00:00'}, {'id': 217, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T18:27:50.787750+00:00', 'updated_at': '2026-02-25T18:27:50.787750+00:00'}, {'id': 216, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T18:18:58.723048+00:00', 'updated_at': '2026-02-25T18:18:58.723048+00:00'}, {'id': 215, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T18:05:04.122315+00:00', 'updated_at': '2026-02-25T18:05:04.122315+00:00'}, {'id': 214, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:46:24.232806+00:00', 'updated_at': '2026-02-25T17:46:24.232806+00:00'}, {'id': 213, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:43:09.146742+00:00', 'updated_at': '2026-02-25T17:43:09.146742+00:00'}, {'id': 212, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:41:10.457397+00:00', 'updated_at': '2026-02-25T17:41:10.457397+00:00'}, {'id': 211, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:36:36.866901+00:00', 'updated_at': '2026-02-25T17:36:36.866901+00:00'}, {'id': 210, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:35:41.686230+00:00', 'updated_at': '2026-02-25T17:35:41.686230+00:00'}, {'id': 209, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:28:46.107951+00:00', 'updated_at': '2026-02-25T17:28:46.107951+00:00'}, {'id': 208, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:24:46.995898+00:00', 'updated_at': '2026-02-25T17:24:46.995898+00:00'}, {'id': 207, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:18:22.171051+00:00', 'updated_at': '2026-02-25T17:18:22.171051+00:00'}, {'id': 206, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:15:32.934734+00:00', 'updated_at': '2026-02-25T17:15:32.934734+00:00'}, {'id': 205, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:12:01.339171+00:00', 'updated_at': '2026-02-25T17:12:01.339171+00:00'}, {'id': 204, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:05:57.701858+00:00', 'updated_at': '2026-02-25T17:05:57.701858+00:00'}, {'id': 203, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:00:11.461904+00:00', 'updated_at': '2026-02-25T17:00:11.461904+00:00'}, {'id': 202, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T16:55:04.663265+00:00', 'updated_at': '2026-02-25T16:55:04.663265+00:00'}, {'id': 201, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T16:51:00.791887+00:00', 'updated_at': '2026-02-25T16:51:00.791887+00:00'}, {'id': 200, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T16:50:44.425883+00:00', 'updated_at': '2026-02-25T16:50:44.425883+00:00'}, {'id': 199, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T16:45:32.330297+00:00', 'updated_at': '2026-02-25T16:45:32.330297+00:00'}, {'id': 198, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T16:45:18.281430+00:00', 'updated_at': '2026-02-25T16:45:18.281430+00:00'}, {'id': 197, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T16:20:51.014190+00:00', 'updated_at': '2026-02-25T16:20:51.014190+00:00'}, {'id': 196, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T15:44:33.502770+00:00', 'updated_at': '2026-02-25T15:44:33.502770+00:00'}, {'id': 195, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T15:38:11.237687+00:00', 'updated_at': '2026-02-25T15:38:11.237687+00:00'}, {'id': 194, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T15:37:53.427931+00:00', 'updated_at': '2026-02-25T15:37:53.427931+00:00'}, {'id': 193, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T15:36:19.760334+00:00', 'updated_at': '2026-02-25T15:36:19.760334+00:00'}, {'id': 192, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T15:35:18.417589+00:00', 'updated_at': '2026-02-25T15:35:18.417589+00:00'}, {'id': 191, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T15:03:14.211782+00:00', 'updated_at': '2026-02-25T15:03:14.211782+00:00'}, {'id': 190, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T14:36:42.154696+00:00', 'updated_at': '2026-02-25T14:36:42.154696+00:00'}, {'id': 189, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T14:31:01.510866+00:00', 'updated_at': '2026-02-25T14:31:01.510866+00:00'}, {'id': 188, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T14:29:53.274194+00:00', 'updated_at': '2026-02-25T14:29:53.274194+00:00'}, {'id': 187, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T13:12:52.546721+00:00', 'updated_at': '2026-02-25T13:12:52.546721+00:00'}, {'id': 186, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T13:10:59.604351+00:00', 'updated_at': '2026-02-25T13:10:59.604351+00:00'}, {'id': 185, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T13:10:27.514931+00:00', 'updated_at': '2026-02-25T13:10:27.514931+00:00'}, {'id': 184, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T13:08:41.882447+00:00', 'updated_at': '2026-02-25T13:08:41.882447+00:00'}, {'id': 183, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T12:27:32.234206+00:00', 'updated_at': '2026-02-25T12:27:32.234206+00:00'}, {'id': 182, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T12:17:23.497578+00:00', 'updated_at': '2026-02-25T12:17:23.497578+00:00'}, {'id': 181, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T12:15:04.054903+00:00', 'updated_at': '2026-02-25T12:15:04.054903+00:00'}, {'id': 180, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T12:11:41.757639+00:00', 'updated_at': '2026-02-25T12:11:41.757639+00:00'}, {'id': 179, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T12:09:15.894955+00:00', 'updated_at': '2026-02-25T12:09:15.894955+00:00'}, {'id': 178, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T12:01:08.835467+00:00', 'updated_at': '2026-02-25T12:01:08.835467+00:00'}, {'id': 177, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T11:56:14.684224+00:00', 'updated_at': '2026-02-25T11:56:14.684224+00:00'}, {'id': 176, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T10:52:03.862026+00:00', 'updated_at': '2026-02-25T10:52:03.862026+00:00'}, {'id': 175, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T10:50:02.518522+00:00', 'updated_at': '2026-02-25T10:50:02.518522+00:00'}, {'id': 174, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T10:42:55.821262+00:00', 'updated_at': '2026-02-25T10:42:55.821262+00:00'}, {'id': 173, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T10:38:49.101647+00:00', 'updated_at': '2026-02-25T10:38:49.101647+00:00'}, {'id': 172, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T10:38:09.353141+00:00', 'updated_at': '2026-02-25T10:38:09.353141+00:00'}, {'id': 171, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T09:21:48.948162+00:00', 'updated_at': '2026-02-25T09:21:48.948162+00:00'}, {'id': 170, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T09:17:55.698363+00:00', 'updated_at': '2026-02-25T09:17:55.698363+00:00'}, {'id': 169, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T09:17:18.775757+00:00', 'updated_at': '2026-02-25T09:17:18.775757+00:00'}, {'id': 168, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T09:16:23.024303+00:00', 'updated_at': '2026-02-25T09:16:23.024303+00:00'}, {'id': 167, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T09:12:41.857175+00:00', 'updated_at': '2026-02-25T09:12:41.857175+00:00'}, {'id': 166, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T08:36:41.383650+00:00', 'updated_at': '2026-02-25T08:36:41.383650+00:00'}, {'id': 165, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T08:34:32.543620+00:00', 'updated_at': '2026-02-25T08:34:32.543620+00:00'}, {'id': 164, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T08:32:11.855646+00:00', 'updated_at': '2026-02-25T08:32:11.855646+00:00'}, {'id': 163, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T08:27:25.972885+00:00', 'updated_at': '2026-02-25T08:27:25.972885+00:00'}, {'id': 162, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T16:10:55.313974+00:00', 'updated_at': '2026-02-24T16:10:55.313974+00:00'}, {'id': 161, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T16:09:08.553629+00:00', 'updated_at': '2026-02-24T16:09:08.553629+00:00'}, {'id': 160, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T16:06:15.394421+00:00', 'updated_at': '2026-02-24T16:06:15.394421+00:00'}, {'id': 159, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T16:05:31.589282+00:00', 'updated_at': '2026-02-24T16:05:31.589282+00:00'}, {'id': 158, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T15:55:30.195931+00:00', 'updated_at': '2026-02-24T15:55:30.195931+00:00'}, {'id': 157, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T15:42:11.582736+00:00', 'updated_at': '2026-02-24T15:42:11.582736+00:00'}, {'id': 156, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T13:54:53.908013+00:00', 'updated_at': '2026-02-24T13:54:53.908013+00:00'}, {'id': 155, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T13:21:34.170984+00:00', 'updated_at': '2026-02-24T13:21:34.170984+00:00'}, {'id': 153, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T13:18:32.014035+00:00', 'updated_at': '2026-02-24T13:18:32.014035+00:00'}, {'id': 152, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T13:15:16.961323+00:00', 'updated_at': '2026-02-24T13:15:16.961323+00:00'}, {'id': 151, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T12:43:20.889833+00:00', 'updated_at': '2026-02-24T12:43:20.889833+00:00'}, {'id': 150, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T12:42:56.016952+00:00', 'updated_at': '2026-02-24T12:42:56.016952+00:00'}, {'id': 149, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:55:56.042369+00:00', 'updated_at': '2026-02-24T10:55:56.042369+00:00'}, {'id': 148, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:55:41.488047+00:00', 'updated_at': '2026-02-24T10:55:41.488047+00:00'}, {'id': 147, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:49:14.817320+00:00', 'updated_at': '2026-02-24T10:49:14.817320+00:00'}, {'id': 146, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:48:57.350358+00:00', 'updated_at': '2026-02-24T10:48:57.350358+00:00'}, {'id': 145, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:46:32.242848+00:00', 'updated_at': '2026-02-24T10:46:32.242848+00:00'}, {'id': 144, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:44:06.957698+00:00', 'updated_at': '2026-02-24T10:44:06.957698+00:00'}, {'id': 143, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:43:36.650302+00:00', 'updated_at': '2026-02-24T10:43:36.650302+00:00'}, {'id': 142, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:41:27.108791+00:00', 'updated_at': '2026-02-24T10:41:27.108791+00:00'}, {'id': 141, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:41:00.283484+00:00', 'updated_at': '2026-02-24T10:41:00.283484+00:00'}, {'id': 140, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:39:47.897467+00:00', 'updated_at': '2026-02-24T10:39:47.897467+00:00'}, {'id': 139, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:34:05.150318+00:00', 'updated_at': '2026-02-24T10:34:05.150318+00:00'}, {'id': 138, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:29:46.478868+00:00', 'updated_at': '2026-02-24T10:29:46.478868+00:00'}, {'id': 137, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:28:45.655878+00:00', 'updated_at': '2026-02-24T10:28:45.655878+00:00'}, {'id': 136, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:05:25.775341+00:00', 'updated_at': '2026-02-24T10:05:25.775341+00:00'}, {'id': 135, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T09:56:25.866934+00:00', 'updated_at': '2026-02-24T09:56:25.866934+00:00'}, {'id': 134, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T09:53:06.440754+00:00', 'updated_at': '2026-02-24T09:53:06.440754+00:00'}, {'id': 133, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T09:51:21.444274+00:00', 'updated_at': '2026-02-24T09:51:21.444274+00:00'}, {'id': 132, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T09:39:42.439041+00:00', 'updated_at': '2026-02-24T09:39:42.439041+00:00'}, {'id': 131, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T09:38:48.866580+00:00', 'updated_at': '2026-02-24T09:38:48.866580+00:00'}, {'id': 130, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T09:28:16.002211+00:00', 'updated_at': '2026-02-24T09:28:16.002211+00:00'}, {'id': 129, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T09:27:49.270616+00:00', 'updated_at': '2026-02-24T09:27:49.270616+00:00'}, {'id': 128, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T09:26:50.501911+00:00', 'updated_at': '2026-02-24T09:26:50.501911+00:00'}, {'id': 127, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T09:22:10.441084+00:00', 'updated_at': '2026-02-24T09:22:10.441084+00:00'}]", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 18:36:27,205", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversations:user:1:skip:0:limit:100, TTL=3693s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 18:36:27,206", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 用户 1 的会话列表已预热", "module": "cache_warmup", "function": "warmup_conversations", "line": 56}
{"timestamp": "2026-02-26 18:36:27,206", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 60}
{"timestamp": "2026-02-26 18:36:27,206", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:36:27,206", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热置顶会话详情缓存", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 65}
{"timestamp": "2026-02-26 18:36:27,207", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:36:27,208", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.is_pinned = true", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:36:27,208", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00019s] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:36:27,208", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 102}
{"timestamp": "2026-02-26 18:36:27,208", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:36:27,209", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热最近 24 小时活跃的会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 114}
{"timestamp": "2026-02-26 18:36:27,209", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:36:27,210", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.updated_at >= $1::TIMESTAMP WITH TIME ZONE \n LIMIT $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:36:27,210", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00025s] (datetime.datetime(2026, 2, 25, 10, 36, 27, 209385), 200)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:36:27,211", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:163:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,211", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:164:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,211", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:165:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,212", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:166:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,212", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:167:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,212", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:168:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,212", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:169:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,212", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:170:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,213", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:171:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,213", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:172:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,213", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:173:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,213", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:174:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,213", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:175:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,214", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:176:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,214", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:177:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,214", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:178:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,214", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:179:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,215", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:180:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,215", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:181:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,215", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:182:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,215", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:183:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,216", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:184:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,216", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:185:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,216", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:186:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,216", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:187:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,217", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:188:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,217", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:189:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,218", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:190:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,218", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:191:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,218", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:192:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,219", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:193:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,219", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:194:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,220", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:195:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,220", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:196:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,220", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:197:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,220", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:198:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,221", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:199:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,221", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:200:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,221", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:201:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,221", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:202:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,222", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:203:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,222", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:204:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,222", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:205:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,222", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:206:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,222", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:207:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,223", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:208:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,223", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:209:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,223", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:210:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,223", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:211:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,224", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:212:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,224", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:213:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,224", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:214:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,224", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:215:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,224", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:216:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,225", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:217:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,225", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:218:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,225", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:219:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,226", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:220:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,226", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:221:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,226", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:222:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,226", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:223:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,227", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:224:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,227", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:225:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,227", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:226:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,227", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:227:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:36:27,227", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 65 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 154}
{"timestamp": "2026-02-26 18:36:27,227", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:36:27,228", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 缓存预热完成 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 165}
{"timestamp": "2026-02-26 18:49:16,570", "level": "INFO", "logger": "app.core.tracing", "message": "[REQUEST] method=POST path=/api/v1/conversations status_code=401 request_id=5ecb409c-92eb-48ff-8217-2c30bb459195", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 18:49:17,558", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:49:17,559", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.username = $1::VARCHAR", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:49:17,559", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00019s] ('qibao1',)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:49:17,728", "level": "INFO", "logger": "app.core.tracing", "message": "[REQUEST] method=POST path=/api/v1/auth/login status_code=200 request_id=3dcd115f-34a7-46f0-bacd-8508becab7f1", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 18:49:17,728", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:49:17,734", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:49:17,735", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.username = $1::VARCHAR", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:49:17,735", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.176s ago] ('qibao1',)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:49:17,739", "level": "INFO", "logger": "app.core.tracing", "message": "[REQUEST] method=GET path=/api/v1/auth/me status_code=200 request_id=3b004cb8-c690-411f-a05c-0ba631b470db", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 18:49:17,742", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:49:17,747", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:49:17,747", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.username = $1::VARCHAR", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:49:17,748", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.1888s ago] ('qibao1',)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:49:17,749", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversations:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:49:17,749", "level": "INFO", "logger": "app.core.tracing", "message": "[REQUEST] method=GET path=/api/v1/conversations status_code=200 request_id=5df14aa4-34de-466e-af5d-8dd78b482824", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 18:49:17,750", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:49:17,897", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:49:17,898", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.username = $1::VARCHAR", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:49:17,898", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.3393s ago] ('qibao1',)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:49:17,899", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversations:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:49:17,901", "level": "INFO", "logger": "app.core.tracing", "message": "[REQUEST] method=GET path=/api/v1/conversations status_code=200 request_id=1c934696-8c1f-416d-b8d8-9623506eb491", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 18:49:17,901", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:49:20,942", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:49:20,943", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.username = $1::VARCHAR", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:49:20,944", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 3.385s ago] ('qibao1',)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:49:20,946", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO conversations (user_id, title, is_pinned, model_name) VALUES ($1::INTEGER, $2::VARCHAR, $3::BOOLEAN, $4::VARCHAR) RETURNING conversations.id, conversations.created_at, conversations.updated_at", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:49:20,947", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00033s] (1, '新会话', False, None)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:49:20,950", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:49:20,950", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00054s] (228,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:49:20,951", "level": "INFO", "logger": "app.services.conversation_service", "message": "[CACHE DELETE] 已删除用户会话列表缓存: user_id=1, keys=1", "module": "conversation_service", "function": "_invalidate_user_cache", "line": 144}
{"timestamp": "2026-02-26 18:49:20,952", "level": "INFO", "logger": "app.core.tracing", "message": "[REQUEST] method=POST path=/api/v1/conversations status_code=201 request_id=b3a06fff-51b0-44c0-a94f-6fe9c4070687", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 18:49:20,952", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:49:20,974", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:49:20,974", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.username = $1::VARCHAR", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:49:20,975", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 3.416s ago] ('qibao1',)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:49:20,977", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:228:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 18:49:20,978", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:49:20,979", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00056s] (228, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:49:20,980", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:228:1: {'id': 228, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-26T10:49:20.944717+00:00', 'updated_at': '2026-02-26T10:49:20.944717+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 18:49:20,981", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:228:1, TTL=3717s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 18:49:20,982", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: messages:conversation:228:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 18:49:20,984", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.metadata, messages.created_at \nFROM messages JOIN conversations ON messages.conversation_id = conversations.id \nWHERE messages.conversation_id = $1::INTEGER AND conversations.user_id = $2::INTEGER ORDER BY messages.created_at ASC \n LIMIT $3::INTEGER OFFSET $4::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:49:20,984", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00039s] (228, 1, 100, 0)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:49:20,986", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: messages:conversation:228:user:1:skip:0:limit:100, TTL=3620s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 18:49:20,987", "level": "INFO", "logger": "app.core.tracing", "message": "[REQUEST] method=GET path=/api/v1/chat/conversations/228/history status_code=200 request_id=a14e7a48-0cd4-45f9-8f03-344bd74c6bb4", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 18:49:20,987", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:49:23,851", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:49:23,852", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.username = $1::VARCHAR", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:49:23,852", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.293s ago] ('qibao1',)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:49:23,853", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:228:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:49:23,854", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:49:23,854", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 2.876s ago] (228, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:49:23,856", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO messages (conversation_id, role, content, metadata) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::JSON) RETURNING messages.id, messages.created_at", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:49:23,856", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00033s] (228, 'user', '你好', 'null')", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:49:23,859", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.metadata, messages.created_at \nFROM messages \nWHERE messages.id = $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:49:23,860", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00061s] (619,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:49:23,861", "level": "INFO", "logger": "app.services.chat_service", "message": "[DB] Saved message id=619, metadata_=None", "module": "chat_service", "function": "create_message", "line": 76}
{"timestamp": "2026-02-26 18:49:23,863", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.metadata, messages.created_at \nFROM messages \nWHERE messages.id = $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:49:23,863", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00044s] (619,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:49:23,864", "level": "INFO", "logger": "app.services.chat_service", "message": "[DB] Verify saved: id=619, metadata_=None", "module": "chat_service", "function": "create_message", "line": 83}
{"timestamp": "2026-02-26 18:49:23,864", "level": "INFO", "logger": "app.services.chat_service", "message": "[CACHE DELETE] 已删除消息缓存: conversation_id=228, user_id=1, keys=1", "module": "chat_service", "function": "_invalidate_messages_cache", "line": 546}
{"timestamp": "2026-02-26 18:49:23,865", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: messages:conversation:228:user:1:skip:0:limit:50", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 18:49:23,865", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.metadata, messages.created_at \nFROM messages JOIN conversations ON messages.conversation_id = conversations.id \nWHERE messages.conversation_id = $1::INTEGER AND conversations.user_id = $2::INTEGER ORDER BY messages.created_at ASC \n LIMIT $3::INTEGER OFFSET $4::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:49:23,865", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 2.882s ago] (228, 1, 50, 0)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:49:23,866", "level": "INFO", "logger": "app.services.chat_service", "message": "[DB] Fetched message id=619, metadata_=None", "module": "chat_service", "function": "fetch", "line": 43}
{"timestamp": "2026-02-26 18:49:23,866", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for messages:conversation:228:user:1:skip:0:limit:50: [{'id': 619, 'conversation_id': 228, 'role': 'user', 'content': '你好', 'metadata': 'MetaData()', 'created_at': '2026-02-26T10:49:23.852678+00:00'}]", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 18:49:23,867", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: messages:conversation:228:user:1:skip:0:limit:50, TTL=3863s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 18:49:23,867", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] 开始生成流式响应: conversation_id=228, enable_thinking=False", "module": "chat_service", "function": "generate_response_stream", "line": 465}
{"timestamp": "2026-02-26 18:49:23,867", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] 开始处理消息: conversation_id=228", "module": "chat_service", "function": "process_message", "line": 103}
{"timestamp": "2026-02-26 18:49:23,868", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] 上下文准备完成，长度: 2", "module": "chat_service", "function": "process_message", "line": 117}
{"timestamp": "2026-02-26 18:49:23,868", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] 创建Agent: is_expert=False, enable_thinking=False", "module": "chat_service", "function": "process_message", "line": 120}
{"timestamp": "2026-02-26 18:49:24,037", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] 初始化技能后端: F:\\code\\dragonai-v2-local\\app\\skills", "module": "agent_factory", "function": "_get_skills_backend", "line": 126}
{"timestamp": "2026-02-26 18:49:24,084", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] 创建并缓存Agent (with Skills): expert_False_thinking_False", "module": "agent_factory", "function": "create_chat_agent", "line": 183}
{"timestamp": "2026-02-26 18:49:24,085", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] Agent创建成功", "module": "chat_service", "function": "process_message", "line": 125}
{"timestamp": "2026-02-26 18:49:24,085", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] Agent配置: {'configurable': {'thread_id': 'conversation_228'}, 'recursion_limit': 25}", "module": "chat_service", "function": "process_message", "line": 128}
{"timestamp": "2026-02-26 18:49:24,085", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] 开始流式执行Agent", "module": "chat_service", "function": "process_message", "line": 130}
{"timestamp": "2026-02-26 18:49:24,087", "level": "INFO", "logger": "app.core.tracing", "message": "[REQUEST] method=POST path=/api/v1/chat/send status_code=200 request_id=0e2f2a5e-4e63-48d6-a120-dbd882daeb2a", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 18:49:24,094", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] updates data: {'SkillsMiddleware.before_agent': {'skills_metadata': [{'name': 'xhs-copywriter', 'description': '小红书平台文案创作专家，帮助用户创作吸引眼球的小红书笔记、种草文案、产品推荐等内容。适用于小红书营销、内容创作、品牌推广等场景。', 'path': '/xhs-copywriter/SKILL.md', 'metadata': {'author': 'dragonai', 'version': '1.0', 'platform': 'xiaohongshu'}, 'license': 'MIT', 'compatibility': '无特殊依赖', 'allowed_tools': ['web_search']}]}}", "module": "chat_service", "function": "process_message", "line": 144}
{"timestamp": "2026-02-26 18:49:24,094", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] source=SkillsMiddleware.before_agent, update keys=dict_keys(['skills_metadata'])", "module": "chat_service", "function": "process_message", "line": 146}
{"timestamp": "2026-02-26 18:49:24,095", "level": "INFO", "logger": "app.agents.debug_middleware", "message": "[DEBUG-MIDDLEWARE] System prompt (3109 chars):\n你是一个强大的AI助手，能够帮助用户处理各种任务。\n\n你可以使用多种工具来帮助用户，工具的功能说明已内置在系统中。\n\n**工具调用重要规则**：\n- 如果调用工具缺少必填参数，不要调用工具，应该先询问用户提供缺失的信息\n- 根据用户需求选择最合适的工具，避免不必要的工具调用\n\n**工具结果输出规则（非常重要）**：\n- 当工具返回结果包含代码、完整答案或详细内容时，你必须原样完整输出给用户\n- 禁止对工具返回的代码进行总结、省略、改写或简化\n- 禁止使用\"代码如下\"、\"这是代码\"等简短描述代替完整输出\n- 如果工具结果包含<INSTRUCTION>标签，必须严格遵循标签内的指令\n- 当看到<INSTRUCTION>标签时，只输出标签后的内容，不要输出标签本身，不要做任何修改\n\n**技能使用规则（非常重要）**：\n- 当用户请求匹配某个技能的描述时，你必须先调用 read_file 读取该技能的完整指令\n- 禁止在没有读取技能文件的情况下直接回答相关任务\n- 读取技能文件后，必须严格按照技能中的流程和模板执行任务\n\n请根据用户的需求，合理选择和使用工具。如果用户请求不明确，请主动询问以澄清需求。\n\n\n\n## Following Conventions\n\n- Read files before editing — understand existing content before making changes\n- Mimic existing style, naming conventions, and patterns\n\n## Tool Usage and File Reading\n\nFollow the tool docs for the available tools. In particular, for filesystem tools, use pagination (offset/limit) when reading large files.\n\n## Filesystem Tools `ls`, `read_file`, `write_file`, `edit_file`, `glob`, `grep`\n\nYou have access to a filesystem which you can interact with using these tools.\nAll file paths must start with a /.\n\n- ls: list files in a directory (requires absolute path)\n- read_file: read a file from the filesystem\n- write_file: write to a file in the filesystem\n- edit_file: edit a file in the filesystem\n- glob: find files matching a pattern (e.g., \"**/*.py\")\n- grep: search for text within files\n\n\n\n\n## Skills System\n\nYou have access to a skills library that provides specialized capabilities and domain knowledge.\n\n** Skills**: `/` (higher priority)\n\n**Available Skills:**\n\n- **xhs-copywriter**: 小红书平台文案创作专家，帮助用户创作吸引眼球的小红书笔记、种草文案、产品推荐等内容。适用于小红书营销、内容创作、品牌推广等场景。 (License: MIT, Compatibility: 无特殊依赖)\n  -> Allowed tools: web_search\n  -> Read `/xhs-copywriter/SKILL.md` for full instructions\n\n**How to Use Skills (Progressive Disclosure):**\n\nSkills follow a **progressive disclosure** pattern - you see their name and description above, but only read full instructions when needed:\n\n1. **Recognize when a skill applies**: Check if the user's task matches a skill's description\n2. **Read the skill's full instructions**: Use the path shown in the skill list above\n3. **Follow the skill's instructions**: SKILL.md contains step-by-step workflows, best practices, and examples\n4. **Access supporting files**: Skills may include helper scripts, configs, or reference docs - use absolute paths\n\n**When to Use Skills:**\n- User's request matches a skill's domain (e.g., \"research X\" -> web-research skill)\n- You need specialized knowledge or structured workflows\n- A skill provides proven patterns for complex tasks\n\n**Executing Skill Scripts:**\nSkills may contain Python scripts or other executable files. Always use absolute paths from the skill list.\n\n**Example Workflow:**\n\nUser: \"Can you research the latest developments in quantum computing?\"\n\n1. Check available skills -> See \"web-research\" skill with its path\n2. Read the skill using the path shown\n3. Follow the skill's research workflow (search -> organize -> synthesize)\n4. Use any helper scripts with absolute paths\n\n... (truncated, total 3109 chars)", "module": "debug_middleware", "function": "_log_system_prompt", "line": 78}
{"timestamp": "2026-02-26 18:49:24,096", "level": "INFO", "logger": "app.agents.debug_middleware", "message": "[DEBUG-MIDDLEWARE] Found Skills section at line 48", "module": "debug_middleware", "function": "_log_skills_info", "line": 92}
{"timestamp": "2026-02-26 18:49:24,096", "level": "INFO", "logger": "app.agents.debug_middleware", "message": "[DEBUG-MIDDLEWARE] Found Skills section at line 54", "module": "debug_middleware", "function": "_log_skills_info", "line": 92}
{"timestamp": "2026-02-26 18:49:24,096", "level": "INFO", "logger": "app.agents.debug_middleware", "message": "[DEBUG-MIDDLEWARE] Skills in prompt: ['xhs-copywriter']", "module": "debug_middleware", "function": "_log_skills_info", "line": 99}
{"timestamp": "2026-02-26 18:49:26,798", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 1: 2 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:49:26,837", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 2: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:49:26,860", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 3: 2 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:49:26,990", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 4: 2 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:49:27,056", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 5: 11 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:49:27,069", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 6: 1 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:49:27,087", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] updates data: {'model': {'messages': [AIMessage(content='你好！很高兴见到你，有什么我可以帮你的吗？😊', additional_kwargs={}, response_metadata={'finish_reason': 'stop', 'request_id': 'd493da64-4ae7-4188-8f22-42b9235b6146', 'token_usage': {'input_tokens': 4063, 'output_tokens': 13, 'total_tokens': 4076, 'prompt_tokens_details': {'cached_tokens': 0}}}, id='lc_run--019c9991-5395-73d3-ab7a-e2bc433224b3', tool_calls=[], invalid_tool_calls=[])]}}", "module": "chat_service", "function": "process_message", "line": 144}
{"timestamp": "2026-02-26 18:49:27,087", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] source=model, update keys=dict_keys(['messages'])", "module": "chat_service", "function": "process_message", "line": 146}
{"timestamp": "2026-02-26 18:49:27,087", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] formatted_list=[{'type': 'content', 'data': {'content': '你好！很高兴见到你，有什么我可以帮你的吗？😊'}}]", "module": "chat_service", "function": "process_message", "line": 149}
{"timestamp": "2026-02-26 18:49:27,089", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] Agent流式执行完成", "module": "chat_service", "function": "process_message", "line": 159}
{"timestamp": "2026-02-26 18:49:27,089", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Stream complete, total chunks: 6, total chars: 22", "module": "chat", "function": "generate", "line": 127}
{"timestamp": "2026-02-26 18:49:27,089", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Full response content:\n你好！很高兴见到你，有什么我可以帮你的吗？😊", "module": "chat", "function": "generate", "line": 128}
{"timestamp": "2026-02-26 18:49:27,089", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Thinking content length: 0", "module": "chat", "function": "generate", "line": 129}
{"timestamp": "2026-02-26 18:49:27,089", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:49:27,089", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 6.111s ago] (228, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:49:27,090", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO messages (conversation_id, role, content, metadata) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::JSON) RETURNING messages.id, messages.created_at", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:49:27,090", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 3.235s ago] (228, 'assistant', '你好！很高兴见到你，有什么我可以帮你的吗？😊', '{\"model\": \"fast\"}')", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:49:27,091", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.metadata, messages.created_at \nFROM messages \nWHERE messages.id = $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:49:27,091", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 3.232s ago] (620,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:49:27,092", "level": "INFO", "logger": "app.services.chat_service", "message": "[DB] Saved message id=620, metadata_={'model': 'fast'}", "module": "chat_service", "function": "create_message", "line": 76}
{"timestamp": "2026-02-26 18:49:27,092", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.metadata, messages.created_at \nFROM messages \nWHERE messages.id = $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:49:27,092", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 3.23s ago] (620,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:49:27,093", "level": "INFO", "logger": "app.services.chat_service", "message": "[DB] Verify saved: id=620, metadata_={'model': 'fast'}", "module": "chat_service", "function": "create_message", "line": 83}
{"timestamp": "2026-02-26 18:49:27,094", "level": "INFO", "logger": "app.services.chat_service", "message": "[CACHE DELETE] 已删除消息缓存: conversation_id=228, user_id=1, keys=1", "module": "chat_service", "function": "_invalidate_messages_cache", "line": 546}
{"timestamp": "2026-02-26 18:49:27,095", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 18:50:34,548", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 18:50:34,549", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.username = $1::VARCHAR", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:50:34,550", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 76.99s ago] ('qibao1',)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:50:34,551", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:228:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 18:50:34,552", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:50:34,552", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 73.57s ago] (228, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:50:34,553", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO messages (conversation_id, role, content, metadata) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::JSON) RETURNING messages.id, messages.created_at", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:50:34,553", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 70.7s ago] (228, 'user', '写一个小红书文案，美妆的', 'null')", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:50:34,554", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.metadata, messages.created_at \nFROM messages \nWHERE messages.id = $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:50:34,555", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 70.7s ago] (621,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:50:34,555", "level": "INFO", "logger": "app.services.chat_service", "message": "[DB] Saved message id=621, metadata_=None", "module": "chat_service", "function": "create_message", "line": 76}
{"timestamp": "2026-02-26 18:50:34,556", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.metadata, messages.created_at \nFROM messages \nWHERE messages.id = $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:50:34,556", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 70.69s ago] (621,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:50:34,556", "level": "INFO", "logger": "app.services.chat_service", "message": "[DB] Verify saved: id=621, metadata_=None", "module": "chat_service", "function": "create_message", "line": 83}
{"timestamp": "2026-02-26 18:50:34,557", "level": "INFO", "logger": "app.services.chat_service", "message": "[CACHE DELETE] 未找到消息缓存: conversation_id=228, user_id=1", "module": "chat_service", "function": "_invalidate_messages_cache", "line": 548}
{"timestamp": "2026-02-26 18:50:34,557", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: messages:conversation:228:user:1:skip:0:limit:50", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 18:50:34,558", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.metadata, messages.created_at \nFROM messages JOIN conversations ON messages.conversation_id = conversations.id \nWHERE messages.conversation_id = $1::INTEGER AND conversations.user_id = $2::INTEGER ORDER BY messages.created_at ASC \n LIMIT $3::INTEGER OFFSET $4::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:50:34,558", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 73.57s ago] (228, 1, 50, 0)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:50:34,558", "level": "INFO", "logger": "app.services.chat_service", "message": "[DB] Fetched message id=619, metadata_=None", "module": "chat_service", "function": "fetch", "line": 43}
{"timestamp": "2026-02-26 18:50:34,558", "level": "INFO", "logger": "app.services.chat_service", "message": "[DB] Fetched message id=620, metadata_={'model': 'fast'}", "module": "chat_service", "function": "fetch", "line": 43}
{"timestamp": "2026-02-26 18:50:34,559", "level": "INFO", "logger": "app.services.chat_service", "message": "[DB] Fetched message id=621, metadata_=None", "module": "chat_service", "function": "fetch", "line": 43}
{"timestamp": "2026-02-26 18:50:34,559", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for messages:conversation:228:user:1:skip:0:limit:50: [{'id': 619, 'conversation_id': 228, 'role': 'user', 'content': '你好', 'metadata': 'MetaData()', 'created_at': '2026-02-26T10:49:23.852678+00:00'}, {'id': 620, 'conversation_id': 228, 'role': 'assistant', 'content': '你好！很高兴见到你，有什么我可以帮你的吗？😊', 'metadata': 'MetaData()', 'created_at': '2026-02-26T10:49:23.852678+00:00'}, {'id': 621, 'conversation_id': 228, 'role': 'user', 'content': '写一个小红书文案，美妆的', 'metadata': 'MetaData()', 'created_at': '2026-02-26T10:50:34.550501+00:00'}]", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 18:50:34,559", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: messages:conversation:228:user:1:skip:0:limit:50, TTL=3715s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 18:50:34,560", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] 开始生成流式响应: conversation_id=228, enable_thinking=False", "module": "chat_service", "function": "generate_response_stream", "line": 465}
{"timestamp": "2026-02-26 18:50:34,560", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] 开始处理消息: conversation_id=228", "module": "chat_service", "function": "process_message", "line": 103}
{"timestamp": "2026-02-26 18:50:34,560", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] 上下文准备完成，长度: 12", "module": "chat_service", "function": "process_message", "line": 117}
{"timestamp": "2026-02-26 18:50:34,560", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] 创建Agent: is_expert=False, enable_thinking=False", "module": "chat_service", "function": "process_message", "line": 120}
{"timestamp": "2026-02-26 18:50:34,560", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] Agent创建成功", "module": "chat_service", "function": "process_message", "line": 125}
{"timestamp": "2026-02-26 18:50:34,560", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] Agent配置: {'configurable': {'thread_id': 'conversation_228'}, 'recursion_limit': 25}", "module": "chat_service", "function": "process_message", "line": 128}
{"timestamp": "2026-02-26 18:50:34,561", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] 开始流式执行Agent", "module": "chat_service", "function": "process_message", "line": 130}
{"timestamp": "2026-02-26 18:50:34,561", "level": "INFO", "logger": "app.core.tracing", "message": "[REQUEST] method=POST path=/api/v1/chat/send status_code=200 request_id=2efedb18-9add-420c-89ad-4b371f3f8e29", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 18:50:34,564", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] updates data: {'SkillsMiddleware.before_agent': None}", "module": "chat_service", "function": "process_message", "line": 144}
{"timestamp": "2026-02-26 18:50:34,564", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] source=SkillsMiddleware.before_agent, update keys=<class 'NoneType'>", "module": "chat_service", "function": "process_message", "line": 146}
{"timestamp": "2026-02-26 18:50:34,564", "level": "INFO", "logger": "app.agents.debug_middleware", "message": "[DEBUG-MIDDLEWARE] System prompt (3109 chars):\n你是一个强大的AI助手，能够帮助用户处理各种任务。\n\n你可以使用多种工具来帮助用户，工具的功能说明已内置在系统中。\n\n**工具调用重要规则**：\n- 如果调用工具缺少必填参数，不要调用工具，应该先询问用户提供缺失的信息\n- 根据用户需求选择最合适的工具，避免不必要的工具调用\n\n**工具结果输出规则（非常重要）**：\n- 当工具返回结果包含代码、完整答案或详细内容时，你必须原样完整输出给用户\n- 禁止对工具返回的代码进行总结、省略、改写或简化\n- 禁止使用\"代码如下\"、\"这是代码\"等简短描述代替完整输出\n- 如果工具结果包含<INSTRUCTION>标签，必须严格遵循标签内的指令\n- 当看到<INSTRUCTION>标签时，只输出标签后的内容，不要输出标签本身，不要做任何修改\n\n**技能使用规则（非常重要）**：\n- 当用户请求匹配某个技能的描述时，你必须先调用 read_file 读取该技能的完整指令\n- 禁止在没有读取技能文件的情况下直接回答相关任务\n- 读取技能文件后，必须严格按照技能中的流程和模板执行任务\n\n请根据用户的需求，合理选择和使用工具。如果用户请求不明确，请主动询问以澄清需求。\n\n\n\n## Following Conventions\n\n- Read files before editing — understand existing content before making changes\n- Mimic existing style, naming conventions, and patterns\n\n## Tool Usage and File Reading\n\nFollow the tool docs for the available tools. In particular, for filesystem tools, use pagination (offset/limit) when reading large files.\n\n## Filesystem Tools `ls`, `read_file`, `write_file`, `edit_file`, `glob`, `grep`\n\nYou have access to a filesystem which you can interact with using these tools.\nAll file paths must start with a /.\n\n- ls: list files in a directory (requires absolute path)\n- read_file: read a file from the filesystem\n- write_file: write to a file in the filesystem\n- edit_file: edit a file in the filesystem\n- glob: find files matching a pattern (e.g., \"**/*.py\")\n- grep: search for text within files\n\n\n\n\n## Skills System\n\nYou have access to a skills library that provides specialized capabilities and domain knowledge.\n\n** Skills**: `/` (higher priority)\n\n**Available Skills:**\n\n- **xhs-copywriter**: 小红书平台文案创作专家，帮助用户创作吸引眼球的小红书笔记、种草文案、产品推荐等内容。适用于小红书营销、内容创作、品牌推广等场景。 (License: MIT, Compatibility: 无特殊依赖)\n  -> Allowed tools: web_search\n  -> Read `/xhs-copywriter/SKILL.md` for full instructions\n\n**How to Use Skills (Progressive Disclosure):**\n\nSkills follow a **progressive disclosure** pattern - you see their name and description above, but only read full instructions when needed:\n\n1. **Recognize when a skill applies**: Check if the user's task matches a skill's description\n2. **Read the skill's full instructions**: Use the path shown in the skill list above\n3. **Follow the skill's instructions**: SKILL.md contains step-by-step workflows, best practices, and examples\n4. **Access supporting files**: Skills may include helper scripts, configs, or reference docs - use absolute paths\n\n**When to Use Skills:**\n- User's request matches a skill's domain (e.g., \"research X\" -> web-research skill)\n- You need specialized knowledge or structured workflows\n- A skill provides proven patterns for complex tasks\n\n**Executing Skill Scripts:**\nSkills may contain Python scripts or other executable files. Always use absolute paths from the skill list.\n\n**Example Workflow:**\n\nUser: \"Can you research the latest developments in quantum computing?\"\n\n1. Check available skills -> See \"web-research\" skill with its path\n2. Read the skill using the path shown\n3. Follow the skill's research workflow (search -> organize -> synthesize)\n4. Use any helper scripts with absolute paths\n\n... (truncated, total 3109 chars)", "module": "debug_middleware", "function": "_log_system_prompt", "line": 78}
{"timestamp": "2026-02-26 18:50:34,565", "level": "INFO", "logger": "app.agents.debug_middleware", "message": "[DEBUG-MIDDLEWARE] Found Skills section at line 48", "module": "debug_middleware", "function": "_log_skills_info", "line": 92}
{"timestamp": "2026-02-26 18:50:34,565", "level": "INFO", "logger": "app.agents.debug_middleware", "message": "[DEBUG-MIDDLEWARE] Found Skills section at line 54", "module": "debug_middleware", "function": "_log_skills_info", "line": 92}
{"timestamp": "2026-02-26 18:50:34,565", "level": "INFO", "logger": "app.agents.debug_middleware", "message": "[DEBUG-MIDDLEWARE] Skills in prompt: ['xhs-copywriter']", "module": "debug_middleware", "function": "_log_skills_info", "line": 99}
{"timestamp": "2026-02-26 18:50:40,449", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 1: 2 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:40,537", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 2: 3 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:40,567", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 3: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:40,645", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 4: 2 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:40,730", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 5: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:40,843", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 6: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:40,977", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 7: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:41,081", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 8: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:41,109", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 9: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:41,277", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 10: 13 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:41,327", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 11: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:41,415", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 12: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:41,546", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 13: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:41,659", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 14: 3 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:42,107", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] updates data: {'model': {'messages': [AIMessage(content='好的！我将为你创作一篇小红书风格的美妆文案。首先，我需要读取小红书文案创作专家（xhs-copywriter）的完整技能说明，以确保严格遵循其专业流程和模板。\\n\\n', additional_kwargs={'tool_calls': [{'index': 0, 'id': 'call_fa0b34dc339a4f9d997c20', 'type': 'function', 'function': {'name': 'read_file', 'arguments': '{\"file_path\": \"/xhs-copywriter/SKILL.md\"}'}}]}, response_metadata={'finish_reason': 'tool_calls', 'request_id': '0b093dc3-4b80-4229-9a88-3081875946af', 'token_usage': {'input_tokens': 4094, 'output_tokens': 75, 'total_tokens': 4169, 'prompt_tokens_details': {'cached_tokens': 0}}}, id='lc_run--019c9992-6720-7ff0-bdb5-3777c7b4c506', tool_calls=[{'name': 'read_file', 'args': {'file_path': '/xhs-copywriter/SKILL.md'}, 'id': 'call_fa0b34dc339a4f9d997c20', 'type': 'tool_call'}], invalid_tool_calls=[])]}}", "module": "chat_service", "function": "process_message", "line": 144}
{"timestamp": "2026-02-26 18:50:42,108", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] source=model, update keys=dict_keys(['messages'])", "module": "chat_service", "function": "process_message", "line": 146}
{"timestamp": "2026-02-26 18:50:42,108", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] formatted_list=[{'type': 'tool_call', 'data': {'names': ['read_file']}}]", "module": "chat_service", "function": "process_message", "line": 149}
{"timestamp": "2026-02-26 18:50:42,109", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 15: 19 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:42,126", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] updates data: {'tools': {'messages': [ToolMessage(content='     1\\t---\\n     2\\tname: xhs-copywriter\\n     3\\tdescription: 小红书平台文案创作专家，帮助用户创作吸引眼球的小红书笔记、种草文案、产品推荐等内容。适用于小红书营销、内容创作、品牌推广等场景。\\n     4\\tlicense: MIT\\n     5\\tcompatibility: 无特殊依赖\\n     6\\tmetadata:\\n     7\\t  author: dragonai\\n     8\\t  version: \"1.0\"\\n     9\\t  platform: xiaohongshu\\n    10\\tallowed-tools: web_search\\n    11\\t---\\n    12\\t\\n    13\\t# 小红书文案生成助手\\n    14\\t\\n    15\\t## 概述\\n    16\\t\\n    17\\t这是一个专门为小红书平台设计的内容创作技能，帮助用户创作高质量、高互动的小红书笔记。掌握小红书平台的内容特点、用户偏好和爆款文案技巧。\\n    18\\t\\n    19\\t## 核心能力\\n    20\\t\\n    21\\t### 1. 标题创作技巧\\n    22\\t\\n    23\\t**爆款标题公式：**\\n    24\\t- 数字+痛点+解决方案：如\"3个方法让你告别黑头！亲测有效\"\\n    25\\t- 疑问句+好奇心：如\"为什么你的护肤品不吸收？真相是...\"\\n    26\\t- 对比反差：如\"月薪3000和月薪3万的护肤区别\"\\n    27\\t- 情感共鸣：如\"25岁以后才明白的护肤真相\"\\n    28\\t\\n    29\\t**标题优化要点：**\\n    30\\t- 控制在20字以内\\n    31\\t- 使用emoji增加吸引力（最多2-3个）\\n    32\\t- 包含关键词便于搜索\\n    33\\t- 避免标题党，内容要真实\\n    34\\t\\n    35\\t### 2. 正文结构模板\\n    36\\t\\n    37\\t**种草类笔记结构：**\\n    38\\t```\\n    39\\t【开头Hook】用一句话抓住注意力\\n    40\\t【痛点描述】描述用户面临的问题\\n    41\\t【产品/方法介绍】详细介绍解决方案\\n    42\\t【使用体验】真实的感受和效果\\n    43\\t【总结推荐】给出明确的推荐理由\\n    44\\t【互动引导】引导用户评论互动\\n    45\\t```\\n    46\\t\\n    47\\t**教程类笔记结构：**\\n    48\\t```\\n    49\\t【效果展示】先展示最终效果\\n    50\\t【步骤分解】详细步骤+配图说明\\n    51\\t【注意事项】关键要点提醒\\n    52\\t【常见问题】解答可能的问题\\n    53\\t```\\n    54\\t\\n    55\\t### 3. 内容风格指南\\n    56\\t\\n    57\\t**语言风格：**\\n    58\\t- 亲切自然，像朋友聊天\\n    59\\t- 使用\"姐妹们\"\"宝子们\"等亲切称呼\\n    60\\t- 适当使用网络流行语\\n    61\\t- 避免过于正式或营销腔\\n    62\\t\\n    63\\t**排版技巧：**\\n    64\\t- 分段清晰，每段2-3句话\\n    65\\t- 使用emoji分隔内容\\n    66\\t- 重点内容加粗或用emoji标注\\n    67\\t- 适当使用分割线\\n    68\\t\\n    69\\t### 4. 热门话题标签\\n    70\\t\\n    71\\t**常用话题标签：**\\n    72\\t- 美妆护肤：#护肤心得 #美妆分享 #好物推荐\\n    73\\t- 穿搭时尚：#穿搭分享 #时尚穿搭 #OOTD\\n    74\\t- 美食探店：#美食分享 #探店 #美食日常\\n    75\\t- 生活方式：#生活分享 #日常记录 #好物分享\\n    76\\t\\n    77\\t**标签使用规则：**\\n    78\\t- 每篇笔记3-5个话题标签\\n    79\\t- 选择与内容高度相关的标签\\n    80\\t- 优先使用热门标签\\n    81\\t- 可创建个人专属标签\\n    82\\t\\n    83\\t### 5. 互动技巧\\n    84\\t\\n    85\\t**引导评论的话术：**\\n    86\\t- \"姐妹们觉得怎么样？评论区聊聊\"\\n    87\\t- \"你们有用过这个吗？效果如何？\"\\n    88\\t- \"还有什么想了解的，评论区告诉我\"\\n    89\\t- \"点赞收藏不迷路哦~\"\\n    90\\t\\n    91\\t## 使用示例\\n    92\\t\\n    93\\t**示例1：护肤品种草**\\n    94\\t用户输入：帮我写一个关于精华液的小红书文案\\n    95\\t\\n    96\\t输出：\\n    97\\t```\\n    98\\t标题：用了这款精华28天，我的皮肤真的变了！✨\\n    99\\t\\n   100\\t姐妹们！今天要分享一个让我皮肤逆袭的秘密武器！', name='read_file', id='5e1b25ea-d3a0-41eb-9267-c5a8147e1681', tool_call_id='call_fa0b34dc339a4f9d997c20')]}}", "module": "chat_service", "function": "process_message", "line": 144}
{"timestamp": "2026-02-26 18:50:42,127", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] source=tools, update keys=dict_keys(['messages'])", "module": "chat_service", "function": "process_message", "line": 146}
{"timestamp": "2026-02-26 18:50:42,127", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] formatted_list=[{'type': 'tool_result', 'data': {'name': 'read_file', 'content': '     1\\t---\\n     2\\tname: xhs-copywriter\\n     3\\tdescription: 小红书平台文案创作专家，帮助用户创作吸引眼球的小红书笔记、种草文案、产品推荐等内容。适用于小红书营销、内容创作、品牌推广等场景。\\n     4\\tlicense: MIT\\n     5\\tcompatibility: 无特殊依赖\\n     6\\tmetadata:\\n     7\\t  author: dragonai\\n     8\\t  version: \"1.0\"\\n     9\\t  platform: xiaohongshu\\n    10\\tallowed-tools: web_search\\n    11\\t---\\n    12\\t\\n    13\\t# 小红书文案生成助手\\n    14\\t\\n    15\\t## 概述\\n    16\\t\\n    17\\t这是一个专门为小红书平台设计的内容创作技能，帮助用户创作高质量、高互动的小红书笔记。掌握小红书平台的内容特点、用户偏好和爆款文案技巧。\\n    18\\t\\n    19\\t## 核心能力\\n    20\\t\\n    21\\t### 1. 标题创作技巧\\n    22\\t\\n    23\\t**爆款标题公式：**\\n    24\\t- 数字+痛点+解决方案：如\"3个方法让你告别黑头！亲测有效\"\\n    25\\t- 疑问句+好奇心：如\"为什么你的护肤品不吸收？真相是...\"\\n    26\\t- 对比反差：如\"月薪3000和月薪3万的护肤区别\"\\n    27\\t- 情感共鸣：如\"25岁以后才明白的护肤真相\"\\n    28\\t\\n    29\\t**标题优化要点：**\\n    30\\t- 控制在20字以内\\n    31\\t- 使用emoji增加吸引力（最多2-3个）\\n    32\\t- 包含关键词便于搜索\\n    33\\t- 避免标题党，内容要真实\\n    34\\t\\n    35\\t### 2. 正文结构模板\\n    36\\t\\n    37\\t**种草类笔记结构：**\\n    38\\t```\\n    39\\t【开头Hook】用一句话抓住注意力\\n    40\\t【痛点描述】描述用户面临的问题\\n    41\\t【产品/方法介绍】详细介绍解决方案\\n    42\\t【使用体验】真实的感受和效果\\n    43\\t【总结推荐】给出明确的推荐理由\\n    44\\t【互动引导】引导用户评论互动\\n    45\\t```\\n    46\\t\\n    47\\t**教程类笔记结构：**\\n    48\\t```\\n    49\\t【效果展示】先展示最终效果\\n    50\\t【步骤分解】详细步骤+配图说明\\n    51\\t【注意事项】关键要点提醒\\n    52\\t【常见问题】解答可能的问题\\n    53\\t```\\n    54\\t\\n    55\\t### 3. 内容风格指南\\n    56\\t\\n    57\\t**语言风格：**\\n    58\\t- 亲切自然，像朋友聊天\\n    59\\t- 使用\"姐妹们\"\"宝子们\"等亲切称呼\\n    60\\t- 适当使用网络流行语\\n    61\\t- 避免过于正式或营销腔\\n    62\\t\\n    63\\t**排版技巧：**\\n    64\\t- 分段清晰，每段2-3句话\\n    65\\t- 使用emoji分隔内容\\n    66\\t- 重点内容加粗或用emoji标注\\n    67\\t- 适当使用分割线\\n    68\\t\\n    69\\t### 4. 热门话题标签\\n    70\\t\\n    71\\t**常用话题标签：**\\n    72\\t- 美妆护肤：#护肤心得 #美妆分享 #好物推荐\\n    73\\t- 穿搭时尚：#穿搭分享 #时尚穿搭 #OOTD\\n    74\\t- 美食探店：#美食分享 #探店 #美食日常\\n    75\\t- 生活方式：#生活分享 #日常记录 #好物分享\\n    76\\t\\n    77\\t**标签使用规则：**\\n    78\\t- 每篇笔记3-5个话题标签\\n    79\\t- 选择与内容高度相关的标签\\n    80\\t- 优先使用热门标签\\n    81\\t- 可创建个人专属标签\\n    82\\t\\n    83\\t### 5. 互动技巧\\n    84\\t\\n    85\\t**引导评论的话术：**\\n    86\\t- \"姐妹们觉得怎么样？评论区聊聊\"\\n    87\\t- \"你们有用过这个吗？效果如何？\"\\n    88\\t- \"还有什么想了解的，评论区告诉我\"\\n    89\\t- \"点赞收藏不迷路哦~\"\\n    90\\t\\n    91\\t## 使用示例\\n    92\\t\\n    93\\t**示例1：护肤品种草**\\n    94\\t用户输入：帮我写一个关于精华液的小红书文案\\n    95\\t\\n    96\\t输出：\\n    97\\t```\\n    98\\t标题：用了这款精华28天，我的皮肤真的变了！✨\\n    99\\t\\n   100\\t姐妹们！今天要分享一个让我皮肤逆袭的秘密武器！'}}]", "module": "chat_service", "function": "process_message", "line": 149}
{"timestamp": "2026-02-26 18:50:42,128", "level": "INFO", "logger": "app.agents.debug_middleware", "message": "[DEBUG-MIDDLEWARE] System prompt (3109 chars):\n你是一个强大的AI助手，能够帮助用户处理各种任务。\n\n你可以使用多种工具来帮助用户，工具的功能说明已内置在系统中。\n\n**工具调用重要规则**：\n- 如果调用工具缺少必填参数，不要调用工具，应该先询问用户提供缺失的信息\n- 根据用户需求选择最合适的工具，避免不必要的工具调用\n\n**工具结果输出规则（非常重要）**：\n- 当工具返回结果包含代码、完整答案或详细内容时，你必须原样完整输出给用户\n- 禁止对工具返回的代码进行总结、省略、改写或简化\n- 禁止使用\"代码如下\"、\"这是代码\"等简短描述代替完整输出\n- 如果工具结果包含<INSTRUCTION>标签，必须严格遵循标签内的指令\n- 当看到<INSTRUCTION>标签时，只输出标签后的内容，不要输出标签本身，不要做任何修改\n\n**技能使用规则（非常重要）**：\n- 当用户请求匹配某个技能的描述时，你必须先调用 read_file 读取该技能的完整指令\n- 禁止在没有读取技能文件的情况下直接回答相关任务\n- 读取技能文件后，必须严格按照技能中的流程和模板执行任务\n\n请根据用户的需求，合理选择和使用工具。如果用户请求不明确，请主动询问以澄清需求。\n\n\n\n## Following Conventions\n\n- Read files before editing — understand existing content before making changes\n- Mimic existing style, naming conventions, and patterns\n\n## Tool Usage and File Reading\n\nFollow the tool docs for the available tools. In particular, for filesystem tools, use pagination (offset/limit) when reading large files.\n\n## Filesystem Tools `ls`, `read_file`, `write_file`, `edit_file`, `glob`, `grep`\n\nYou have access to a filesystem which you can interact with using these tools.\nAll file paths must start with a /.\n\n- ls: list files in a directory (requires absolute path)\n- read_file: read a file from the filesystem\n- write_file: write to a file in the filesystem\n- edit_file: edit a file in the filesystem\n- glob: find files matching a pattern (e.g., \"**/*.py\")\n- grep: search for text within files\n\n\n\n\n## Skills System\n\nYou have access to a skills library that provides specialized capabilities and domain knowledge.\n\n** Skills**: `/` (higher priority)\n\n**Available Skills:**\n\n- **xhs-copywriter**: 小红书平台文案创作专家，帮助用户创作吸引眼球的小红书笔记、种草文案、产品推荐等内容。适用于小红书营销、内容创作、品牌推广等场景。 (License: MIT, Compatibility: 无特殊依赖)\n  -> Allowed tools: web_search\n  -> Read `/xhs-copywriter/SKILL.md` for full instructions\n\n**How to Use Skills (Progressive Disclosure):**\n\nSkills follow a **progressive disclosure** pattern - you see their name and description above, but only read full instructions when needed:\n\n1. **Recognize when a skill applies**: Check if the user's task matches a skill's description\n2. **Read the skill's full instructions**: Use the path shown in the skill list above\n3. **Follow the skill's instructions**: SKILL.md contains step-by-step workflows, best practices, and examples\n4. **Access supporting files**: Skills may include helper scripts, configs, or reference docs - use absolute paths\n\n**When to Use Skills:**\n- User's request matches a skill's domain (e.g., \"research X\" -> web-research skill)\n- You need specialized knowledge or structured workflows\n- A skill provides proven patterns for complex tasks\n\n**Executing Skill Scripts:**\nSkills may contain Python scripts or other executable files. Always use absolute paths from the skill list.\n\n**Example Workflow:**\n\nUser: \"Can you research the latest developments in quantum computing?\"\n\n1. Check available skills -> See \"web-research\" skill with its path\n2. Read the skill using the path shown\n3. Follow the skill's research workflow (search -> organize -> synthesize)\n4. Use any helper scripts with absolute paths\n\n... (truncated, total 3109 chars)", "module": "debug_middleware", "function": "_log_system_prompt", "line": 78}
{"timestamp": "2026-02-26 18:50:42,128", "level": "INFO", "logger": "app.agents.debug_middleware", "message": "[DEBUG-MIDDLEWARE] Found Skills section at line 48", "module": "debug_middleware", "function": "_log_skills_info", "line": 92}
{"timestamp": "2026-02-26 18:50:42,129", "level": "INFO", "logger": "app.agents.debug_middleware", "message": "[DEBUG-MIDDLEWARE] Found Skills section at line 54", "module": "debug_middleware", "function": "_log_skills_info", "line": 92}
{"timestamp": "2026-02-26 18:50:42,129", "level": "INFO", "logger": "app.agents.debug_middleware", "message": "[DEBUG-MIDDLEWARE] Skills in prompt: ['xhs-copywriter']", "module": "debug_middleware", "function": "_log_skills_info", "line": 99}
{"timestamp": "2026-02-26 18:50:47,337", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 16: 1 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:47,368", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 17: 2 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:47,827", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 18: 9 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:47,845", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 19: 3 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:49,379", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 20: 9 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:49,401", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 21: 16 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:49,693", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 22: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:49,712", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 23: 10 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:49,728", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 24: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:49,744", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 25: 9 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:49,759", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 26: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:49,774", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 27: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:49,789", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 28: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:49,805", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 29: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:50,841", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 30: 12 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:50,863", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 31: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:50,878", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 32: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:50,895", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 33: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:50,909", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 34: 9 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:50,926", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 35: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:50,940", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 36: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:50,956", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 37: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:50,972", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 38: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:50,987", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 39: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:51,003", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 40: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:51,018", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 41: 9 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:51,034", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 42: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:51,049", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 43: 12 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:51,065", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 44: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:51,080", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 45: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:51,096", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 46: 10 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:51,111", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 47: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:51,126", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 48: 10 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:51,142", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 49: 10 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:51,157", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 50: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:51,233", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 51: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:51,251", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 52: 9 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:51,266", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 53: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:51,282", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 54: 11 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:51,692", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 55: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:51,717", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 56: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:51,732", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 57: 9 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:51,747", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 58: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:52,165", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 59: 10 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:52,176", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 60: 11 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:52,191", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 61: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:52,208", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 62: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:52,223", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 63: 11 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:52,237", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 64: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:52,364", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 65: 10 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:53,376", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 66: 14 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:53,388", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 67: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:53,413", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 68: 9 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:53,428", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 69: 9 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:53,443", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 70: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:53,459", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 71: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:53,474", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 72: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:53,489", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 73: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:53,504", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 74: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:53,520", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 75: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:53,535", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 76: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:54,867", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 77: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:54,879", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 78: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:54,894", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 79: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:54,910", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 80: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:54,925", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 81: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:54,940", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 82: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:54,955", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 83: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:54,970", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 84: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:54,985", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 85: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:55,002", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 86: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:55,017", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 87: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:55,032", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 88: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:55,048", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 89: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:55,063", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 90: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:55,078", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 91: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:55,458", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 92: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:56,220", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 93: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:56,241", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 94: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:56,261", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 95: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:56,276", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 96: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:56,292", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 97: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:56,307", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 98: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:56,322", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 99: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:56,337", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 100: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:56,354", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 101: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:56,369", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 102: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:56,384", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 103: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:56,400", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 104: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:56,415", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 105: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:56,784", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 106: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:56,801", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 107: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:56,816", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 108: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:56,832", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 109: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:57,101", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 110: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:57,127", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 111: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:57,142", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 112: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:58,114", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 113: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:58,135", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 114: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:58,150", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 115: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:58,255", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 116: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:58,274", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 117: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:58,289", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 118: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:58,304", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 119: 9 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:58,320", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 120: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:58,335", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 121: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:58,754", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 122: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:58,772", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 123: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:58,787", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 124: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:58,803", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 125: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:58,818", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 126: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:58,833", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 127: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:58,848", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 128: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:58,863", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 129: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:58,982", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 130: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:59,003", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 131: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:59,208", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 132: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:59,222", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 133: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:59,237", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 134: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:50:59,540", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 135: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:51:00,026", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 136: 10 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:51:00,045", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 137: 8 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:51:00,060", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 138: 9 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:51:00,075", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 139: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:51:00,091", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 140: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:51:00,106", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 141: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:51:00,207", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 142: 7 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:51:00,229", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 143: 9 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:51:00,246", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 144: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:51:00,261", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 145: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:51:00,502", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 146: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 18:51:00,535", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] updates data: {'model': {'messages': [AIMessage(content='<INSTRUCTION>根据小红书文案创作专家（xhs-copywriter）的技能说明，我将为你创作一篇符合小红书平台调性的美妆文案。我会严格遵循其核心能力要求：使用爆款标题公式、采用种草类笔记结构、保持亲切自然的语言风格、合理运用emoji和排版技巧，并添加相关话题标签。\\n\\n由于用户只提到“美妆”这个宽泛主题，我将创作一篇通用但高吸引力的精华液种草文案，这是美妆领域最热门的产品之一，能覆盖广泛的用户需求。文案将包含：\\n- 一个20字以内、带emoji的爆款标题\\n- 【开头Hook】用强烈情感吸引注意\\n- 【痛点描述】精准戳中用户困扰\\n- 【产品/方法介绍】简洁有力地呈现解决方案\\n- 【使用体验】真实、细节化的感受描述\\n- 【总结推荐】明确、有说服力的推荐理由\\n- 【互动引导】鼓励用户评论互动\\n- 3-5个高度相关的热门话题标签\\n\\n现在，我将输出完整的文案：</INSTRUCTION>标题：用了这款精华28天，我的皮肤真的变了！✨\\n\\n姐妹们！！谁懂啊！！😭  \\n以前每天早上照镜子都叹气…  \\n毛孔粗大+肤色暗沉+上妆卡粉三连击💥  \\n试过无数方法，效果都像隔靴搔痒…\\n\\n直到被闺蜜按头安利了这瓶「发光精华」🌟  \\n成分党必看：98%高纯度烟酰胺+双重玻尿酸+传明酸  \\n不是智商税！是实打实的实验室级配方🔬\\n\\n💡我的使用体验（超真实！）：\\n✅ 第1周：皮肤摸起来滑滑的，上妆再也不卡粉了！  \\n✅ 第2周：熬夜脸的黄气明显退散，同事问我是不是去做了光子嫩肤✨  \\n✅ 第4周：毛孔视觉上小了一圈！素颜出门都有底气了～  \\n（附对比图👉左：用前暗沉粗糙｜右：用后透亮细腻）\\n\\n⚠️划重点：  \\n▫️早晚各1泵，轻轻按摩至吸收  \\n▫️坚持用！不要三天打鱼两天晒网  \\n▫️敏感肌建议先耳后测试哦～\\n\\n真心话：它可能不是最便宜的，但绝对是我回购第5瓶的宝藏！💎  \\n护肤不是买买买，而是找到真正适合自己的那一个❤️\\n\\n👇评论区告诉我：  \\n你最近挖到什么护肤宝藏？或者有什么皮肤困扰？  \\n我来帮你分析解答！💬  \\n（点赞+收藏，下次找不迷路哦～）\\n\\n#护肤心得 #精华液推荐 #好物分享 #油皮护肤 #变美日记', additional_kwargs={}, response_metadata={'finish_reason': 'stop', 'request_id': '2322f617-687b-4448-b936-a84c522b8f2f', 'token_usage': {'input_tokens': 5442, 'output_tokens': 583, 'total_tokens': 6025, 'prompt_tokens_details': {'cached_tokens': 0}}}, id='lc_run--019c9992-8463-77b1-8f70-8a44c9e9b801', tool_calls=[], invalid_tool_calls=[])]}}", "module": "chat_service", "function": "process_message", "line": 144}
{"timestamp": "2026-02-26 18:51:00,535", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] source=model, update keys=dict_keys(['messages'])", "module": "chat_service", "function": "process_message", "line": 146}
{"timestamp": "2026-02-26 18:51:00,535", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] formatted_list=[{'type': 'content', 'data': {'content': '<INSTRUCTION>根据小红书文案创作专家（xhs-copywriter）的技能说明，我将为你创作一篇符合小红书平台调性的美妆文案。我会严格遵循其核心能力要求：使用爆款标题公式、采用种草类笔记结构、保持亲切自然的语言风格、合理运用emoji和排版技巧，并添加相关话题标签。\\n\\n由于用户只提到“美妆”这个宽泛主题，我将创作一篇通用但高吸引力的精华液种草文案，这是美妆领域最热门的产品之一，能覆盖广泛的用户需求。文案将包含：\\n- 一个20字以内、带emoji的爆款标题\\n- 【开头Hook】用强烈情感吸引注意\\n- 【痛点描述】精准戳中用户困扰\\n- 【产品/方法介绍】简洁有力地呈现解决方案\\n- 【使用体验】真实、细节化的感受描述\\n- 【总结推荐】明确、有说服力的推荐理由\\n- 【互动引导】鼓励用户评论互动\\n- 3-5个高度相关的热门话题标签\\n\\n现在，我将输出完整的文案：</INSTRUCTION>标题：用了这款精华28天，我的皮肤真的变了！✨\\n\\n姐妹们！！谁懂啊！！😭  \\n以前每天早上照镜子都叹气…  \\n毛孔粗大+肤色暗沉+上妆卡粉三连击💥  \\n试过无数方法，效果都像隔靴搔痒…\\n\\n直到被闺蜜按头安利了这瓶「发光精华」🌟  \\n成分党必看：98%高纯度烟酰胺+双重玻尿酸+传明酸  \\n不是智商税！是实打实的实验室级配方🔬\\n\\n💡我的使用体验（超真实！）：\\n✅ 第1周：皮肤摸起来滑滑的，上妆再也不卡粉了！  \\n✅ 第2周：熬夜脸的黄气明显退散，同事问我是不是去做了光子嫩肤✨  \\n✅ 第4周：毛孔视觉上小了一圈！素颜出门都有底气了～  \\n（附对比图👉左：用前暗沉粗糙｜右：用后透亮细腻）\\n\\n⚠️划重点：  \\n▫️早晚各1泵，轻轻按摩至吸收  \\n▫️坚持用！不要三天打鱼两天晒网  \\n▫️敏感肌建议先耳后测试哦～\\n\\n真心话：它可能不是最便宜的，但绝对是我回购第5瓶的宝藏！💎  \\n护肤不是买买买，而是找到真正适合自己的那一个❤️\\n\\n👇评论区告诉我：  \\n你最近挖到什么护肤宝藏？或者有什么皮肤困扰？  \\n我来帮你分析解答！💬  \\n（点赞+收藏，下次找不迷路哦～）\\n\\n#护肤心得 #精华液推荐 #好物分享 #油皮护肤 #变美日记'}}]", "module": "chat_service", "function": "process_message", "line": 149}
{"timestamp": "2026-02-26 18:51:00,537", "level": "INFO", "logger": "app.services.chat_service", "message": "[CHAT] Agent流式执行完成", "module": "chat_service", "function": "process_message", "line": 159}
{"timestamp": "2026-02-26 18:51:00,537", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Stream complete, total chunks: 146, total chars: 1013", "module": "chat", "function": "generate", "line": 127}
{"timestamp": "2026-02-26 18:51:00,537", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Full response content:\n好的！我将为你创作一篇小红书风格的美妆文案。首先，我需要读取小红书文案创作专家（xhs-copywriter）的完整技能说明，以确保严格遵循其专业流程和模板。\n\n\n[使用工具: read_file]\n<INSTRUCTION>根据小红书文案创作专家（xhs-copywriter）的技能说明，我将为你创作一篇符合小红书平台调性的美妆文案。我会严格遵循其核心能力要求：使用爆款标题公式、采用种草类笔记结构、保持亲切自然的语言风格、合理运用emoji和排版技巧，并添加相关话题标签。\n\n由于用户只提到“美妆”这个宽泛主题，我将创作一篇通用但高吸引力的精华液种草文案，这是美妆领域最热门的产品之一，能覆盖广泛的用户需求。文案将包含：\n- 一个20字以内、带emoji的爆款标题\n- 【开头Hook】用强烈情感吸引注意\n- 【痛点描述】精准戳中用户困扰\n- 【产品/方法介绍】简洁有力地呈现解决方案\n- 【使用体验】真实、细节化的感受描述\n- 【总结推荐】明确、有说服力的推荐理由\n- 【互动引导】鼓励用户评论互动\n- 3-5个高度相关的热门话题标签\n\n现在，我将输出完整的文案：</INSTRUCTION>标题：用了这款精华28天，我的皮肤真的变了！✨\n\n姐妹们！！谁懂啊！！😭  \n以前每天早上照镜子都叹气…  \n毛孔粗大+肤色暗沉+上妆卡粉三连击💥  \n试过无数方法，效果都像隔靴搔痒…\n\n直到被闺蜜按头安利了这瓶「发光精华」🌟  \n成分党必看：98%高纯度烟酰胺+双重玻尿酸+传明酸  \n不是智商税！是实打实的实验室级配方🔬\n\n💡我的使用体验（超真实！）：\n✅ 第1周：皮肤摸起来滑滑的，上妆再也不卡粉了！  \n✅ 第2周：熬夜脸的黄气明显退散，同事问我是不是去做了光子嫩肤✨  \n✅ 第4周：毛孔视觉上小了一圈！素颜出门都有底气了～  \n（附对比图👉左：用前暗沉粗糙｜右：用后透亮细腻）\n\n⚠️划重点：  \n▫️早晚各1泵，轻轻按摩至吸收  \n▫️坚持用！不要三天打鱼两天晒网  \n▫️敏感肌建议先耳后测试哦～\n\n真心话：它可能不是最便宜的，但绝对是我回购第5瓶的宝藏！💎  \n护肤不是买买买，而是找到真正适合自己的那一个❤️\n\n👇评论区告诉我：  \n你最近挖到什么护肤宝藏？或者有什么皮肤困扰？  \n我来帮你分析解答！💬  \n（点赞+收藏，下次找不迷路哦～）\n\n#护肤心得 #精华液推荐 #好物分享 #油皮护肤 #变美日记", "module": "chat", "function": "generate", "line": 128}
{"timestamp": "2026-02-26 18:51:00,537", "level": "INFO", "logger": "app.api.v1.chat", "message": "[SSE] Thinking content length: 0", "module": "chat", "function": "generate", "line": 129}
{"timestamp": "2026-02-26 18:51:00,538", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:51:00,538", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 99.56s ago] (228, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:51:00,539", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "INSERT INTO messages (conversation_id, role, content, metadata) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::JSON) RETURNING messages.id, messages.created_at", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:51:00,539", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 96.68s ago] (228, 'assistant', '好的！我将为你创作一篇小红书风格的美妆文案。首先，我需要读取小红书文案创作专家（xhs-copywriter）的完整技能说明，以确保严格遵循其专业流程和模板。\\n\\n\\n[使用工具: read_file]\\n<INSTRUCTION>根据小红书文案创作专家（xhs-copywriter）的技能说明 ... (761 characters truncated) ... 但绝对是我回购第5瓶的宝藏！💎  \\n护肤不是买买买，而是找到真正适合自己的那一个❤️\\n\\n👇评论区告诉我：  \\n你最近挖到什么护肤宝藏？或者有什么皮肤困扰？  \\n我来帮你分析解答！💬  \\n（点赞+收藏，下次找不迷路哦～）\\n\\n#护肤心得 #精华液推荐 #好物分享 #油皮护肤 #变美日记', '{\"model\": \"fast\"}')", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:51:00,540", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.metadata, messages.created_at \nFROM messages \nWHERE messages.id = $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:51:00,541", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 96.68s ago] (622,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:51:00,541", "level": "INFO", "logger": "app.services.chat_service", "message": "[DB] Saved message id=622, metadata_={'model': 'fast'}", "module": "chat_service", "function": "create_message", "line": 76}
{"timestamp": "2026-02-26 18:51:00,541", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.metadata, messages.created_at \nFROM messages \nWHERE messages.id = $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:51:00,542", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 96.68s ago] (622,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 18:51:00,542", "level": "INFO", "logger": "app.services.chat_service", "message": "[DB] Verify saved: id=622, metadata_={'model': 'fast'}", "module": "chat_service", "function": "create_message", "line": 83}
{"timestamp": "2026-02-26 18:51:00,542", "level": "INFO", "logger": "app.services.chat_service", "message": "[CACHE DELETE] 已删除消息缓存: conversation_id=228, user_id=1, keys=1", "module": "chat_service", "function": "_invalidate_messages_cache", "line": 546}
{"timestamp": "2026-02-26 18:51:00,543", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 19:18:14,083", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 连接已关闭", "module": "agent_factory", "function": "close_checkpointer", "line": 90}
{"timestamp": "2026-02-26 19:18:14,099", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 19:18:14,100", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 118}
{"timestamp": "2026-02-26 19:18:16,943", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 104}
{"timestamp": "2026-02-26 19:18:16,988", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 初始化成功", "module": "agent_factory", "function": "init_checkpointer", "line": 72}
{"timestamp": "2026-02-26 19:18:16,988", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 107}
{"timestamp": "2026-02-26 19:18:16,988", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 109}
{"timestamp": "2026-02-26 19:18:16,988", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 开始缓存预热 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 159}
{"timestamp": "2026-02-26 19:18:16,989", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热会话列表缓存，限制 100 条", "module": "cache_warmup", "function": "warmup_conversations", "line": 26}
{"timestamp": "2026-02-26 19:18:17,044", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,044", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,045", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,045", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,046", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,046", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,046", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 19:18:17,051", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \n LIMIT $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,051", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00025s] (50,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,055", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversations:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,056", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.user_id = $1::INTEGER ORDER BY conversations.is_pinned DESC, conversations.updated_at DESC \n LIMIT $2::INTEGER OFFSET $3::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,056", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00033s] (1, 100, 0)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,059", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversations:user:1:skip:0:limit:100: [{'id': 228, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-26T10:49:20.944717+00:00', 'updated_at': '2026-02-26T10:49:20.944717+00:00'}, {'id': 227, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-26T10:33:04.895417+00:00', 'updated_at': '2026-02-26T10:33:04.895417+00:00'}, {'id': 226, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-26T10:10:40.442180+00:00', 'updated_at': '2026-02-26T10:10:40.442180+00:00'}, {'id': 225, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-26T10:08:58.236057+00:00', 'updated_at': '2026-02-26T10:08:58.236057+00:00'}, {'id': 224, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-26T10:07:48.664417+00:00', 'updated_at': '2026-02-26T10:07:48.664417+00:00'}, {'id': 223, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-26T10:06:02.054684+00:00', 'updated_at': '2026-02-26T10:06:02.054684+00:00'}, {'id': 222, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-26T09:46:52.728826+00:00', 'updated_at': '2026-02-26T09:46:52.728826+00:00'}, {'id': 221, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-26T09:42:18.712045+00:00', 'updated_at': '2026-02-26T09:42:18.712045+00:00'}, {'id': 220, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T20:05:52.426575+00:00', 'updated_at': '2026-02-25T20:05:52.426575+00:00'}, {'id': 219, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T18:35:35.586803+00:00', 'updated_at': '2026-02-25T18:35:35.586803+00:00'}, {'id': 218, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T18:35:17.658631+00:00', 'updated_at': '2026-02-25T18:35:17.658631+00:00'}, {'id': 217, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T18:27:50.787750+00:00', 'updated_at': '2026-02-25T18:27:50.787750+00:00'}, {'id': 216, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T18:18:58.723048+00:00', 'updated_at': '2026-02-25T18:18:58.723048+00:00'}, {'id': 215, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T18:05:04.122315+00:00', 'updated_at': '2026-02-25T18:05:04.122315+00:00'}, {'id': 214, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:46:24.232806+00:00', 'updated_at': '2026-02-25T17:46:24.232806+00:00'}, {'id': 213, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:43:09.146742+00:00', 'updated_at': '2026-02-25T17:43:09.146742+00:00'}, {'id': 212, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:41:10.457397+00:00', 'updated_at': '2026-02-25T17:41:10.457397+00:00'}, {'id': 211, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:36:36.866901+00:00', 'updated_at': '2026-02-25T17:36:36.866901+00:00'}, {'id': 210, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:35:41.686230+00:00', 'updated_at': '2026-02-25T17:35:41.686230+00:00'}, {'id': 209, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:28:46.107951+00:00', 'updated_at': '2026-02-25T17:28:46.107951+00:00'}, {'id': 208, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:24:46.995898+00:00', 'updated_at': '2026-02-25T17:24:46.995898+00:00'}, {'id': 207, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:18:22.171051+00:00', 'updated_at': '2026-02-25T17:18:22.171051+00:00'}, {'id': 206, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:15:32.934734+00:00', 'updated_at': '2026-02-25T17:15:32.934734+00:00'}, {'id': 205, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:12:01.339171+00:00', 'updated_at': '2026-02-25T17:12:01.339171+00:00'}, {'id': 204, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:05:57.701858+00:00', 'updated_at': '2026-02-25T17:05:57.701858+00:00'}, {'id': 203, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:00:11.461904+00:00', 'updated_at': '2026-02-25T17:00:11.461904+00:00'}, {'id': 202, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T16:55:04.663265+00:00', 'updated_at': '2026-02-25T16:55:04.663265+00:00'}, {'id': 201, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T16:51:00.791887+00:00', 'updated_at': '2026-02-25T16:51:00.791887+00:00'}, {'id': 200, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T16:50:44.425883+00:00', 'updated_at': '2026-02-25T16:50:44.425883+00:00'}, {'id': 199, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T16:45:32.330297+00:00', 'updated_at': '2026-02-25T16:45:32.330297+00:00'}, {'id': 198, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T16:45:18.281430+00:00', 'updated_at': '2026-02-25T16:45:18.281430+00:00'}, {'id': 197, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T16:20:51.014190+00:00', 'updated_at': '2026-02-25T16:20:51.014190+00:00'}, {'id': 196, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T15:44:33.502770+00:00', 'updated_at': '2026-02-25T15:44:33.502770+00:00'}, {'id': 195, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T15:38:11.237687+00:00', 'updated_at': '2026-02-25T15:38:11.237687+00:00'}, {'id': 194, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T15:37:53.427931+00:00', 'updated_at': '2026-02-25T15:37:53.427931+00:00'}, {'id': 193, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T15:36:19.760334+00:00', 'updated_at': '2026-02-25T15:36:19.760334+00:00'}, {'id': 192, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T15:35:18.417589+00:00', 'updated_at': '2026-02-25T15:35:18.417589+00:00'}, {'id': 191, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T15:03:14.211782+00:00', 'updated_at': '2026-02-25T15:03:14.211782+00:00'}, {'id': 190, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T14:36:42.154696+00:00', 'updated_at': '2026-02-25T14:36:42.154696+00:00'}, {'id': 189, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T14:31:01.510866+00:00', 'updated_at': '2026-02-25T14:31:01.510866+00:00'}, {'id': 188, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T14:29:53.274194+00:00', 'updated_at': '2026-02-25T14:29:53.274194+00:00'}, {'id': 187, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T13:12:52.546721+00:00', 'updated_at': '2026-02-25T13:12:52.546721+00:00'}, {'id': 186, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T13:10:59.604351+00:00', 'updated_at': '2026-02-25T13:10:59.604351+00:00'}, {'id': 185, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T13:10:27.514931+00:00', 'updated_at': '2026-02-25T13:10:27.514931+00:00'}, {'id': 184, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T13:08:41.882447+00:00', 'updated_at': '2026-02-25T13:08:41.882447+00:00'}, {'id': 183, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T12:27:32.234206+00:00', 'updated_at': '2026-02-25T12:27:32.234206+00:00'}, {'id': 182, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T12:17:23.497578+00:00', 'updated_at': '2026-02-25T12:17:23.497578+00:00'}, {'id': 181, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T12:15:04.054903+00:00', 'updated_at': '2026-02-25T12:15:04.054903+00:00'}, {'id': 180, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T12:11:41.757639+00:00', 'updated_at': '2026-02-25T12:11:41.757639+00:00'}, {'id': 179, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T12:09:15.894955+00:00', 'updated_at': '2026-02-25T12:09:15.894955+00:00'}, {'id': 178, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T12:01:08.835467+00:00', 'updated_at': '2026-02-25T12:01:08.835467+00:00'}, {'id': 177, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T11:56:14.684224+00:00', 'updated_at': '2026-02-25T11:56:14.684224+00:00'}, {'id': 176, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T10:52:03.862026+00:00', 'updated_at': '2026-02-25T10:52:03.862026+00:00'}, {'id': 175, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T10:50:02.518522+00:00', 'updated_at': '2026-02-25T10:50:02.518522+00:00'}, {'id': 174, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T10:42:55.821262+00:00', 'updated_at': '2026-02-25T10:42:55.821262+00:00'}, {'id': 173, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T10:38:49.101647+00:00', 'updated_at': '2026-02-25T10:38:49.101647+00:00'}, {'id': 172, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T10:38:09.353141+00:00', 'updated_at': '2026-02-25T10:38:09.353141+00:00'}, {'id': 171, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T09:21:48.948162+00:00', 'updated_at': '2026-02-25T09:21:48.948162+00:00'}, {'id': 170, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T09:17:55.698363+00:00', 'updated_at': '2026-02-25T09:17:55.698363+00:00'}, {'id': 169, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T09:17:18.775757+00:00', 'updated_at': '2026-02-25T09:17:18.775757+00:00'}, {'id': 168, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T09:16:23.024303+00:00', 'updated_at': '2026-02-25T09:16:23.024303+00:00'}, {'id': 167, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T09:12:41.857175+00:00', 'updated_at': '2026-02-25T09:12:41.857175+00:00'}, {'id': 166, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T08:36:41.383650+00:00', 'updated_at': '2026-02-25T08:36:41.383650+00:00'}, {'id': 165, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T08:34:32.543620+00:00', 'updated_at': '2026-02-25T08:34:32.543620+00:00'}, {'id': 164, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T08:32:11.855646+00:00', 'updated_at': '2026-02-25T08:32:11.855646+00:00'}, {'id': 163, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T08:27:25.972885+00:00', 'updated_at': '2026-02-25T08:27:25.972885+00:00'}, {'id': 162, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T16:10:55.313974+00:00', 'updated_at': '2026-02-24T16:10:55.313974+00:00'}, {'id': 161, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T16:09:08.553629+00:00', 'updated_at': '2026-02-24T16:09:08.553629+00:00'}, {'id': 160, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T16:06:15.394421+00:00', 'updated_at': '2026-02-24T16:06:15.394421+00:00'}, {'id': 159, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T16:05:31.589282+00:00', 'updated_at': '2026-02-24T16:05:31.589282+00:00'}, {'id': 158, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T15:55:30.195931+00:00', 'updated_at': '2026-02-24T15:55:30.195931+00:00'}, {'id': 157, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T15:42:11.582736+00:00', 'updated_at': '2026-02-24T15:42:11.582736+00:00'}, {'id': 156, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T13:54:53.908013+00:00', 'updated_at': '2026-02-24T13:54:53.908013+00:00'}, {'id': 155, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T13:21:34.170984+00:00', 'updated_at': '2026-02-24T13:21:34.170984+00:00'}, {'id': 153, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T13:18:32.014035+00:00', 'updated_at': '2026-02-24T13:18:32.014035+00:00'}, {'id': 152, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T13:15:16.961323+00:00', 'updated_at': '2026-02-24T13:15:16.961323+00:00'}, {'id': 151, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T12:43:20.889833+00:00', 'updated_at': '2026-02-24T12:43:20.889833+00:00'}, {'id': 150, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T12:42:56.016952+00:00', 'updated_at': '2026-02-24T12:42:56.016952+00:00'}, {'id': 149, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:55:56.042369+00:00', 'updated_at': '2026-02-24T10:55:56.042369+00:00'}, {'id': 148, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:55:41.488047+00:00', 'updated_at': '2026-02-24T10:55:41.488047+00:00'}, {'id': 147, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:49:14.817320+00:00', 'updated_at': '2026-02-24T10:49:14.817320+00:00'}, {'id': 146, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:48:57.350358+00:00', 'updated_at': '2026-02-24T10:48:57.350358+00:00'}, {'id': 145, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:46:32.242848+00:00', 'updated_at': '2026-02-24T10:46:32.242848+00:00'}, {'id': 144, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:44:06.957698+00:00', 'updated_at': '2026-02-24T10:44:06.957698+00:00'}, {'id': 143, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:43:36.650302+00:00', 'updated_at': '2026-02-24T10:43:36.650302+00:00'}, {'id': 142, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:41:27.108791+00:00', 'updated_at': '2026-02-24T10:41:27.108791+00:00'}, {'id': 141, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:41:00.283484+00:00', 'updated_at': '2026-02-24T10:41:00.283484+00:00'}, {'id': 140, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:39:47.897467+00:00', 'updated_at': '2026-02-24T10:39:47.897467+00:00'}, {'id': 139, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:34:05.150318+00:00', 'updated_at': '2026-02-24T10:34:05.150318+00:00'}, {'id': 138, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:29:46.478868+00:00', 'updated_at': '2026-02-24T10:29:46.478868+00:00'}, {'id': 137, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:28:45.655878+00:00', 'updated_at': '2026-02-24T10:28:45.655878+00:00'}, {'id': 136, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T10:05:25.775341+00:00', 'updated_at': '2026-02-24T10:05:25.775341+00:00'}, {'id': 135, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T09:56:25.866934+00:00', 'updated_at': '2026-02-24T09:56:25.866934+00:00'}, {'id': 134, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T09:53:06.440754+00:00', 'updated_at': '2026-02-24T09:53:06.440754+00:00'}, {'id': 133, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T09:51:21.444274+00:00', 'updated_at': '2026-02-24T09:51:21.444274+00:00'}, {'id': 132, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T09:39:42.439041+00:00', 'updated_at': '2026-02-24T09:39:42.439041+00:00'}, {'id': 131, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T09:38:48.866580+00:00', 'updated_at': '2026-02-24T09:38:48.866580+00:00'}, {'id': 130, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T09:28:16.002211+00:00', 'updated_at': '2026-02-24T09:28:16.002211+00:00'}, {'id': 129, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T09:27:49.270616+00:00', 'updated_at': '2026-02-24T09:27:49.270616+00:00'}, {'id': 128, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-24T09:26:50.501911+00:00', 'updated_at': '2026-02-24T09:26:50.501911+00:00'}]", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,060", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversations:user:1:skip:0:limit:100, TTL=3887s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,061", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 用户 1 的会话列表已预热", "module": "cache_warmup", "function": "warmup_conversations", "line": 56}
{"timestamp": "2026-02-26 19:18:17,061", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 60}
{"timestamp": "2026-02-26 19:18:17,061", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 19:18:17,062", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热置顶会话详情缓存", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 65}
{"timestamp": "2026-02-26 19:18:17,062", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 19:18:17,063", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.is_pinned = true", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,063", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00027s] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,064", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 102}
{"timestamp": "2026-02-26 19:18:17,064", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 19:18:17,064", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热最近 24 小时活跃的会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 114}
{"timestamp": "2026-02-26 19:18:17,065", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 19:18:17,065", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.updated_at >= $1::TIMESTAMP WITH TIME ZONE \n LIMIT $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,065", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00023s] (datetime.datetime(2026, 2, 25, 11, 18, 17, 64941), 200)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,067", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:163:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,067", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,068", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00024s] (163, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,068", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:163:1: {'id': 163, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T08:27:25.972885+00:00', 'updated_at': '2026-02-25T08:27:25.972885+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,069", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:163:1, TTL=3837s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,069", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:164:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,069", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,069", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.00209s ago] (164, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,070", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:164:1: {'id': 164, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T08:32:11.855646+00:00', 'updated_at': '2026-02-25T08:32:11.855646+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,070", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:164:1, TTL=3877s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,071", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:165:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,071", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,071", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.003596s ago] (165, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,071", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:165:1: {'id': 165, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T08:34:32.543620+00:00', 'updated_at': '2026-02-25T08:34:32.543620+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,072", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:165:1, TTL=3712s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,072", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:166:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,073", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,073", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.005374s ago] (166, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,073", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:166:1: {'id': 166, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T08:36:41.383650+00:00', 'updated_at': '2026-02-25T08:36:41.383650+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,074", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:166:1, TTL=3841s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,074", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:167:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,074", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,074", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.00706s ago] (167, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,075", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:167:1: {'id': 167, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T09:12:41.857175+00:00', 'updated_at': '2026-02-25T09:12:41.857175+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,075", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:167:1, TTL=3845s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,076", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:168:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,076", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,076", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.008711s ago] (168, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,077", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:168:1: {'id': 168, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T09:16:23.024303+00:00', 'updated_at': '2026-02-25T09:16:23.024303+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,077", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:168:1, TTL=3858s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,077", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:169:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,078", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,078", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.01029s ago] (169, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,078", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:169:1: {'id': 169, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T09:17:18.775757+00:00', 'updated_at': '2026-02-25T09:17:18.775757+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,078", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:169:1, TTL=3656s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,079", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:170:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,079", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,079", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.01179s ago] (170, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,080", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:170:1: {'id': 170, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T09:17:55.698363+00:00', 'updated_at': '2026-02-25T09:17:55.698363+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,080", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:170:1, TTL=3693s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,080", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:171:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,081", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,081", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.0134s ago] (171, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,081", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:171:1: {'id': 171, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T09:21:48.948162+00:00', 'updated_at': '2026-02-25T09:21:48.948162+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,081", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:171:1, TTL=3819s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,082", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:172:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,082", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,082", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.01494s ago] (172, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,083", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:172:1: {'id': 172, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T10:38:09.353141+00:00', 'updated_at': '2026-02-25T10:38:09.353141+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,083", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:172:1, TTL=3772s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,083", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:173:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,084", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,084", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.01649s ago] (173, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,084", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:173:1: {'id': 173, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T10:38:49.101647+00:00', 'updated_at': '2026-02-25T10:38:49.101647+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,084", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:173:1, TTL=3601s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,085", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:174:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,085", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,085", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.01792s ago] (174, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,086", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:174:1: {'id': 174, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T10:42:55.821262+00:00', 'updated_at': '2026-02-25T10:42:55.821262+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,086", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:174:1, TTL=3749s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,086", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:175:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,087", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,087", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.01943s ago] (175, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,087", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:175:1: {'id': 175, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T10:50:02.518522+00:00', 'updated_at': '2026-02-25T10:50:02.518522+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,088", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:175:1, TTL=3620s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,088", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:176:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,088", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,089", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.02126s ago] (176, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,089", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:176:1: {'id': 176, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T10:52:03.862026+00:00', 'updated_at': '2026-02-25T10:52:03.862026+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,089", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:176:1, TTL=3687s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,090", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:177:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,090", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,090", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.02295s ago] (177, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,091", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:177:1: {'id': 177, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T11:56:14.684224+00:00', 'updated_at': '2026-02-25T11:56:14.684224+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,091", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:177:1, TTL=3730s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,092", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:178:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,092", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,092", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.02471s ago] (178, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,093", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:178:1: {'id': 178, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T12:01:08.835467+00:00', 'updated_at': '2026-02-25T12:01:08.835467+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,093", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:178:1, TTL=3656s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,093", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:179:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,094", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,094", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.02667s ago] (179, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,095", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:179:1: {'id': 179, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T12:09:15.894955+00:00', 'updated_at': '2026-02-25T12:09:15.894955+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,095", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:179:1, TTL=3678s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,095", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:180:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,095", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,096", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.02829s ago] (180, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,096", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:180:1: {'id': 180, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T12:11:41.757639+00:00', 'updated_at': '2026-02-25T12:11:41.757639+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,096", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:180:1, TTL=3878s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,097", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:181:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,097", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,097", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.02993s ago] (181, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,098", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:181:1: {'id': 181, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T12:15:04.054903+00:00', 'updated_at': '2026-02-25T12:15:04.054903+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,098", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:181:1, TTL=3826s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,099", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:182:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,099", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,099", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.0316s ago] (182, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,099", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:182:1: {'id': 182, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T12:17:23.497578+00:00', 'updated_at': '2026-02-25T12:17:23.497578+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,100", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:182:1, TTL=3899s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,100", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:183:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,100", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,101", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.03312s ago] (183, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,101", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:183:1: {'id': 183, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T12:27:32.234206+00:00', 'updated_at': '2026-02-25T12:27:32.234206+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,101", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:183:1, TTL=3658s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,102", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:184:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,102", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,102", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.03465s ago] (184, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,102", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:184:1: {'id': 184, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T13:08:41.882447+00:00', 'updated_at': '2026-02-25T13:08:41.882447+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,103", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:184:1, TTL=3760s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,103", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:185:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,103", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,104", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.03628s ago] (185, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,104", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:185:1: {'id': 185, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T13:10:27.514931+00:00', 'updated_at': '2026-02-25T13:10:27.514931+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,104", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:185:1, TTL=3797s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,105", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:186:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,105", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,105", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.03784s ago] (186, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,106", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:186:1: {'id': 186, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T13:10:59.604351+00:00', 'updated_at': '2026-02-25T13:10:59.604351+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,106", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:186:1, TTL=3725s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,106", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:187:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,107", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,107", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.03935s ago] (187, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,107", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:187:1: {'id': 187, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T13:12:52.546721+00:00', 'updated_at': '2026-02-25T13:12:52.546721+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,107", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:187:1, TTL=3729s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,108", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:188:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,108", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,108", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.04109s ago] (188, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,109", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:188:1: {'id': 188, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T14:29:53.274194+00:00', 'updated_at': '2026-02-25T14:29:53.274194+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,109", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:188:1, TTL=3884s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,110", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:189:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,110", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,110", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.04277s ago] (189, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,111", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:189:1: {'id': 189, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T14:31:01.510866+00:00', 'updated_at': '2026-02-25T14:31:01.510866+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,111", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:189:1, TTL=3791s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,111", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:190:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,111", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,112", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.04426s ago] (190, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,112", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:190:1: {'id': 190, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T14:36:42.154696+00:00', 'updated_at': '2026-02-25T14:36:42.154696+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,112", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:190:1, TTL=3893s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,113", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:191:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,113", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,113", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.04596s ago] (191, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,114", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:191:1: {'id': 191, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T15:03:14.211782+00:00', 'updated_at': '2026-02-25T15:03:14.211782+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,114", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:191:1, TTL=3708s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,114", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:192:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,115", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,115", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.0475s ago] (192, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,115", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:192:1: {'id': 192, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T15:35:18.417589+00:00', 'updated_at': '2026-02-25T15:35:18.417589+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,116", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:192:1, TTL=3704s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,116", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:193:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,116", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,117", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.04926s ago] (193, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,117", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:193:1: {'id': 193, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T15:36:19.760334+00:00', 'updated_at': '2026-02-25T15:36:19.760334+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,117", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:193:1, TTL=3797s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,118", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:194:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,118", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,118", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.0508s ago] (194, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,119", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:194:1: {'id': 194, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T15:37:53.427931+00:00', 'updated_at': '2026-02-25T15:37:53.427931+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,119", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:194:1, TTL=3678s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,119", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:195:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,120", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,120", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.05253s ago] (195, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,120", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:195:1: {'id': 195, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T15:38:11.237687+00:00', 'updated_at': '2026-02-25T15:38:11.237687+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,121", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:195:1, TTL=3635s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,121", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:196:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,121", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,122", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.05422s ago] (196, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,122", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:196:1: {'id': 196, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T15:44:33.502770+00:00', 'updated_at': '2026-02-25T15:44:33.502770+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,122", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:196:1, TTL=3625s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,123", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:197:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,123", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,123", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.05573s ago] (197, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,124", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:197:1: {'id': 197, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T16:20:51.014190+00:00', 'updated_at': '2026-02-25T16:20:51.014190+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,124", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:197:1, TTL=3866s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,124", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:198:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,124", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,125", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.05718s ago] (198, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,125", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:198:1: {'id': 198, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T16:45:18.281430+00:00', 'updated_at': '2026-02-25T16:45:18.281430+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,125", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:198:1, TTL=3894s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,126", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:199:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,126", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,126", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.0586s ago] (199, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,126", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:199:1: {'id': 199, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T16:45:32.330297+00:00', 'updated_at': '2026-02-25T16:45:32.330297+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,127", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:199:1, TTL=3727s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,127", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:200:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,127", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,127", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.06003s ago] (200, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,128", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:200:1: {'id': 200, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T16:50:44.425883+00:00', 'updated_at': '2026-02-25T16:50:44.425883+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,128", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:200:1, TTL=3821s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,129", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:201:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,129", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,129", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.06162s ago] (201, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,129", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:201:1: {'id': 201, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T16:51:00.791887+00:00', 'updated_at': '2026-02-25T16:51:00.791887+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,130", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:201:1, TTL=3814s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,130", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:202:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,130", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,130", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.06297s ago] (202, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,131", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:202:1: {'id': 202, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T16:55:04.663265+00:00', 'updated_at': '2026-02-25T16:55:04.663265+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,131", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:202:1, TTL=3643s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,131", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:203:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,132", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,132", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.06431s ago] (203, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,132", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:203:1: {'id': 203, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:00:11.461904+00:00', 'updated_at': '2026-02-25T17:00:11.461904+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,132", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:203:1, TTL=3792s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,133", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:204:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,133", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,133", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.06579s ago] (204, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,134", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:204:1: {'id': 204, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:05:57.701858+00:00', 'updated_at': '2026-02-25T17:05:57.701858+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,134", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:204:1, TTL=3760s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,134", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:205:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,134", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,135", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.06728s ago] (205, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,135", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:205:1: {'id': 205, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:12:01.339171+00:00', 'updated_at': '2026-02-25T17:12:01.339171+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,135", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:205:1, TTL=3604s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,136", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:206:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,136", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,136", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.06881s ago] (206, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,137", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:206:1: {'id': 206, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:15:32.934734+00:00', 'updated_at': '2026-02-25T17:15:32.934734+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,137", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:206:1, TTL=3877s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,137", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:207:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,137", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,138", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.07029s ago] (207, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,138", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:207:1: {'id': 207, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:18:22.171051+00:00', 'updated_at': '2026-02-25T17:18:22.171051+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,138", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:207:1, TTL=3729s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,139", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:208:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,139", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,139", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.07172s ago] (208, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,139", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:208:1: {'id': 208, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:24:46.995898+00:00', 'updated_at': '2026-02-25T17:24:46.995898+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,140", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:208:1, TTL=3612s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,140", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:209:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,141", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,141", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.07333s ago] (209, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,141", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:209:1: {'id': 209, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:28:46.107951+00:00', 'updated_at': '2026-02-25T17:28:46.107951+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,141", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:209:1, TTL=3888s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,142", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:210:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,142", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,142", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.0749s ago] (210, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,143", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:210:1: {'id': 210, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:35:41.686230+00:00', 'updated_at': '2026-02-25T17:35:41.686230+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,143", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:210:1, TTL=3749s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,143", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:211:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,144", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,144", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.0765s ago] (211, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,144", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:211:1: {'id': 211, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:36:36.866901+00:00', 'updated_at': '2026-02-25T17:36:36.866901+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,145", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:211:1, TTL=3787s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,145", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:212:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,145", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,146", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.07817s ago] (212, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,146", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:212:1: {'id': 212, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:41:10.457397+00:00', 'updated_at': '2026-02-25T17:41:10.457397+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,146", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:212:1, TTL=3688s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,147", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:213:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,147", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,147", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.07971s ago] (213, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,147", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:213:1: {'id': 213, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:43:09.146742+00:00', 'updated_at': '2026-02-25T17:43:09.146742+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,148", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:213:1, TTL=3861s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,148", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:214:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,148", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,149", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.08113s ago] (214, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,149", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:214:1: {'id': 214, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:46:24.232806+00:00', 'updated_at': '2026-02-25T17:46:24.232806+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,149", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:214:1, TTL=3859s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,150", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:215:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,150", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,150", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.08282s ago] (215, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,151", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:215:1: {'id': 215, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T18:05:04.122315+00:00', 'updated_at': '2026-02-25T18:05:04.122315+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,151", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:215:1, TTL=3760s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,151", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:216:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,152", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,152", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.08429s ago] (216, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,152", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:216:1: {'id': 216, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T18:18:58.723048+00:00', 'updated_at': '2026-02-25T18:18:58.723048+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,152", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:216:1, TTL=3742s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,153", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:217:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,153", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,153", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.08593s ago] (217, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,154", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:217:1: {'id': 217, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T18:27:50.787750+00:00', 'updated_at': '2026-02-25T18:27:50.787750+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,154", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:217:1, TTL=3608s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,154", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:218:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,155", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,155", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.08736s ago] (218, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,155", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:218:1: {'id': 218, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T18:35:17.658631+00:00', 'updated_at': '2026-02-25T18:35:17.658631+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,155", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:218:1, TTL=3745s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,156", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:219:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,156", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,156", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.0889s ago] (219, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,157", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:219:1: {'id': 219, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T18:35:35.586803+00:00', 'updated_at': '2026-02-25T18:35:35.586803+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,157", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:219:1, TTL=3774s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,157", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:220:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,158", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,158", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.09058s ago] (220, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,158", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:220:1: {'id': 220, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T20:05:52.426575+00:00', 'updated_at': '2026-02-25T20:05:52.426575+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,159", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:220:1, TTL=3720s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,159", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:221:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,159", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,159", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.09205s ago] (221, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,160", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:221:1: {'id': 221, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-26T09:42:18.712045+00:00', 'updated_at': '2026-02-26T09:42:18.712045+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,160", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:221:1, TTL=3639s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,160", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:222:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,161", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,161", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.09352s ago] (222, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,161", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:222:1: {'id': 222, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-26T09:46:52.728826+00:00', 'updated_at': '2026-02-26T09:46:52.728826+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,161", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:222:1, TTL=3695s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,162", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:223:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,162", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,162", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.09493s ago] (223, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,163", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:223:1: {'id': 223, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-26T10:06:02.054684+00:00', 'updated_at': '2026-02-26T10:06:02.054684+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,163", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:223:1, TTL=3614s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,163", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:224:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,164", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,164", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.09655s ago] (224, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,164", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:224:1: {'id': 224, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-26T10:07:48.664417+00:00', 'updated_at': '2026-02-26T10:07:48.664417+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,165", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:224:1, TTL=3786s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,165", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:225:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,165", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,166", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.09815s ago] (225, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,166", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:225:1: {'id': 225, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-26T10:08:58.236057+00:00', 'updated_at': '2026-02-26T10:08:58.236057+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,166", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:225:1, TTL=3734s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,167", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:226:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 19:18:17,167", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = $1::INTEGER AND conversations.user_id = $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,167", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[cached since 0.1001s ago] (226, 1)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:17,168", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:226:1: {'id': 226, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-26T10:10:40.442180+00:00', 'updated_at': '2026-02-26T10:10:40.442180+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 19:18:17,168", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:226:1, TTL=3682s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 19:18:17,196", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:227:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:17,196", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:228:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:17,196", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 66 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 154}
{"timestamp": "2026-02-26 19:18:17,196", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 19:18:17,197", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 缓存预热完成 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 165}
{"timestamp": "2026-02-26 19:18:17,306", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 连接已关闭", "module": "agent_factory", "function": "close_checkpointer", "line": 90}
{"timestamp": "2026-02-26 19:18:17,322", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 19:18:17,322", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 118}
{"timestamp": "2026-02-26 19:18:19,993", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 104}
{"timestamp": "2026-02-26 19:18:20,037", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 初始化成功", "module": "agent_factory", "function": "init_checkpointer", "line": 72}
{"timestamp": "2026-02-26 19:18:20,037", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 107}
{"timestamp": "2026-02-26 19:18:20,037", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 109}
{"timestamp": "2026-02-26 19:18:20,037", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 开始缓存预热 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 159}
{"timestamp": "2026-02-26 19:18:20,037", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热会话列表缓存，限制 100 条", "module": "cache_warmup", "function": "warmup_conversations", "line": 26}
{"timestamp": "2026-02-26 19:18:20,088", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:20,088", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:20,089", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:20,089", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:20,090", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:20,091", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:20,091", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 19:18:20,096", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \n LIMIT $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:20,096", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00026s] (50,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:20,099", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversations:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,100", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 用户 1 的会话列表已预热", "module": "cache_warmup", "function": "warmup_conversations", "line": 56}
{"timestamp": "2026-02-26 19:18:20,100", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 60}
{"timestamp": "2026-02-26 19:18:20,100", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 19:18:20,100", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热置顶会话详情缓存", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 65}
{"timestamp": "2026-02-26 19:18:20,101", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 19:18:20,102", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.is_pinned = true", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:20,102", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00024s] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:20,103", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 102}
{"timestamp": "2026-02-26 19:18:20,103", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 19:18:20,103", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热最近 24 小时活跃的会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 114}
{"timestamp": "2026-02-26 19:18:20,104", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 19:18:20,104", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.updated_at >= $1::TIMESTAMP WITH TIME ZONE \n LIMIT $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:20,105", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00025s] (datetime.datetime(2026, 2, 25, 11, 18, 20, 103962), 200)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:20,106", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:163:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,106", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:164:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,107", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:165:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,107", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:166:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,107", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:167:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,108", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:168:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,108", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:169:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,108", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:170:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,108", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:171:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,108", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:172:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,108", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:173:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,108", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:174:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,109", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:175:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,109", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:176:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,109", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:177:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,109", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:178:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,109", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:179:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,109", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:180:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,110", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:181:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,110", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:182:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,110", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:183:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,110", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:184:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,110", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:185:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,111", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:186:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,111", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:187:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,111", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:188:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,111", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:189:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,111", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:190:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,112", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:191:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,112", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:192:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,112", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:193:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,112", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:194:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,113", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:195:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,113", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:196:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,113", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:197:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,113", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:198:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,113", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:199:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,113", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:200:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,114", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:201:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,114", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:202:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,114", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:203:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,114", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:204:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,114", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:205:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,114", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:206:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,115", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:207:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,115", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:208:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,115", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:209:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,115", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:210:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,115", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:211:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,115", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:212:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,115", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:213:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,116", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:214:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,116", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:215:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,116", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:216:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,116", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:217:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,116", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:218:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,117", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:219:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,117", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:220:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,117", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:221:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,117", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:222:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,117", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:223:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,118", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:224:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,118", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:225:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,118", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:226:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,118", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:227:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,118", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:228:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:20,118", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 66 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 154}
{"timestamp": "2026-02-26 19:18:20,119", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 19:18:20,119", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 缓存预热完成 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 165}
{"timestamp": "2026-02-26 19:18:20,232", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 连接已关闭", "module": "agent_factory", "function": "close_checkpointer", "line": 90}
{"timestamp": "2026-02-26 19:18:20,248", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 19:18:20,249", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 118}
{"timestamp": "2026-02-26 19:18:22,964", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 104}
{"timestamp": "2026-02-26 19:18:23,010", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 初始化成功", "module": "agent_factory", "function": "init_checkpointer", "line": 72}
{"timestamp": "2026-02-26 19:18:23,010", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 107}
{"timestamp": "2026-02-26 19:18:23,010", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 109}
{"timestamp": "2026-02-26 19:18:23,010", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 开始缓存预热 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 159}
{"timestamp": "2026-02-26 19:18:23,010", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热会话列表缓存，限制 100 条", "module": "cache_warmup", "function": "warmup_conversations", "line": 26}
{"timestamp": "2026-02-26 19:18:23,072", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:23,072", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:23,073", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:23,073", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:23,074", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:23,074", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:23,075", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 19:18:23,080", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \n LIMIT $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:23,080", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00039s] (50,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:23,084", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversations:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,084", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 用户 1 的会话列表已预热", "module": "cache_warmup", "function": "warmup_conversations", "line": 56}
{"timestamp": "2026-02-26 19:18:23,084", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 60}
{"timestamp": "2026-02-26 19:18:23,085", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 19:18:23,085", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热置顶会话详情缓存", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 65}
{"timestamp": "2026-02-26 19:18:23,086", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 19:18:23,087", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.is_pinned = true", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:23,087", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00029s] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:23,088", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 102}
{"timestamp": "2026-02-26 19:18:23,088", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 19:18:23,089", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热最近 24 小时活跃的会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 114}
{"timestamp": "2026-02-26 19:18:23,089", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 19:18:23,090", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.updated_at >= $1::TIMESTAMP WITH TIME ZONE \n LIMIT $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:23,090", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00022s] (datetime.datetime(2026, 2, 25, 11, 18, 23, 89346), 200)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:23,091", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:163:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,092", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:164:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,092", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:165:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,092", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:166:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,092", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:167:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,093", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:168:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,093", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:169:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,093", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:170:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,093", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:171:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,094", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:172:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,094", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:173:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,094", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:174:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,094", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:175:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,094", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:176:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,094", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:177:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,095", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:178:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,095", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:179:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,095", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:180:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,095", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:181:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,095", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:182:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,095", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:183:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,096", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:184:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,096", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:185:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,096", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:186:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,096", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:187:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,096", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:188:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,097", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:189:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,097", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:190:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,097", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:191:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,097", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:192:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,098", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:193:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,098", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:194:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,098", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:195:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,098", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:196:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,099", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:197:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,099", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:198:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,099", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:199:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,099", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:200:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,100", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:201:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,100", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:202:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,100", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:203:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,101", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:204:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,101", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:205:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,101", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:206:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,101", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:207:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,101", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:208:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,102", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:209:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,102", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:210:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,102", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:211:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,102", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:212:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,103", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:213:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,103", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:214:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,103", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:215:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,103", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:216:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,103", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:217:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,103", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:218:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,104", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:219:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,104", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:220:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,104", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:221:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,104", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:222:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,104", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:223:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,105", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:224:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,105", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:225:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,105", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:226:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,105", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:227:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,106", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:228:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:23,106", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 66 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 154}
{"timestamp": "2026-02-26 19:18:23,106", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 19:18:23,106", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 缓存预热完成 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 165}
{"timestamp": "2026-02-26 19:18:23,220", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 连接已关闭", "module": "agent_factory", "function": "close_checkpointer", "line": 90}
{"timestamp": "2026-02-26 19:18:23,223", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 19:18:23,223", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 118}
{"timestamp": "2026-02-26 19:18:25,963", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 104}
{"timestamp": "2026-02-26 19:18:26,009", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 初始化成功", "module": "agent_factory", "function": "init_checkpointer", "line": 72}
{"timestamp": "2026-02-26 19:18:26,009", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 107}
{"timestamp": "2026-02-26 19:18:26,009", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 109}
{"timestamp": "2026-02-26 19:18:26,010", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 开始缓存预热 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 159}
{"timestamp": "2026-02-26 19:18:26,010", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热会话列表缓存，限制 100 条", "module": "cache_warmup", "function": "warmup_conversations", "line": 26}
{"timestamp": "2026-02-26 19:18:26,062", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:26,062", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:26,063", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:26,063", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:26,064", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:26,064", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:26,065", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 19:18:26,070", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \n LIMIT $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:26,070", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00031s] (50,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:26,073", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversations:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,073", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 用户 1 的会话列表已预热", "module": "cache_warmup", "function": "warmup_conversations", "line": 56}
{"timestamp": "2026-02-26 19:18:26,073", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 60}
{"timestamp": "2026-02-26 19:18:26,073", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 19:18:26,074", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热置顶会话详情缓存", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 65}
{"timestamp": "2026-02-26 19:18:26,074", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 19:18:26,075", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.is_pinned = true", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:26,076", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00028s] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:26,077", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 102}
{"timestamp": "2026-02-26 19:18:26,077", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 19:18:26,077", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热最近 24 小时活跃的会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 114}
{"timestamp": "2026-02-26 19:18:26,078", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 19:18:26,078", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.updated_at >= $1::TIMESTAMP WITH TIME ZONE \n LIMIT $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:26,079", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00020s] (datetime.datetime(2026, 2, 25, 11, 18, 26, 78001), 200)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:26,080", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:163:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,080", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:164:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,080", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:165:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,081", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:166:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,081", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:167:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,081", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:168:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,081", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:169:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,081", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:170:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,082", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:171:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,082", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:172:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,082", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:173:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,082", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:174:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,083", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:175:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,083", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:176:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,083", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:177:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,083", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:178:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,083", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:179:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,084", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:180:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,084", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:181:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,084", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:182:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,084", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:183:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,084", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:184:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,084", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:185:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,085", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:186:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,085", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:187:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,085", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:188:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,085", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:189:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,085", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:190:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,086", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:191:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,086", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:192:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,086", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:193:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,086", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:194:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,086", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:195:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,086", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:196:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,087", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:197:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,087", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:198:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,087", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:199:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,087", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:200:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,087", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:201:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,088", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:202:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,088", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:203:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,088", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:204:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,088", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:205:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,088", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:206:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,088", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:207:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,089", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:208:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,089", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:209:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,089", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:210:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,089", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:211:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,089", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:212:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,090", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:213:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,090", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:214:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,090", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:215:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,091", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:216:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,091", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:217:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,091", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:218:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,091", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:219:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,091", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:220:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,092", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:221:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,092", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:222:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,092", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:223:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,092", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:224:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,092", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:225:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,092", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:226:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,093", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:227:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,093", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:228:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:26,093", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 66 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 154}
{"timestamp": "2026-02-26 19:18:26,093", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 19:18:26,093", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 缓存预热完成 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 165}
{"timestamp": "2026-02-26 19:18:26,209", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 连接已关闭", "module": "agent_factory", "function": "close_checkpointer", "line": 90}
{"timestamp": "2026-02-26 19:18:26,225", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 19:18:26,225", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 118}
{"timestamp": "2026-02-26 19:18:28,916", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 104}
{"timestamp": "2026-02-26 19:18:28,959", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 初始化成功", "module": "agent_factory", "function": "init_checkpointer", "line": 72}
{"timestamp": "2026-02-26 19:18:28,959", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 107}
{"timestamp": "2026-02-26 19:18:28,959", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 109}
{"timestamp": "2026-02-26 19:18:28,960", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 开始缓存预热 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 159}
{"timestamp": "2026-02-26 19:18:28,960", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热会话列表缓存，限制 100 条", "module": "cache_warmup", "function": "warmup_conversations", "line": 26}
{"timestamp": "2026-02-26 19:18:29,011", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:29,011", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:29,012", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:29,012", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:29,013", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:29,013", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:29,014", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 19:18:29,018", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \n LIMIT $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:29,019", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00031s] (50,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:29,022", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversations:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,022", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 用户 1 的会话列表已预热", "module": "cache_warmup", "function": "warmup_conversations", "line": 56}
{"timestamp": "2026-02-26 19:18:29,022", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 60}
{"timestamp": "2026-02-26 19:18:29,022", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 19:18:29,023", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热置顶会话详情缓存", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 65}
{"timestamp": "2026-02-26 19:18:29,023", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 19:18:29,024", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.is_pinned = true", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:29,024", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00024s] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:29,026", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 102}
{"timestamp": "2026-02-26 19:18:29,026", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 19:18:29,026", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热最近 24 小时活跃的会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 114}
{"timestamp": "2026-02-26 19:18:29,027", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 19:18:29,027", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.updated_at >= $1::TIMESTAMP WITH TIME ZONE \n LIMIT $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:29,027", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00021s] (datetime.datetime(2026, 2, 25, 11, 18, 29, 26764), 200)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:29,030", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:163:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,033", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:164:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,033", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:165:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,034", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:166:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,034", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:167:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,034", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:168:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,034", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:169:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,035", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:170:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,035", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:171:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,035", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:172:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,035", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:173:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,035", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:174:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,035", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:175:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,036", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:176:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,036", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:177:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,036", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:178:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,036", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:179:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,036", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:180:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,037", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:181:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,037", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:182:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,037", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:183:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,037", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:184:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,037", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:185:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,037", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:186:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,038", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:187:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,038", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:188:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,038", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:189:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,038", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:190:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,038", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:191:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,039", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:192:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,039", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:193:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,039", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:194:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,039", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:195:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,039", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:196:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,040", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:197:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,040", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:198:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,040", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:199:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,040", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:200:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,040", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:201:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,040", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:202:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,040", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:203:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,041", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:204:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,041", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:205:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,041", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:206:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,041", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:207:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,041", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:208:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,041", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:209:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,042", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:210:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,042", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:211:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,042", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:212:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,042", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:213:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,042", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:214:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,042", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:215:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,043", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:216:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,043", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:217:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,043", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:218:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,043", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:219:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,044", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:220:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,044", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:221:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,044", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:222:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,044", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:223:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,044", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:224:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,045", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:225:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,045", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:226:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,045", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:227:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,045", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:228:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:29,045", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 66 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 154}
{"timestamp": "2026-02-26 19:18:29,046", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 19:18:29,046", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 缓存预热完成 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 165}
{"timestamp": "2026-02-26 19:18:29,154", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 连接已关闭", "module": "agent_factory", "function": "close_checkpointer", "line": 90}
{"timestamp": "2026-02-26 19:18:29,170", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 19:18:29,170", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 118}
{"timestamp": "2026-02-26 19:18:31,818", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 104}
{"timestamp": "2026-02-26 19:18:31,877", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 初始化成功", "module": "agent_factory", "function": "init_checkpointer", "line": 72}
{"timestamp": "2026-02-26 19:18:31,877", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 107}
{"timestamp": "2026-02-26 19:18:31,878", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 109}
{"timestamp": "2026-02-26 19:18:31,878", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 开始缓存预热 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 159}
{"timestamp": "2026-02-26 19:18:31,878", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热会话列表缓存，限制 100 条", "module": "cache_warmup", "function": "warmup_conversations", "line": 26}
{"timestamp": "2026-02-26 19:18:31,944", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:31,945", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:31,946", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:31,946", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:31,946", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:31,947", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:31,947", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 19:18:31,952", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \n LIMIT $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:31,952", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00028s] (50,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:31,956", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversations:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,956", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 用户 1 的会话列表已预热", "module": "cache_warmup", "function": "warmup_conversations", "line": 56}
{"timestamp": "2026-02-26 19:18:31,956", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 60}
{"timestamp": "2026-02-26 19:18:31,956", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 19:18:31,957", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热置顶会话详情缓存", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 65}
{"timestamp": "2026-02-26 19:18:31,957", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 19:18:31,958", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.is_pinned = true", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:31,959", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00020s] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:31,960", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 102}
{"timestamp": "2026-02-26 19:18:31,960", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 19:18:31,960", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热最近 24 小时活跃的会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 114}
{"timestamp": "2026-02-26 19:18:31,961", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 19:18:31,961", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.updated_at >= $1::TIMESTAMP WITH TIME ZONE \n LIMIT $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:31,962", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00022s] (datetime.datetime(2026, 2, 25, 11, 18, 31, 961032), 200)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:31,963", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:163:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,964", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:164:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,964", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:165:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,964", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:166:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,964", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:167:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,965", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:168:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,965", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:169:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,965", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:170:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,965", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:171:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,965", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:172:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,966", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:173:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,966", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:174:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,966", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:175:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,966", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:176:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,966", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:177:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,966", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:178:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,967", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:179:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,967", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:180:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,967", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:181:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,967", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:182:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,967", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:183:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,968", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:184:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,968", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:185:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,968", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:186:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,968", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:187:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,968", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:188:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,969", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:189:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,969", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:190:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,969", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:191:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,969", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:192:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,970", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:193:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,970", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:194:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,970", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:195:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,970", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:196:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,970", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:197:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,971", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:198:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,971", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:199:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,971", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:200:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,971", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:201:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,971", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:202:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,972", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:203:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,972", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:204:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,972", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:205:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,972", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:206:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,972", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:207:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,972", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:208:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,973", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:209:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,973", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:210:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,973", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:211:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,973", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:212:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,973", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:213:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,973", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:214:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,974", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:215:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,974", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:216:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,974", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:217:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,974", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:218:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,974", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:219:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,974", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:220:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,974", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:221:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,975", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:222:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,975", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:223:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,975", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:224:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,975", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:225:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,975", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:226:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,976", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:227:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,976", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:228:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:31,976", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 66 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 154}
{"timestamp": "2026-02-26 19:18:31,976", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 19:18:31,976", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 缓存预热完成 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 165}
{"timestamp": "2026-02-26 19:18:32,086", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 连接已关闭", "module": "agent_factory", "function": "close_checkpointer", "line": 90}
{"timestamp": "2026-02-26 19:18:32,102", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 19:18:32,102", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 118}
{"timestamp": "2026-02-26 19:18:34,737", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 104}
{"timestamp": "2026-02-26 19:18:34,781", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 初始化成功", "module": "agent_factory", "function": "init_checkpointer", "line": 72}
{"timestamp": "2026-02-26 19:18:34,781", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 107}
{"timestamp": "2026-02-26 19:18:34,782", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 109}
{"timestamp": "2026-02-26 19:18:34,782", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 开始缓存预热 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 159}
{"timestamp": "2026-02-26 19:18:34,782", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热会话列表缓存，限制 100 条", "module": "cache_warmup", "function": "warmup_conversations", "line": 26}
{"timestamp": "2026-02-26 19:18:34,833", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:34,833", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:34,834", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:34,835", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:34,835", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:34,835", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:34,836", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 19:18:34,841", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \n LIMIT $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:34,841", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00025s] (50,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:34,844", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversations:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,844", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 用户 1 的会话列表已预热", "module": "cache_warmup", "function": "warmup_conversations", "line": 56}
{"timestamp": "2026-02-26 19:18:34,844", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 60}
{"timestamp": "2026-02-26 19:18:34,844", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 19:18:34,845", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热置顶会话详情缓存", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 65}
{"timestamp": "2026-02-26 19:18:34,846", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 19:18:34,846", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.is_pinned = true", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:34,847", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00024s] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:34,848", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 102}
{"timestamp": "2026-02-26 19:18:34,848", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 19:18:34,848", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热最近 24 小时活跃的会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 114}
{"timestamp": "2026-02-26 19:18:34,849", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 19:18:34,849", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.updated_at >= $1::TIMESTAMP WITH TIME ZONE \n LIMIT $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:34,850", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00027s] (datetime.datetime(2026, 2, 25, 11, 18, 34, 849031), 200)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:34,851", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:163:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,851", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:164:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,851", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:165:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,852", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:166:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,852", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:167:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,852", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:168:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,852", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:169:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,852", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:170:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,853", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:171:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,853", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:172:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,853", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:173:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,853", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:174:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,853", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:175:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,853", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:176:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,853", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:177:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,854", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:178:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,854", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:179:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,854", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:180:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,854", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:181:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,855", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:182:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,855", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:183:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,855", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:184:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,855", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:185:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,855", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:186:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,856", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:187:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,856", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:188:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,856", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:189:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,856", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:190:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,856", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:191:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,856", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:192:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,857", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:193:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,857", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:194:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,857", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:195:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,857", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:196:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,857", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:197:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,857", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:198:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,858", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:199:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,858", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:200:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,858", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:201:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,858", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:202:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,858", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:203:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,858", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:204:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,859", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:205:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,859", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:206:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,859", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:207:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,859", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:208:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,859", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:209:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,859", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:210:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,859", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:211:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,860", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:212:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,860", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:213:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,860", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:214:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,860", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:215:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,861", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:216:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,861", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:217:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,861", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:218:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,861", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:219:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,861", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:220:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,862", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:221:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,862", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:222:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,862", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:223:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,862", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:224:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,862", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:225:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,863", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:226:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,863", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:227:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,863", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:228:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:34,863", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 66 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 154}
{"timestamp": "2026-02-26 19:18:34,863", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 19:18:34,864", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 缓存预热完成 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 165}
{"timestamp": "2026-02-26 19:18:34,965", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 连接已关闭", "module": "agent_factory", "function": "close_checkpointer", "line": 90}
{"timestamp": "2026-02-26 19:18:34,968", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 19:18:34,969", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 118}
{"timestamp": "2026-02-26 19:18:37,772", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 104}
{"timestamp": "2026-02-26 19:18:37,823", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 初始化成功", "module": "agent_factory", "function": "init_checkpointer", "line": 72}
{"timestamp": "2026-02-26 19:18:37,823", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 107}
{"timestamp": "2026-02-26 19:18:37,823", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 109}
{"timestamp": "2026-02-26 19:18:37,823", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 开始缓存预热 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 159}
{"timestamp": "2026-02-26 19:18:37,824", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热会话列表缓存，限制 100 条", "module": "cache_warmup", "function": "warmup_conversations", "line": 26}
{"timestamp": "2026-02-26 19:18:37,881", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:37,881", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:37,882", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:37,883", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:37,883", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:37,884", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:37,884", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 19:18:37,889", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \n LIMIT $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:37,889", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00033s] (50,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:37,893", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversations:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,893", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 用户 1 的会话列表已预热", "module": "cache_warmup", "function": "warmup_conversations", "line": 56}
{"timestamp": "2026-02-26 19:18:37,893", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 60}
{"timestamp": "2026-02-26 19:18:37,893", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 19:18:37,893", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热置顶会话详情缓存", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 65}
{"timestamp": "2026-02-26 19:18:37,894", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 19:18:37,895", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.is_pinned = true", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:37,895", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00026s] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:37,897", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 102}
{"timestamp": "2026-02-26 19:18:37,897", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 19:18:37,897", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热最近 24 小时活跃的会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 114}
{"timestamp": "2026-02-26 19:18:37,898", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 19:18:37,898", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.updated_at >= $1::TIMESTAMP WITH TIME ZONE \n LIMIT $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:37,899", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00041s] (datetime.datetime(2026, 2, 25, 11, 18, 37, 898075), 200)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:37,900", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:163:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,901", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:164:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,901", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:165:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,901", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:166:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,902", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:167:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,902", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:168:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,902", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:169:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,902", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:170:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,903", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:171:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,903", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:172:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,903", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:173:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,903", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:174:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,903", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:175:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,904", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:176:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,904", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:177:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,904", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:178:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,904", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:179:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,904", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:180:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,905", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:181:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,905", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:182:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,905", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:183:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,905", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:184:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,905", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:185:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,905", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:186:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,906", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:187:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,906", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:188:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,906", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:189:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,906", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:190:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,906", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:191:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,907", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:192:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,907", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:193:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,907", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:194:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,907", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:195:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,907", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:196:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,908", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:197:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,908", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:198:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,908", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:199:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,908", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:200:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,908", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:201:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,908", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:202:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,909", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:203:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,909", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:204:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,909", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:205:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,909", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:206:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,909", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:207:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,910", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:208:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,910", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:209:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,910", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:210:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,910", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:211:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,910", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:212:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,910", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:213:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,911", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:214:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,911", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:215:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,911", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:216:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,911", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:217:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,911", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:218:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,911", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:219:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,912", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:220:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,912", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:221:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,912", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:222:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,912", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:223:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,912", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:224:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,912", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:225:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,913", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:226:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,913", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:227:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,913", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:228:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:37,913", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 66 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 154}
{"timestamp": "2026-02-26 19:18:37,913", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 19:18:37,914", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 缓存预热完成 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 165}
{"timestamp": "2026-02-26 19:18:38,022", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 连接已关闭", "module": "agent_factory", "function": "close_checkpointer", "line": 90}
{"timestamp": "2026-02-26 19:18:38,038", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 19:18:38,038", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 118}
{"timestamp": "2026-02-26 19:18:40,737", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 104}
{"timestamp": "2026-02-26 19:18:40,781", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 初始化成功", "module": "agent_factory", "function": "init_checkpointer", "line": 72}
{"timestamp": "2026-02-26 19:18:40,781", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 107}
{"timestamp": "2026-02-26 19:18:40,782", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 109}
{"timestamp": "2026-02-26 19:18:40,782", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 开始缓存预热 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 159}
{"timestamp": "2026-02-26 19:18:40,782", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热会话列表缓存，限制 100 条", "module": "cache_warmup", "function": "warmup_conversations", "line": 26}
{"timestamp": "2026-02-26 19:18:40,836", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:40,837", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:40,838", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:40,838", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:40,838", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:40,839", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:40,839", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 19:18:40,844", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \n LIMIT $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:40,844", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00028s] (50,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:40,848", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversations:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,848", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 用户 1 的会话列表已预热", "module": "cache_warmup", "function": "warmup_conversations", "line": 56}
{"timestamp": "2026-02-26 19:18:40,848", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 60}
{"timestamp": "2026-02-26 19:18:40,849", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 19:18:40,849", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热置顶会话详情缓存", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 65}
{"timestamp": "2026-02-26 19:18:40,850", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 19:18:40,851", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.is_pinned = true", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:40,852", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00027s] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:40,853", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 102}
{"timestamp": "2026-02-26 19:18:40,853", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 19:18:40,854", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热最近 24 小时活跃的会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 114}
{"timestamp": "2026-02-26 19:18:40,854", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 19:18:40,855", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.updated_at >= $1::TIMESTAMP WITH TIME ZONE \n LIMIT $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:40,855", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00027s] (datetime.datetime(2026, 2, 25, 11, 18, 40, 854203), 200)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:40,857", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:163:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,857", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:164:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,857", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:165:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,858", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:166:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,858", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:167:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,858", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:168:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,858", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:169:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,858", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:170:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,859", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:171:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,859", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:172:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,859", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:173:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,859", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:174:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,860", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:175:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,860", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:176:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,861", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:177:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,861", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:178:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,861", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:179:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,861", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:180:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,862", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:181:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,862", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:182:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,862", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:183:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,863", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:184:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,863", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:185:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,863", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:186:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,863", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:187:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,864", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:188:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,864", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:189:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,864", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:190:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,864", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:191:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,865", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:192:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,865", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:193:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,865", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:194:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,866", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:195:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,866", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:196:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,866", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:197:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,867", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:198:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,867", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:199:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,868", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:200:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,869", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:201:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,869", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:202:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,870", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:203:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,870", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:204:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,870", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:205:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,871", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:206:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,871", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:207:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,871", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:208:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,871", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:209:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,872", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:210:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,872", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:211:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,873", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:212:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,873", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:213:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,873", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:214:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,873", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:215:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,874", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:216:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,874", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:217:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,874", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:218:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,874", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:219:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,875", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:220:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,875", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:221:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,875", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:222:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,876", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:223:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,876", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:224:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,876", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:225:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,876", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:226:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,876", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:227:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,877", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:228:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:40,877", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 66 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 154}
{"timestamp": "2026-02-26 19:18:40,877", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 19:18:40,877", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 缓存预热完成 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 165}
{"timestamp": "2026-02-26 19:18:40,987", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 连接已关闭", "module": "agent_factory", "function": "close_checkpointer", "line": 90}
{"timestamp": "2026-02-26 19:18:41,003", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 19:18:41,003", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 118}
{"timestamp": "2026-02-26 19:18:43,705", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 104}
{"timestamp": "2026-02-26 19:18:43,749", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 初始化成功", "module": "agent_factory", "function": "init_checkpointer", "line": 72}
{"timestamp": "2026-02-26 19:18:43,749", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 107}
{"timestamp": "2026-02-26 19:18:43,749", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 109}
{"timestamp": "2026-02-26 19:18:43,750", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 开始缓存预热 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 159}
{"timestamp": "2026-02-26 19:18:43,750", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热会话列表缓存，限制 100 条", "module": "cache_warmup", "function": "warmup_conversations", "line": 26}
{"timestamp": "2026-02-26 19:18:43,803", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:43,803", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:43,804", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:43,805", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:43,805", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:43,805", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:43,806", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 19:18:43,810", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \n LIMIT $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:43,811", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00022s] (50,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:43,814", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversations:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,814", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 用户 1 的会话列表已预热", "module": "cache_warmup", "function": "warmup_conversations", "line": 56}
{"timestamp": "2026-02-26 19:18:43,814", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 60}
{"timestamp": "2026-02-26 19:18:43,815", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 19:18:43,815", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热置顶会话详情缓存", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 65}
{"timestamp": "2026-02-26 19:18:43,816", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 19:18:43,817", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.is_pinned = true", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:43,817", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00020s] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:43,818", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 102}
{"timestamp": "2026-02-26 19:18:43,818", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 19:18:43,818", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热最近 24 小时活跃的会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 114}
{"timestamp": "2026-02-26 19:18:43,819", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 19:18:43,819", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.updated_at >= $1::TIMESTAMP WITH TIME ZONE \n LIMIT $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:43,820", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00023s] (datetime.datetime(2026, 2, 25, 11, 18, 43, 819015), 200)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:43,821", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:163:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,822", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:164:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,822", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:165:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,822", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:166:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,822", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:167:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,823", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:168:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,823", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:169:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,823", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:170:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,823", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:171:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,823", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:172:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,823", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:173:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,824", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:174:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,824", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:175:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,824", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:176:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,824", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:177:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,824", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:178:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,824", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:179:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,824", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:180:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,825", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:181:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,825", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:182:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,825", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:183:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,825", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:184:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,826", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:185:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,826", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:186:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,826", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:187:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,826", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:188:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,826", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:189:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,827", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:190:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,827", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:191:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,827", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:192:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,827", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:193:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,827", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:194:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,828", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:195:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,828", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:196:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,828", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:197:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,828", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:198:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,829", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:199:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,829", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:200:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,829", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:201:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,829", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:202:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,830", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:203:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,830", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:204:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,830", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:205:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,830", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:206:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,830", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:207:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,831", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:208:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,831", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:209:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,831", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:210:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,831", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:211:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,831", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:212:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,831", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:213:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,832", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:214:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,832", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:215:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,832", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:216:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,832", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:217:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,832", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:218:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,832", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:219:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,833", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:220:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,833", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:221:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,833", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:222:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,833", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:223:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,833", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:224:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,833", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:225:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,834", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:226:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,834", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:227:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,834", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:228:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:43,834", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 66 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 154}
{"timestamp": "2026-02-26 19:18:43,834", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 19:18:43,835", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 缓存预热完成 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 165}
{"timestamp": "2026-02-26 19:18:43,940", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 连接已关闭", "module": "agent_factory", "function": "close_checkpointer", "line": 90}
{"timestamp": "2026-02-26 19:18:43,956", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 19:18:43,956", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 118}
{"timestamp": "2026-02-26 19:18:46,761", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 104}
{"timestamp": "2026-02-26 19:18:46,804", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 初始化成功", "module": "agent_factory", "function": "init_checkpointer", "line": 72}
{"timestamp": "2026-02-26 19:18:46,805", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 107}
{"timestamp": "2026-02-26 19:18:46,805", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 109}
{"timestamp": "2026-02-26 19:18:46,805", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 开始缓存预热 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 159}
{"timestamp": "2026-02-26 19:18:46,805", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热会话列表缓存，限制 100 条", "module": "cache_warmup", "function": "warmup_conversations", "line": 26}
{"timestamp": "2026-02-26 19:18:46,856", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:46,857", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:46,858", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:46,858", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:46,858", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:46,858", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:46,859", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 19:18:46,863", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \n LIMIT $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:46,863", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00022s] (50,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:46,867", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversations:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,867", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 用户 1 的会话列表已预热", "module": "cache_warmup", "function": "warmup_conversations", "line": 56}
{"timestamp": "2026-02-26 19:18:46,867", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 60}
{"timestamp": "2026-02-26 19:18:46,867", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 19:18:46,868", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热置顶会话详情缓存", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 65}
{"timestamp": "2026-02-26 19:18:46,869", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 19:18:46,870", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.is_pinned = true", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:46,870", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00022s] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:46,871", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 102}
{"timestamp": "2026-02-26 19:18:46,871", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 19:18:46,871", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热最近 24 小时活跃的会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 114}
{"timestamp": "2026-02-26 19:18:46,872", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 19:18:46,872", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.updated_at >= $1::TIMESTAMP WITH TIME ZONE \n LIMIT $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:46,872", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00020s] (datetime.datetime(2026, 2, 25, 11, 18, 46, 871895), 200)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:46,874", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:163:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,874", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:164:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,874", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:165:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,875", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:166:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,875", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:167:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,875", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:168:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,875", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:169:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,875", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:170:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,875", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:171:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,876", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:172:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,876", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:173:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,876", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:174:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,876", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:175:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,876", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:176:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,877", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:177:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,877", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:178:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,877", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:179:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,877", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:180:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,877", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:181:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,878", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:182:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,878", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:183:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,878", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:184:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,878", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:185:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,878", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:186:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,878", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:187:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,879", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:188:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,879", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:189:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,879", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:190:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,879", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:191:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,879", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:192:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,880", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:193:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,880", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:194:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,881", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:195:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,881", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:196:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,882", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:197:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,883", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:198:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,885", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:199:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,886", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:200:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,886", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:201:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,886", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:202:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,886", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:203:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,886", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:204:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,887", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:205:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,887", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:206:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,887", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:207:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,887", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:208:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,887", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:209:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,888", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:210:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,888", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:211:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,888", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:212:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,888", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:213:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,888", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:214:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,888", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:215:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,889", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:216:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,889", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:217:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,889", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:218:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,889", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:219:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,889", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:220:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,889", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:221:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,890", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:222:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,890", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:223:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,890", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:224:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,890", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:225:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,890", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:226:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,891", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:227:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,891", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:228:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:46,891", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 66 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 154}
{"timestamp": "2026-02-26 19:18:46,891", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 19:18:46,892", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 缓存预热完成 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 165}
{"timestamp": "2026-02-26 19:18:47,004", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 连接已关闭", "module": "agent_factory", "function": "close_checkpointer", "line": 90}
{"timestamp": "2026-02-26 19:18:47,019", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 19:18:47,019", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 118}
{"timestamp": "2026-02-26 19:18:49,695", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 104}
{"timestamp": "2026-02-26 19:18:49,741", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 初始化成功", "module": "agent_factory", "function": "init_checkpointer", "line": 72}
{"timestamp": "2026-02-26 19:18:49,742", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 107}
{"timestamp": "2026-02-26 19:18:49,742", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 109}
{"timestamp": "2026-02-26 19:18:49,742", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 开始缓存预热 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 159}
{"timestamp": "2026-02-26 19:18:49,742", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热会话列表缓存，限制 100 条", "module": "cache_warmup", "function": "warmup_conversations", "line": 26}
{"timestamp": "2026-02-26 19:18:49,802", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:49,802", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:49,803", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:49,804", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:49,804", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:49,804", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:49,805", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 19:18:49,809", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \n LIMIT $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:49,810", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00025s] (50,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:49,813", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversations:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,813", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 用户 1 的会话列表已预热", "module": "cache_warmup", "function": "warmup_conversations", "line": 56}
{"timestamp": "2026-02-26 19:18:49,813", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 60}
{"timestamp": "2026-02-26 19:18:49,813", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 19:18:49,814", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热置顶会话详情缓存", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 65}
{"timestamp": "2026-02-26 19:18:49,815", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 19:18:49,815", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.is_pinned = true", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:49,816", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00023s] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:49,817", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 102}
{"timestamp": "2026-02-26 19:18:49,817", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 19:18:49,817", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热最近 24 小时活跃的会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 114}
{"timestamp": "2026-02-26 19:18:49,818", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 19:18:49,818", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.updated_at >= $1::TIMESTAMP WITH TIME ZONE \n LIMIT $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:49,818", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00021s] (datetime.datetime(2026, 2, 25, 11, 18, 49, 817952), 200)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:49,820", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:163:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,820", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:164:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,820", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:165:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,821", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:166:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,821", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:167:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,821", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:168:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,821", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:169:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,822", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:170:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,822", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:171:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,822", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:172:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,822", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:173:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,822", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:174:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,822", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:175:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,822", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:176:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,823", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:177:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,823", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:178:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,823", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:179:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,823", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:180:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,823", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:181:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,823", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:182:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,824", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:183:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,824", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:184:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,824", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:185:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,824", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:186:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,824", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:187:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,824", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:188:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,825", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:189:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,825", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:190:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,825", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:191:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,825", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:192:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,826", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:193:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,826", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:194:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,826", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:195:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,826", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:196:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,826", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:197:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,826", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:198:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,827", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:199:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,827", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:200:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,827", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:201:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,827", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:202:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,827", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:203:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,828", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:204:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,828", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:205:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,828", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:206:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,828", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:207:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,828", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:208:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,828", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:209:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,829", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:210:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,829", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:211:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,829", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:212:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,829", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:213:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,829", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:214:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,829", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:215:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,830", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:216:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,830", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:217:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,830", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:218:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,830", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:219:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,830", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:220:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,831", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:221:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,831", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:222:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,831", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:223:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,831", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:224:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,831", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:225:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,832", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:226:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,832", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:227:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,832", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:228:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:49,832", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 66 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 154}
{"timestamp": "2026-02-26 19:18:49,832", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 19:18:49,832", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 缓存预热完成 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 165}
{"timestamp": "2026-02-26 19:18:49,947", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 连接已关闭", "module": "agent_factory", "function": "close_checkpointer", "line": 90}
{"timestamp": "2026-02-26 19:18:49,963", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 19:18:49,963", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 118}
{"timestamp": "2026-02-26 19:18:52,651", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 104}
{"timestamp": "2026-02-26 19:18:52,694", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 初始化成功", "module": "agent_factory", "function": "init_checkpointer", "line": 72}
{"timestamp": "2026-02-26 19:18:52,694", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 107}
{"timestamp": "2026-02-26 19:18:52,694", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 109}
{"timestamp": "2026-02-26 19:18:52,694", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 开始缓存预热 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 159}
{"timestamp": "2026-02-26 19:18:52,695", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热会话列表缓存，限制 100 条", "module": "cache_warmup", "function": "warmup_conversations", "line": 26}
{"timestamp": "2026-02-26 19:18:52,746", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:52,746", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:52,747", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:52,747", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:52,748", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:52,748", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:52,748", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 19:18:52,753", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \n LIMIT $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:52,753", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00022s] (50,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:52,756", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversations:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,756", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 用户 1 的会话列表已预热", "module": "cache_warmup", "function": "warmup_conversations", "line": 56}
{"timestamp": "2026-02-26 19:18:52,757", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 60}
{"timestamp": "2026-02-26 19:18:52,757", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 19:18:52,757", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热置顶会话详情缓存", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 65}
{"timestamp": "2026-02-26 19:18:52,758", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 19:18:52,759", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.is_pinned = true", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:52,759", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00028s] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:52,760", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 102}
{"timestamp": "2026-02-26 19:18:52,760", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 19:18:52,761", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热最近 24 小时活跃的会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 114}
{"timestamp": "2026-02-26 19:18:52,761", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 19:18:52,762", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.updated_at >= $1::TIMESTAMP WITH TIME ZONE \n LIMIT $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:52,762", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00025s] (datetime.datetime(2026, 2, 25, 11, 18, 52, 761182), 200)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:52,763", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:163:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,763", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:164:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,764", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:165:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,764", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:166:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,764", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:167:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,764", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:168:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,764", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:169:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,765", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:170:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,765", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:171:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,765", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:172:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,765", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:173:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,765", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:174:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,766", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:175:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,766", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:176:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,766", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:177:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,766", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:178:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,766", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:179:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,766", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:180:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,767", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:181:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,767", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:182:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,767", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:183:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,767", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:184:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,767", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:185:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,767", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:186:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,768", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:187:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,768", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:188:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,768", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:189:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,768", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:190:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,768", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:191:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,769", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:192:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,769", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:193:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,769", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:194:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,769", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:195:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,769", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:196:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,770", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:197:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,770", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:198:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,770", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:199:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,770", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:200:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,770", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:201:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,771", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:202:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,771", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:203:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,771", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:204:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,771", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:205:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,771", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:206:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,771", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:207:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,772", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:208:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,772", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:209:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,772", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:210:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,772", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:211:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,772", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:212:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,772", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:213:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,773", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:214:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,773", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:215:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,773", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:216:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,773", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:217:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,773", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:218:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,773", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:219:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,774", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:220:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,774", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:221:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,774", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:222:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,774", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:223:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,774", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:224:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,775", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:225:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,775", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:226:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,775", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:227:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,775", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:228:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:52,775", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 66 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 154}
{"timestamp": "2026-02-26 19:18:52,775", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 19:18:52,776", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 缓存预热完成 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 165}
{"timestamp": "2026-02-26 19:18:52,880", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 连接已关闭", "module": "agent_factory", "function": "close_checkpointer", "line": 90}
{"timestamp": "2026-02-26 19:18:52,895", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 19:18:52,895", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 118}
{"timestamp": "2026-02-26 19:18:55,569", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 104}
{"timestamp": "2026-02-26 19:18:55,612", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 初始化成功", "module": "agent_factory", "function": "init_checkpointer", "line": 72}
{"timestamp": "2026-02-26 19:18:55,612", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 107}
{"timestamp": "2026-02-26 19:18:55,613", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 109}
{"timestamp": "2026-02-26 19:18:55,613", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 开始缓存预热 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 159}
{"timestamp": "2026-02-26 19:18:55,613", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热会话列表缓存，限制 100 条", "module": "cache_warmup", "function": "warmup_conversations", "line": 26}
{"timestamp": "2026-02-26 19:18:55,664", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:55,664", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:55,665", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:55,665", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:55,666", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:55,666", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:55,667", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 19:18:55,671", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \n LIMIT $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:55,671", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00028s] (50,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:55,675", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversations:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,675", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 用户 1 的会话列表已预热", "module": "cache_warmup", "function": "warmup_conversations", "line": 56}
{"timestamp": "2026-02-26 19:18:55,675", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 60}
{"timestamp": "2026-02-26 19:18:55,675", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 19:18:55,675", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热置顶会话详情缓存", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 65}
{"timestamp": "2026-02-26 19:18:55,676", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 19:18:55,677", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.is_pinned = true", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:55,677", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00021s] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:55,678", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 102}
{"timestamp": "2026-02-26 19:18:55,678", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 19:18:55,678", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热最近 24 小时活跃的会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 114}
{"timestamp": "2026-02-26 19:18:55,679", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 19:18:55,679", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.updated_at >= $1::TIMESTAMP WITH TIME ZONE \n LIMIT $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:55,679", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00019s] (datetime.datetime(2026, 2, 25, 11, 18, 55, 678974), 200)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:55,681", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:163:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,681", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:164:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,681", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:165:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,681", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:166:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,682", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:167:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,682", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:168:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,682", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:169:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,682", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:170:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,682", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:171:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,683", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:172:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,683", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:173:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,683", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:174:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,683", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:175:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,683", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:176:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,684", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:177:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,684", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:178:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,684", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:179:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,684", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:180:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,684", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:181:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,684", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:182:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,684", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:183:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,685", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:184:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,685", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:185:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,685", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:186:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,685", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:187:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,685", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:188:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,686", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:189:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,686", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:190:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,686", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:191:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,686", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:192:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,686", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:193:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,687", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:194:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,687", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:195:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,687", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:196:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,688", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:197:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,688", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:198:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,688", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:199:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,688", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:200:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,688", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:201:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,688", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:202:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,689", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:203:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,689", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:204:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,689", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:205:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,689", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:206:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,689", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:207:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,690", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:208:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,690", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:209:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,690", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:210:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,690", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:211:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,690", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:212:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,690", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:213:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,691", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:214:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,691", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:215:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,691", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:216:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,691", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:217:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,691", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:218:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,691", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:219:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,691", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:220:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,692", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:221:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,692", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:222:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,692", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:223:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,692", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:224:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,692", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:225:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,692", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:226:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,692", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:227:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,693", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:228:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:55,693", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 66 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 154}
{"timestamp": "2026-02-26 19:18:55,693", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 19:18:55,693", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 缓存预热完成 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 165}
{"timestamp": "2026-02-26 19:18:55,808", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 连接已关闭", "module": "agent_factory", "function": "close_checkpointer", "line": 90}
{"timestamp": "2026-02-26 19:18:55,825", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 19:18:55,826", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 118}
{"timestamp": "2026-02-26 19:18:58,464", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 104}
{"timestamp": "2026-02-26 19:18:58,509", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 初始化成功", "module": "agent_factory", "function": "init_checkpointer", "line": 72}
{"timestamp": "2026-02-26 19:18:58,509", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 107}
{"timestamp": "2026-02-26 19:18:58,509", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 109}
{"timestamp": "2026-02-26 19:18:58,510", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 开始缓存预热 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 159}
{"timestamp": "2026-02-26 19:18:58,510", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热会话列表缓存，限制 100 条", "module": "cache_warmup", "function": "warmup_conversations", "line": 26}
{"timestamp": "2026-02-26 19:18:58,563", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:58,564", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:58,565", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:58,565", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:58,566", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:58,566", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:58,566", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 19:18:58,571", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \n LIMIT $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:58,571", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00030s] (50,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:58,574", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversations:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,575", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 用户 1 的会话列表已预热", "module": "cache_warmup", "function": "warmup_conversations", "line": 56}
{"timestamp": "2026-02-26 19:18:58,575", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 60}
{"timestamp": "2026-02-26 19:18:58,575", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 19:18:58,575", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热置顶会话详情缓存", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 65}
{"timestamp": "2026-02-26 19:18:58,576", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 19:18:58,577", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.is_pinned = true", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:58,577", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00021s] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:58,578", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 102}
{"timestamp": "2026-02-26 19:18:58,578", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 19:18:58,578", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热最近 24 小时活跃的会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 114}
{"timestamp": "2026-02-26 19:18:58,579", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 19:18:58,580", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.updated_at >= $1::TIMESTAMP WITH TIME ZONE \n LIMIT $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:58,580", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00021s] (datetime.datetime(2026, 2, 25, 11, 18, 58, 579249), 200)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:18:58,581", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:163:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,581", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:164:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,582", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:165:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,582", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:166:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,582", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:167:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,582", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:168:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,582", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:169:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,583", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:170:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,583", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:171:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,583", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:172:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,583", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:173:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,583", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:174:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,583", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:175:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,584", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:176:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,584", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:177:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,584", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:178:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,584", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:179:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,584", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:180:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,584", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:181:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,584", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:182:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,585", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:183:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,585", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:184:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,585", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:185:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,585", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:186:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,585", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:187:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,585", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:188:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,586", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:189:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,586", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:190:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,586", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:191:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,586", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:192:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,587", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:193:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,587", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:194:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,587", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:195:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,587", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:196:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,587", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:197:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,587", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:198:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,588", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:199:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,588", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:200:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,588", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:201:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,588", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:202:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,588", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:203:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,589", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:204:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,589", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:205:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,589", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:206:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,589", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:207:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,589", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:208:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,589", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:209:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,589", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:210:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,590", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:211:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,590", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:212:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,590", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:213:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,590", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:214:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,590", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:215:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,590", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:216:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,591", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:217:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,591", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:218:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,591", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:219:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,591", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:220:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,591", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:221:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,591", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:222:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,592", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:223:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,592", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:224:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,592", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:225:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,592", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:226:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,593", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:227:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,593", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:228:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:18:58,593", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 66 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 154}
{"timestamp": "2026-02-26 19:18:58,593", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 19:18:58,594", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 缓存预热完成 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 165}
{"timestamp": "2026-02-26 19:18:58,703", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 连接已关闭", "module": "agent_factory", "function": "close_checkpointer", "line": 90}
{"timestamp": "2026-02-26 19:18:58,721", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 19:18:58,721", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 118}
{"timestamp": "2026-02-26 19:19:01,328", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 104}
{"timestamp": "2026-02-26 19:19:01,376", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 初始化成功", "module": "agent_factory", "function": "init_checkpointer", "line": 72}
{"timestamp": "2026-02-26 19:19:01,376", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 107}
{"timestamp": "2026-02-26 19:19:01,377", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 109}
{"timestamp": "2026-02-26 19:19:01,377", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 开始缓存预热 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 159}
{"timestamp": "2026-02-26 19:19:01,377", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热会话列表缓存，限制 100 条", "module": "cache_warmup", "function": "warmup_conversations", "line": 26}
{"timestamp": "2026-02-26 19:19:01,431", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:19:01,431", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:19:01,432", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:19:01,432", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:19:01,433", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:19:01,433", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:19:01,434", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 19:19:01,438", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \n LIMIT $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:19:01,438", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00027s] (50,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:19:01,442", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversations:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,442", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 用户 1 的会话列表已预热", "module": "cache_warmup", "function": "warmup_conversations", "line": 56}
{"timestamp": "2026-02-26 19:19:01,442", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 60}
{"timestamp": "2026-02-26 19:19:01,442", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 19:19:01,443", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热置顶会话详情缓存", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 65}
{"timestamp": "2026-02-26 19:19:01,443", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 19:19:01,444", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.is_pinned = true", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:19:01,444", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00024s] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:19:01,445", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 102}
{"timestamp": "2026-02-26 19:19:01,446", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 19:19:01,446", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热最近 24 小时活跃的会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 114}
{"timestamp": "2026-02-26 19:19:01,446", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 19:19:01,447", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.updated_at >= $1::TIMESTAMP WITH TIME ZONE \n LIMIT $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:19:01,447", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00023s] (datetime.datetime(2026, 2, 25, 11, 19, 1, 446567), 200)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 19:19:01,449", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:163:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,449", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:164:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,449", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:165:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,449", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:166:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,449", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:167:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,450", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:168:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,450", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:169:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,450", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:170:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,450", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:171:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,450", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:172:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,451", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:173:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,451", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:174:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,451", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:175:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,451", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:176:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,451", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:177:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,452", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:178:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,452", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:179:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,452", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:180:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,452", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:181:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,452", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:182:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,452", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:183:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,452", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:184:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,453", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:185:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,453", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:186:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,453", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:187:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,453", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:188:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,453", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:189:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,454", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:190:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,454", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:191:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,454", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:192:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,455", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:193:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,455", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:194:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,455", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:195:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,455", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:196:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,455", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:197:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,455", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:198:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,456", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:199:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,456", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:200:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,456", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:201:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,457", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:202:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,457", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:203:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,457", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:204:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,457", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:205:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,458", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:206:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,458", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:207:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,458", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:208:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,458", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:209:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,459", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:210:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,459", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:211:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,459", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:212:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,460", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:213:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,460", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:214:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,460", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:215:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,460", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:216:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,460", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:217:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,461", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:218:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,461", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:219:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,461", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:220:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,461", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:221:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,461", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:222:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,462", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:223:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,462", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:224:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,462", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:225:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,462", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:226:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,462", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:227:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,463", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:228:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 19:19:01,463", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 66 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 154}
{"timestamp": "2026-02-26 19:19:01,463", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 19:19:01,463", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 缓存预热完成 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 165}
{"timestamp": "2026-02-26 19:19:43,600", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 连接已关闭", "module": "agent_factory", "function": "close_checkpointer", "line": 90}
{"timestamp": "2026-02-26 19:19:43,617", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 19:19:43,617", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 118}
{"timestamp": "2026-02-26 20:02:27.832", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 46, "request_id": "-"}
{"timestamp": "2026-02-26 20:02:27.883", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver initialized", "module": "agent_factory", "function": "init_checkpointer", "line": 72, "request_id": "-"}
{"timestamp": "2026-02-26 20:02:27.883", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 49, "request_id": "-"}
{"timestamp": "2026-02-26 20:02:27.883", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 51, "request_id": "-"}
{"timestamp": "2026-02-26 20:02:27.884", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] === Starting cache warmup ===", "module": "cache_warmup", "function": "warmup_all", "line": 163, "request_id": "-"}
{"timestamp": "2026-02-26 20:02:27.884", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] Starting conversations warmup (limit: 100)", "module": "cache_warmup", "function": "warmup_conversations", "line": 26, "request_id": "-"}
{"timestamp": "2026-02-26 20:02:27.938", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "-"}
{"timestamp": "2026-02-26 20:02:27.938", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "-"}
{"timestamp": "2026-02-26 20:02:27.939", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "-"}
{"timestamp": "2026-02-26 20:02:27.939", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "-"}
{"timestamp": "2026-02-26 20:02:27.940", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "-"}
{"timestamp": "2026-02-26 20:02:27.940", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "-"}
{"timestamp": "2026-02-26 20:02:27.940", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710, "request_id": "-"}
{"timestamp": "2026-02-26 20:02:27.945", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \n LIMIT $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "-"}
{"timestamp": "2026-02-26 20:02:27.945", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00049s] (50,)", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "-"}
{"timestamp": "2026-02-26 20:02:27.949", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] Warmed 1/1 users", "module": "cache_warmup", "function": "warmup_conversations", "line": 61, "request_id": "-"}
{"timestamp": "2026-02-26 20:02:27.949", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716, "request_id": "-"}
{"timestamp": "2026-02-26 20:02:27.949", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] Starting pinned conversations warmup", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 66, "request_id": "-"}
{"timestamp": "2026-02-26 20:02:27.950", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710, "request_id": "-"}
{"timestamp": "2026-02-26 20:02:27.951", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.is_pinned = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "-"}
{"timestamp": "2026-02-26 20:02:27.951", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00023s] ()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "-"}
{"timestamp": "2026-02-26 20:02:27.952", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] Warmed 0/0 pinned conversations", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 104, "request_id": "-"}
{"timestamp": "2026-02-26 20:02:27.952", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716, "request_id": "-"}
{"timestamp": "2026-02-26 20:02:27.953", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710, "request_id": "-"}
{"timestamp": "2026-02-26 20:02:27.953", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.updated_at >= $1::TIMESTAMP WITH TIME ZONE \n LIMIT $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "-"}
{"timestamp": "2026-02-26 20:02:27.954", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00027s] (datetime.datetime(2026, 2, 25, 12, 2, 27, 953059), 200)", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "-"}
{"timestamp": "2026-02-26 20:02:27.963", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716, "request_id": "-"}
{"timestamp": "2026-02-26 20:02:27.963", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] === Cache warmup completed ===", "module": "cache_warmup", "function": "warmup_all", "line": 169, "request_id": "-"}
{"timestamp": "2026-02-26 20:02:56.100", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver connection closed", "module": "agent_factory", "function": "close_checkpointer", "line": 90, "request_id": "-"}
{"timestamp": "2026-02-26 20:02:56.115", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105, "request_id": "-"}
{"timestamp": "2026-02-26 20:02:56.115", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 60, "request_id": "-"}
{"timestamp": "2026-02-26 20:03:02.144", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 46, "request_id": "-"}
{"timestamp": "2026-02-26 20:03:02.187", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver initialized", "module": "agent_factory", "function": "init_checkpointer", "line": 72, "request_id": "-"}
{"timestamp": "2026-02-26 20:03:02.187", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 49, "request_id": "-"}
{"timestamp": "2026-02-26 20:03:02.187", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 51, "request_id": "-"}
{"timestamp": "2026-02-26 20:03:02.188", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] === Starting cache warmup ===", "module": "cache_warmup", "function": "warmup_all", "line": 163, "request_id": "-"}
{"timestamp": "2026-02-26 20:03:02.188", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] Starting conversations warmup (limit: 100)", "module": "cache_warmup", "function": "warmup_conversations", "line": 26, "request_id": "-"}
{"timestamp": "2026-02-26 20:03:02.239", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "-"}
{"timestamp": "2026-02-26 20:03:02.240", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "-"}
{"timestamp": "2026-02-26 20:03:02.241", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "-"}
{"timestamp": "2026-02-26 20:03:02.241", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "-"}
{"timestamp": "2026-02-26 20:03:02.241", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "-"}
{"timestamp": "2026-02-26 20:03:02.242", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "-"}
{"timestamp": "2026-02-26 20:03:02.242", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710, "request_id": "-"}
{"timestamp": "2026-02-26 20:03:02.246", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \n LIMIT $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "-"}
{"timestamp": "2026-02-26 20:03:02.247", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00040s] (50,)", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "-"}
{"timestamp": "2026-02-26 20:03:02.250", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] Warmed 1/1 users", "module": "cache_warmup", "function": "warmup_conversations", "line": 61, "request_id": "-"}
{"timestamp": "2026-02-26 20:03:02.251", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716, "request_id": "-"}
{"timestamp": "2026-02-26 20:03:02.251", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] Starting pinned conversations warmup", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 66, "request_id": "-"}
{"timestamp": "2026-02-26 20:03:02.252", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710, "request_id": "-"}
{"timestamp": "2026-02-26 20:03:02.252", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.is_pinned = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "-"}
{"timestamp": "2026-02-26 20:03:02.253", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00026s] ()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "-"}
{"timestamp": "2026-02-26 20:03:02.254", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] Warmed 0/0 pinned conversations", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 104, "request_id": "-"}
{"timestamp": "2026-02-26 20:03:02.254", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716, "request_id": "-"}
{"timestamp": "2026-02-26 20:03:02.255", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710, "request_id": "-"}
{"timestamp": "2026-02-26 20:03:02.255", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.updated_at >= $1::TIMESTAMP WITH TIME ZONE \n LIMIT $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "-"}
{"timestamp": "2026-02-26 20:03:02.256", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00025s] (datetime.datetime(2026, 2, 25, 12, 3, 2, 255004), 200)", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "-"}
{"timestamp": "2026-02-26 20:03:02.261", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716, "request_id": "-"}
{"timestamp": "2026-02-26 20:03:02.261", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] === Cache warmup completed ===", "module": "cache_warmup", "function": "warmup_all", "line": 169, "request_id": "-"}
{"timestamp": "2026-02-26 20:05:11.329", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver connection closed", "module": "agent_factory", "function": "close_checkpointer", "line": 90, "request_id": "-"}
{"timestamp": "2026-02-26 20:05:11.345", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105, "request_id": "-"}
{"timestamp": "2026-02-26 20:05:11.346", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 60, "request_id": "-"}
{"timestamp": "2026-02-26 20:05:14.011", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 46, "request_id": "-"}
{"timestamp": "2026-02-26 20:05:14.055", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver initialized", "module": "agent_factory", "function": "init_checkpointer", "line": 72, "request_id": "-"}
{"timestamp": "2026-02-26 20:05:14.055", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 49, "request_id": "-"}
{"timestamp": "2026-02-26 20:05:14.055", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 51, "request_id": "-"}
{"timestamp": "2026-02-26 20:05:14.056", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] === Starting cache warmup ===", "module": "cache_warmup", "function": "warmup_all", "line": 163, "request_id": "-"}
{"timestamp": "2026-02-26 20:05:14.056", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] Starting conversations warmup (limit: 100)", "module": "cache_warmup", "function": "warmup_conversations", "line": 26, "request_id": "-"}
{"timestamp": "2026-02-26 20:05:14.106", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "-"}
{"timestamp": "2026-02-26 20:05:14.107", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "-"}
{"timestamp": "2026-02-26 20:05:14.108", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "-"}
{"timestamp": "2026-02-26 20:05:14.108", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "-"}
{"timestamp": "2026-02-26 20:05:14.109", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "-"}
{"timestamp": "2026-02-26 20:05:14.109", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "-"}
{"timestamp": "2026-02-26 20:05:14.109", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710, "request_id": "-"}
{"timestamp": "2026-02-26 20:05:14.114", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \n LIMIT $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "-"}
{"timestamp": "2026-02-26 20:05:14.115", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00039s] (50,)", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "-"}
{"timestamp": "2026-02-26 20:05:14.118", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] Warmed 1/1 users", "module": "cache_warmup", "function": "warmup_conversations", "line": 61, "request_id": "-"}
{"timestamp": "2026-02-26 20:05:14.118", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716, "request_id": "-"}
{"timestamp": "2026-02-26 20:05:14.118", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] Starting pinned conversations warmup", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 66, "request_id": "-"}
{"timestamp": "2026-02-26 20:05:14.119", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710, "request_id": "-"}
{"timestamp": "2026-02-26 20:05:14.120", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.is_pinned = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "-"}
{"timestamp": "2026-02-26 20:05:14.120", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00040s] ()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "-"}
{"timestamp": "2026-02-26 20:05:14.121", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] Warmed 0/0 pinned conversations", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 104, "request_id": "-"}
{"timestamp": "2026-02-26 20:05:14.122", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716, "request_id": "-"}
{"timestamp": "2026-02-26 20:05:14.122", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710, "request_id": "-"}
{"timestamp": "2026-02-26 20:05:14.123", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.updated_at >= $1::TIMESTAMP WITH TIME ZONE \n LIMIT $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "-"}
{"timestamp": "2026-02-26 20:05:14.123", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00024s] (datetime.datetime(2026, 2, 25, 12, 5, 14, 122555), 200)", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "-"}
{"timestamp": "2026-02-26 20:05:14.128", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716, "request_id": "-"}
{"timestamp": "2026-02-26 20:05:14.128", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] === Cache warmup completed ===", "module": "cache_warmup", "function": "warmup_all", "line": 169, "request_id": "-"}
{"timestamp": "2026-02-26 20:06:05.461", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver connection closed", "module": "agent_factory", "function": "close_checkpointer", "line": 90, "request_id": "-"}
{"timestamp": "2026-02-26 20:06:05.479", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105, "request_id": "-"}
{"timestamp": "2026-02-26 20:06:05.480", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 60, "request_id": "-"}
{"timestamp": "2026-02-26 20:06:09.409", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 46, "request_id": "-"}
{"timestamp": "2026-02-26 20:06:09.452", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver initialized", "module": "agent_factory", "function": "init_checkpointer", "line": 72, "request_id": "-"}
{"timestamp": "2026-02-26 20:06:09.452", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 49, "request_id": "-"}
{"timestamp": "2026-02-26 20:06:09.453", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 51, "request_id": "-"}
{"timestamp": "2026-02-26 20:06:09.453", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] === Starting cache warmup ===", "module": "cache_warmup", "function": "warmup_all", "line": 163, "request_id": "-"}
{"timestamp": "2026-02-26 20:06:09.453", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] Starting conversations warmup (limit: 100)", "module": "cache_warmup", "function": "warmup_conversations", "line": 26, "request_id": "-"}
{"timestamp": "2026-02-26 20:06:09.504", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "-"}
{"timestamp": "2026-02-26 20:06:09.504", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "-"}
{"timestamp": "2026-02-26 20:06:09.505", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "-"}
{"timestamp": "2026-02-26 20:06:09.505", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "-"}
{"timestamp": "2026-02-26 20:06:09.506", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "-"}
{"timestamp": "2026-02-26 20:06:09.506", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "-"}
{"timestamp": "2026-02-26 20:06:09.506", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710, "request_id": "-"}
{"timestamp": "2026-02-26 20:06:09.511", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \n LIMIT $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "-"}
{"timestamp": "2026-02-26 20:06:09.511", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00037s] (50,)", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "-"}
{"timestamp": "2026-02-26 20:06:09.514", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] Warmed 1/1 users", "module": "cache_warmup", "function": "warmup_conversations", "line": 61, "request_id": "-"}
{"timestamp": "2026-02-26 20:06:09.514", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716, "request_id": "-"}
{"timestamp": "2026-02-26 20:06:09.515", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] Starting pinned conversations warmup", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 66, "request_id": "-"}
{"timestamp": "2026-02-26 20:06:09.515", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710, "request_id": "-"}
{"timestamp": "2026-02-26 20:06:09.516", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.is_pinned = true", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "-"}
{"timestamp": "2026-02-26 20:06:09.516", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00026s] ()", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "-"}
{"timestamp": "2026-02-26 20:06:09.517", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] Warmed 0/0 pinned conversations", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 104, "request_id": "-"}
{"timestamp": "2026-02-26 20:06:09.518", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716, "request_id": "-"}
{"timestamp": "2026-02-26 20:06:09.518", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710, "request_id": "-"}
{"timestamp": "2026-02-26 20:06:09.519", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.updated_at >= $1::TIMESTAMP WITH TIME ZONE \n LIMIT $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "-"}
{"timestamp": "2026-02-26 20:06:09.519", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00027s] (datetime.datetime(2026, 2, 25, 12, 6, 9, 518519), 200)", "module": "base", "function": "_execute_context", "line": 1846, "request_id": "-"}
{"timestamp": "2026-02-26 20:06:09.525", "level": "INFO", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716, "request_id": "-"}
{"timestamp": "2026-02-26 20:06:09.526", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] === Cache warmup completed ===", "module": "cache_warmup", "function": "warmup_all", "line": 169, "request_id": "-"}
{"timestamp": "2026-02-26 20:07:12.832", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver connection closed", "module": "agent_factory", "function": "close_checkpointer", "line": 90, "request_id": "-"}
{"timestamp": "2026-02-26 20:07:12.850", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105, "request_id": "-"}
{"timestamp": "2026-02-26 20:07:12.851", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 60, "request_id": "-"}
{"timestamp": "2026-02-26 20:07:15.546", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 46, "request_id": "-"}
{"timestamp": "2026-02-26 20:07:15.591", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver initialized", "module": "agent_factory", "function": "init_checkpointer", "line": 72, "request_id": "-"}
{"timestamp": "2026-02-26 20:07:15.591", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 49, "request_id": "-"}
{"timestamp": "2026-02-26 20:07:15.591", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 51, "request_id": "-"}
{"timestamp": "2026-02-26 20:07:15.592", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] === Starting cache warmup ===", "module": "cache_warmup", "function": "warmup_all", "line": 163, "request_id": "-"}
{"timestamp": "2026-02-26 20:07:15.592", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] Starting conversations warmup (limit: 100)", "module": "cache_warmup", "function": "warmup_conversations", "line": 26, "request_id": "-"}
{"timestamp": "2026-02-26 20:07:15.655", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] Warmed 1/1 users", "module": "cache_warmup", "function": "warmup_conversations", "line": 61, "request_id": "-"}
{"timestamp": "2026-02-26 20:07:15.655", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] Starting pinned conversations warmup", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 66, "request_id": "-"}
{"timestamp": "2026-02-26 20:07:15.658", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] Warmed 0/0 pinned conversations", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 104, "request_id": "-"}
{"timestamp": "2026-02-26 20:07:15.664", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] === Cache warmup completed ===", "module": "cache_warmup", "function": "warmup_all", "line": 169, "request_id": "-"}
{"timestamp": "2026-02-26 20:07:34.085", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver connection closed", "module": "agent_factory", "function": "close_checkpointer", "line": 90, "request_id": "-"}
{"timestamp": "2026-02-26 20:07:34.102", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105, "request_id": "-"}
{"timestamp": "2026-02-26 20:07:34.102", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 60, "request_id": "-"}
{"timestamp": "2026-02-26 20:07:36.812", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 46, "request_id": "-"}
{"timestamp": "2026-02-26 20:07:36.857", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver initialized", "module": "agent_factory", "function": "init_checkpointer", "line": 72, "request_id": "-"}
{"timestamp": "2026-02-26 20:07:36.857", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 49, "request_id": "-"}
{"timestamp": "2026-02-26 20:07:36.858", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 51, "request_id": "-"}
{"timestamp": "2026-02-26 20:07:36.858", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] === Starting cache warmup ===", "module": "cache_warmup", "function": "warmup_all", "line": 163, "request_id": "-"}
{"timestamp": "2026-02-26 20:07:36.858", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] Starting conversations warmup (limit: 100)", "module": "cache_warmup", "function": "warmup_conversations", "line": 26, "request_id": "-"}
{"timestamp": "2026-02-26 20:07:37.021", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] Warmed 1/1 users", "module": "cache_warmup", "function": "warmup_conversations", "line": 61, "request_id": "-"}
{"timestamp": "2026-02-26 20:07:37.022", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] Starting pinned conversations warmup", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 66, "request_id": "-"}
{"timestamp": "2026-02-26 20:07:37.024", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] Warmed 0/0 pinned conversations", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 104, "request_id": "-"}
{"timestamp": "2026-02-26 20:07:37.031", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] === Cache warmup completed ===", "module": "cache_warmup", "function": "warmup_all", "line": 169, "request_id": "-"}
{"timestamp": "2026-02-26 20:07:48.510", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver connection closed", "module": "agent_factory", "function": "close_checkpointer", "line": 90, "request_id": "-"}
{"timestamp": "2026-02-26 20:07:48.526", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105, "request_id": "-"}
{"timestamp": "2026-02-26 20:07:48.526", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 60, "request_id": "-"}
{"timestamp": "2026-02-26 20:07:51.184", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 46, "request_id": "-"}
{"timestamp": "2026-02-26 20:07:51.230", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver initialized", "module": "agent_factory", "function": "init_checkpointer", "line": 72, "request_id": "-"}
{"timestamp": "2026-02-26 20:07:51.230", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 49, "request_id": "-"}
{"timestamp": "2026-02-26 20:07:51.231", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 51, "request_id": "-"}
{"timestamp": "2026-02-26 20:07:51.231", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] === Starting cache warmup ===", "module": "cache_warmup", "function": "warmup_all", "line": 163, "request_id": "-"}
{"timestamp": "2026-02-26 20:07:51.231", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] Starting conversations warmup (limit: 100)", "module": "cache_warmup", "function": "warmup_conversations", "line": 26, "request_id": "-"}
{"timestamp": "2026-02-26 20:07:51.293", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] Warmed 1/1 users", "module": "cache_warmup", "function": "warmup_conversations", "line": 61, "request_id": "-"}
{"timestamp": "2026-02-26 20:07:51.293", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] Starting pinned conversations warmup", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 66, "request_id": "-"}
{"timestamp": "2026-02-26 20:07:51.296", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] Warmed 0/0 pinned conversations", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 104, "request_id": "-"}
{"timestamp": "2026-02-26 20:07:51.306", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] === Cache warmup completed ===", "module": "cache_warmup", "function": "warmup_all", "line": 169, "request_id": "-"}
{"timestamp": "2026-02-26 20:08:01.955", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver connection closed", "module": "agent_factory", "function": "close_checkpointer", "line": 90, "request_id": "-"}
{"timestamp": "2026-02-26 20:08:01.971", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105, "request_id": "-"}
{"timestamp": "2026-02-26 20:08:01.972", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 60, "request_id": "-"}
{"timestamp": "2026-02-26 20:08:06.880", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 46, "request_id": "-"}
{"timestamp": "2026-02-26 20:08:06.924", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver initialized", "module": "agent_factory", "function": "init_checkpointer", "line": 72, "request_id": "-"}
{"timestamp": "2026-02-26 20:08:06.924", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 49, "request_id": "-"}
{"timestamp": "2026-02-26 20:08:06.925", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 51, "request_id": "-"}
{"timestamp": "2026-02-26 20:08:06.925", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] === Starting cache warmup ===", "module": "cache_warmup", "function": "warmup_all", "line": 163, "request_id": "-"}
{"timestamp": "2026-02-26 20:08:06.925", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] Starting conversations warmup (limit: 100)", "module": "cache_warmup", "function": "warmup_conversations", "line": 26, "request_id": "-"}
{"timestamp": "2026-02-26 20:08:06.986", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] Warmed 1/1 users", "module": "cache_warmup", "function": "warmup_conversations", "line": 61, "request_id": "-"}
{"timestamp": "2026-02-26 20:08:06.986", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] Starting pinned conversations warmup", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 66, "request_id": "-"}
{"timestamp": "2026-02-26 20:08:06.989", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] Warmed 0/0 pinned conversations", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 104, "request_id": "-"}
{"timestamp": "2026-02-26 20:08:06.996", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] === Cache warmup completed ===", "module": "cache_warmup", "function": "warmup_all", "line": 169, "request_id": "-"}
{"timestamp": "2026-02-26 20:11:04.512", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver connection closed", "module": "agent_factory", "function": "close_checkpointer", "line": 90, "request_id": "-"}
{"timestamp": "2026-02-26 20:11:04.528", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105, "request_id": "-"}
{"timestamp": "2026-02-26 20:11:04.528", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 60, "request_id": "-"}
{"timestamp": "2026-02-26 20:11:07.219", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 46, "request_id": "-"}
{"timestamp": "2026-02-26 20:11:07.265", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver initialized", "module": "agent_factory", "function": "init_checkpointer", "line": 72, "request_id": "-"}
{"timestamp": "2026-02-26 20:11:07.265", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 49, "request_id": "-"}
{"timestamp": "2026-02-26 20:11:07.265", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 51, "request_id": "-"}
{"timestamp": "2026-02-26 20:11:07.266", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] === Starting cache warmup ===", "module": "cache_warmup", "function": "warmup_all", "line": 163, "request_id": "-"}
{"timestamp": "2026-02-26 20:11:07.266", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] Starting conversations warmup (limit: 100)", "module": "cache_warmup", "function": "warmup_conversations", "line": 26, "request_id": "-"}
{"timestamp": "2026-02-26 20:11:07.329", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] Warmed 1/1 users", "module": "cache_warmup", "function": "warmup_conversations", "line": 61, "request_id": "-"}
{"timestamp": "2026-02-26 20:11:07.330", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] Starting pinned conversations warmup", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 66, "request_id": "-"}
{"timestamp": "2026-02-26 20:11:07.333", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] Warmed 0/0 pinned conversations", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 104, "request_id": "-"}
{"timestamp": "2026-02-26 20:11:07.340", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] === Cache warmup completed ===", "module": "cache_warmup", "function": "warmup_all", "line": 169, "request_id": "-"}
{"timestamp": "2026-02-26 20:11:18.564", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver connection closed", "module": "agent_factory", "function": "close_checkpointer", "line": 90, "request_id": "-"}
{"timestamp": "2026-02-26 20:11:18.580", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105, "request_id": "-"}
{"timestamp": "2026-02-26 20:11:18.580", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 60, "request_id": "-"}
{"timestamp": "2026-02-26 20:11:21.243", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 46, "request_id": "-"}
{"timestamp": "2026-02-26 20:11:21.288", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver initialized", "module": "agent_factory", "function": "init_checkpointer", "line": 72, "request_id": "-"}
{"timestamp": "2026-02-26 20:11:21.288", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 49, "request_id": "-"}
{"timestamp": "2026-02-26 20:11:21.288", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 51, "request_id": "-"}
{"timestamp": "2026-02-26 20:11:21.288", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] === Starting cache warmup ===", "module": "cache_warmup", "function": "warmup_all", "line": 163, "request_id": "-"}
{"timestamp": "2026-02-26 20:11:21.288", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] Starting conversations warmup (limit: 100)", "module": "cache_warmup", "function": "warmup_conversations", "line": 26, "request_id": "-"}
{"timestamp": "2026-02-26 20:11:21.370", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] Warmed 1/1 users", "module": "cache_warmup", "function": "warmup_conversations", "line": 61, "request_id": "-"}
{"timestamp": "2026-02-26 20:11:21.371", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] Starting pinned conversations warmup", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 66, "request_id": "-"}
{"timestamp": "2026-02-26 20:11:21.374", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] Warmed 0/0 pinned conversations", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 104, "request_id": "-"}
{"timestamp": "2026-02-26 20:11:21.382", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] === Cache warmup completed ===", "module": "cache_warmup", "function": "warmup_all", "line": 169, "request_id": "-"}
{"timestamp": "2026-02-26 20:11:33.868", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver connection closed", "module": "agent_factory", "function": "close_checkpointer", "line": 90, "request_id": "-"}
{"timestamp": "2026-02-26 20:11:33.885", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105, "request_id": "-"}
{"timestamp": "2026-02-26 20:11:33.885", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 60, "request_id": "-"}
{"timestamp": "2026-02-26 20:11:36.568", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 47, "request_id": "-"}
{"timestamp": "2026-02-26 20:11:36.612", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver initialized", "module": "agent_factory", "function": "init_checkpointer", "line": 72, "request_id": "-"}
{"timestamp": "2026-02-26 20:11:36.612", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 50, "request_id": "-"}
{"timestamp": "2026-02-26 20:11:36.612", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 52, "request_id": "-"}
{"timestamp": "2026-02-26 20:11:36.612", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] === Starting cache warmup ===", "module": "cache_warmup", "function": "warmup_all", "line": 163, "request_id": "-"}
{"timestamp": "2026-02-26 20:11:36.612", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] Starting conversations warmup (limit: 100)", "module": "cache_warmup", "function": "warmup_conversations", "line": 26, "request_id": "-"}
{"timestamp": "2026-02-26 20:11:36.675", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] Warmed 1/1 users", "module": "cache_warmup", "function": "warmup_conversations", "line": 61, "request_id": "-"}
{"timestamp": "2026-02-26 20:11:36.675", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] Starting pinned conversations warmup", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 66, "request_id": "-"}
{"timestamp": "2026-02-26 20:11:36.678", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] Warmed 0/0 pinned conversations", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 104, "request_id": "-"}
{"timestamp": "2026-02-26 20:11:36.686", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] === Cache warmup completed ===", "module": "cache_warmup", "function": "warmup_all", "line": 169, "request_id": "-"}
{"timestamp": "2026-02-26 20:12:18.101", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver connection closed", "module": "agent_factory", "function": "close_checkpointer", "line": 90, "request_id": "-"}
{"timestamp": "2026-02-26 20:12:18.117", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105, "request_id": "-"}
{"timestamp": "2026-02-26 20:12:18.117", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 61, "request_id": "-"}
{"timestamp": "2026-02-26 20:12:21.713", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 47, "request_id": "-"}
{"timestamp": "2026-02-26 20:12:21.758", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver initialized", "module": "agent_factory", "function": "init_checkpointer", "line": 72, "request_id": "-"}
{"timestamp": "2026-02-26 20:12:21.758", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 50, "request_id": "-"}
{"timestamp": "2026-02-26 20:12:21.759", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 52, "request_id": "-"}
{"timestamp": "2026-02-26 20:12:21.759", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] === Starting cache warmup ===", "module": "cache_warmup", "function": "warmup_all", "line": 163, "request_id": "-"}
{"timestamp": "2026-02-26 20:12:21.759", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] Starting conversations warmup (limit: 100)", "module": "cache_warmup", "function": "warmup_conversations", "line": 26, "request_id": "-"}
{"timestamp": "2026-02-26 20:12:21.821", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] Warmed 1/1 users", "module": "cache_warmup", "function": "warmup_conversations", "line": 61, "request_id": "-"}
{"timestamp": "2026-02-26 20:12:21.822", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] Starting pinned conversations warmup", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 66, "request_id": "-"}
{"timestamp": "2026-02-26 20:12:21.824", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] Warmed 0/0 pinned conversations", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 104, "request_id": "-"}
{"timestamp": "2026-02-26 20:12:21.836", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] === Cache warmup completed ===", "module": "cache_warmup", "function": "warmup_all", "line": 169, "request_id": "-"}
{"timestamp": "2026-02-26 20:13:05.215", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver connection closed", "module": "agent_factory", "function": "close_checkpointer", "line": 90, "request_id": "-"}
{"timestamp": "2026-02-26 20:13:05.234", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105, "request_id": "-"}
{"timestamp": "2026-02-26 20:13:05.235", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 61, "request_id": "-"}
{"timestamp": "2026-02-26 20:13:07.793", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 47, "request_id": "-"}
{"timestamp": "2026-02-26 20:13:07.838", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver initialized", "module": "agent_factory", "function": "init_checkpointer", "line": 72, "request_id": "-"}
{"timestamp": "2026-02-26 20:13:07.838", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 50, "request_id": "-"}
{"timestamp": "2026-02-26 20:13:07.838", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 52, "request_id": "-"}
{"timestamp": "2026-02-26 20:13:07.838", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] === Starting cache warmup ===", "module": "cache_warmup", "function": "warmup_all", "line": 163, "request_id": "-"}
{"timestamp": "2026-02-26 20:13:07.838", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] Starting conversations warmup (limit: 100)", "module": "cache_warmup", "function": "warmup_conversations", "line": 26, "request_id": "-"}
{"timestamp": "2026-02-26 20:13:07.899", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] Warmed 1/1 users", "module": "cache_warmup", "function": "warmup_conversations", "line": 61, "request_id": "-"}
{"timestamp": "2026-02-26 20:13:07.899", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] Starting pinned conversations warmup", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 66, "request_id": "-"}
{"timestamp": "2026-02-26 20:13:07.902", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] Warmed 0/0 pinned conversations", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 104, "request_id": "-"}
{"timestamp": "2026-02-26 20:13:07.909", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] === Cache warmup completed ===", "module": "cache_warmup", "function": "warmup_all", "line": 169, "request_id": "-"}
{"timestamp": "2026-02-26 20:13:32.643", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver connection closed", "module": "agent_factory", "function": "close_checkpointer", "line": 90, "request_id": "-"}
{"timestamp": "2026-02-26 20:13:32.661", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105, "request_id": "-"}
{"timestamp": "2026-02-26 20:13:32.661", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 61, "request_id": "-"}
{"timestamp": "2026-02-26 20:13:46.274", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 47, "request_id": "-"}
{"timestamp": "2026-02-26 20:13:46.320", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver initialized", "module": "agent_factory", "function": "init_checkpointer", "line": 72, "request_id": "-"}
{"timestamp": "2026-02-26 20:13:46.320", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 50, "request_id": "-"}
{"timestamp": "2026-02-26 20:13:46.320", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 52, "request_id": "-"}
{"timestamp": "2026-02-26 20:13:46.320", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] === Starting cache warmup ===", "module": "cache_warmup", "function": "warmup_all", "line": 163, "request_id": "-"}
{"timestamp": "2026-02-26 20:13:46.320", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] Starting conversations warmup (limit: 100)", "module": "cache_warmup", "function": "warmup_conversations", "line": 26, "request_id": "-"}
{"timestamp": "2026-02-26 20:13:46.388", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] Warmed 1/1 users", "module": "cache_warmup", "function": "warmup_conversations", "line": 61, "request_id": "-"}
{"timestamp": "2026-02-26 20:13:46.388", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] Starting pinned conversations warmup", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 66, "request_id": "-"}
{"timestamp": "2026-02-26 20:13:46.391", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] Warmed 0/0 pinned conversations", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 104, "request_id": "-"}
{"timestamp": "2026-02-26 20:13:46.398", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] === Cache warmup completed ===", "module": "cache_warmup", "function": "warmup_all", "line": 169, "request_id": "-"}
{"timestamp": "2026-02-26 20:14:16.884", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver connection closed", "module": "agent_factory", "function": "close_checkpointer", "line": 90, "request_id": "-"}
{"timestamp": "2026-02-26 20:14:16.900", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105, "request_id": "-"}
{"timestamp": "2026-02-26 20:14:16.900", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 61, "request_id": "-"}
{"timestamp": "2026-02-26 20:14:24.444", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 47, "request_id": "-"}
{"timestamp": "2026-02-26 20:14:24.488", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver initialized", "module": "agent_factory", "function": "init_checkpointer", "line": 72, "request_id": "-"}
{"timestamp": "2026-02-26 20:14:24.488", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 50, "request_id": "-"}
{"timestamp": "2026-02-26 20:14:24.489", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 52, "request_id": "-"}
{"timestamp": "2026-02-26 20:14:24.489", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] === Starting cache warmup ===", "module": "cache_warmup", "function": "warmup_all", "line": 163, "request_id": "-"}
{"timestamp": "2026-02-26 20:14:24.489", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] Starting conversations warmup (limit: 100)", "module": "cache_warmup", "function": "warmup_conversations", "line": 26, "request_id": "-"}
{"timestamp": "2026-02-26 20:14:24.551", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] Warmed 1/1 users", "module": "cache_warmup", "function": "warmup_conversations", "line": 61, "request_id": "-"}
{"timestamp": "2026-02-26 20:14:24.552", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] Starting pinned conversations warmup", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 66, "request_id": "-"}
{"timestamp": "2026-02-26 20:14:24.555", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] Warmed 0/0 pinned conversations", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 104, "request_id": "-"}
{"timestamp": "2026-02-26 20:14:24.561", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] === Cache warmup completed ===", "module": "cache_warmup", "function": "warmup_all", "line": 169, "request_id": "-"}
{"timestamp": "2026-02-26 20:14:39.537", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver connection closed", "module": "agent_factory", "function": "close_checkpointer", "line": 90, "request_id": "-"}
{"timestamp": "2026-02-26 20:14:39.540", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105, "request_id": "-"}
{"timestamp": "2026-02-26 20:14:39.540", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 61, "request_id": "-"}
{"timestamp": "2026-02-26 20:14:42,624", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 104}
{"timestamp": "2026-02-26 20:14:42,673", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 初始化成功", "module": "agent_factory", "function": "init_checkpointer", "line": 72}
{"timestamp": "2026-02-26 20:14:42,673", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 107}
{"timestamp": "2026-02-26 20:14:42,674", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 109}
{"timestamp": "2026-02-26 20:14:42,674", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 开始缓存预热 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 159}
{"timestamp": "2026-02-26 20:14:42,674", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热会话列表缓存，限制 100 条", "module": "cache_warmup", "function": "warmup_conversations", "line": 26}
{"timestamp": "2026-02-26 20:14:42,742", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversations:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,742", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 用户 1 的会话列表已预热", "module": "cache_warmup", "function": "warmup_conversations", "line": 56}
{"timestamp": "2026-02-26 20:14:42,742", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 60}
{"timestamp": "2026-02-26 20:14:42,743", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热置顶会话详情缓存", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 65}
{"timestamp": "2026-02-26 20:14:42,745", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 102}
{"timestamp": "2026-02-26 20:14:42,746", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热最近 24 小时活跃的会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 114}
{"timestamp": "2026-02-26 20:14:42,749", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:163:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,749", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:164:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,749", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:165:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,750", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:166:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,750", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:167:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,750", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:168:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,750", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:169:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,751", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:170:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,751", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:171:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,751", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:172:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,751", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:173:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,751", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:174:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,752", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:175:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,752", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:176:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,752", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:177:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,753", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:178:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,753", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:179:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,753", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:180:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,754", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:181:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,754", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:182:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,754", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:183:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,754", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:184:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,755", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:185:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,755", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:186:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,755", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:187:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,755", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:188:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,756", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:189:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,756", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:190:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,756", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:191:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,757", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:192:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,757", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:193:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,757", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:194:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,757", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:195:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,758", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:196:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,758", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:197:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,758", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:198:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,759", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:199:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,759", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:200:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,759", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:201:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,759", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:202:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,760", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:203:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,760", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:204:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,760", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:205:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,761", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:206:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,761", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:207:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,761", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:208:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,761", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:209:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,762", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:210:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,762", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:211:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,762", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:212:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,762", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:213:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,763", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:214:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,763", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:215:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,763", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:216:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,764", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:217:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,764", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:218:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,764", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:219:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,764", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:220:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,765", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:221:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,765", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:222:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,765", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:223:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,766", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:224:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,766", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:225:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,766", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:226:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,766", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:227:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,767", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:228:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:42,767", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 66 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 154}
{"timestamp": "2026-02-26 20:14:42,767", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 缓存预热完成 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 165}
{"timestamp": "2026-02-26 20:14:42,870", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 连接已关闭", "module": "agent_factory", "function": "close_checkpointer", "line": 90}
{"timestamp": "2026-02-26 20:14:42,886", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 20:14:42,887", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 118}
{"timestamp": "2026-02-26 20:14:45,542", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 104}
{"timestamp": "2026-02-26 20:14:45,585", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 初始化成功", "module": "agent_factory", "function": "init_checkpointer", "line": 72}
{"timestamp": "2026-02-26 20:14:45,585", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 107}
{"timestamp": "2026-02-26 20:14:45,586", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 109}
{"timestamp": "2026-02-26 20:14:45,586", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 开始缓存预热 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 159}
{"timestamp": "2026-02-26 20:14:45,586", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热会话列表缓存，限制 100 条", "module": "cache_warmup", "function": "warmup_conversations", "line": 26}
{"timestamp": "2026-02-26 20:14:45,647", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversations:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,647", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 用户 1 的会话列表已预热", "module": "cache_warmup", "function": "warmup_conversations", "line": 56}
{"timestamp": "2026-02-26 20:14:45,647", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 60}
{"timestamp": "2026-02-26 20:14:45,647", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热置顶会话详情缓存", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 65}
{"timestamp": "2026-02-26 20:14:45,650", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 102}
{"timestamp": "2026-02-26 20:14:45,651", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热最近 24 小时活跃的会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 114}
{"timestamp": "2026-02-26 20:14:45,653", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:163:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,653", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:164:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,653", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:165:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,654", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:166:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,654", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:167:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,654", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:168:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,655", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:169:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,655", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:170:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,658", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:171:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,659", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:172:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,659", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:173:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,659", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:174:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,660", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:175:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,660", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:176:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,660", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:177:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,660", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:178:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,661", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:179:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,661", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:180:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,661", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:181:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,661", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:182:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,662", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:183:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,662", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:184:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,662", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:185:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,662", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:186:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,663", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:187:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,663", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:188:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,663", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:189:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,663", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:190:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,664", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:191:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,664", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:192:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,664", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:193:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,665", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:194:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,665", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:195:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,665", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:196:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,665", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:197:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,666", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:198:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,666", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:199:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,666", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:200:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,666", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:201:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,667", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:202:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,667", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:203:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,667", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:204:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,667", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:205:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,668", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:206:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,668", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:207:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,668", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:208:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,668", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:209:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,669", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:210:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,669", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:211:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,670", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:212:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,674", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:213:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,675", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:214:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,675", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:215:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,675", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:216:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,676", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:217:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,676", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:218:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,676", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:219:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,676", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:220:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,676", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:221:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,677", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:222:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,677", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:223:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,677", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:224:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,677", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:225:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,678", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:226:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,678", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:227:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,678", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:228:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:14:45,679", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 66 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 154}
{"timestamp": "2026-02-26 20:14:45,679", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 缓存预热完成 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 165}
{"timestamp": "2026-02-26 20:20:28,762", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 连接已关闭", "module": "agent_factory", "function": "close_checkpointer", "line": 90}
{"timestamp": "2026-02-26 20:20:28,780", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 20:20:28,781", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 118}
{"timestamp": "2026-02-26 20:20:31,601", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 104}
{"timestamp": "2026-02-26 20:20:31,645", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 初始化成功", "module": "agent_factory", "function": "init_checkpointer", "line": 72}
{"timestamp": "2026-02-26 20:20:31,646", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 107}
{"timestamp": "2026-02-26 20:20:31,646", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 109}
{"timestamp": "2026-02-26 20:20:31,646", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 开始缓存预热 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 159}
{"timestamp": "2026-02-26 20:20:31,646", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热会话列表缓存，限制 100 条", "module": "cache_warmup", "function": "warmup_conversations", "line": 26}
{"timestamp": "2026-02-26 20:20:31,707", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversations:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:20:31,707", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 用户 1 的会话列表已预热", "module": "cache_warmup", "function": "warmup_conversations", "line": 56}
{"timestamp": "2026-02-26 20:20:31,707", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 60}
{"timestamp": "2026-02-26 20:20:31,708", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热置顶会话详情缓存", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 65}
{"timestamp": "2026-02-26 20:20:31,710", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 102}
{"timestamp": "2026-02-26 20:20:31,711", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热最近 24 小时活跃的会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 114}
{"timestamp": "2026-02-26 20:20:31,713", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:163:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:20:31,714", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:164:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:20:31,714", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:165:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 20:20:31,715", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:165:1: {'id': 165, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T08:34:32.543620+00:00', 'updated_at': '2026-02-25T08:34:32.543620+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 20:20:31,715", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:165:1, TTL=3899s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 20:20:31,716", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:166:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:20:31,716", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:167:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:20:31,716", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:168:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:20:31,717", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:169:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 20:20:31,718", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:169:1: {'id': 169, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T09:17:18.775757+00:00', 'updated_at': '2026-02-25T09:17:18.775757+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 20:20:31,722", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:169:1, TTL=3631s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 20:20:31,722", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:170:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 20:20:31,723", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:170:1: {'id': 170, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T09:17:55.698363+00:00', 'updated_at': '2026-02-25T09:17:55.698363+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 20:20:31,723", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:170:1, TTL=3756s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 20:20:31,724", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:171:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:20:31,724", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:172:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:20:31,724", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:173:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 20:20:31,725", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:173:1: {'id': 173, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T10:38:49.101647+00:00', 'updated_at': '2026-02-25T10:38:49.101647+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 20:20:31,725", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:173:1, TTL=3738s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 20:20:31,726", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:174:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:20:31,726", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:175:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 20:20:31,727", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:175:1: {'id': 175, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T10:50:02.518522+00:00', 'updated_at': '2026-02-25T10:50:02.518522+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 20:20:31,727", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:175:1, TTL=3728s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 20:20:31,727", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:176:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 20:20:31,728", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:176:1: {'id': 176, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T10:52:03.862026+00:00', 'updated_at': '2026-02-25T10:52:03.862026+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 20:20:31,728", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:176:1, TTL=3672s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 20:20:31,729", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:177:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 20:20:31,729", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:177:1: {'id': 177, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T11:56:14.684224+00:00', 'updated_at': '2026-02-25T11:56:14.684224+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 20:20:31,730", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:177:1, TTL=3794s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 20:20:31,730", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:178:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 20:20:31,730", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:178:1: {'id': 178, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T12:01:08.835467+00:00', 'updated_at': '2026-02-25T12:01:08.835467+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 20:20:31,731", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:178:1, TTL=3689s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 20:20:31,731", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:179:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 20:20:31,732", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:179:1: {'id': 179, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T12:09:15.894955+00:00', 'updated_at': '2026-02-25T12:09:15.894955+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 20:20:31,732", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:179:1, TTL=3845s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 20:20:31,732", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:180:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:20:31,733", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:181:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:20:31,733", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:182:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:20:31,734", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:183:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 20:20:31,734", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:183:1: {'id': 183, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T12:27:32.234206+00:00', 'updated_at': '2026-02-25T12:27:32.234206+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 20:20:31,735", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:183:1, TTL=3860s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 20:20:31,735", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:184:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:20:31,735", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:185:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:20:31,735", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:186:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 20:20:31,736", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:186:1: {'id': 186, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T13:10:59.604351+00:00', 'updated_at': '2026-02-25T13:10:59.604351+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 20:20:31,736", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:186:1, TTL=3602s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 20:20:31,737", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:187:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 20:20:31,737", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:187:1: {'id': 187, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T13:12:52.546721+00:00', 'updated_at': '2026-02-25T13:12:52.546721+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 20:20:31,738", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:187:1, TTL=3680s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 20:20:31,738", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:188:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:20:31,738", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:189:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:20:31,739", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:190:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:20:31,739", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:191:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 20:20:31,740", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:191:1: {'id': 191, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T15:03:14.211782+00:00', 'updated_at': '2026-02-25T15:03:14.211782+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 20:20:31,740", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:191:1, TTL=3665s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 20:20:31,740", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:192:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 20:20:31,741", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:192:1: {'id': 192, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T15:35:18.417589+00:00', 'updated_at': '2026-02-25T15:35:18.417589+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 20:20:31,741", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:192:1, TTL=3635s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 20:20:31,742", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:193:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:20:31,742", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:194:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 20:20:31,743", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:194:1: {'id': 194, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T15:37:53.427931+00:00', 'updated_at': '2026-02-25T15:37:53.427931+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 20:20:31,743", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:194:1, TTL=3732s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 20:20:31,744", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:195:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 20:20:31,744", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:195:1: {'id': 195, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T15:38:11.237687+00:00', 'updated_at': '2026-02-25T15:38:11.237687+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 20:20:31,744", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:195:1, TTL=3727s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 20:20:31,745", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:196:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 20:20:31,746", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:196:1: {'id': 196, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T15:44:33.502770+00:00', 'updated_at': '2026-02-25T15:44:33.502770+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 20:20:31,746", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:196:1, TTL=3680s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 20:20:31,746", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:197:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:20:31,747", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:198:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:20:31,747", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:199:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 20:20:31,747", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:199:1: {'id': 199, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T16:45:32.330297+00:00', 'updated_at': '2026-02-25T16:45:32.330297+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 20:20:31,748", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:199:1, TTL=3844s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 20:20:31,748", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:200:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:20:31,748", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:201:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:20:31,749", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:202:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 20:20:31,749", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:202:1: {'id': 202, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T16:55:04.663265+00:00', 'updated_at': '2026-02-25T16:55:04.663265+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 20:20:31,750", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:202:1, TTL=3873s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 20:20:31,753", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:203:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:20:31,754", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:204:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:20:31,755", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:205:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 20:20:31,755", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:205:1: {'id': 205, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:12:01.339171+00:00', 'updated_at': '2026-02-25T17:12:01.339171+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 20:20:31,756", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:205:1, TTL=3654s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 20:20:31,756", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:206:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:20:31,756", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:207:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 20:20:31,757", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:207:1: {'id': 207, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:18:22.171051+00:00', 'updated_at': '2026-02-25T17:18:22.171051+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 20:20:31,757", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:207:1, TTL=3782s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 20:20:31,758", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:208:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 20:20:31,758", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:208:1: {'id': 208, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:24:46.995898+00:00', 'updated_at': '2026-02-25T17:24:46.995898+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 20:20:31,759", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:208:1, TTL=3820s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 20:20:31,759", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:209:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:20:31,759", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:210:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:20:31,760", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:211:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:20:31,760", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:212:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 20:20:31,761", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:212:1: {'id': 212, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T17:41:10.457397+00:00', 'updated_at': '2026-02-25T17:41:10.457397+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 20:20:31,761", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:212:1, TTL=3791s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 20:20:31,761", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:213:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:20:31,762", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:214:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:20:31,762", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:215:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:20:31,762", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:216:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:20:31,762", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:217:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 20:20:31,763", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:217:1: {'id': 217, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T18:27:50.787750+00:00', 'updated_at': '2026-02-25T18:27:50.787750+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 20:20:31,763", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:217:1, TTL=3684s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 20:20:31,764", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:218:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:20:31,764", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:219:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:20:31,764", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:220:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 20:20:31,765", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:220:1: {'id': 220, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-25T20:05:52.426575+00:00', 'updated_at': '2026-02-25T20:05:52.426575+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 20:20:31,765", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:220:1, TTL=3822s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 20:20:31,766", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:221:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 20:20:31,767", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:221:1: {'id': 221, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-26T09:42:18.712045+00:00', 'updated_at': '2026-02-26T09:42:18.712045+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 20:20:31,771", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:221:1, TTL=3700s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 20:20:31,771", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:222:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 20:20:31,772", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:222:1: {'id': 222, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-26T09:46:52.728826+00:00', 'updated_at': '2026-02-26T09:46:52.728826+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 20:20:31,772", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:222:1, TTL=3861s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 20:20:31,773", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:223:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 20:20:31,773", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:223:1: {'id': 223, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-26T10:06:02.054684+00:00', 'updated_at': '2026-02-26T10:06:02.054684+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 20:20:31,774", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:223:1, TTL=3882s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 20:20:31,774", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:224:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:20:31,774", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:225:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 20:20:31,775", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:225:1: {'id': 225, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-26T10:08:58.236057+00:00', 'updated_at': '2026-02-26T10:08:58.236057+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 20:20:31,775", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:225:1, TTL=3807s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 20:20:31,776", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:226:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 20:20:31,776", "level": "INFO", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:226:1: {'id': 226, 'user_id': 1, 'title': '新会话', 'is_pinned': False, 'model_name': None, 'created_at': '2026-02-26T10:10:40.442180+00:00', 'updated_at': '2026-02-26T10:10:40.442180+00:00'}", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 20:20:31,777", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:226:1, TTL=3848s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 20:20:31,777", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:227:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:20:31,777", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:228:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:20:31,777", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 66 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 154}
{"timestamp": "2026-02-26 20:20:31,778", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 缓存预热完成 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 165}
{"timestamp": "2026-02-26 20:21:00,522", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 连接已关闭", "module": "agent_factory", "function": "close_checkpointer", "line": 90}
{"timestamp": "2026-02-26 20:21:00,537", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 20:21:00,538", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 118}
{"timestamp": "2026-02-26 20:21:03,158", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 104}
{"timestamp": "2026-02-26 20:21:03,201", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 初始化成功", "module": "agent_factory", "function": "init_checkpointer", "line": 72}
{"timestamp": "2026-02-26 20:21:03,202", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 107}
{"timestamp": "2026-02-26 20:21:03,202", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 109}
{"timestamp": "2026-02-26 20:21:03,202", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 开始缓存预热 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 159}
{"timestamp": "2026-02-26 20:21:03,202", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热会话列表缓存，限制 100 条", "module": "cache_warmup", "function": "warmup_conversations", "line": 26}
{"timestamp": "2026-02-26 20:21:03,262", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversations:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:21:03,262", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 用户 1 的会话列表已预热", "module": "cache_warmup", "function": "warmup_conversations", "line": 56}
{"timestamp": "2026-02-26 20:21:03,262", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 60}
{"timestamp": "2026-02-26 20:21:03,263", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热置顶会话详情缓存", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 65}
{"timestamp": "2026-02-26 20:21:03,265", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 102}
{"timestamp": "2026-02-26 20:21:03,266", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热最近 24 小时活跃的会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 114}
{"timestamp": "2026-02-26 20:21:03,268", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:163:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:21:03,268", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:164:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:21:03,269", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:165:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:21:03,269", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:166:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:21:03,269", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:167:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:21:03,270", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:168:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:21:03,270", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:169:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:21:03,270", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:170:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:21:03,270", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:171:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:21:03,271", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:172:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:21:03,271", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:173:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:21:03,271", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:174:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 20:21:03,272", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:174:1, TTL=3849s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 20:21:03,273", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:175:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:21:03,273", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:176:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:21:03,273", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:177:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:21:03,274", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:178:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:21:03,274", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:179:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:21:03,274", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:180:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:21:03,274", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:181:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:21:03,275", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:182:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:21:03,275", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:183:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:21:03,275", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:184:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 20:21:03,276", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:184:1, TTL=3829s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 20:21:03,277", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:185:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:21:03,277", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:186:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:21:03,277", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:187:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:21:03,277", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:188:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:21:03,278", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:189:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:21:03,278", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:190:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:21:03,278", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:191:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:21:03,278", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:192:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:21:03,278", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:193:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:21:03,279", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:194:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:21:03,279", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:195:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:21:03,279", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:196:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:21:03,279", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:197:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:21:03,280", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:198:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:21:03,280", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:199:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:21:03,280", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:200:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:21:03,280", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:201:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:21:03,281", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:202:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:21:03,281", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:203:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:21:03,281", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:204:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 20:21:03,282", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:204:1, TTL=3888s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 20:21:03,282", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:205:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:21:03,283", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:206:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:21:03,283", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:207:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:21:03,283", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:208:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:21:03,283", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:209:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:21:03,284", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:210:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 20:21:03,285", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:210:1, TTL=3718s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 20:21:03,285", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:211:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:21:03,285", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:212:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:21:03,285", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:213:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:21:03,286", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:214:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:21:03,286", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:215:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 20:21:03,287", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:215:1, TTL=3779s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 20:21:03,287", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:216:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 20:21:03,288", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:216:1, TTL=3816s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 20:21:03,288", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:217:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:21:03,289", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:218:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 20:21:03,290", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:218:1, TTL=3809s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 20:21:03,290", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:219:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:21:03,290", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:220:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:21:03,290", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:221:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:21:03,291", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:222:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:21:03,291", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:223:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:21:03,291", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:224:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:21:03,291", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:225:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:21:03,292", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:226:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:21:03,292", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:227:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:21:03,292", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:228:1", "module": "redis", "function": "cache_aside", "line": 125}
{"timestamp": "2026-02-26 20:21:03,292", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 66 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 154}
{"timestamp": "2026-02-26 20:21:03,293", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 缓存预热完成 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 165}
{"timestamp": "2026-02-26 20:21:14,687", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 连接已关闭", "module": "agent_factory", "function": "close_checkpointer", "line": 90}
{"timestamp": "2026-02-26 20:21:14,703", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 20:21:14,704", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 118}
{"timestamp": "2026-02-26 20:21:17,372", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 104}
{"timestamp": "2026-02-26 20:21:17,416", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 初始化成功", "module": "agent_factory", "function": "init_checkpointer", "line": 72}
{"timestamp": "2026-02-26 20:21:17,416", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 107}
{"timestamp": "2026-02-26 20:21:17,417", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 109}
{"timestamp": "2026-02-26 20:21:17,417", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 开始缓存预热 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 159}
{"timestamp": "2026-02-26 20:21:17,417", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热会话列表缓存，限制 100 条", "module": "cache_warmup", "function": "warmup_conversations", "line": 26}
{"timestamp": "2026-02-26 20:21:17,480", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 用户 1 的会话列表已预热", "module": "cache_warmup", "function": "warmup_conversations", "line": 56}
{"timestamp": "2026-02-26 20:21:17,480", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 60}
{"timestamp": "2026-02-26 20:21:17,480", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热置顶会话详情缓存", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 65}
{"timestamp": "2026-02-26 20:21:17,483", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 102}
{"timestamp": "2026-02-26 20:21:17,484", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热最近 24 小时活跃的会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 114}
{"timestamp": "2026-02-26 20:21:17,490", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:172:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 20:21:17,493", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:172:1, TTL=3783s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 20:21:17,498", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中，从数据库获取: conversation:219:1", "module": "redis", "function": "cache_aside", "line": 155}
{"timestamp": "2026-02-26 20:21:17,500", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:219:1, TTL=3622s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 20:21:17,501", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 66 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 154}
{"timestamp": "2026-02-26 20:21:17,502", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 缓存预热完成 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 165}
{"timestamp": "2026-02-26 20:21:37,984", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 连接已关闭", "module": "agent_factory", "function": "close_checkpointer", "line": 90}
{"timestamp": "2026-02-26 20:21:38,001", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 20:21:38,001", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 118}
{"timestamp": "2026-02-26 20:21:40,729", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 104}
{"timestamp": "2026-02-26 20:21:40,774", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 初始化成功", "module": "agent_factory", "function": "init_checkpointer", "line": 72}
{"timestamp": "2026-02-26 20:21:40,775", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 107}
{"timestamp": "2026-02-26 20:21:40,775", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 109}
{"timestamp": "2026-02-26 20:21:40,775", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 开始缓存预热 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 159}
{"timestamp": "2026-02-26 20:21:40,775", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热会话列表缓存，限制 100 条", "module": "cache_warmup", "function": "warmup_conversations", "line": 26}
{"timestamp": "2026-02-26 20:21:40,839", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 用户 1 的会话列表已预热", "module": "cache_warmup", "function": "warmup_conversations", "line": 56}
{"timestamp": "2026-02-26 20:21:40,839", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 60}
{"timestamp": "2026-02-26 20:21:40,839", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热置顶会话详情缓存", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 65}
{"timestamp": "2026-02-26 20:21:40,842", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 102}
{"timestamp": "2026-02-26 20:21:40,843", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热最近 24 小时活跃的会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 114}
{"timestamp": "2026-02-26 20:21:40,849", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:185:1, TTL=3773s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 20:21:40,850", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:189:1, TTL=3611s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 20:21:40,852", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:193:1, TTL=3846s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 20:21:40,853", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:203:1, TTL=3767s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 20:21:40,856", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:211:1, TTL=3645s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 20:21:40,858", "level": "INFO", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:224:1, TTL=3812s", "module": "redis", "function": "cache_aside", "line": 172}
{"timestamp": "2026-02-26 20:21:40,858", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 66 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 154}
{"timestamp": "2026-02-26 20:21:40,859", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 缓存预热完成 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 165}
{"timestamp": "2026-02-26 20:21:56,346", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 连接已关闭", "module": "agent_factory", "function": "close_checkpointer", "line": 90}
{"timestamp": "2026-02-26 20:21:56,362", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 20:21:56,362", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 118}
{"timestamp": "2026-02-26 20:21:59,142", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 104}
{"timestamp": "2026-02-26 20:21:59,187", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 初始化成功", "module": "agent_factory", "function": "init_checkpointer", "line": 72}
{"timestamp": "2026-02-26 20:21:59,187", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 107}
{"timestamp": "2026-02-26 20:21:59,187", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 109}
{"timestamp": "2026-02-26 20:21:59,187", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 开始缓存预热 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 159}
{"timestamp": "2026-02-26 20:21:59,187", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热会话列表缓存，限制 100 条", "module": "cache_warmup", "function": "warmup_conversations", "line": 26}
{"timestamp": "2026-02-26 20:21:59,367", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 用户 1 的会话列表已预热", "module": "cache_warmup", "function": "warmup_conversations", "line": 56}
{"timestamp": "2026-02-26 20:21:59,367", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 60}
{"timestamp": "2026-02-26 20:21:59,368", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热置顶会话详情缓存", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 65}
{"timestamp": "2026-02-26 20:21:59,370", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 102}
{"timestamp": "2026-02-26 20:21:59,371", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热最近 24 小时活跃的会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 114}
{"timestamp": "2026-02-26 20:21:59,380", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 66 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 154}
{"timestamp": "2026-02-26 20:21:59,380", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 缓存预热完成 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 165}
{"timestamp": "2026-02-26 20:22:09,245", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 连接已关闭", "module": "agent_factory", "function": "close_checkpointer", "line": 90}
{"timestamp": "2026-02-26 20:22:09,261", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 20:22:09,261", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 118}
{"timestamp": "2026-02-26 20:22:11,994", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 104}
{"timestamp": "2026-02-26 20:22:12,039", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 初始化成功", "module": "agent_factory", "function": "init_checkpointer", "line": 72}
{"timestamp": "2026-02-26 20:22:12,039", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 107}
{"timestamp": "2026-02-26 20:22:12,040", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 109}
{"timestamp": "2026-02-26 20:22:12,040", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 开始缓存预热 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 159}
{"timestamp": "2026-02-26 20:22:12,040", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热会话列表缓存，限制 100 条", "module": "cache_warmup", "function": "warmup_conversations", "line": 26}
{"timestamp": "2026-02-26 20:22:12,109", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 用户 1 的会话列表已预热", "module": "cache_warmup", "function": "warmup_conversations", "line": 56}
{"timestamp": "2026-02-26 20:22:12,109", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 60}
{"timestamp": "2026-02-26 20:22:12,110", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热置顶会话详情缓存", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 65}
{"timestamp": "2026-02-26 20:22:12,115", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 102}
{"timestamp": "2026-02-26 20:22:12,115", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热最近 24 小时活跃的会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 114}
{"timestamp": "2026-02-26 20:22:12,130", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 66 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 154}
{"timestamp": "2026-02-26 20:22:12,131", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 缓存预热完成 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 165}
{"timestamp": "2026-02-26 20:22:51,079", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 连接已关闭", "module": "agent_factory", "function": "close_checkpointer", "line": 90}
{"timestamp": "2026-02-26 20:22:51,096", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 20:22:51,097", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 118}
{"timestamp": "2026-02-26 20:22:53,815", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 104}
{"timestamp": "2026-02-26 20:22:53,861", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 初始化成功", "module": "agent_factory", "function": "init_checkpointer", "line": 72}
{"timestamp": "2026-02-26 20:22:53,861", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 107}
{"timestamp": "2026-02-26 20:22:53,861", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 109}
{"timestamp": "2026-02-26 20:22:53,861", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 开始缓存预热 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 160}
{"timestamp": "2026-02-26 20:22:53,927", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1/1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 61}
{"timestamp": "2026-02-26 20:22:53,928", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热置顶会话详情缓存", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 66}
{"timestamp": "2026-02-26 20:22:53,930", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 103}
{"timestamp": "2026-02-26 20:22:53,931", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热最近 24 小时活跃的会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 115}
{"timestamp": "2026-02-26 20:22:53,947", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 66 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 155}
{"timestamp": "2026-02-26 20:22:53,947", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 缓存预热完成 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 166}
{"timestamp": "2026-02-26 20:23:16,570", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 连接已关闭", "module": "agent_factory", "function": "close_checkpointer", "line": 90}
{"timestamp": "2026-02-26 20:23:16,588", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 20:23:16,588", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 118}
{"timestamp": "2026-02-26 20:23:19,313", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 104}
{"timestamp": "2026-02-26 20:23:19,357", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 初始化成功", "module": "agent_factory", "function": "init_checkpointer", "line": 72}
{"timestamp": "2026-02-26 20:23:19,358", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 107}
{"timestamp": "2026-02-26 20:23:19,358", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 109}
{"timestamp": "2026-02-26 20:23:19,358", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 开始缓存预热 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 161}
{"timestamp": "2026-02-26 20:23:19,427", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1/1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 61}
{"timestamp": "2026-02-26 20:23:19,428", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0/0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 104}
{"timestamp": "2026-02-26 20:23:19,429", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热最近 24 小时活跃的会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 116}
{"timestamp": "2026-02-26 20:23:19,445", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 66 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 156}
{"timestamp": "2026-02-26 20:23:19,445", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 缓存预热完成 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 167}
{"timestamp": "2026-02-26 20:23:42,405", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 连接已关闭", "module": "agent_factory", "function": "close_checkpointer", "line": 90}
{"timestamp": "2026-02-26 20:23:42,407", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 20:23:42,407", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 118}
{"timestamp": "2026-02-26 20:23:45,067", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 104}
{"timestamp": "2026-02-26 20:23:45,111", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 初始化成功", "module": "agent_factory", "function": "init_checkpointer", "line": 72}
{"timestamp": "2026-02-26 20:23:45,111", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 107}
{"timestamp": "2026-02-26 20:23:45,111", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 109}
{"timestamp": "2026-02-26 20:23:45,111", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 开始缓存预热 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 163}
{"timestamp": "2026-02-26 20:23:45,173", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1/1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 61}
{"timestamp": "2026-02-26 20:23:45,176", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0/0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 104}
{"timestamp": "2026-02-26 20:23:45,185", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 66/66 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 158}
{"timestamp": "2026-02-26 20:23:45,186", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] ========== 缓存预热完成 ==========", "module": "cache_warmup", "function": "warmup_all", "line": 169}
{"timestamp": "2026-02-26 20:23:55,369", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 连接已关闭", "module": "agent_factory", "function": "close_checkpointer", "line": 90}
{"timestamp": "2026-02-26 20:23:55,386", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 20:23:55,387", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 118}
{"timestamp": "2026-02-26 20:23:58,049", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 104}
{"timestamp": "2026-02-26 20:23:58,094", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 初始化成功", "module": "agent_factory", "function": "init_checkpointer", "line": 72}
{"timestamp": "2026-02-26 20:23:58,094", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 107}
{"timestamp": "2026-02-26 20:23:58,094", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 109}
{"timestamp": "2026-02-26 20:23:58,094", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始缓存预热", "module": "cache_warmup", "function": "warmup_all", "line": 163}
{"timestamp": "2026-02-26 20:23:58,155", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1/1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 61}
{"timestamp": "2026-02-26 20:23:58,158", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0/0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 104}
{"timestamp": "2026-02-26 20:23:58,165", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 66/66 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 158}
{"timestamp": "2026-02-26 20:23:58,166", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 缓存预热完成", "module": "cache_warmup", "function": "warmup_all", "line": 169}
{"timestamp": "2026-02-26 20:24:19,315", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 连接已关闭", "module": "agent_factory", "function": "close_checkpointer", "line": 90}
{"timestamp": "2026-02-26 20:24:19,333", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 20:24:19,333", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 118}
{"timestamp": "2026-02-26 20:24:22,028", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 104}
{"timestamp": "2026-02-26 20:24:22,184", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 初始化成功", "module": "agent_factory", "function": "init_checkpointer", "line": 72}
{"timestamp": "2026-02-26 20:24:22,184", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 107}
{"timestamp": "2026-02-26 20:24:22,185", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 109}
{"timestamp": "2026-02-26 20:24:22,185", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始缓存预热", "module": "cache_warmup", "function": "warmup_all", "line": 163}
{"timestamp": "2026-02-26 20:24:22,248", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1/1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 61}
{"timestamp": "2026-02-26 20:24:22,252", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0/0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 104}
{"timestamp": "2026-02-26 20:24:22,258", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 66/66 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 158}
{"timestamp": "2026-02-26 20:24:22,259", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 缓存预热完成", "module": "cache_warmup", "function": "warmup_all", "line": 169}
{"timestamp": "2026-02-26 20:24:35,849", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 连接已关闭", "module": "agent_factory", "function": "close_checkpointer", "line": 90}
{"timestamp": "2026-02-26 20:24:35,865", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 20:24:35,865", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 118}
{"timestamp": "2026-02-26 20:24:38,510", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 104}
{"timestamp": "2026-02-26 20:24:38,553", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 初始化成功", "module": "agent_factory", "function": "init_checkpointer", "line": 72}
{"timestamp": "2026-02-26 20:24:38,553", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 107}
{"timestamp": "2026-02-26 20:24:38,554", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 109}
{"timestamp": "2026-02-26 20:24:38,554", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始缓存预热", "module": "cache_warmup", "function": "warmup_all", "line": 163}
{"timestamp": "2026-02-26 20:24:38,615", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1/1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 61}
{"timestamp": "2026-02-26 20:24:38,618", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0/0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 104}
{"timestamp": "2026-02-26 20:24:38,624", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 66/66 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 158}
{"timestamp": "2026-02-26 20:24:38,624", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 缓存预热完成", "module": "cache_warmup", "function": "warmup_all", "line": 169}
{"timestamp": "2026-02-26 20:24:55,733", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 连接已关闭", "module": "agent_factory", "function": "close_checkpointer", "line": 90}
{"timestamp": "2026-02-26 20:24:55,749", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 20:24:55,749", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 118}
{"timestamp": "2026-02-26 20:24:58,594", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 104}
{"timestamp": "2026-02-26 20:24:58,643", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 初始化成功", "module": "agent_factory", "function": "init_checkpointer", "line": 72}
{"timestamp": "2026-02-26 20:24:58,643", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 107}
{"timestamp": "2026-02-26 20:24:58,644", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 109}
{"timestamp": "2026-02-26 20:24:58,644", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始缓存预热", "module": "cache_warmup", "function": "warmup_all", "line": 163}
{"timestamp": "2026-02-26 20:24:58,710", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1/1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 61}
{"timestamp": "2026-02-26 20:24:58,713", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0/0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 104}
{"timestamp": "2026-02-26 20:24:58,720", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 66/66 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 158}
{"timestamp": "2026-02-26 20:24:58,721", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 缓存预热完成", "module": "cache_warmup", "function": "warmup_all", "line": 169}
{"timestamp": "2026-02-26 20:25:13,146", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 连接已关闭", "module": "agent_factory", "function": "close_checkpointer", "line": 90}
{"timestamp": "2026-02-26 20:25:13,148", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 20:25:13,148", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 118}
{"timestamp": "2026-02-26 20:25:15,852", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 104}
{"timestamp": "2026-02-26 20:25:15,896", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 初始化成功", "module": "agent_factory", "function": "init_checkpointer", "line": 72}
{"timestamp": "2026-02-26 20:25:15,897", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 107}
{"timestamp": "2026-02-26 20:25:15,897", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 109}
{"timestamp": "2026-02-26 20:25:15,897", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始缓存预热", "module": "cache_warmup", "function": "warmup_all", "line": 163}
{"timestamp": "2026-02-26 20:25:16,066", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1/1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 61}
{"timestamp": "2026-02-26 20:25:16,068", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0/0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 104}
{"timestamp": "2026-02-26 20:25:16,075", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 66/66 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 158}
{"timestamp": "2026-02-26 20:25:16,075", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 缓存预热完成", "module": "cache_warmup", "function": "warmup_all", "line": 169}
{"timestamp": "2026-02-26 20:28:02,009", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 连接已关闭", "module": "agent_factory", "function": "close_checkpointer", "line": 90}
{"timestamp": "2026-02-26 20:28:02,025", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 20:28:02,025", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 118}
{"timestamp": "2026-02-26 20:28:04,706", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 104}
{"timestamp": "2026-02-26 20:28:04,753", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 初始化成功", "module": "agent_factory", "function": "init_checkpointer", "line": 72}
{"timestamp": "2026-02-26 20:28:04,754", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 107}
{"timestamp": "2026-02-26 20:28:04,754", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 109}
{"timestamp": "2026-02-26 20:28:04,754", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始缓存预热", "module": "cache_warmup", "function": "warmup_all", "line": 163}
{"timestamp": "2026-02-26 20:28:04,818", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1/1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 61}
{"timestamp": "2026-02-26 20:28:04,821", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0/0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 104}
{"timestamp": "2026-02-26 20:28:04,828", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 66/66 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 158}
{"timestamp": "2026-02-26 20:28:04,828", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 缓存预热完成", "module": "cache_warmup", "function": "warmup_all", "line": 169}
{"timestamp": "2026-02-26 20:28:20,944", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 连接已关闭", "module": "agent_factory", "function": "close_checkpointer", "line": 90}
{"timestamp": "2026-02-26 20:28:20,961", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 20:28:20,961", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 118}
{"timestamp": "2026-02-26 20:28:23,641", "level": "INFO", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 104}
{"timestamp": "2026-02-26 20:28:23,688", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 初始化成功", "module": "agent_factory", "function": "init_checkpointer", "line": 72}
{"timestamp": "2026-02-26 20:28:23,688", "level": "INFO", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 107}
{"timestamp": "2026-02-26 20:28:23,688", "level": "INFO", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 109}
{"timestamp": "2026-02-26 20:28:23,688", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始缓存预热", "module": "cache_warmup", "function": "warmup_all", "line": 163}
{"timestamp": "2026-02-26 20:28:23,751", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1/1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 61}
{"timestamp": "2026-02-26 20:28:23,754", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0/0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 104}
{"timestamp": "2026-02-26 20:28:23,761", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 66/66 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 158}
{"timestamp": "2026-02-26 20:28:23,762", "level": "INFO", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 缓存预热完成", "module": "cache_warmup", "function": "warmup_all", "line": 169}
{"timestamp": "2026-02-26 20:28:56,633", "level": "INFO", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver 连接已关闭", "module": "agent_factory", "function": "close_checkpointer", "line": 90}
{"timestamp": "2026-02-26 20:28:56,636", "level": "INFO", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 20:28:56,636", "level": "INFO", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 118}
{"timestamp": "2026-02-26 13:07:35,441", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 45}
{"timestamp": "2026-02-26 13:07:35,501", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver initialized", "module": "agent_factory", "function": "init_checkpointer", "line": 72}
{"timestamp": "2026-02-26 13:07:35,501", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2026-02-26 13:07:35,501", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 50}
{"timestamp": "2026-02-26 13:07:35,502", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始缓存预热", "module": "cache_warmup", "function": "warmup_all", "line": 163}
{"timestamp": "2026-02-26 13:07:35,502", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热会话列表缓存，限制 100 条", "module": "cache_warmup", "function": "warmup_conversations", "line": 26}
{"timestamp": "2026-02-26 13:07:35,588", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 13:07:35,588", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 13:07:35,590", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 13:07:35,590", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 13:07:35,591", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 13:07:35,591", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 13:07:35,592", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 13:07:35,622", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \n LIMIT $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 13:07:35,625", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00283s] (50,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 13:07:35,644", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversations:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,647", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1/1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 61}
{"timestamp": "2026-02-26 13:07:35,648", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 13:07:35,652", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热置顶会话详情缓存", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 66}
{"timestamp": "2026-02-26 13:07:35,657", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 13:07:35,663", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.is_pinned = true", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 13:07:35,665", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00180s] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 13:07:35,668", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0/0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 104}
{"timestamp": "2026-02-26 13:07:35,668", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 13:07:35,669", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热最近 24 小时活跃的会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 116}
{"timestamp": "2026-02-26 13:07:35,670", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 13:07:35,671", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.updated_at >= $1::TIMESTAMP WITH TIME ZONE \n LIMIT $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 13:07:35,671", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00050s] (datetime.datetime(2026, 2, 25, 13, 7, 35, 669820), 200)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 13:07:35,675", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:163:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,676", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:164:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,676", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:165:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,677", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:166:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,678", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:167:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,678", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:168:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,679", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:169:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,679", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:170:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,680", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:171:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,680", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:172:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,681", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:173:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,682", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:174:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,682", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:175:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,683", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:176:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,683", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:177:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,684", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:178:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,684", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:179:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,685", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:180:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,685", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:181:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,686", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:182:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,686", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:183:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,687", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:184:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,687", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:185:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,688", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:186:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,689", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:187:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,689", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:188:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,690", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:189:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,690", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:190:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,691", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:191:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,692", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:192:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,692", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:193:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,693", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:194:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,694", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:195:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,694", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:196:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,695", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:197:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,695", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:198:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,696", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:199:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,696", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:200:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,697", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:201:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,697", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:202:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,698", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:203:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,698", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:204:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,699", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:205:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,699", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:206:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,700", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:207:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,700", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:208:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,701", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:209:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,702", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:210:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,702", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:211:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,703", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:212:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,703", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:213:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,704", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:214:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,704", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:215:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,705", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:216:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,705", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:217:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,706", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:218:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,706", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:219:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,707", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:220:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,708", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:221:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,708", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:222:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,709", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:223:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,709", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:224:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,710", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:225:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,710", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:226:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,711", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:227:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,711", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:228:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:35,712", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 66/66 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 158}
{"timestamp": "2026-02-26 13:07:35,712", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 13:07:35,713", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 缓存预热完成", "module": "cache_warmup", "function": "warmup_all", "line": 169}
{"timestamp": "2026-02-26 13:07:48,611", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 45}
{"timestamp": "2026-02-26 13:07:48,612", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver init failed, fallback to InMemorySaver: Psycopg cannot use the 'ProactorEventLoop' to run in async mode. Please use a compatible event loop, for instance by running 'asyncio.run(..., loop_factory=asyncio.SelectorEventLoop(selectors.SelectSelector()))'", "module": "agent_factory", "function": "init_checkpointer", "line": 75}
{"timestamp": "2026-02-26 13:07:48,612", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2026-02-26 13:07:48,613", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 50}
{"timestamp": "2026-02-26 13:07:48,613", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始缓存预热", "module": "cache_warmup", "function": "warmup_all", "line": 163}
{"timestamp": "2026-02-26 13:07:48,614", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热会话列表缓存，限制 100 条", "module": "cache_warmup", "function": "warmup_conversations", "line": 26}
{"timestamp": "2026-02-26 13:07:48,700", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select pg_catalog.version()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 13:07:48,700", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 13:07:48,702", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "select current_schema()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 13:07:48,702", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 13:07:48,703", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "show standard_conforming_strings", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 13:07:48,704", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[raw sql] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 13:07:48,705", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 13:07:48,712", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT users.id, users.username, users.email, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \n LIMIT $1::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 13:07:48,713", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00045s] (50,)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 13:07:48,720", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversations:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,720", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1/1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 61}
{"timestamp": "2026-02-26 13:07:48,720", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 13:07:48,721", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热置顶会话详情缓存", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 66}
{"timestamp": "2026-02-26 13:07:48,722", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 13:07:48,724", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.is_pinned = true", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 13:07:48,724", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00039s] ()", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 13:07:48,726", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0/0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 104}
{"timestamp": "2026-02-26 13:07:48,726", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 13:07:48,726", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热最近 24 小时活跃的会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 116}
{"timestamp": "2026-02-26 13:07:48,727", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "BEGIN (implicit)", "module": "base", "function": "_connection_begin_impl", "line": 2710}
{"timestamp": "2026-02-26 13:07:48,728", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_pinned, conversations.model_name, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.updated_at >= $1::TIMESTAMP WITH TIME ZONE \n LIMIT $2::INTEGER", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 13:07:48,729", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "[generated in 0.00040s] (datetime.datetime(2026, 2, 25, 13, 7, 48, 727345), 200)", "module": "base", "function": "_execute_context", "line": 1846}
{"timestamp": "2026-02-26 13:07:48,731", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:163:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,732", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:164:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,732", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:165:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,733", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:166:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,733", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:167:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,734", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:168:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,735", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:169:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,735", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:170:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,736", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:171:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,736", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:172:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,737", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:173:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,737", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:174:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,738", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:175:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,738", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:176:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,739", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:177:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,739", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:178:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,740", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:179:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,740", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:180:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,741", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:181:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,741", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:182:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,742", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:183:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,742", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:184:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,743", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:185:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,743", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:186:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,744", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:187:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,744", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:188:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,745", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:189:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,745", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:190:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,746", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:191:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,746", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:192:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,747", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:193:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,748", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:194:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,748", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:195:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,749", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:196:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,749", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:197:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,750", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:198:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,750", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:199:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,751", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:200:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,751", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:201:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,752", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:202:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,752", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:203:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,753", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:204:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,753", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:205:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,754", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:206:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,754", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:207:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,755", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:208:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,755", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:209:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,756", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:210:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,756", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:211:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,757", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:212:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,757", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:213:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,758", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:214:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,758", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:215:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,759", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:216:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,759", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:217:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,760", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:218:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,760", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:219:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,761", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:220:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,761", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:221:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,762", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:222:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,762", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:223:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,763", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:224:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,764", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:225:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,764", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:226:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,765", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:227:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,765", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:228:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:07:48,766", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 66/66 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 158}
{"timestamp": "2026-02-26 13:07:48,766", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.engine.Engine", "message": "COMMIT", "module": "base", "function": "_connection_commit_impl", "line": 2716}
{"timestamp": "2026-02-26 13:07:48,767", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 缓存预热完成", "module": "cache_warmup", "function": "warmup_all", "line": 169}
{"timestamp": "2026-02-26 13:07:48,770", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool disposed. Pool size: 10  Connections in pool: 0 Current Overflow: -10 Current Checked out connections: 0", "module": "impl", "function": "dispose", "line": 228}
{"timestamp": "2026-02-26 13:07:48,770", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool recreating", "module": "impl", "function": "recreate", "line": 203}
{"timestamp": "2026-02-26 13:07:48,771", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 13:07:48,771", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 59}
{"timestamp": "2026-02-26 13:08:29,449", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver connection closed", "module": "agent_factory", "function": "close_checkpointer", "line": 90}
{"timestamp": "2026-02-26 13:08:29,465", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool disposed. Pool size: 10  Connections in pool: 0 Current Overflow: -10 Current Checked out connections: 0", "module": "impl", "function": "dispose", "line": 228}
{"timestamp": "2026-02-26 13:08:29,466", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool recreating", "module": "impl", "function": "recreate", "line": 203}
{"timestamp": "2026-02-26 13:08:29,467", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 13:08:29,467", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 59}
{"timestamp": "2026-02-26 13:08:35,031", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 45}
{"timestamp": "2026-02-26 13:08:35,085", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver initialized", "module": "agent_factory", "function": "init_checkpointer", "line": 72}
{"timestamp": "2026-02-26 13:08:35,085", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2026-02-26 13:08:35,086", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 50}
{"timestamp": "2026-02-26 13:08:35,086", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始缓存预热", "module": "cache_warmup", "function": "warmup_all", "line": 163}
{"timestamp": "2026-02-26 13:08:35,086", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热会话列表缓存，限制 100 条", "module": "cache_warmup", "function": "warmup_conversations", "line": 26}
{"timestamp": "2026-02-26 13:08:35,262", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversations:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,264", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1/1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 61}
{"timestamp": "2026-02-26 13:08:35,265", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热置顶会话详情缓存", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 66}
{"timestamp": "2026-02-26 13:08:35,271", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0/0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 104}
{"timestamp": "2026-02-26 13:08:35,272", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热最近 24 小时活跃的会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 116}
{"timestamp": "2026-02-26 13:08:35,276", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:163:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,277", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:164:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,277", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:165:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,278", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:166:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,278", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:167:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,279", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:168:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,280", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:169:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,281", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:170:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,283", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:171:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,285", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:172:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,288", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:173:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,291", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:174:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,293", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:175:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,295", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:176:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,296", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:177:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,298", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:178:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,300", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:179:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,303", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:180:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,305", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:181:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,308", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:182:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,311", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:183:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,313", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:184:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,315", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:185:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,317", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:186:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,319", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:187:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,322", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:188:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,324", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:189:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,326", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:190:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,328", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:191:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,330", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:192:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,331", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:193:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,332", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:194:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,333", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:195:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,334", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:196:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,334", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:197:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,335", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:198:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,336", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:199:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,336", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:200:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,337", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:201:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,337", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:202:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,338", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:203:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,338", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:204:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,339", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:205:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,339", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:206:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,340", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:207:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,340", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:208:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,341", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:209:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,341", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:210:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,342", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:211:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,342", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:212:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,343", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:213:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,343", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:214:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,344", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:215:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,344", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:216:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,345", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:217:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,345", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:218:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,346", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:219:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,346", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:220:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,347", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:221:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,347", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:222:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,347", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:223:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,348", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:224:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,348", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:225:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,349", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:226:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,349", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:227:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,350", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:228:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:35,350", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 66/66 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 158}
{"timestamp": "2026-02-26 13:08:35,351", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 缓存预热完成", "module": "cache_warmup", "function": "warmup_all", "line": 169}
{"timestamp": "2026-02-26 13:08:46,949", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 45}
{"timestamp": "2026-02-26 13:08:46,949", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver init failed, fallback to InMemorySaver: Psycopg cannot use the 'ProactorEventLoop' to run in async mode. Please use a compatible event loop, for instance by running 'asyncio.run(..., loop_factory=asyncio.SelectorEventLoop(selectors.SelectSelector()))'", "module": "agent_factory", "function": "init_checkpointer", "line": 75}
{"timestamp": "2026-02-26 13:08:46,950", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2026-02-26 13:08:46,950", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 50}
{"timestamp": "2026-02-26 13:08:46,950", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始缓存预热", "module": "cache_warmup", "function": "warmup_all", "line": 163}
{"timestamp": "2026-02-26 13:08:46,951", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热会话列表缓存，限制 100 条", "module": "cache_warmup", "function": "warmup_conversations", "line": 26}
{"timestamp": "2026-02-26 13:08:47,091", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversations:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,093", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1/1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 61}
{"timestamp": "2026-02-26 13:08:47,096", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热置顶会话详情缓存", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 66}
{"timestamp": "2026-02-26 13:08:47,108", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0/0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 104}
{"timestamp": "2026-02-26 13:08:47,111", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热最近 24 小时活跃的会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 116}
{"timestamp": "2026-02-26 13:08:47,120", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:163:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,121", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:164:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,122", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:165:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,123", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:166:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,124", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:167:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,127", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:168:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,130", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:169:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,133", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:170:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,136", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:171:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,139", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:172:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,143", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:173:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,146", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:174:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,147", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:175:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,149", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:176:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,151", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:177:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,153", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:178:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,154", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:179:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,156", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:180:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,158", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:181:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,159", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:182:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,160", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:183:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,161", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:184:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,162", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:185:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,162", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:186:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,163", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:187:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,164", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:188:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,164", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:189:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,165", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:190:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,165", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:191:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,166", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:192:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,166", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:193:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,167", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:194:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,167", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:195:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,168", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:196:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,168", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:197:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,169", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:198:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,169", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:199:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,170", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:200:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,170", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:201:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,171", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:202:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,172", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:203:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,172", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:204:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,173", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:205:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,173", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:206:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,174", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:207:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,174", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:208:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,175", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:209:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,175", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:210:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,176", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:211:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,176", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:212:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,177", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:213:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,177", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:214:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,178", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:215:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,178", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:216:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,179", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:217:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,179", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:218:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,180", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:219:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,180", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:220:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,181", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:221:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,182", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:222:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,182", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:223:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,183", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:224:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,183", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:225:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,184", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:226:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,184", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:227:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,185", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:228:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:08:47,185", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 66/66 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 158}
{"timestamp": "2026-02-26 13:08:47,187", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 缓存预热完成", "module": "cache_warmup", "function": "warmup_all", "line": 169}
{"timestamp": "2026-02-26 13:33:30,380", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver connection closed", "module": "agent_factory", "function": "close_checkpointer", "line": 90}
{"timestamp": "2026-02-26 13:33:30,396", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool disposed. Pool size: 10  Connections in pool: 0 Current Overflow: -10 Current Checked out connections: 0", "module": "impl", "function": "dispose", "line": 228}
{"timestamp": "2026-02-26 13:33:30,396", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool recreating", "module": "impl", "function": "recreate", "line": 203}
{"timestamp": "2026-02-26 13:33:30,397", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 13:33:30,397", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 59}
{"timestamp": "2026-02-26 13:33:33,188", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 45}
{"timestamp": "2026-02-26 13:33:33,232", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver initialized", "module": "agent_factory", "function": "init_checkpointer", "line": 72}
{"timestamp": "2026-02-26 13:33:33,232", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2026-02-26 13:33:33,232", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 50}
{"timestamp": "2026-02-26 13:33:33,232", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始缓存预热", "module": "cache_warmup", "function": "warmup_all", "line": 163}
{"timestamp": "2026-02-26 13:33:33,233", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热会话列表缓存，限制 100 条", "module": "cache_warmup", "function": "warmup_conversations", "line": 26}
{"timestamp": "2026-02-26 13:33:33,296", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversations:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,300", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversations:user:1:skip:0:limit:100", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,300", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversations:user:1:skip:0:limit:100, TTL=3795s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,301", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1/1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 61}
{"timestamp": "2026-02-26 13:33:33,301", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热置顶会话详情缓存", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 66}
{"timestamp": "2026-02-26 13:33:33,302", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0/0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 104}
{"timestamp": "2026-02-26 13:33:33,303", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热最近 24 小时活跃的会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 116}
{"timestamp": "2026-02-26 13:33:33,305", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:163:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,306", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:163:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,306", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:163:1, TTL=3617s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,307", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:164:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,308", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:164:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,308", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:164:1, TTL=3875s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,309", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:165:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,309", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:165:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,310", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:165:1, TTL=3612s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,310", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:166:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,311", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:166:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,311", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:166:1, TTL=3634s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,312", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:167:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,312", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:167:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,313", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:167:1, TTL=3722s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,313", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:168:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,314", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:168:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,314", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:168:1, TTL=3740s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,314", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:169:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,315", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:169:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,315", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:169:1, TTL=3697s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,316", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:170:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,316", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:170:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,317", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:170:1, TTL=3883s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,317", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:171:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,318", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:171:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,318", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:171:1, TTL=3670s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,318", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:172:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,319", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:172:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,319", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:172:1, TTL=3894s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,320", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:173:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,320", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:173:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,320", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:173:1, TTL=3678s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,321", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:174:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,321", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:174:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,322", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:174:1, TTL=3793s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,322", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:175:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,322", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:175:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,323", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:175:1, TTL=3637s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,323", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:176:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,324", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:176:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,324", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:176:1, TTL=3800s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,325", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:177:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,325", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:177:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,326", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:177:1, TTL=3818s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,326", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:178:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,327", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:178:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,327", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:178:1, TTL=3673s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,328", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:179:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,328", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:179:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,328", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:179:1, TTL=3786s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,329", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:180:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,329", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:180:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,329", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:180:1, TTL=3884s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,330", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:181:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,331", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:181:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,331", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:181:1, TTL=3854s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,331", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:182:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,332", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:182:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,332", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:182:1, TTL=3843s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,332", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:183:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,333", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:183:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,333", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:183:1, TTL=3836s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,334", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:184:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,334", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:184:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,335", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:184:1, TTL=3829s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,335", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:185:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,335", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:185:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,336", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:185:1, TTL=3798s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,336", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:186:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,336", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:186:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,337", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:186:1, TTL=3825s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,337", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:187:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,338", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:187:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,338", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:187:1, TTL=3863s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,338", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:188:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,339", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:188:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,339", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:188:1, TTL=3789s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,340", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:189:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,340", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:189:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,340", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:189:1, TTL=3612s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,341", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:190:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,341", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:190:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,341", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:190:1, TTL=3640s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,342", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:191:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,342", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:191:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,342", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:191:1, TTL=3719s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,343", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:192:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,343", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:192:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,344", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:192:1, TTL=3878s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,344", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:193:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,345", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:193:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,345", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:193:1, TTL=3688s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,346", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:194:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,346", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:194:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,346", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:194:1, TTL=3760s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,347", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:195:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,347", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:195:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,347", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:195:1, TTL=3692s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,348", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:196:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,348", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:196:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,349", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:196:1, TTL=3862s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,349", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:197:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,349", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:197:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,350", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:197:1, TTL=3817s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,350", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:198:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,350", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:198:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,351", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:198:1, TTL=3872s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,351", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:199:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,352", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:199:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,352", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:199:1, TTL=3756s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,352", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:200:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,353", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:200:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,353", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:200:1, TTL=3660s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,354", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:201:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,354", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:201:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,354", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:201:1, TTL=3718s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,355", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:202:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,355", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:202:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,356", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:202:1, TTL=3807s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,356", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:203:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,356", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:203:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,357", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:203:1, TTL=3702s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,357", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:204:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,357", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:204:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,358", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:204:1, TTL=3619s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,358", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:205:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,359", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:205:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,359", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:205:1, TTL=3689s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,359", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:206:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,360", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:206:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,360", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:206:1, TTL=3809s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,360", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:207:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,361", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:207:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,361", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:207:1, TTL=3600s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,362", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:208:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,362", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:208:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,363", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:208:1, TTL=3813s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,363", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:209:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,364", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:209:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,364", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:209:1, TTL=3621s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,364", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:210:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,365", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:210:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,365", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:210:1, TTL=3685s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,366", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:211:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,366", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:211:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,366", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:211:1, TTL=3751s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,367", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:212:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,367", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:212:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,368", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:212:1, TTL=3708s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,368", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:213:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,369", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:213:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,369", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:213:1, TTL=3854s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,369", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:214:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,370", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:214:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,370", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:214:1, TTL=3678s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,370", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:215:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,371", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:215:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,371", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:215:1, TTL=3690s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,372", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:216:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,372", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:216:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,372", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:216:1, TTL=3844s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,373", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:217:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,373", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:217:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,374", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:217:1, TTL=3675s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,374", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:218:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,374", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:218:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,375", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:218:1, TTL=3663s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,375", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:219:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,376", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:219:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,376", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:219:1, TTL=3607s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,376", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:220:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,377", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:220:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,379", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:220:1, TTL=3781s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,381", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:221:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,382", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:221:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,382", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:221:1, TTL=3806s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,383", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:222:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,383", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:222:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,394", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:222:1, TTL=3714s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,394", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:223:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,395", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:223:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,395", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:223:1, TTL=3719s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,396", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:224:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,397", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:224:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,397", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:224:1, TTL=3718s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,397", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:225:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,398", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:225:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,398", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:225:1, TTL=3652s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,399", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE MISS] 缓存未命中: conversation:226:1", "module": "redis", "function": "cache_aside", "line": 151}
{"timestamp": "2026-02-26 13:33:33,399", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:226:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:33:33,399", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE SET] 数据已写入缓存: conversation:226:1, TTL=3702s", "module": "redis", "function": "cache_aside", "line": 168}
{"timestamp": "2026-02-26 13:33:33,400", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 66/66 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 158}
{"timestamp": "2026-02-26 13:33:33,400", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 缓存预热完成", "module": "cache_warmup", "function": "warmup_all", "line": 169}
{"timestamp": "2026-02-26 13:34:51,770", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver connection closed", "module": "agent_factory", "function": "close_checkpointer", "line": 90}
{"timestamp": "2026-02-26 13:34:51,786", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool disposed. Pool size: 10  Connections in pool: 0 Current Overflow: -10 Current Checked out connections: 0", "module": "impl", "function": "dispose", "line": 228}
{"timestamp": "2026-02-26 13:34:51,786", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool recreating", "module": "impl", "function": "recreate", "line": 203}
{"timestamp": "2026-02-26 13:34:51,786", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 13:34:51,786", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 59}
{"timestamp": "2026-02-26 13:34:54,407", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 45}
{"timestamp": "2026-02-26 13:34:54,468", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver initialized", "module": "agent_factory", "function": "init_checkpointer", "line": 72}
{"timestamp": "2026-02-26 13:34:54,468", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2026-02-26 13:34:54,469", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 50}
{"timestamp": "2026-02-26 13:34:54,469", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始缓存预热", "module": "cache_warmup", "function": "warmup_all", "line": 163}
{"timestamp": "2026-02-26 13:34:54,469", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热会话列表缓存，限制 100 条", "module": "cache_warmup", "function": "warmup_conversations", "line": 26}
{"timestamp": "2026-02-26 13:34:54,530", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1/1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 61}
{"timestamp": "2026-02-26 13:34:54,531", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热置顶会话详情缓存", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 66}
{"timestamp": "2026-02-26 13:34:54,533", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0/0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 104}
{"timestamp": "2026-02-26 13:34:54,533", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热最近 24 小时活跃的会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 116}
{"timestamp": "2026-02-26 13:34:54,539", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 66/66 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 158}
{"timestamp": "2026-02-26 13:34:54,539", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 缓存预热完成", "module": "cache_warmup", "function": "warmup_all", "line": 169}
{"timestamp": "2026-02-26 13:35:11,479", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver connection closed", "module": "agent_factory", "function": "close_checkpointer", "line": 90}
{"timestamp": "2026-02-26 13:35:11,495", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool disposed. Pool size: 10  Connections in pool: 0 Current Overflow: -10 Current Checked out connections: 0", "module": "impl", "function": "dispose", "line": 228}
{"timestamp": "2026-02-26 13:35:11,495", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool recreating", "module": "impl", "function": "recreate", "line": 203}
{"timestamp": "2026-02-26 13:35:11,496", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 13:35:11,496", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 59}
{"timestamp": "2026-02-26 13:35:14,153", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 45}
{"timestamp": "2026-02-26 13:35:14,195", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver initialized", "module": "agent_factory", "function": "init_checkpointer", "line": 72}
{"timestamp": "2026-02-26 13:35:14,195", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2026-02-26 13:35:14,195", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 50}
{"timestamp": "2026-02-26 13:35:14,196", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始缓存预热", "module": "cache_warmup", "function": "warmup_all", "line": 163}
{"timestamp": "2026-02-26 13:35:14,196", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热会话列表缓存，限制 100 条", "module": "cache_warmup", "function": "warmup_conversations", "line": 26}
{"timestamp": "2026-02-26 13:35:14,254", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1/1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 61}
{"timestamp": "2026-02-26 13:35:14,255", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热置顶会话详情缓存", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 66}
{"timestamp": "2026-02-26 13:35:14,257", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0/0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 104}
{"timestamp": "2026-02-26 13:35:14,257", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热最近 24 小时活跃的会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 116}
{"timestamp": "2026-02-26 13:35:14,263", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 66/66 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 158}
{"timestamp": "2026-02-26 13:35:14,263", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 缓存预热完成", "module": "cache_warmup", "function": "warmup_all", "line": 169}
{"timestamp": "2026-02-26 13:35:50,073", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver connection closed", "module": "agent_factory", "function": "close_checkpointer", "line": 90}
{"timestamp": "2026-02-26 13:35:50,089", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool disposed. Pool size: 10  Connections in pool: 0 Current Overflow: -10 Current Checked out connections: 0", "module": "impl", "function": "dispose", "line": 228}
{"timestamp": "2026-02-26 13:35:50,089", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool recreating", "module": "impl", "function": "recreate", "line": 203}
{"timestamp": "2026-02-26 13:35:50,089", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 13:35:50,089", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 59}
{"timestamp": "2026-02-26 13:35:52,677", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 45}
{"timestamp": "2026-02-26 13:35:52,721", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver initialized", "module": "agent_factory", "function": "init_checkpointer", "line": 72}
{"timestamp": "2026-02-26 13:35:52,722", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2026-02-26 13:35:52,722", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 50}
{"timestamp": "2026-02-26 13:35:52,722", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始缓存预热", "module": "cache_warmup", "function": "warmup_all", "line": 161}
{"timestamp": "2026-02-26 13:35:52,783", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1/1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 59}
{"timestamp": "2026-02-26 13:35:52,783", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热置顶会话详情缓存", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 64}
{"timestamp": "2026-02-26 13:35:52,786", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0/0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 102}
{"timestamp": "2026-02-26 13:35:52,786", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热最近 24 小时活跃的会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 114}
{"timestamp": "2026-02-26 13:35:52,794", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 66/66 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 156}
{"timestamp": "2026-02-26 13:35:52,795", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 缓存预热完成", "module": "cache_warmup", "function": "warmup_all", "line": 167}
{"timestamp": "2026-02-26 13:36:20,687", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver connection closed", "module": "agent_factory", "function": "close_checkpointer", "line": 90}
{"timestamp": "2026-02-26 13:36:20,704", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool disposed. Pool size: 10  Connections in pool: 0 Current Overflow: -10 Current Checked out connections: 0", "module": "impl", "function": "dispose", "line": 228}
{"timestamp": "2026-02-26 13:36:20,704", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool recreating", "module": "impl", "function": "recreate", "line": 203}
{"timestamp": "2026-02-26 13:36:20,704", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 13:36:20,704", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 59}
{"timestamp": "2026-02-26 13:36:23,307", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 45}
{"timestamp": "2026-02-26 13:36:23,351", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver initialized", "module": "agent_factory", "function": "init_checkpointer", "line": 72}
{"timestamp": "2026-02-26 13:36:23,351", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2026-02-26 13:36:23,351", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 50}
{"timestamp": "2026-02-26 13:36:23,352", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始缓存预热", "module": "cache_warmup", "function": "warmup_all", "line": 159}
{"timestamp": "2026-02-26 13:36:23,413", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1/1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 59}
{"timestamp": "2026-02-26 13:36:23,415", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0/0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 100}
{"timestamp": "2026-02-26 13:36:23,416", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热最近 24 小时活跃的会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 112}
{"timestamp": "2026-02-26 13:36:23,424", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 66/66 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 154}
{"timestamp": "2026-02-26 13:36:23,424", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 缓存预热完成", "module": "cache_warmup", "function": "warmup_all", "line": 165}
{"timestamp": "2026-02-26 13:36:53,196", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver connection closed", "module": "agent_factory", "function": "close_checkpointer", "line": 90}
{"timestamp": "2026-02-26 13:36:53,213", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool disposed. Pool size: 10  Connections in pool: 0 Current Overflow: -10 Current Checked out connections: 0", "module": "impl", "function": "dispose", "line": 228}
{"timestamp": "2026-02-26 13:36:53,213", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool recreating", "module": "impl", "function": "recreate", "line": 203}
{"timestamp": "2026-02-26 13:36:53,214", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 13:36:53,214", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 59}
{"timestamp": "2026-02-26 13:36:55,785", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 45}
{"timestamp": "2026-02-26 13:36:55,830", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver initialized", "module": "agent_factory", "function": "init_checkpointer", "line": 72}
{"timestamp": "2026-02-26 13:36:55,830", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2026-02-26 13:36:55,830", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 50}
{"timestamp": "2026-02-26 13:36:55,830", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始缓存预热", "module": "cache_warmup", "function": "warmup_all", "line": 157}
{"timestamp": "2026-02-26 13:36:55,892", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1/1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 59}
{"timestamp": "2026-02-26 13:36:55,895", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0/0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 100}
{"timestamp": "2026-02-26 13:36:55,900", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 66/66 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 152}
{"timestamp": "2026-02-26 13:36:55,901", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 缓存预热完成", "module": "cache_warmup", "function": "warmup_all", "line": 163}
{"timestamp": "2026-02-26 13:37:11,861", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 45}
{"timestamp": "2026-02-26 13:37:11,861", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver init failed, fallback to InMemorySaver: Psycopg cannot use the 'ProactorEventLoop' to run in async mode. Please use a compatible event loop, for instance by running 'asyncio.run(..., loop_factory=asyncio.SelectorEventLoop(selectors.SelectSelector()))'", "module": "agent_factory", "function": "init_checkpointer", "line": 75}
{"timestamp": "2026-02-26 13:37:11,861", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2026-02-26 13:37:11,862", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 50}
{"timestamp": "2026-02-26 13:37:11,862", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始缓存预热", "module": "cache_warmup", "function": "warmup_all", "line": 157}
{"timestamp": "2026-02-26 13:37:11,930", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 1/1 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 59}
{"timestamp": "2026-02-26 13:37:11,933", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0/0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 100}
{"timestamp": "2026-02-26 13:37:11,944", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 66/66 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 152}
{"timestamp": "2026-02-26 13:37:11,945", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 缓存预热完成", "module": "cache_warmup", "function": "warmup_all", "line": 163}
{"timestamp": "2026-02-26 13:39:25,475", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.tracing", "message": "[REQUEST] method=POST path=/api/v1/conversations status_code=401 request_id=0a33d863-dabd-4a5f-8b8f-aec1d0a19d53", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 13:39:27,125", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.tracing", "message": "[REQUEST] method=POST path=/api/v1/auth/login status_code=200 request_id=ebf36886-1a54-4917-99d8-51196750ab4f", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 13:39:27,143", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.tracing", "message": "[REQUEST] method=GET path=/api/v1/auth/me status_code=200 request_id=e3e657c0-578e-42d9-9fc7-d3724ed04068", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 13:39:27,152", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.tracing", "message": "[REQUEST] method=GET path=/api/v1/conversations status_code=200 request_id=3933fa7c-e0f9-4274-b7e0-a672d46b2234", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 13:39:27,288", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.tracing", "message": "[REQUEST] method=GET path=/api/v1/conversations status_code=200 request_id=6b2a00f9-c40d-4138-9f1d-68ee3446bd2e", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 13:40:03,023", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.tracing", "message": "[REQUEST] method=POST path=/api/v1/auth/register status_code=201 request_id=922cb40e-5cbe-4861-8675-a7deb4949592", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 13:40:08,732", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.tracing", "message": "[REQUEST] method=POST path=/api/v1/auth/login status_code=401 request_id=7f89a72f-9d29-49b9-9a90-805229e3d64a", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 13:40:24,281", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.tracing", "message": "[REQUEST] method=POST path=/api/v1/auth/login status_code=200 request_id=df132678-6a0d-478f-8af0-1b7a93fd8557", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 13:40:24,287", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.tracing", "message": "[REQUEST] method=GET path=/api/v1/auth/me status_code=200 request_id=bd18edd0-e33d-4b10-82a5-e7c38111f02e", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 13:40:24,293", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.tracing", "message": "[REQUEST] method=GET path=/api/v1/conversations status_code=200 request_id=3e5b609d-4b6a-4894-89b6-5fb9897e739e", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 13:40:24,300", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.tracing", "message": "[REQUEST] method=GET path=/api/v1/conversations status_code=200 request_id=7be586fd-371b-48f1-9380-27265da554b6", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 13:40:24,376", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.tracing", "message": "[REQUEST] method=GET path=/api/v1/conversations status_code=200 request_id=9b743737-fa11-4dfc-aa5c-44487ec3cb3f", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 13:40:27,607", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.services.conversation_service", "message": "[CACHE DELETE] 已删除用户会话列表缓存: user_id=2, keys=1", "module": "conversation_service", "function": "_invalidate_user_cache", "line": 144}
{"timestamp": "2026-02-26 13:40:27,608", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.tracing", "message": "[REQUEST] method=POST path=/api/v1/conversations status_code=201 request_id=b65793a7-3ade-485b-8633-092187757913", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 13:40:27,632", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:229:2", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:40:27,637", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.tracing", "message": "[REQUEST] method=GET path=/api/v1/chat/conversations/229/history status_code=200 request_id=bab62def-4b52-4abc-9616-609c8612b648", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 13:41:15,906", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversations:user:2:skip:0:limit:100", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:41:15,907", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.tracing", "message": "[REQUEST] method=GET path=/api/v1/conversations status_code=200 request_id=9395d730-48b7-4a16-92be-db869cc29918", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 13:41:15,969", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.tracing", "message": "[REQUEST] method=GET path=/api/v1/conversations status_code=200 request_id=e6027243-1a8a-4518-9efe-9a11b09386e8", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 13:41:27,538", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.tracing", "message": "[REQUEST] method=POST path=/api/v1/auth/login status_code=200 request_id=7bbd8eba-1764-4d84-9878-ab0042e5fd56", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 13:41:27,544", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.tracing", "message": "[REQUEST] method=GET path=/api/v1/auth/me status_code=200 request_id=0893607b-830e-4a87-bfc7-0ceddab1b567", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 13:41:27,550", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.tracing", "message": "[REQUEST] method=GET path=/api/v1/conversations status_code=200 request_id=b661e023-280d-43b7-afd8-d9b4e02ca52a", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 13:41:27,619", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.tracing", "message": "[REQUEST] method=GET path=/api/v1/conversations status_code=200 request_id=f39a44db-a8e0-4b57-aa7c-1014e1c2f4f3", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 13:41:31,664", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.services.conversation_service", "message": "[CACHE DELETE] 已删除用户会话列表缓存: user_id=1, keys=1", "module": "conversation_service", "function": "_invalidate_user_cache", "line": 144}
{"timestamp": "2026-02-26 13:41:31,665", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.tracing", "message": "[REQUEST] method=POST path=/api/v1/conversations status_code=201 request_id=42620cba-7e5b-462b-8997-6c6eae19b43f", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 13:41:31,695", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:230:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:41:31,697", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.tracing", "message": "[REQUEST] method=GET path=/api/v1/chat/conversations/230/history status_code=200 request_id=dddd546b-e8a5-407c-9232-e74e9c0c2f50", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 13:41:32,525", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.tracing", "message": "[REQUEST] method=GET path=/api/v1/chat/conversations/229/history status_code=404 request_id=8e5afc98-888e-4288-80ca-457ad96924f3", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 13:41:33,046", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.tracing", "message": "[REQUEST] method=GET path=/api/v1/chat/conversations/230/history status_code=200 request_id=c508eb42-dea6-49bc-b2aa-c7eaba5443cc", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 13:41:34,230", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.tracing", "message": "[REQUEST] method=GET path=/api/v1/chat/conversations/229/history status_code=404 request_id=662b67c6-6533-431f-9031-cbdb3d7e2332", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 13:41:35,127", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.tracing", "message": "[REQUEST] method=GET path=/api/v1/chat/conversations/230/history status_code=200 request_id=ed8e9c89-516c-4ce4-b73f-96f29815dd91", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 13:41:37,208", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.tracing", "message": "[REQUEST] method=GET path=/api/v1/chat/conversations/229/history status_code=404 request_id=7e4f3b83-f04d-4c9f-b2cc-f409d80308e2", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 13:41:38,790", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.tracing", "message": "[REQUEST] method=POST path=/api/v1/conversations status_code=201 request_id=d0830985-3221-45f1-aed9-83bd73881bb8", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 13:41:38,817", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:231:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:41:38,820", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.tracing", "message": "[REQUEST] method=GET path=/api/v1/chat/conversations/231/history status_code=200 request_id=65af870d-ae48-4803-9c05-0ff1cfc6853f", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 13:41:40,122", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.tracing", "message": "[REQUEST] method=GET path=/api/v1/chat/conversations/230/history status_code=200 request_id=878930f6-8e3a-406d-906a-8ed3615c1eae", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 13:41:41,254", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.tracing", "message": "[REQUEST] method=GET path=/api/v1/chat/conversations/229/history status_code=404 request_id=7f0d164e-f601-46f3-8eda-28929d1db696", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 13:41:49,512", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.tracing", "message": "[REQUEST] method=POST path=/api/v1/conversations status_code=201 request_id=1946d2d9-b9de-41ba-90d2-837ffb337d95", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 13:41:49,551", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:232:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:41:49,554", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.tracing", "message": "[REQUEST] method=GET path=/api/v1/chat/conversations/232/history status_code=200 request_id=fa29339f-61d2-4c0c-9e86-f15ec25eee46", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 13:41:50,150", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for messages:conversation:226:user:1:skip:0:limit:100", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:41:50,152", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.tracing", "message": "[REQUEST] method=GET path=/api/v1/chat/conversations/226/history status_code=200 request_id=05fdcf52-31b0-407d-bffc-cd291a67bd39", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 13:41:53,037", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.tracing", "message": "[REQUEST] method=GET path=/api/v1/chat/conversations/230/history status_code=200 request_id=c4131501-7aca-4d70-bc4f-9c3ea84c44ce", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 13:41:53,704", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.tracing", "message": "[REQUEST] method=GET path=/api/v1/chat/conversations/231/history status_code=200 request_id=4007d642-2112-40cd-9e73-f3a7b638b863", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 13:41:55,175", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.tracing", "message": "[REQUEST] method=GET path=/api/v1/chat/conversations/230/history status_code=200 request_id=a71c8bda-ac94-452c-a690-6d4a85c7db64", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 13:41:55,692", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.tracing", "message": "[REQUEST] method=GET path=/api/v1/chat/conversations/229/history status_code=404 request_id=cafa1a1a-d2d4-4c65-a8c7-1caecb1848a1", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 13:42:07,294", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.tracing", "message": "[REQUEST] method=GET path=/api/v1/chat/conversations/231/history status_code=200 request_id=3ccda1f7-3bf8-41a2-8316-1841eb48f267", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 13:42:09,460", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.tracing", "message": "[REQUEST] method=GET path=/api/v1/chat/conversations/230/history status_code=200 request_id=40745085-4d25-4455-ac15-924449cc5ec0", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 13:42:10,467", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.tracing", "message": "[REQUEST] method=GET path=/api/v1/chat/conversations/229/history status_code=404 request_id=f10b09e0-00eb-495f-8927-bd5040ca9ae7", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 13:42:13,751", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.tracing", "message": "[REQUEST] method=DELETE path=/api/v1/conversations/229 status_code=404 request_id=2b59f15c-ca5b-4c62-a123-68bf3009fa4c", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 13:42:19,276", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.tracing", "message": "[REQUEST] method=GET path=/api/v1/auth/me status_code=200 request_id=76e0e8a2-49d7-4073-809d-6c65bc1ccf3c", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 13:42:19,285", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversations:user:1:skip:0:limit:100", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:42:19,288", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.tracing", "message": "[REQUEST] method=GET path=/api/v1/conversations status_code=200 request_id=e6e18133-3f29-4939-af64-681f1c8dcb5b", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 13:42:19,411", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.tracing", "message": "[REQUEST] method=GET path=/api/v1/conversations status_code=200 request_id=21307b4e-3e5c-433d-8694-ccd871d37a07", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 13:42:46,998", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.tracing", "message": "[REQUEST] method=POST path=/api/v1/auth/login status_code=200 request_id=4b2249bd-2a9a-4f26-bd3e-07a44b7a1cd3", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 13:42:47,005", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.tracing", "message": "[REQUEST] method=GET path=/api/v1/auth/me status_code=200 request_id=0ed8566b-0a57-4127-8e5a-aa5b14c1d99f", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 13:42:47,010", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.tracing", "message": "[REQUEST] method=GET path=/api/v1/conversations status_code=200 request_id=a00ad81b-6d19-437d-8bea-9beba6798e90", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 13:42:47,090", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.tracing", "message": "[REQUEST] method=GET path=/api/v1/conversations status_code=200 request_id=289cdd08-fc75-44dc-a9f5-6cb8d3979c1f", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 13:42:48,967", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.tracing", "message": "[REQUEST] method=GET path=/api/v1/chat/conversations/229/history status_code=200 request_id=0dab6429-0af1-4602-a546-6525bf249cb2", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 13:43:00,219", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.services.chat_service", "message": "[DB] Saved message id=623", "module": "chat_service", "function": "create_message", "line": 74}
{"timestamp": "2026-02-26 13:43:00,220", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.services.chat_service", "message": "[DB] Verify saved: id=623", "module": "chat_service", "function": "create_message", "line": 81}
{"timestamp": "2026-02-26 13:43:00,221", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.services.chat_service", "message": "[CACHE DELETE] 已删除消息缓存: conversation_id=229, keys=1", "module": "chat_service", "function": "_invalidate_messages_cache", "line": 542}
{"timestamp": "2026-02-26 13:43:00,222", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for messages:conversation:229:user:2:skip:0:limit:50", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:43:00,223", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT] 开始生成流式响应: conversation_id=229, enable_thinking=False", "module": "chat_service", "function": "generate_response_stream", "line": 461}
{"timestamp": "2026-02-26 13:43:00,223", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT] 开始处理消息: conversation_id=229", "module": "chat_service", "function": "process_message", "line": 101}
{"timestamp": "2026-02-26 13:43:00,224", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT] 上下文准备完成，长度: 2", "module": "chat_service", "function": "process_message", "line": 115}
{"timestamp": "2026-02-26 13:43:00,224", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT] 创建Agent: is_expert=False, enable_thinking=False", "module": "chat_service", "function": "process_message", "line": 118}
{"timestamp": "2026-02-26 13:43:00,474", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] Initialized skills backend: F:\\code\\dragonai-v2-local\\app\\skills", "module": "agent_factory", "function": "_get_skills_backend", "line": 126}
{"timestamp": "2026-02-26 13:43:00,558", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] Created and cached agent: expert_False_thinking_False", "module": "agent_factory", "function": "create_chat_agent", "line": 183}
{"timestamp": "2026-02-26 13:43:00,559", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT] 开始流式执行Agent", "module": "chat_service", "function": "process_message", "line": 126}
{"timestamp": "2026-02-26 13:43:00,561", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.tracing", "message": "[REQUEST] method=POST path=/api/v1/chat/send status_code=200 request_id=fbac14e9-1d85-4194-993e-2e2723d336a7", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 13:43:00,573", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] updates data: {'SkillsMiddleware.before_agent': {'skills_metadata': [{'name': 'xhs-copywriter', 'description': '小红书平台文案创作专家，帮助用户创作吸引眼球的小红书笔记、种草文案、产品推荐等内容。适用于小红书营销、内容创作、品牌推广等场景。', 'path': '/xhs-copywriter/SKILL.md', 'metadata': {'author': 'dragonai', 'version': '1.0', 'platform': 'xiaohongshu'}, 'license': 'MIT', 'compatibility': '无特殊依赖', 'allowed_tools': ['web_search']}]}}", "module": "chat_service", "function": "process_message", "line": 140}
{"timestamp": "2026-02-26 13:43:00,573", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] source=SkillsMiddleware.before_agent, update keys=dict_keys(['skills_metadata'])", "module": "chat_service", "function": "process_message", "line": 142}
{"timestamp": "2026-02-26 13:43:00,574", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.agents.debug_middleware", "message": "[DEBUG-MIDDLEWARE] System prompt (3109 chars):\n你是一个强大的AI助手，能够帮助用户处理各种任务。\n\n你可以使用多种工具来帮助用户，工具的功能说明已内置在系统中。\n\n**工具调用重要规则**：\n- 如果调用工具缺少必填参数，不要调用工具，应该先询问用户提供缺失的信息\n- 根据用户需求选择最合适的工具，避免不必要的工具调用\n\n**工具结果输出规则（非常重要）**：\n- 当工具返回结果包含代码、完整答案或详细内容时，你必须原样完整输出给用户\n- 禁止对工具返回的代码进行总结、省略、改写或简化\n- 禁止使用\"代码如下\"、\"这是代码\"等简短描述代替完整输出\n- 如果工具结果包含<INSTRUCTION>标签，必须严格遵循标签内的指令\n- 当看到<INSTRUCTION>标签时，只输出标签后的内容，不要输出标签本身，不要做任何修改\n\n**技能使用规则（非常重要）**：\n- 当用户请求匹配某个技能的描述时，你必须先调用 read_file 读取该技能的完整指令\n- 禁止在没有读取技能文件的情况下直接回答相关任务\n- 读取技能文件后，必须严格按照技能中的流程和模板执行任务\n\n请根据用户的需求，合理选择和使用工具。如果用户请求不明确，请主动询问以澄清需求。\n\n\n\n## Following Conventions\n\n- Read files before editing — understand existing content before making changes\n- Mimic existing style, naming conventions, and patterns\n\n## Tool Usage and File Reading\n\nFollow the tool docs for the available tools. In particular, for filesystem tools, use pagination (offset/limit) when reading large files.\n\n## Filesystem Tools `ls`, `read_file`, `write_file`, `edit_file`, `glob`, `grep`\n\nYou have access to a filesystem which you can interact with using these tools.\nAll file paths must start with a /.\n\n- ls: list files in a directory (requires absolute path)\n- read_file: read a file from the filesystem\n- write_file: write to a file in the filesystem\n- edit_file: edit a file in the filesystem\n- glob: find files matching a pattern (e.g., \"**/*.py\")\n- grep: search for text within files\n\n\n\n\n## Skills System\n\nYou have access to a skills library that provides specialized capabilities and domain knowledge.\n\n** Skills**: `/` (higher priority)\n\n**Available Skills:**\n\n- **xhs-copywriter**: 小红书平台文案创作专家，帮助用户创作吸引眼球的小红书笔记、种草文案、产品推荐等内容。适用于小红书营销、内容创作、品牌推广等场景。 (License: MIT, Compatibility: 无特殊依赖)\n  -> Allowed tools: web_search\n  -> Read `/xhs-copywriter/SKILL.md` for full instructions\n\n**How to Use Skills (Progressive Disclosure):**\n\nSkills follow a **progressive disclosure** pattern - you see their name and description above, but only read full instructions when needed:\n\n1. **Recognize when a skill applies**: Check if the user's task matches a skill's description\n2. **Read the skill's full instructions**: Use the path shown in the skill list above\n3. **Follow the skill's instructions**: SKILL.md contains step-by-step workflows, best practices, and examples\n4. **Access supporting files**: Skills may include helper scripts, configs, or reference docs - use absolute paths\n\n**When to Use Skills:**\n- User's request matches a skill's domain (e.g., \"research X\" -> web-research skill)\n- You need specialized knowledge or structured workflows\n- A skill provides proven patterns for complex tasks\n\n**Executing Skill Scripts:**\nSkills may contain Python scripts or other executable files. Always use absolute paths from the skill list.\n\n**Example Workflow:**\n\nUser: \"Can you research the latest developments in quantum computing?\"\n\n1. Check available skills -> See \"web-research\" skill with its path\n2. Read the skill using the path shown\n3. Follow the skill's research workflow (search -> organize -> synthesize)\n4. Use any helper scripts with absolute paths\n\n... (truncated, total 3109 chars)", "module": "debug_middleware", "function": "_log_system_prompt", "line": 78}
{"timestamp": "2026-02-26 13:43:00,575", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.agents.debug_middleware", "message": "[DEBUG-MIDDLEWARE] Found Skills section at line 48", "module": "debug_middleware", "function": "_log_skills_info", "line": 92}
{"timestamp": "2026-02-26 13:43:00,575", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.agents.debug_middleware", "message": "[DEBUG-MIDDLEWARE] Found Skills section at line 54", "module": "debug_middleware", "function": "_log_skills_info", "line": 92}
{"timestamp": "2026-02-26 13:43:00,576", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.agents.debug_middleware", "message": "[DEBUG-MIDDLEWARE] Skills in prompt: ['xhs-copywriter']", "module": "debug_middleware", "function": "_log_skills_info", "line": 99}
{"timestamp": "2026-02-26 13:43:00,803", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "dashscope", "message": "Request body: {'model': 'qwen-plus', 'parameters': {'top_p': 0.8, 'result_format': 'message', 'stream': True, 'tools': [{'type': 'function', 'function': {'name': 'ls', 'description': 'Lists all files in a directory.\\n\\nThis is useful for exploring the filesystem and finding the right file to read or edit.\\nYou should almost ALWAYS use this tool before using the read_file or edit_file tools.', 'parameters': {'properties': {'path': {'description': 'Absolute path to the directory to list. Must be absolute, not relative.', 'type': 'string'}}, 'required': ['path'], 'type': 'object'}}}, {'type': 'function', 'function': {'name': 'read_file', 'description': 'Reads a file from the filesystem.\\n\\nAssume this tool is able to read all files. If the User provides a path to a file assume that path is valid. It is okay to read a file that does not exist; an error will be returned.\\n\\nUsage:\\n- By default, it reads up to 100 lines starting from the beginning of the file\\n- **IMPORTANT for large files and codebase exploration**: Use pagination with offset and limit parameters to avoid context overflow\\n  - First scan: read_file(path, limit=100) to see file structure\\n  - Read more sections: read_file(path, offset=100, limit=200) for next 200 lines\\n  - Only omit limit (read full file) when necessary for editing\\n- Specify offset and limit: read_file(path, offset=0, limit=100) reads first 100 lines\\n- Results are returned using cat -n format, with line numbers starting at 1\\n- Lines longer than 5,000 characters will be split into multiple lines with continuation markers (e.g., 5.1, 5.2, etc.). When you specify a limit, these continuation lines count towards the limit.\\n- You have the capability to call multiple tools in a single response. It is always better to speculatively read multiple files as a batch that are potentially useful.\\n- If you read a file that exists but has empty contents you will receive a system reminder warning in place of file contents.\\n- Image files (`.png`, `.jpg`, `.jpeg`, `.gif`, `.webp`) are returned as multimodal image content blocks (see https://docs.langchain.com/oss/python/langchain/messages#multimodal).\\n\\nFor image tasks:\\n- Use `read_file(file_path=...)` for `.png/.jpg/.jpeg/.gif/.webp`\\n- Do NOT use `offset`/`limit` for images (pagination is text-only)\\n- If image details were compacted from history, call `read_file` again on the same path\\n\\n- You should ALWAYS make sure a file has been read before editing it.', 'parameters': {'properties': {'file_path': {'description': 'Absolute path to the file to read. Must be absolute, not relative.', 'type': 'string'}, 'offset': {'default': 0, 'description': 'Line number to start reading from (0-indexed). Use for pagination of large files.', 'type': 'integer'}, 'limit': {'default': 100, 'description': 'Maximum number of lines to read. Use for pagination of large files.', 'type': 'integer'}}, 'required': ['file_path'], 'type': 'object'}}}, {'type': 'function', 'function': {'name': 'write_file', 'description': 'Writes to a new file in the filesystem.\\n\\nUsage:\\n- The write_file tool will create the a new file.\\n- Prefer to edit existing files (with the edit_file tool) over creating new ones when possible.', 'parameters': {'properties': {'file_path': {'description': 'Absolute path where the file should be created. Must be absolute, not relative.', 'type': 'string'}, 'content': {'description': 'The text content to write to the file. This parameter is required.', 'type': 'string'}}, 'required': ['file_path', 'content'], 'type': 'object'}}}, {'type': 'function', 'function': {'name': 'edit_file', 'description': 'Performs exact string replacements in files.\\n\\nUsage:\\n- You must read the file before editing. This tool will error if you attempt an edit without reading the file first.\\n- When editing, preserve the exact indentation (tabs/spaces) from the read output. Never include line number prefixes in old_string or new_string.\\n- ALWAYS prefer editing existing files over creating new ones.\\n- Only use emojis if the user explicitly requests it.', 'parameters': {'properties': {'file_path': {'description': 'Absolute path to the file to edit. Must be absolute, not relative.', 'type': 'string'}, 'old_string': {'description': 'The exact text to find and replace. Must be unique in the file unless replace_all is True.', 'type': 'string'}, 'new_string': {'description': 'The text to replace old_string with. Must be different from old_string.', 'type': 'string'}, 'replace_all': {'default': False, 'description': 'If True, replace all occurrences of old_string. If False (default), old_string must be unique.', 'type': 'boolean'}}, 'required': ['file_path', 'old_string', 'new_string'], 'type': 'object'}}}, {'type': 'function', 'function': {'name': 'glob', 'description': 'Find files matching a glob pattern.\\n\\nSupports standard glob patterns: `*` (any characters), `**` (any directories), `?` (single character).\\nReturns a list of absolute file paths that match the pattern.\\n\\nExamples:\\n- `**/*.py` - Find all Python files\\n- `*.txt` - Find all text files in root\\n- `/subdir/**/*.md` - Find all markdown files under /subdir', 'parameters': {'properties': {'pattern': {'description': \"Glob pattern to match files (e.g., '**/*.py', '*.txt', '/subdir/**/*.md').\", 'type': 'string'}, 'path': {'default': '/', 'description': \"Base directory to search from. Defaults to root '/'.\", 'type': 'string'}}, 'required': ['pattern'], 'type': 'object'}}}, {'type': 'function', 'function': {'name': 'grep', 'description': 'Search for a text pattern across files.\\n\\nSearches for literal text (not regex) and returns matching files or content based on output_mode.\\nSpecial characters like parentheses, brackets, pipes, etc. are treated as literal characters, not regex operators.\\n\\nExamples:\\n- Search all files: `grep(pattern=\"TODO\")`\\n- Search Python files only: `grep(pattern=\"import\", glob=\"*.py\")`\\n- Show matching lines: `grep(pattern=\"error\", output_mode=\"content\")`\\n- Search for code with special chars: `grep(pattern=\"def __init__(self):\")`', 'parameters': {'properties': {'pattern': {'description': 'Text pattern to search for (literal string, not regex).', 'type': 'string'}, 'path': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'default': None, 'description': 'Directory to search in. Defaults to current working directory.'}, 'glob': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'default': None, 'description': \"Glob pattern to filter which files to search (e.g., '*.py').\"}, 'output_mode': {'default': 'files_with_matches', 'description': \"Output format: 'files_with_matches' (file paths only, default), 'content' (matching lines with context), 'count' (match counts per file).\", 'enum': ['files_with_matches', 'content', 'count'], 'type': 'string'}}, 'required': ['pattern'], 'type': 'object'}}}, {'type': 'function', 'function': {'name': 'search_knowledge_base', 'description': '从本地知识库中搜索相关文档。\\n\\n当用户询问项目文档、技术规范、API文档、内部资料等相关问题时使用此工具。\\n\\nArgs:\\n    query: 搜索查询语句\\n    k: 返回文档数量，默认4条\\n\\nReturns:\\n    相关文档的格式化内容', 'parameters': {'properties': {'query': {'type': 'string'}, 'k': {'default': 4, 'type': 'integer'}}, 'required': ['query'], 'type': 'object'}}}, {'type': 'function', 'function': {'name': 'web_search', 'description': '使用联网搜索获取最新信息。\\n\\n当用户询问实时信息、新闻、当前事件、天气、股价或知识库中未包含的内容时使用此工具。\\n\\nArgs:\\n    query: 搜索查询语句\\n    max_results: 返回结果数量，默认5条\\n\\nReturns:\\n    搜索结果', 'parameters': {'properties': {'query': {'type': 'string'}, 'max_results': {'default': 5, 'type': 'integer'}}, 'required': ['query'], 'type': 'object'}}}, {'type': 'function', 'function': {'name': 'ocr_document', 'description': '识别图片中的文字内容（OCR）。\\n\\n当用户上传图片并需要提取文字时使用此工具, 必须原样完整输出，不要总结、不要省略、不要改写\\n\\nArgs:\\n    image_url: 待处理图像的路径或URL。可以是相对路径(如 images/xxx.png)、\\n               本地绝对路径、或完整的HTTP URL。\\n\\nReturns:\\n    图片中提取的文字内容', 'parameters': {'properties': {'image_url': {'type': 'string'}}, 'required': ['image_url'], 'type': 'object'}}}, {'type': 'function', 'function': {'name': 'understand_image', 'description': '理解图片内容并描述图片中有什么。\\n\\n当用户上传图片并询问图片内容、场景、物体等时使用此工具。\\n\\nArgs:\\n    image_url: 待处理图像的路径或URL。可以是相对路径(如 images/xxx.png)、\\n               本地绝对路径、或完整的HTTP URL。\\n\\nReturns:\\n    图片内容的详细描述', 'parameters': {'properties': {'image_url': {'type': 'string'}}, 'required': ['image_url'], 'type': 'object'}}}, {'type': 'function', 'function': {'name': 'generate_image', 'description': '根据文本描述生成图像。\\n\\n当用户要求生成图像、绘画、设计图、创意图或任何视觉内容时使用此工具。\\n支持生成各种风格的图像，如写实、动漫、油画、水彩等。\\n\\nArgs:\\n    prompt: 图像的详细描述，越详细效果越好。可以描述场景、物体、风格、光线、颜色等。\\n    size: 图像尺寸，可选 \"1664*928\"(默认), \"1024*1024\", \"1024*768\", \"768*1024\"\\n    n: 生成图像数量，1-4之间的整数，默认1\\n\\nReturns:\\n    生成图像的URL列表', 'parameters': {'properties': {'prompt': {'type': 'string'}, 'size': {'default': '1664*928', 'type': 'string'}, 'n': {'default': 1, 'type': 'integer'}}, 'required': ['prompt'], 'type': 'object'}}}, {'type': 'function', 'function': {'name': 'edit_image', 'description': '根据编辑指令修改现有图像。\\n\\n当用户要求修改、优化、变换或编辑已有图像时使用此工具。\\n可以执行添加元素、改变风格、调整颜色、替换背景等操作。\\n\\nArgs:\\n    image_url: 待编辑图像的路径或URL。可以是相对路径(如 images/xxx.png)、\\n               本地绝对路径、或完整的HTTP URL。\\n    prompt: 编辑指令描述，详细说明想要如何修改图像\\n\\nReturns:\\n    编辑后图像的URL', 'parameters': {'properties': {'image_url': {'type': 'string'}, 'prompt': {'type': 'string'}}, 'required': ['image_url', 'prompt'], 'type': 'object'}}}, {'type': 'function', 'function': {'name': 'code_assist', 'description': '编程工具\\n适用场景：当用户需要编写代码、解决编程问题、理解代码或优化代码时使用此工具。\\n\\n注意：你必须原样完整输出结果，不要总结、不要省略、不要改写。\\n\\nArgs:\\n    prompt: 编程需求描述。详细说明需要实现什么功能或解决什么问题。\\n            示例: \"写一个快速排序算法\"、\"实现一个HTTP请求函数\"\\n    language: 编程语言名称。支持: python, javascript, java, c++, go, rust, typescript 等。\\n              默认值: \"python\"\\n\\nReturns:\\n    完整代码及解释说明 - 必须完整输出给用户', 'parameters': {'properties': {'prompt': {'type': 'string'}, 'language': {'default': 'python', 'type': 'string'}}, 'required': ['prompt'], 'type': 'object'}}}, {'type': 'function', 'function': {'name': 'translate_text', 'description': '将文本翻译成目标语言。\\n\\n当用户明确要求翻译、或需要将内容转换为其他语言时使用此工具。\\n\\nArgs:\\n    text: 待翻译的文本内容\\n    target_lang: 目标语言代码，如 zh(中文)、en(英语)、ja(日语)、ko(韩语)、fr(法语)、de(德语)、es(西班牙语)\\n    source_lang: 源语言代码，可选。不传则自动检测源语言\\n\\nReturns:\\n    翻译后的文本', 'parameters': {'properties': {'text': {'type': 'string'}, 'target_lang': {'type': 'string'}, 'source_lang': {'default': None, 'type': 'string'}}, 'required': ['text', 'target_lang'], 'type': 'object'}}}], 'tool_choice': None}, 'input': {'messages': [{'role': 'system', 'content': [{'type': 'text', 'text': '你是一个强大的AI助手，能够帮助用户处理各种任务。\\n\\n你可以使用多种工具来帮助用户，工具的功能说明已内置在系统中。\\n\\n**工具调用重要规则**：\\n- 如果调用工具缺少必填参数，不要调用工具，应该先询问用户提供缺失的信息\\n- 根据用户需求选择最合适的工具，避免不必要的工具调用\\n\\n**工具结果输出规则（非常重要）**：\\n- 当工具返回结果包含代码、完整答案或详细内容时，你必须原样完整输出给用户\\n- 禁止对工具返回的代码进行总结、省略、改写或简化\\n- 禁止使用\"代码如下\"、\"这是代码\"等简短描述代替完整输出\\n- 如果工具结果包含<INSTRUCTION>标签，必须严格遵循标签内的指令\\n- 当看到<INSTRUCTION>标签时，只输出标签后的内容，不要输出标签本身，不要做任何修改\\n\\n**技能使用规则（非常重要）**：\\n- 当用户请求匹配某个技能的描述时，你必须先调用 read_file 读取该技能的完整指令\\n- 禁止在没有读取技能文件的情况下直接回答相关任务\\n- 读取技能文件后，必须严格按照技能中的流程和模板执行任务\\n\\n请根据用户的需求，合理选择和使用工具。如果用户请求不明确，请主动询问以澄清需求。\\n'}, {'type': 'text', 'text': '\\n\\n## Following Conventions\\n\\n- Read files before editing — understand existing content before making changes\\n- Mimic existing style, naming conventions, and patterns\\n\\n## Tool Usage and File Reading\\n\\nFollow the tool docs for the available tools. In particular, for filesystem tools, use pagination (offset/limit) when reading large files.\\n\\n## Filesystem Tools `ls`, `read_file`, `write_file`, `edit_file`, `glob`, `grep`\\n\\nYou have access to a filesystem which you can interact with using these tools.\\nAll file paths must start with a /.\\n\\n- ls: list files in a directory (requires absolute path)\\n- read_file: read a file from the filesystem\\n- write_file: write to a file in the filesystem\\n- edit_file: edit a file in the filesystem\\n- glob: find files matching a pattern (e.g., \"**/*.py\")\\n- grep: search for text within files'}, {'type': 'text', 'text': '\\n\\n\\n\\n## Skills System\\n\\nYou have access to a skills library that provides specialized capabilities and domain knowledge.\\n\\n** Skills**: `/` (higher priority)\\n\\n**Available Skills:**\\n\\n- **xhs-copywriter**: 小红书平台文案创作专家，帮助用户创作吸引眼球的小红书笔记、种草文案、产品推荐等内容。适用于小红书营销、内容创作、品牌推广等场景。 (License: MIT, Compatibility: 无特殊依赖)\\n  -> Allowed tools: web_search\\n  -> Read `/xhs-copywriter/SKILL.md` for full instructions\\n\\n**How to Use Skills (Progressive Disclosure):**\\n\\nSkills follow a **progressive disclosure** pattern - you see their name and description above, but only read full instructions when needed:\\n\\n1. **Recognize when a skill applies**: Check if the user\\'s task matches a skill\\'s description\\n2. **Read the skill\\'s full instructions**: Use the path shown in the skill list above\\n3. **Follow the skill\\'s instructions**: SKILL.md contains step-by-step workflows, best practices, and examples\\n4. **Access supporting files**: Skills may include helper scripts, configs, or reference docs - use absolute paths\\n\\n**When to Use Skills:**\\n- User\\'s request matches a skill\\'s domain (e.g., \"research X\" -> web-research skill)\\n- You need specialized knowledge or structured workflows\\n- A skill provides proven patterns for complex tasks\\n\\n**Executing Skill Scripts:**\\nSkills may contain Python scripts or other executable files. Always use absolute paths from the skill list.\\n\\n**Example Workflow:**\\n\\nUser: \"Can you research the latest developments in quantum computing?\"\\n\\n1. Check available skills -> See \"web-research\" skill with its path\\n2. Read the skill using the path shown\\n3. Follow the skill\\'s research workflow (search -> organize -> synthesize)\\n4. Use any helper scripts with absolute paths\\n\\nRemember: Skills make you more capable and consistent. When in doubt, check if a skill exists for the task!\\n'}]}, {'role': 'user', 'content': '你好'}]}}", "module": "http_request", "function": "_handle_request", "line": 474}
{"timestamp": "2026-02-26 13:43:01,749", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "dashscope", "message": "Stream message: {'output': {'choices': [{'message': {'content': '你好', 'role': 'assistant'}, 'index': 0, 'finish_reason': 'null'}]}, 'usage': {'total_tokens': 4064, 'output_tokens': 1, 'input_tokens': 4063, 'prompt_tokens_details': {'cached_tokens': 0}}, 'request_id': '33117ef4-eb34-4402-bb3f-2062dab12fe0'}", "module": "http_request", "function": "_handle_response", "line": 383}
{"timestamp": "2026-02-26 13:43:01,774", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "dashscope", "message": "Stream message: {'output': {'choices': [{'message': {'content': '你好！很高兴', 'role': 'assistant'}, 'index': 0, 'finish_reason': 'null'}]}, 'usage': {'total_tokens': 4066, 'output_tokens': 3, 'input_tokens': 4063, 'prompt_tokens_details': {'cached_tokens': 0}}, 'request_id': '33117ef4-eb34-4402-bb3f-2062dab12fe0'}", "module": "http_request", "function": "_handle_response", "line": 383}
{"timestamp": "2026-02-26 13:43:01,775", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 1: 2 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 13:43:01,815", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "dashscope", "message": "Stream message: {'output': {'choices': [{'message': {'content': '你好！很高兴见到', 'role': 'assistant'}, 'index': 0, 'finish_reason': 'null'}]}, 'usage': {'total_tokens': 4067, 'output_tokens': 4, 'input_tokens': 4063, 'prompt_tokens_details': {'cached_tokens': 0}}, 'request_id': '33117ef4-eb34-4402-bb3f-2062dab12fe0'}", "module": "http_request", "function": "_handle_response", "line": 383}
{"timestamp": "2026-02-26 13:43:01,816", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 2: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 13:43:01,837", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "dashscope", "message": "Stream message: {'output': {'choices': [{'message': {'content': '你好！很高兴见到你，', 'role': 'assistant'}, 'index': 0, 'finish_reason': 'null'}]}, 'usage': {'total_tokens': 4069, 'output_tokens': 6, 'input_tokens': 4063, 'prompt_tokens_details': {'cached_tokens': 0}}, 'request_id': '33117ef4-eb34-4402-bb3f-2062dab12fe0'}", "module": "http_request", "function": "_handle_response", "line": 383}
{"timestamp": "2026-02-26 13:43:01,838", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 3: 2 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 13:43:01,963", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "dashscope", "message": "Stream message: {'output': {'choices': [{'message': {'content': '你好！很高兴见到你，有什么我可以帮忙的吗？', 'role': 'assistant'}, 'index': 0, 'finish_reason': 'null'}]}, 'usage': {'total_tokens': 4075, 'output_tokens': 12, 'input_tokens': 4063, 'prompt_tokens_details': {'cached_tokens': 0}}, 'request_id': '33117ef4-eb34-4402-bb3f-2062dab12fe0'}", "module": "http_request", "function": "_handle_response", "line": 383}
{"timestamp": "2026-02-26 13:43:01,964", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 4: 2 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 13:43:02,029", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "dashscope", "message": "Stream message: {'output': {'choices': [{'message': {'content': '你好！很高兴见到你，有什么我可以帮忙的吗？😊', 'role': 'assistant'}, 'index': 0, 'finish_reason': 'stop'}]}, 'usage': {'total_tokens': 4076, 'output_tokens': 13, 'input_tokens': 4063, 'prompt_tokens_details': {'cached_tokens': 0}}, 'request_id': '33117ef4-eb34-4402-bb3f-2062dab12fe0'}", "module": "http_request", "function": "_handle_response", "line": 383}
{"timestamp": "2026-02-26 13:43:02,031", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 5: 11 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 13:43:02,052", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 6: 1 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 13:43:02,067", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] updates data: {'model': {'messages': [AIMessage(content='你好！很高兴见到你，有什么我可以帮忙的吗？😊', additional_kwargs={}, response_metadata={'finish_reason': 'stop', 'request_id': '33117ef4-eb34-4402-bb3f-2062dab12fe0', 'token_usage': {'input_tokens': 4063, 'output_tokens': 13, 'total_tokens': 4076, 'prompt_tokens_details': {'cached_tokens': 0}}}, id='lc_run--019c9a30-4581-7380-9f7f-84273ba09706', tool_calls=[], invalid_tool_calls=[])]}}", "module": "chat_service", "function": "process_message", "line": 140}
{"timestamp": "2026-02-26 13:43:02,069", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] source=model, update keys=dict_keys(['messages'])", "module": "chat_service", "function": "process_message", "line": 142}
{"timestamp": "2026-02-26 13:43:02,071", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] formatted_list=[{'type': 'content', 'data': {'content': '你好！很高兴见到你，有什么我可以帮忙的吗？😊'}}]", "module": "chat_service", "function": "process_message", "line": 145}
{"timestamp": "2026-02-26 13:43:02,079", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT] Agent流式执行完成", "module": "chat_service", "function": "process_message", "line": 155}
{"timestamp": "2026-02-26 13:43:02,082", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.api.v1.chat", "message": "[SSE] Stream complete, total chunks: 6, response length: 22", "module": "chat", "function": "generate", "line": 127}
{"timestamp": "2026-02-26 13:43:02,089", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.services.chat_service", "message": "[DB] Saved message id=624", "module": "chat_service", "function": "create_message", "line": 74}
{"timestamp": "2026-02-26 13:43:02,089", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.services.chat_service", "message": "[DB] Verify saved: id=624", "module": "chat_service", "function": "create_message", "line": 81}
{"timestamp": "2026-02-26 13:43:02,090", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.services.chat_service", "message": "[CACHE DELETE] 已删除消息缓存: conversation_id=229, keys=1", "module": "chat_service", "function": "_invalidate_messages_cache", "line": 542}
{"timestamp": "2026-02-26 13:45:01,936", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver connection closed", "module": "agent_factory", "function": "close_checkpointer", "line": 90}
{"timestamp": "2026-02-26 13:45:01,952", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool disposed. Pool size: 10  Connections in pool: 0 Current Overflow: -10 Current Checked out connections: 0", "module": "impl", "function": "dispose", "line": 228}
{"timestamp": "2026-02-26 13:45:01,953", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool recreating", "module": "impl", "function": "recreate", "line": 203}
{"timestamp": "2026-02-26 13:45:01,954", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 13:45:01,954", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 59}
{"timestamp": "2026-02-26 13:45:04,630", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 45}
{"timestamp": "2026-02-26 13:45:04,673", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver initialized", "module": "agent_factory", "function": "init_checkpointer", "line": 72}
{"timestamp": "2026-02-26 13:45:04,673", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2026-02-26 13:45:04,674", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 50}
{"timestamp": "2026-02-26 13:45:04,674", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始缓存预热", "module": "cache_warmup", "function": "warmup_all", "line": 157}
{"timestamp": "2026-02-26 13:45:04,734", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 2/2 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 59}
{"timestamp": "2026-02-26 13:45:04,736", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0/0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 100}
{"timestamp": "2026-02-26 13:45:04,742", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 70/70 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 152}
{"timestamp": "2026-02-26 13:45:04,742", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 缓存预热完成", "module": "cache_warmup", "function": "warmup_all", "line": 163}
{"timestamp": "2026-02-26 13:45:19,828", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver connection closed", "module": "agent_factory", "function": "close_checkpointer", "line": 90}
{"timestamp": "2026-02-26 13:45:19,844", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool disposed. Pool size: 10  Connections in pool: 0 Current Overflow: -10 Current Checked out connections: 0", "module": "impl", "function": "dispose", "line": 228}
{"timestamp": "2026-02-26 13:45:19,844", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool recreating", "module": "impl", "function": "recreate", "line": 203}
{"timestamp": "2026-02-26 13:45:19,844", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 13:45:19,844", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 59}
{"timestamp": "2026-02-26 13:45:22,500", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 45}
{"timestamp": "2026-02-26 13:45:22,542", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver initialized", "module": "agent_factory", "function": "init_checkpointer", "line": 72}
{"timestamp": "2026-02-26 13:45:22,542", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2026-02-26 13:45:22,542", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 50}
{"timestamp": "2026-02-26 13:45:22,543", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始缓存预热", "module": "cache_warmup", "function": "warmup_all", "line": 157}
{"timestamp": "2026-02-26 13:45:22,604", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 2/2 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 59}
{"timestamp": "2026-02-26 13:45:22,606", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0/0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 100}
{"timestamp": "2026-02-26 13:45:22,611", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 70/70 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 152}
{"timestamp": "2026-02-26 13:45:22,612", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 缓存预热完成", "module": "cache_warmup", "function": "warmup_all", "line": 163}
{"timestamp": "2026-02-26 13:45:22,721", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver connection closed", "module": "agent_factory", "function": "close_checkpointer", "line": 90}
{"timestamp": "2026-02-26 13:45:22,737", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool disposed. Pool size: 10  Connections in pool: 0 Current Overflow: -10 Current Checked out connections: 0", "module": "impl", "function": "dispose", "line": 228}
{"timestamp": "2026-02-26 13:45:22,738", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool recreating", "module": "impl", "function": "recreate", "line": 203}
{"timestamp": "2026-02-26 13:45:22,739", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 13:45:22,741", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 59}
{"timestamp": "2026-02-26 13:45:25,398", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 45}
{"timestamp": "2026-02-26 13:45:25,446", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver initialized", "module": "agent_factory", "function": "init_checkpointer", "line": 72}
{"timestamp": "2026-02-26 13:45:25,446", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2026-02-26 13:45:25,447", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 50}
{"timestamp": "2026-02-26 13:45:25,447", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始缓存预热", "module": "cache_warmup", "function": "warmup_all", "line": 157}
{"timestamp": "2026-02-26 13:45:25,624", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 2/2 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 59}
{"timestamp": "2026-02-26 13:45:25,626", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0/0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 100}
{"timestamp": "2026-02-26 13:45:25,633", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 70/70 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 152}
{"timestamp": "2026-02-26 13:45:25,634", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 缓存预热完成", "module": "cache_warmup", "function": "warmup_all", "line": 163}
{"timestamp": "2026-02-26 13:46:55,424", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.services.conversation_service", "message": "[CACHE DELETE] 已删除用户会话列表缓存: user_id=1, keys=1", "module": "conversation_service", "function": "_invalidate_user_cache", "line": 144}
{"timestamp": "2026-02-26 13:46:55,425", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.tracing", "message": "[REQUEST] method=POST path=/api/v1/conversations status_code=201 request_id=2900196f-e306-4e86-beba-0b3ea3e7b1d5", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 13:46:55,461", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversation:233:1", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:46:55,465", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.tracing", "message": "[REQUEST] method=GET path=/api/v1/chat/conversations/233/history status_code=200 request_id=71def4ae-e11b-43b9-b7fd-82fb5ef0b203", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 13:47:01,958", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.services.chat_service", "message": "[DB] Saved message id=625", "module": "chat_service", "function": "create_message", "line": 74}
{"timestamp": "2026-02-26 13:47:01,959", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.services.chat_service", "message": "[DB] Verify saved: id=625", "module": "chat_service", "function": "create_message", "line": 81}
{"timestamp": "2026-02-26 13:47:01,960", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for messages:conversation:229:user:2:skip:0:limit:50", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:47:01,961", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT] 开始生成流式响应: conversation_id=229, enable_thinking=False", "module": "chat_service", "function": "generate_response_stream", "line": 461}
{"timestamp": "2026-02-26 13:47:01,961", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT] 开始处理消息: conversation_id=229", "module": "chat_service", "function": "process_message", "line": 101}
{"timestamp": "2026-02-26 13:47:01,961", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT] 上下文准备完成，长度: 5", "module": "chat_service", "function": "process_message", "line": 115}
{"timestamp": "2026-02-26 13:47:01,961", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT] 创建Agent: is_expert=False, enable_thinking=False", "module": "chat_service", "function": "process_message", "line": 118}
{"timestamp": "2026-02-26 13:47:02,113", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] Initialized skills backend: F:\\code\\dragonai-v2-local\\app\\skills", "module": "agent_factory", "function": "_get_skills_backend", "line": 126}
{"timestamp": "2026-02-26 13:47:02,159", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] Created and cached agent: expert_False_thinking_False", "module": "agent_factory", "function": "create_chat_agent", "line": 182}
{"timestamp": "2026-02-26 13:47:02,159", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT] 开始流式执行Agent", "module": "chat_service", "function": "process_message", "line": 126}
{"timestamp": "2026-02-26 13:47:02,161", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.tracing", "message": "[REQUEST] method=POST path=/api/v1/chat/send status_code=200 request_id=6b1407c8-8dd7-4f08-8285-08932b760550", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 13:47:02,165", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] updates data: {'SkillsMiddleware.before_agent': None}", "module": "chat_service", "function": "process_message", "line": 140}
{"timestamp": "2026-02-26 13:47:02,165", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] source=SkillsMiddleware.before_agent, update keys=<class 'NoneType'>", "module": "chat_service", "function": "process_message", "line": 142}
{"timestamp": "2026-02-26 13:47:02,216", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "dashscope", "message": "Request body: {'model': 'qwen-plus', 'parameters': {'top_p': 0.8, 'result_format': 'message', 'stream': True, 'tools': [{'type': 'function', 'function': {'name': 'ls', 'description': 'Lists all files in a directory.\\n\\nThis is useful for exploring the filesystem and finding the right file to read or edit.\\nYou should almost ALWAYS use this tool before using the read_file or edit_file tools.', 'parameters': {'properties': {'path': {'description': 'Absolute path to the directory to list. Must be absolute, not relative.', 'type': 'string'}}, 'required': ['path'], 'type': 'object'}}}, {'type': 'function', 'function': {'name': 'read_file', 'description': 'Reads a file from the filesystem.\\n\\nAssume this tool is able to read all files. If the User provides a path to a file assume that path is valid. It is okay to read a file that does not exist; an error will be returned.\\n\\nUsage:\\n- By default, it reads up to 100 lines starting from the beginning of the file\\n- **IMPORTANT for large files and codebase exploration**: Use pagination with offset and limit parameters to avoid context overflow\\n  - First scan: read_file(path, limit=100) to see file structure\\n  - Read more sections: read_file(path, offset=100, limit=200) for next 200 lines\\n  - Only omit limit (read full file) when necessary for editing\\n- Specify offset and limit: read_file(path, offset=0, limit=100) reads first 100 lines\\n- Results are returned using cat -n format, with line numbers starting at 1\\n- Lines longer than 5,000 characters will be split into multiple lines with continuation markers (e.g., 5.1, 5.2, etc.). When you specify a limit, these continuation lines count towards the limit.\\n- You have the capability to call multiple tools in a single response. It is always better to speculatively read multiple files as a batch that are potentially useful.\\n- If you read a file that exists but has empty contents you will receive a system reminder warning in place of file contents.\\n- Image files (`.png`, `.jpg`, `.jpeg`, `.gif`, `.webp`) are returned as multimodal image content blocks (see https://docs.langchain.com/oss/python/langchain/messages#multimodal).\\n\\nFor image tasks:\\n- Use `read_file(file_path=...)` for `.png/.jpg/.jpeg/.gif/.webp`\\n- Do NOT use `offset`/`limit` for images (pagination is text-only)\\n- If image details were compacted from history, call `read_file` again on the same path\\n\\n- You should ALWAYS make sure a file has been read before editing it.', 'parameters': {'properties': {'file_path': {'description': 'Absolute path to the file to read. Must be absolute, not relative.', 'type': 'string'}, 'offset': {'default': 0, 'description': 'Line number to start reading from (0-indexed). Use for pagination of large files.', 'type': 'integer'}, 'limit': {'default': 100, 'description': 'Maximum number of lines to read. Use for pagination of large files.', 'type': 'integer'}}, 'required': ['file_path'], 'type': 'object'}}}, {'type': 'function', 'function': {'name': 'write_file', 'description': 'Writes to a new file in the filesystem.\\n\\nUsage:\\n- The write_file tool will create the a new file.\\n- Prefer to edit existing files (with the edit_file tool) over creating new ones when possible.', 'parameters': {'properties': {'file_path': {'description': 'Absolute path where the file should be created. Must be absolute, not relative.', 'type': 'string'}, 'content': {'description': 'The text content to write to the file. This parameter is required.', 'type': 'string'}}, 'required': ['file_path', 'content'], 'type': 'object'}}}, {'type': 'function', 'function': {'name': 'edit_file', 'description': 'Performs exact string replacements in files.\\n\\nUsage:\\n- You must read the file before editing. This tool will error if you attempt an edit without reading the file first.\\n- When editing, preserve the exact indentation (tabs/spaces) from the read output. Never include line number prefixes in old_string or new_string.\\n- ALWAYS prefer editing existing files over creating new ones.\\n- Only use emojis if the user explicitly requests it.', 'parameters': {'properties': {'file_path': {'description': 'Absolute path to the file to edit. Must be absolute, not relative.', 'type': 'string'}, 'old_string': {'description': 'The exact text to find and replace. Must be unique in the file unless replace_all is True.', 'type': 'string'}, 'new_string': {'description': 'The text to replace old_string with. Must be different from old_string.', 'type': 'string'}, 'replace_all': {'default': False, 'description': 'If True, replace all occurrences of old_string. If False (default), old_string must be unique.', 'type': 'boolean'}}, 'required': ['file_path', 'old_string', 'new_string'], 'type': 'object'}}}, {'type': 'function', 'function': {'name': 'glob', 'description': 'Find files matching a glob pattern.\\n\\nSupports standard glob patterns: `*` (any characters), `**` (any directories), `?` (single character).\\nReturns a list of absolute file paths that match the pattern.\\n\\nExamples:\\n- `**/*.py` - Find all Python files\\n- `*.txt` - Find all text files in root\\n- `/subdir/**/*.md` - Find all markdown files under /subdir', 'parameters': {'properties': {'pattern': {'description': \"Glob pattern to match files (e.g., '**/*.py', '*.txt', '/subdir/**/*.md').\", 'type': 'string'}, 'path': {'default': '/', 'description': \"Base directory to search from. Defaults to root '/'.\", 'type': 'string'}}, 'required': ['pattern'], 'type': 'object'}}}, {'type': 'function', 'function': {'name': 'grep', 'description': 'Search for a text pattern across files.\\n\\nSearches for literal text (not regex) and returns matching files or content based on output_mode.\\nSpecial characters like parentheses, brackets, pipes, etc. are treated as literal characters, not regex operators.\\n\\nExamples:\\n- Search all files: `grep(pattern=\"TODO\")`\\n- Search Python files only: `grep(pattern=\"import\", glob=\"*.py\")`\\n- Show matching lines: `grep(pattern=\"error\", output_mode=\"content\")`\\n- Search for code with special chars: `grep(pattern=\"def __init__(self):\")`', 'parameters': {'properties': {'pattern': {'description': 'Text pattern to search for (literal string, not regex).', 'type': 'string'}, 'path': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'default': None, 'description': 'Directory to search in. Defaults to current working directory.'}, 'glob': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'default': None, 'description': \"Glob pattern to filter which files to search (e.g., '*.py').\"}, 'output_mode': {'default': 'files_with_matches', 'description': \"Output format: 'files_with_matches' (file paths only, default), 'content' (matching lines with context), 'count' (match counts per file).\", 'enum': ['files_with_matches', 'content', 'count'], 'type': 'string'}}, 'required': ['pattern'], 'type': 'object'}}}, {'type': 'function', 'function': {'name': 'search_knowledge_base', 'description': '从本地知识库中搜索相关文档。\\n\\n当用户询问项目文档、技术规范、API文档、内部资料等相关问题时使用此工具。\\n\\nArgs:\\n    query: 搜索查询语句\\n    k: 返回文档数量，默认4条\\n\\nReturns:\\n    相关文档的格式化内容', 'parameters': {'properties': {'query': {'type': 'string'}, 'k': {'default': 4, 'type': 'integer'}}, 'required': ['query'], 'type': 'object'}}}, {'type': 'function', 'function': {'name': 'web_search', 'description': '使用联网搜索获取最新信息。\\n\\n当用户询问实时信息、新闻、当前事件、天气、股价或知识库中未包含的内容时使用此工具。\\n\\nArgs:\\n    query: 搜索查询语句\\n    max_results: 返回结果数量，默认5条\\n\\nReturns:\\n    搜索结果', 'parameters': {'properties': {'query': {'type': 'string'}, 'max_results': {'default': 5, 'type': 'integer'}}, 'required': ['query'], 'type': 'object'}}}, {'type': 'function', 'function': {'name': 'ocr_document', 'description': '识别图片中的文字内容（OCR）。\\n\\n当用户上传图片并需要提取文字时使用此工具, 必须原样完整输出，不要总结、不要省略、不要改写\\n\\nArgs:\\n    image_url: 待处理图像的路径或URL。可以是相对路径(如 images/xxx.png)、\\n               本地绝对路径、或完整的HTTP URL。\\n\\nReturns:\\n    图片中提取的文字内容', 'parameters': {'properties': {'image_url': {'type': 'string'}}, 'required': ['image_url'], 'type': 'object'}}}, {'type': 'function', 'function': {'name': 'understand_image', 'description': '理解图片内容并描述图片中有什么。\\n\\n当用户上传图片并询问图片内容、场景、物体等时使用此工具。\\n\\nArgs:\\n    image_url: 待处理图像的路径或URL。可以是相对路径(如 images/xxx.png)、\\n               本地绝对路径、或完整的HTTP URL。\\n\\nReturns:\\n    图片内容的详细描述', 'parameters': {'properties': {'image_url': {'type': 'string'}}, 'required': ['image_url'], 'type': 'object'}}}, {'type': 'function', 'function': {'name': 'generate_image', 'description': '根据文本描述生成图像。\\n\\n当用户要求生成图像、绘画、设计图、创意图或任何视觉内容时使用此工具。\\n支持生成各种风格的图像，如写实、动漫、油画、水彩等。\\n\\nArgs:\\n    prompt: 图像的详细描述，越详细效果越好。可以描述场景、物体、风格、光线、颜色等。\\n    size: 图像尺寸，可选 \"1664*928\"(默认), \"1024*1024\", \"1024*768\", \"768*1024\"\\n    n: 生成图像数量，1-4之间的整数，默认1\\n\\nReturns:\\n    生成图像的URL列表', 'parameters': {'properties': {'prompt': {'type': 'string'}, 'size': {'default': '1664*928', 'type': 'string'}, 'n': {'default': 1, 'type': 'integer'}}, 'required': ['prompt'], 'type': 'object'}}}, {'type': 'function', 'function': {'name': 'edit_image', 'description': '根据编辑指令修改现有图像。\\n\\n当用户要求修改、优化、变换或编辑已有图像时使用此工具。\\n可以执行添加元素、改变风格、调整颜色、替换背景等操作。\\n\\nArgs:\\n    image_url: 待编辑图像的路径或URL。可以是相对路径(如 images/xxx.png)、\\n               本地绝对路径、或完整的HTTP URL。\\n    prompt: 编辑指令描述，详细说明想要如何修改图像\\n\\nReturns:\\n    编辑后图像的URL', 'parameters': {'properties': {'image_url': {'type': 'string'}, 'prompt': {'type': 'string'}}, 'required': ['image_url', 'prompt'], 'type': 'object'}}}, {'type': 'function', 'function': {'name': 'code_assist', 'description': '编程工具\\n适用场景：当用户需要编写代码、解决编程问题、理解代码或优化代码时使用此工具。\\n\\n注意：你必须原样完整输出结果，不要总结、不要省略、不要改写。\\n\\nArgs:\\n    prompt: 编程需求描述。详细说明需要实现什么功能或解决什么问题。\\n            示例: \"写一个快速排序算法\"、\"实现一个HTTP请求函数\"\\n    language: 编程语言名称。支持: python, javascript, java, c++, go, rust, typescript 等。\\n              默认值: \"python\"\\n\\nReturns:\\n    完整代码及解释说明 - 必须完整输出给用户', 'parameters': {'properties': {'prompt': {'type': 'string'}, 'language': {'default': 'python', 'type': 'string'}}, 'required': ['prompt'], 'type': 'object'}}}, {'type': 'function', 'function': {'name': 'translate_text', 'description': '将文本翻译成目标语言。\\n\\n当用户明确要求翻译、或需要将内容转换为其他语言时使用此工具。\\n\\nArgs:\\n    text: 待翻译的文本内容\\n    target_lang: 目标语言代码，如 zh(中文)、en(英语)、ja(日语)、ko(韩语)、fr(法语)、de(德语)、es(西班牙语)\\n    source_lang: 源语言代码，可选。不传则自动检测源语言\\n\\nReturns:\\n    翻译后的文本', 'parameters': {'properties': {'text': {'type': 'string'}, 'target_lang': {'type': 'string'}, 'source_lang': {'default': None, 'type': 'string'}}, 'required': ['text', 'target_lang'], 'type': 'object'}}}], 'tool_choice': None}, 'input': {'messages': [{'role': 'system', 'content': [{'type': 'text', 'text': '你是一个强大的AI助手，能够帮助用户处理各种任务。\\n\\n你可以使用多种工具来帮助用户，工具的功能说明已内置在系统中。\\n\\n**工具调用重要规则**：\\n- 如果调用工具缺少必填参数，不要调用工具，应该先询问用户提供缺失的信息\\n- 根据用户需求选择最合适的工具，避免不必要的工具调用\\n\\n**工具结果输出规则（非常重要）**：\\n- 当工具返回结果包含代码、完整答案或详细内容时，你必须原样完整输出给用户\\n- 禁止对工具返回的代码进行总结、省略、改写或简化\\n- 禁止使用\"代码如下\"、\"这是代码\"等简短描述代替完整输出\\n- 如果工具结果包含<INSTRUCTION>标签，必须严格遵循标签内的指令\\n- 当看到<INSTRUCTION>标签时，只输出标签后的内容，不要输出标签本身，不要做任何修改\\n\\n**技能使用规则（非常重要）**：\\n- 当用户请求匹配某个技能的描述时，你必须先调用 read_file 读取该技能的完整指令\\n- 禁止在没有读取技能文件的情况下直接回答相关任务\\n- 读取技能文件后，必须严格按照技能中的流程和模板执行任务\\n\\n请根据用户的需求，合理选择和使用工具。如果用户请求不明确，请主动询问以澄清需求。\\n'}, {'type': 'text', 'text': '\\n\\n## Following Conventions\\n\\n- Read files before editing — understand existing content before making changes\\n- Mimic existing style, naming conventions, and patterns\\n\\n## Tool Usage and File Reading\\n\\nFollow the tool docs for the available tools. In particular, for filesystem tools, use pagination (offset/limit) when reading large files.\\n\\n## Filesystem Tools `ls`, `read_file`, `write_file`, `edit_file`, `glob`, `grep`\\n\\nYou have access to a filesystem which you can interact with using these tools.\\nAll file paths must start with a /.\\n\\n- ls: list files in a directory (requires absolute path)\\n- read_file: read a file from the filesystem\\n- write_file: write to a file in the filesystem\\n- edit_file: edit a file in the filesystem\\n- glob: find files matching a pattern (e.g., \"**/*.py\")\\n- grep: search for text within files'}, {'type': 'text', 'text': '\\n\\n\\n\\n## Skills System\\n\\nYou have access to a skills library that provides specialized capabilities and domain knowledge.\\n\\n** Skills**: `/` (higher priority)\\n\\n**Available Skills:**\\n\\n- **xhs-copywriter**: 小红书平台文案创作专家，帮助用户创作吸引眼球的小红书笔记、种草文案、产品推荐等内容。适用于小红书营销、内容创作、品牌推广等场景。 (License: MIT, Compatibility: 无特殊依赖)\\n  -> Allowed tools: web_search\\n  -> Read `/xhs-copywriter/SKILL.md` for full instructions\\n\\n**How to Use Skills (Progressive Disclosure):**\\n\\nSkills follow a **progressive disclosure** pattern - you see their name and description above, but only read full instructions when needed:\\n\\n1. **Recognize when a skill applies**: Check if the user\\'s task matches a skill\\'s description\\n2. **Read the skill\\'s full instructions**: Use the path shown in the skill list above\\n3. **Follow the skill\\'s instructions**: SKILL.md contains step-by-step workflows, best practices, and examples\\n4. **Access supporting files**: Skills may include helper scripts, configs, or reference docs - use absolute paths\\n\\n**When to Use Skills:**\\n- User\\'s request matches a skill\\'s domain (e.g., \"research X\" -> web-research skill)\\n- You need specialized knowledge or structured workflows\\n- A skill provides proven patterns for complex tasks\\n\\n**Executing Skill Scripts:**\\nSkills may contain Python scripts or other executable files. Always use absolute paths from the skill list.\\n\\n**Example Workflow:**\\n\\nUser: \"Can you research the latest developments in quantum computing?\"\\n\\n1. Check available skills -> See \"web-research\" skill with its path\\n2. Read the skill using the path shown\\n3. Follow the skill\\'s research workflow (search -> organize -> synthesize)\\n4. Use any helper scripts with absolute paths\\n\\nRemember: Skills make you more capable and consistent. When in doubt, check if a skill exists for the task!\\n'}]}, {'role': 'user', 'content': '你好'}, {'role': 'assistant', 'content': '你好！很高兴见到你，有什么我可以帮忙的吗？😊'}, {'role': 'user', 'content': 'hello'}]}}", "module": "http_request", "function": "_handle_request", "line": 474}
{"timestamp": "2026-02-26 13:47:02,972", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "dashscope", "message": "Stream message: {'output': {'choices': [{'message': {'content': 'Hello', 'role': 'assistant'}, 'index': 0, 'finish_reason': 'null'}]}, 'usage': {'total_tokens': 4088, 'output_tokens': 1, 'input_tokens': 4087, 'prompt_tokens_details': {'cached_tokens': 0}}, 'request_id': '4b74c6cd-e296-4593-b84c-12aa3c646638'}", "module": "http_request", "function": "_handle_response", "line": 383}
{"timestamp": "2026-02-26 13:47:02,997", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "dashscope", "message": "Stream message: {'output': {'choices': [{'message': {'content': 'Hello! How', 'role': 'assistant'}, 'index': 0, 'finish_reason': 'null'}]}, 'usage': {'total_tokens': 4090, 'output_tokens': 3, 'input_tokens': 4087, 'prompt_tokens_details': {'cached_tokens': 0}}, 'request_id': '4b74c6cd-e296-4593-b84c-12aa3c646638'}", "module": "http_request", "function": "_handle_response", "line": 383}
{"timestamp": "2026-02-26 13:47:02,998", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 1: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 13:47:03,058", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "dashscope", "message": "Stream message: {'output': {'choices': [{'message': {'content': 'Hello! How can I assist', 'role': 'assistant'}, 'index': 0, 'finish_reason': 'null'}]}, 'usage': {'total_tokens': 4093, 'output_tokens': 6, 'input_tokens': 4087, 'prompt_tokens_details': {'cached_tokens': 0}}, 'request_id': '4b74c6cd-e296-4593-b84c-12aa3c646638'}", "module": "http_request", "function": "_handle_response", "line": 383}
{"timestamp": "2026-02-26 13:47:03,059", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 2: 5 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 13:47:03,103", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "dashscope", "message": "Stream message: {'output': {'choices': [{'message': {'content': 'Hello! How can I assist you today?', 'role': 'assistant'}, 'index': 0, 'finish_reason': 'null'}]}, 'usage': {'total_tokens': 4096, 'output_tokens': 9, 'input_tokens': 4087, 'prompt_tokens_details': {'cached_tokens': 0}}, 'request_id': '4b74c6cd-e296-4593-b84c-12aa3c646638'}", "module": "http_request", "function": "_handle_response", "line": 383}
{"timestamp": "2026-02-26 13:47:03,104", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 3: 13 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 13:47:03,189", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "dashscope", "message": "Stream message: {'output': {'choices': [{'message': {'content': 'Hello! How can I assist you today? 😊', 'role': 'assistant'}, 'index': 0, 'finish_reason': 'stop'}]}, 'usage': {'total_tokens': 4098, 'output_tokens': 11, 'input_tokens': 4087, 'prompt_tokens_details': {'cached_tokens': 0}}, 'request_id': '4b74c6cd-e296-4593-b84c-12aa3c646638'}", "module": "http_request", "function": "_handle_response", "line": 383}
{"timestamp": "2026-02-26 13:47:03,190", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 4: 11 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 13:47:03,208", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 5: 2 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 13:47:03,226", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] updates data: {'model': {'messages': [AIMessage(content='Hello! How can I assist you today? 😊', additional_kwargs={}, response_metadata={'finish_reason': 'stop', 'request_id': '4b74c6cd-e296-4593-b84c-12aa3c646638', 'token_usage': {'input_tokens': 4087, 'output_tokens': 11, 'total_tokens': 4098, 'prompt_tokens_details': {'cached_tokens': 0}}}, id='lc_run--019c9a33-f4a8-79e1-80dd-8f07f9f101df', tool_calls=[], invalid_tool_calls=[])]}}", "module": "chat_service", "function": "process_message", "line": 140}
{"timestamp": "2026-02-26 13:47:03,226", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] source=model, update keys=dict_keys(['messages'])", "module": "chat_service", "function": "process_message", "line": 142}
{"timestamp": "2026-02-26 13:47:03,227", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] formatted_list=[{'type': 'content', 'data': {'content': 'Hello! How can I assist you today? 😊'}}]", "module": "chat_service", "function": "process_message", "line": 145}
{"timestamp": "2026-02-26 13:47:03,228", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT] Agent流式执行完成", "module": "chat_service", "function": "process_message", "line": 155}
{"timestamp": "2026-02-26 13:47:03,228", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.api.v1.chat", "message": "[SSE] Stream complete, total chunks: 5, response length: 36", "module": "chat", "function": "generate", "line": 127}
{"timestamp": "2026-02-26 13:47:03,230", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.services.chat_service", "message": "[DB] Saved message id=626", "module": "chat_service", "function": "create_message", "line": 74}
{"timestamp": "2026-02-26 13:47:03,230", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.services.chat_service", "message": "[DB] Verify saved: id=626", "module": "chat_service", "function": "create_message", "line": 81}
{"timestamp": "2026-02-26 13:47:03,230", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.services.chat_service", "message": "[CACHE DELETE] 已删除消息缓存: conversation_id=229, keys=1", "module": "chat_service", "function": "_invalidate_messages_cache", "line": 542}
{"timestamp": "2026-02-26 13:48:46,691", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver connection closed", "module": "agent_factory", "function": "close_checkpointer", "line": 90}
{"timestamp": "2026-02-26 13:48:46,707", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool disposed. Pool size: 10  Connections in pool: 0 Current Overflow: -10 Current Checked out connections: 0", "module": "impl", "function": "dispose", "line": 228}
{"timestamp": "2026-02-26 13:48:46,708", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool recreating", "module": "impl", "function": "recreate", "line": 203}
{"timestamp": "2026-02-26 13:48:46,708", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 13:48:46,708", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 59}
{"timestamp": "2026-02-26 13:48:53,951", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 45}
{"timestamp": "2026-02-26 13:48:53,994", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver initialized", "module": "agent_factory", "function": "init_checkpointer", "line": 72}
{"timestamp": "2026-02-26 13:48:53,994", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2026-02-26 13:48:53,994", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 50}
{"timestamp": "2026-02-26 13:48:53,994", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始缓存预热", "module": "cache_warmup", "function": "warmup_all", "line": 157}
{"timestamp": "2026-02-26 13:48:54,057", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for conversations:user:1:skip:0:limit:100", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:48:54,058", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 2/2 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 59}
{"timestamp": "2026-02-26 13:48:54,059", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0/0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 100}
{"timestamp": "2026-02-26 13:48:54,066", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 71/71 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 152}
{"timestamp": "2026-02-26 13:48:54,066", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 缓存预热完成", "module": "cache_warmup", "function": "warmup_all", "line": 163}
{"timestamp": "2026-02-26 13:49:03,403", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.services.chat_service", "message": "[DB] Saved message id=627", "module": "chat_service", "function": "create_message", "line": 74}
{"timestamp": "2026-02-26 13:49:03,404", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.services.chat_service", "message": "[DB] Verify saved: id=627", "module": "chat_service", "function": "create_message", "line": 81}
{"timestamp": "2026-02-26 13:49:03,405", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.services.chat_service", "message": "[CACHE DELETE] 已删除消息缓存: conversation_id=233, keys=1", "module": "chat_service", "function": "_invalidate_messages_cache", "line": 542}
{"timestamp": "2026-02-26 13:49:03,407", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for messages:conversation:233:user:1:skip:0:limit:50", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:49:03,408", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT] 开始生成流式响应: conversation_id=233, enable_thinking=False", "module": "chat_service", "function": "generate_response_stream", "line": 461}
{"timestamp": "2026-02-26 13:49:03,408", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT] 开始处理消息: conversation_id=233", "module": "chat_service", "function": "process_message", "line": 101}
{"timestamp": "2026-02-26 13:49:03,408", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT] 上下文准备完成，长度: 2", "module": "chat_service", "function": "process_message", "line": 115}
{"timestamp": "2026-02-26 13:49:03,408", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT] 创建Agent: is_expert=False, enable_thinking=False", "module": "chat_service", "function": "process_message", "line": 118}
{"timestamp": "2026-02-26 13:49:03,564", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] Initialized skills backend: F:\\code\\dragonai-v2-local\\app\\skills", "module": "agent_factory", "function": "_get_skills_backend", "line": 126}
{"timestamp": "2026-02-26 13:49:03,610", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] Created and cached agent: expert_False_thinking_False", "module": "agent_factory", "function": "create_chat_agent", "line": 182}
{"timestamp": "2026-02-26 13:49:03,610", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT] 开始流式执行Agent", "module": "chat_service", "function": "process_message", "line": 126}
{"timestamp": "2026-02-26 13:49:03,612", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.tracing", "message": "[REQUEST] method=POST path=/api/v1/chat/send status_code=200 request_id=fca1b3f8-69f4-4605-b584-5c307db3d3ee", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 13:49:03,619", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] updates data: {'SkillsMiddleware.before_agent': {'skills_metadata': [{'name': 'xhs-copywriter', 'description': '小红书平台文案创作专家，帮助用户创作吸引眼球的小红书笔记、种草文案、产品推荐等内容。适用于小红书营销、内容创作、品牌推广等场景。', 'path': '/xhs-copywriter/SKILL.md', 'metadata': {'author': 'dragonai', 'version': '1.0', 'platform': 'xiaohongshu'}, 'license': 'MIT', 'compatibility': '无特殊依赖', 'allowed_tools': ['web_search']}]}}", "module": "chat_service", "function": "process_message", "line": 140}
{"timestamp": "2026-02-26 13:49:03,619", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] source=SkillsMiddleware.before_agent, update keys=dict_keys(['skills_metadata'])", "module": "chat_service", "function": "process_message", "line": 142}
{"timestamp": "2026-02-26 13:49:03,675", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "dashscope", "message": "Request body: {'model': 'qwen-plus', 'parameters': {'top_p': 0.8, 'result_format': 'message', 'stream': True, 'tools': [{'type': 'function', 'function': {'name': 'ls', 'description': 'Lists all files in a directory.\\n\\nThis is useful for exploring the filesystem and finding the right file to read or edit.\\nYou should almost ALWAYS use this tool before using the read_file or edit_file tools.', 'parameters': {'properties': {'path': {'description': 'Absolute path to the directory to list. Must be absolute, not relative.', 'type': 'string'}}, 'required': ['path'], 'type': 'object'}}}, {'type': 'function', 'function': {'name': 'read_file', 'description': 'Reads a file from the filesystem.\\n\\nAssume this tool is able to read all files. If the User provides a path to a file assume that path is valid. It is okay to read a file that does not exist; an error will be returned.\\n\\nUsage:\\n- By default, it reads up to 100 lines starting from the beginning of the file\\n- **IMPORTANT for large files and codebase exploration**: Use pagination with offset and limit parameters to avoid context overflow\\n  - First scan: read_file(path, limit=100) to see file structure\\n  - Read more sections: read_file(path, offset=100, limit=200) for next 200 lines\\n  - Only omit limit (read full file) when necessary for editing\\n- Specify offset and limit: read_file(path, offset=0, limit=100) reads first 100 lines\\n- Results are returned using cat -n format, with line numbers starting at 1\\n- Lines longer than 5,000 characters will be split into multiple lines with continuation markers (e.g., 5.1, 5.2, etc.). When you specify a limit, these continuation lines count towards the limit.\\n- You have the capability to call multiple tools in a single response. It is always better to speculatively read multiple files as a batch that are potentially useful.\\n- If you read a file that exists but has empty contents you will receive a system reminder warning in place of file contents.\\n- Image files (`.png`, `.jpg`, `.jpeg`, `.gif`, `.webp`) are returned as multimodal image content blocks (see https://docs.langchain.com/oss/python/langchain/messages#multimodal).\\n\\nFor image tasks:\\n- Use `read_file(file_path=...)` for `.png/.jpg/.jpeg/.gif/.webp`\\n- Do NOT use `offset`/`limit` for images (pagination is text-only)\\n- If image details were compacted from history, call `read_file` again on the same path\\n\\n- You should ALWAYS make sure a file has been read before editing it.', 'parameters': {'properties': {'file_path': {'description': 'Absolute path to the file to read. Must be absolute, not relative.', 'type': 'string'}, 'offset': {'default': 0, 'description': 'Line number to start reading from (0-indexed). Use for pagination of large files.', 'type': 'integer'}, 'limit': {'default': 100, 'description': 'Maximum number of lines to read. Use for pagination of large files.', 'type': 'integer'}}, 'required': ['file_path'], 'type': 'object'}}}, {'type': 'function', 'function': {'name': 'write_file', 'description': 'Writes to a new file in the filesystem.\\n\\nUsage:\\n- The write_file tool will create the a new file.\\n- Prefer to edit existing files (with the edit_file tool) over creating new ones when possible.', 'parameters': {'properties': {'file_path': {'description': 'Absolute path where the file should be created. Must be absolute, not relative.', 'type': 'string'}, 'content': {'description': 'The text content to write to the file. This parameter is required.', 'type': 'string'}}, 'required': ['file_path', 'content'], 'type': 'object'}}}, {'type': 'function', 'function': {'name': 'edit_file', 'description': 'Performs exact string replacements in files.\\n\\nUsage:\\n- You must read the file before editing. This tool will error if you attempt an edit without reading the file first.\\n- When editing, preserve the exact indentation (tabs/spaces) from the read output. Never include line number prefixes in old_string or new_string.\\n- ALWAYS prefer editing existing files over creating new ones.\\n- Only use emojis if the user explicitly requests it.', 'parameters': {'properties': {'file_path': {'description': 'Absolute path to the file to edit. Must be absolute, not relative.', 'type': 'string'}, 'old_string': {'description': 'The exact text to find and replace. Must be unique in the file unless replace_all is True.', 'type': 'string'}, 'new_string': {'description': 'The text to replace old_string with. Must be different from old_string.', 'type': 'string'}, 'replace_all': {'default': False, 'description': 'If True, replace all occurrences of old_string. If False (default), old_string must be unique.', 'type': 'boolean'}}, 'required': ['file_path', 'old_string', 'new_string'], 'type': 'object'}}}, {'type': 'function', 'function': {'name': 'glob', 'description': 'Find files matching a glob pattern.\\n\\nSupports standard glob patterns: `*` (any characters), `**` (any directories), `?` (single character).\\nReturns a list of absolute file paths that match the pattern.\\n\\nExamples:\\n- `**/*.py` - Find all Python files\\n- `*.txt` - Find all text files in root\\n- `/subdir/**/*.md` - Find all markdown files under /subdir', 'parameters': {'properties': {'pattern': {'description': \"Glob pattern to match files (e.g., '**/*.py', '*.txt', '/subdir/**/*.md').\", 'type': 'string'}, 'path': {'default': '/', 'description': \"Base directory to search from. Defaults to root '/'.\", 'type': 'string'}}, 'required': ['pattern'], 'type': 'object'}}}, {'type': 'function', 'function': {'name': 'grep', 'description': 'Search for a text pattern across files.\\n\\nSearches for literal text (not regex) and returns matching files or content based on output_mode.\\nSpecial characters like parentheses, brackets, pipes, etc. are treated as literal characters, not regex operators.\\n\\nExamples:\\n- Search all files: `grep(pattern=\"TODO\")`\\n- Search Python files only: `grep(pattern=\"import\", glob=\"*.py\")`\\n- Show matching lines: `grep(pattern=\"error\", output_mode=\"content\")`\\n- Search for code with special chars: `grep(pattern=\"def __init__(self):\")`', 'parameters': {'properties': {'pattern': {'description': 'Text pattern to search for (literal string, not regex).', 'type': 'string'}, 'path': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'default': None, 'description': 'Directory to search in. Defaults to current working directory.'}, 'glob': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'default': None, 'description': \"Glob pattern to filter which files to search (e.g., '*.py').\"}, 'output_mode': {'default': 'files_with_matches', 'description': \"Output format: 'files_with_matches' (file paths only, default), 'content' (matching lines with context), 'count' (match counts per file).\", 'enum': ['files_with_matches', 'content', 'count'], 'type': 'string'}}, 'required': ['pattern'], 'type': 'object'}}}, {'type': 'function', 'function': {'name': 'search_knowledge_base', 'description': '从本地知识库中搜索相关文档。\\n\\n当用户询问项目文档、技术规范、API文档、内部资料等相关问题时使用此工具。\\n\\nArgs:\\n    query: 搜索查询语句\\n    k: 返回文档数量，默认4条\\n\\nReturns:\\n    相关文档的格式化内容', 'parameters': {'properties': {'query': {'type': 'string'}, 'k': {'default': 4, 'type': 'integer'}}, 'required': ['query'], 'type': 'object'}}}, {'type': 'function', 'function': {'name': 'web_search', 'description': '使用联网搜索获取最新信息。\\n\\n当用户询问实时信息、新闻、当前事件、天气、股价或知识库中未包含的内容时使用此工具。\\n\\nArgs:\\n    query: 搜索查询语句\\n    max_results: 返回结果数量，默认5条\\n\\nReturns:\\n    搜索结果', 'parameters': {'properties': {'query': {'type': 'string'}, 'max_results': {'default': 5, 'type': 'integer'}}, 'required': ['query'], 'type': 'object'}}}, {'type': 'function', 'function': {'name': 'ocr_document', 'description': '识别图片中的文字内容（OCR）。\\n\\n当用户上传图片并需要提取文字时使用此工具, 必须原样完整输出，不要总结、不要省略、不要改写\\n\\nArgs:\\n    image_url: 待处理图像的路径或URL。可以是相对路径(如 images/xxx.png)、\\n               本地绝对路径、或完整的HTTP URL。\\n\\nReturns:\\n    图片中提取的文字内容', 'parameters': {'properties': {'image_url': {'type': 'string'}}, 'required': ['image_url'], 'type': 'object'}}}, {'type': 'function', 'function': {'name': 'understand_image', 'description': '理解图片内容并描述图片中有什么。\\n\\n当用户上传图片并询问图片内容、场景、物体等时使用此工具。\\n\\nArgs:\\n    image_url: 待处理图像的路径或URL。可以是相对路径(如 images/xxx.png)、\\n               本地绝对路径、或完整的HTTP URL。\\n\\nReturns:\\n    图片内容的详细描述', 'parameters': {'properties': {'image_url': {'type': 'string'}}, 'required': ['image_url'], 'type': 'object'}}}, {'type': 'function', 'function': {'name': 'generate_image', 'description': '根据文本描述生成图像。\\n\\n当用户要求生成图像、绘画、设计图、创意图或任何视觉内容时使用此工具。\\n支持生成各种风格的图像，如写实、动漫、油画、水彩等。\\n\\nArgs:\\n    prompt: 图像的详细描述，越详细效果越好。可以描述场景、物体、风格、光线、颜色等。\\n    size: 图像尺寸，可选 \"1664*928\"(默认), \"1024*1024\", \"1024*768\", \"768*1024\"\\n    n: 生成图像数量，1-4之间的整数，默认1\\n\\nReturns:\\n    生成图像的URL列表', 'parameters': {'properties': {'prompt': {'type': 'string'}, 'size': {'default': '1664*928', 'type': 'string'}, 'n': {'default': 1, 'type': 'integer'}}, 'required': ['prompt'], 'type': 'object'}}}, {'type': 'function', 'function': {'name': 'edit_image', 'description': '根据编辑指令修改现有图像。\\n\\n当用户要求修改、优化、变换或编辑已有图像时使用此工具。\\n可以执行添加元素、改变风格、调整颜色、替换背景等操作。\\n\\nArgs:\\n    image_url: 待编辑图像的路径或URL。可以是相对路径(如 images/xxx.png)、\\n               本地绝对路径、或完整的HTTP URL。\\n    prompt: 编辑指令描述，详细说明想要如何修改图像\\n\\nReturns:\\n    编辑后图像的URL', 'parameters': {'properties': {'image_url': {'type': 'string'}, 'prompt': {'type': 'string'}}, 'required': ['image_url', 'prompt'], 'type': 'object'}}}, {'type': 'function', 'function': {'name': 'code_assist', 'description': '编程工具\\n适用场景：当用户需要编写代码、解决编程问题、理解代码或优化代码时使用此工具。\\n\\n注意：你必须原样完整输出结果，不要总结、不要省略、不要改写。\\n\\nArgs:\\n    prompt: 编程需求描述。详细说明需要实现什么功能或解决什么问题。\\n            示例: \"写一个快速排序算法\"、\"实现一个HTTP请求函数\"\\n    language: 编程语言名称。支持: python, javascript, java, c++, go, rust, typescript 等。\\n              默认值: \"python\"\\n\\nReturns:\\n    完整代码及解释说明 - 必须完整输出给用户', 'parameters': {'properties': {'prompt': {'type': 'string'}, 'language': {'default': 'python', 'type': 'string'}}, 'required': ['prompt'], 'type': 'object'}}}, {'type': 'function', 'function': {'name': 'translate_text', 'description': '将文本翻译成目标语言。\\n\\n当用户明确要求翻译、或需要将内容转换为其他语言时使用此工具。\\n\\nArgs:\\n    text: 待翻译的文本内容\\n    target_lang: 目标语言代码，如 zh(中文)、en(英语)、ja(日语)、ko(韩语)、fr(法语)、de(德语)、es(西班牙语)\\n    source_lang: 源语言代码，可选。不传则自动检测源语言\\n\\nReturns:\\n    翻译后的文本', 'parameters': {'properties': {'text': {'type': 'string'}, 'target_lang': {'type': 'string'}, 'source_lang': {'default': None, 'type': 'string'}}, 'required': ['text', 'target_lang'], 'type': 'object'}}}], 'tool_choice': None}, 'input': {'messages': [{'role': 'system', 'content': [{'type': 'text', 'text': '你是一个强大的AI助手，能够帮助用户处理各种任务。\\n\\n你可以使用多种工具来帮助用户，工具的功能说明已内置在系统中。\\n\\n**工具调用重要规则**：\\n- 如果调用工具缺少必填参数，不要调用工具，应该先询问用户提供缺失的信息\\n- 根据用户需求选择最合适的工具，避免不必要的工具调用\\n\\n**工具结果输出规则（非常重要）**：\\n- 当工具返回结果包含代码、完整答案或详细内容时，你必须原样完整输出给用户\\n- 禁止对工具返回的代码进行总结、省略、改写或简化\\n- 禁止使用\"代码如下\"、\"这是代码\"等简短描述代替完整输出\\n- 如果工具结果包含<INSTRUCTION>标签，必须严格遵循标签内的指令\\n- 当看到<INSTRUCTION>标签时，只输出标签后的内容，不要输出标签本身，不要做任何修改\\n\\n**技能使用规则（非常重要）**：\\n- 当用户请求匹配某个技能的描述时，你必须先调用 read_file 读取该技能的完整指令\\n- 禁止在没有读取技能文件的情况下直接回答相关任务\\n- 读取技能文件后，必须严格按照技能中的流程和模板执行任务\\n\\n请根据用户的需求，合理选择和使用工具。如果用户请求不明确，请主动询问以澄清需求。\\n'}, {'type': 'text', 'text': '\\n\\n## Following Conventions\\n\\n- Read files before editing — understand existing content before making changes\\n- Mimic existing style, naming conventions, and patterns\\n\\n## Tool Usage and File Reading\\n\\nFollow the tool docs for the available tools. In particular, for filesystem tools, use pagination (offset/limit) when reading large files.\\n\\n## Filesystem Tools `ls`, `read_file`, `write_file`, `edit_file`, `glob`, `grep`\\n\\nYou have access to a filesystem which you can interact with using these tools.\\nAll file paths must start with a /.\\n\\n- ls: list files in a directory (requires absolute path)\\n- read_file: read a file from the filesystem\\n- write_file: write to a file in the filesystem\\n- edit_file: edit a file in the filesystem\\n- glob: find files matching a pattern (e.g., \"**/*.py\")\\n- grep: search for text within files'}, {'type': 'text', 'text': '\\n\\n\\n\\n## Skills System\\n\\nYou have access to a skills library that provides specialized capabilities and domain knowledge.\\n\\n** Skills**: `/` (higher priority)\\n\\n**Available Skills:**\\n\\n- **xhs-copywriter**: 小红书平台文案创作专家，帮助用户创作吸引眼球的小红书笔记、种草文案、产品推荐等内容。适用于小红书营销、内容创作、品牌推广等场景。 (License: MIT, Compatibility: 无特殊依赖)\\n  -> Allowed tools: web_search\\n  -> Read `/xhs-copywriter/SKILL.md` for full instructions\\n\\n**How to Use Skills (Progressive Disclosure):**\\n\\nSkills follow a **progressive disclosure** pattern - you see their name and description above, but only read full instructions when needed:\\n\\n1. **Recognize when a skill applies**: Check if the user\\'s task matches a skill\\'s description\\n2. **Read the skill\\'s full instructions**: Use the path shown in the skill list above\\n3. **Follow the skill\\'s instructions**: SKILL.md contains step-by-step workflows, best practices, and examples\\n4. **Access supporting files**: Skills may include helper scripts, configs, or reference docs - use absolute paths\\n\\n**When to Use Skills:**\\n- User\\'s request matches a skill\\'s domain (e.g., \"research X\" -> web-research skill)\\n- You need specialized knowledge or structured workflows\\n- A skill provides proven patterns for complex tasks\\n\\n**Executing Skill Scripts:**\\nSkills may contain Python scripts or other executable files. Always use absolute paths from the skill list.\\n\\n**Example Workflow:**\\n\\nUser: \"Can you research the latest developments in quantum computing?\"\\n\\n1. Check available skills -> See \"web-research\" skill with its path\\n2. Read the skill using the path shown\\n3. Follow the skill\\'s research workflow (search -> organize -> synthesize)\\n4. Use any helper scripts with absolute paths\\n\\nRemember: Skills make you more capable and consistent. When in doubt, check if a skill exists for the task!\\n'}]}, {'role': 'user', 'content': '你好'}]}}", "module": "http_request", "function": "_handle_request", "line": 474}
{"timestamp": "2026-02-26 13:49:04,372", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "dashscope", "message": "Stream message: {'output': {'choices': [{'message': {'content': '你好', 'role': 'assistant'}, 'index': 0, 'finish_reason': 'null'}]}, 'usage': {'total_tokens': 4064, 'output_tokens': 1, 'input_tokens': 4063, 'prompt_tokens_details': {'cached_tokens': 0}}, 'request_id': '15bc961a-83ec-44ce-88e0-b90dd41029f7'}", "module": "http_request", "function": "_handle_response", "line": 383}
{"timestamp": "2026-02-26 13:49:04,398", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "dashscope", "message": "Stream message: {'output': {'choices': [{'message': {'content': '你好！很高兴', 'role': 'assistant'}, 'index': 0, 'finish_reason': 'null'}]}, 'usage': {'total_tokens': 4066, 'output_tokens': 3, 'input_tokens': 4063, 'prompt_tokens_details': {'cached_tokens': 0}}, 'request_id': '15bc961a-83ec-44ce-88e0-b90dd41029f7'}", "module": "http_request", "function": "_handle_response", "line": 383}
{"timestamp": "2026-02-26 13:49:04,399", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 1: 2 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 13:49:04,438", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "dashscope", "message": "Stream message: {'output': {'choices': [{'message': {'content': '你好！很高兴见到', 'role': 'assistant'}, 'index': 0, 'finish_reason': 'null'}]}, 'usage': {'total_tokens': 4067, 'output_tokens': 4, 'input_tokens': 4063, 'prompt_tokens_details': {'cached_tokens': 0}}, 'request_id': '15bc961a-83ec-44ce-88e0-b90dd41029f7'}", "module": "http_request", "function": "_handle_response", "line": 383}
{"timestamp": "2026-02-26 13:49:04,439", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 2: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 13:49:04,460", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "dashscope", "message": "Stream message: {'output': {'choices': [{'message': {'content': '你好！很高兴见到你，', 'role': 'assistant'}, 'index': 0, 'finish_reason': 'null'}]}, 'usage': {'total_tokens': 4069, 'output_tokens': 6, 'input_tokens': 4063, 'prompt_tokens_details': {'cached_tokens': 0}}, 'request_id': '15bc961a-83ec-44ce-88e0-b90dd41029f7'}", "module": "http_request", "function": "_handle_response", "line": 383}
{"timestamp": "2026-02-26 13:49:04,462", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 3: 2 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 13:49:04,586", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "dashscope", "message": "Stream message: {'output': {'choices': [{'message': {'content': '你好！很高兴见到你，有什么我可以帮忙的吗？', 'role': 'assistant'}, 'index': 0, 'finish_reason': 'null'}]}, 'usage': {'total_tokens': 4075, 'output_tokens': 12, 'input_tokens': 4063, 'prompt_tokens_details': {'cached_tokens': 0}}, 'request_id': '15bc961a-83ec-44ce-88e0-b90dd41029f7'}", "module": "http_request", "function": "_handle_response", "line": 383}
{"timestamp": "2026-02-26 13:49:04,588", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 4: 2 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 13:49:04,653", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "dashscope", "message": "Stream message: {'output': {'choices': [{'message': {'content': '你好！很高兴见到你，有什么我可以帮忙的吗？😊', 'role': 'assistant'}, 'index': 0, 'finish_reason': 'stop'}]}, 'usage': {'total_tokens': 4076, 'output_tokens': 13, 'input_tokens': 4063, 'prompt_tokens_details': {'cached_tokens': 0}}, 'request_id': '15bc961a-83ec-44ce-88e0-b90dd41029f7'}", "module": "http_request", "function": "_handle_response", "line": 383}
{"timestamp": "2026-02-26 13:49:04,655", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 5: 11 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 13:49:04,671", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 6: 1 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 13:49:04,687", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] updates data: {'model': {'messages': [AIMessage(content='你好！很高兴见到你，有什么我可以帮忙的吗？😊', additional_kwargs={}, response_metadata={'finish_reason': 'stop', 'request_id': '15bc961a-83ec-44ce-88e0-b90dd41029f7', 'token_usage': {'input_tokens': 4063, 'output_tokens': 13, 'total_tokens': 4076, 'prompt_tokens_details': {'cached_tokens': 0}}}, id='lc_run--019c9a35-cf17-7e60-bf3e-1534730e56a8', tool_calls=[], invalid_tool_calls=[])]}}", "module": "chat_service", "function": "process_message", "line": 140}
{"timestamp": "2026-02-26 13:49:04,687", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] source=model, update keys=dict_keys(['messages'])", "module": "chat_service", "function": "process_message", "line": 142}
{"timestamp": "2026-02-26 13:49:04,687", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] formatted_list=[{'type': 'content', 'data': {'content': '你好！很高兴见到你，有什么我可以帮忙的吗？😊'}}]", "module": "chat_service", "function": "process_message", "line": 145}
{"timestamp": "2026-02-26 13:49:04,688", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT] Agent流式执行完成", "module": "chat_service", "function": "process_message", "line": 155}
{"timestamp": "2026-02-26 13:49:04,689", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.api.v1.chat", "message": "[SSE] Stream complete, total chunks: 6, response length: 22", "module": "chat", "function": "generate", "line": 127}
{"timestamp": "2026-02-26 13:49:04,691", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.services.chat_service", "message": "[DB] Saved message id=628", "module": "chat_service", "function": "create_message", "line": 74}
{"timestamp": "2026-02-26 13:49:04,691", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.services.chat_service", "message": "[DB] Verify saved: id=628", "module": "chat_service", "function": "create_message", "line": 81}
{"timestamp": "2026-02-26 13:49:04,692", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.services.chat_service", "message": "[CACHE DELETE] 已删除消息缓存: conversation_id=233, keys=1", "module": "chat_service", "function": "_invalidate_messages_cache", "line": 542}
{"timestamp": "2026-02-26 13:49:44,396", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver connection closed", "module": "agent_factory", "function": "close_checkpointer", "line": 90}
{"timestamp": "2026-02-26 13:49:44,411", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool disposed. Pool size: 10  Connections in pool: 0 Current Overflow: -10 Current Checked out connections: 0", "module": "impl", "function": "dispose", "line": 228}
{"timestamp": "2026-02-26 13:49:44,411", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool recreating", "module": "impl", "function": "recreate", "line": 203}
{"timestamp": "2026-02-26 13:49:44,411", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 13:49:44,411", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 59}
{"timestamp": "2026-02-26 13:49:47,100", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 45}
{"timestamp": "2026-02-26 13:49:47,155", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver initialized", "module": "agent_factory", "function": "init_checkpointer", "line": 72}
{"timestamp": "2026-02-26 13:49:47,156", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2026-02-26 13:49:47,156", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 50}
{"timestamp": "2026-02-26 13:49:47,156", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始缓存预热", "module": "cache_warmup", "function": "warmup_all", "line": 157}
{"timestamp": "2026-02-26 13:49:47,219", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 2/2 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 59}
{"timestamp": "2026-02-26 13:49:47,222", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0/0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 100}
{"timestamp": "2026-02-26 13:49:47,230", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 71/71 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 152}
{"timestamp": "2026-02-26 13:49:47,230", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 缓存预热完成", "module": "cache_warmup", "function": "warmup_all", "line": 163}
{"timestamp": "2026-02-26 13:50:02,902", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 45}
{"timestamp": "2026-02-26 13:50:02,903", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver init failed, fallback to InMemorySaver: Psycopg cannot use the 'ProactorEventLoop' to run in async mode. Please use a compatible event loop, for instance by running 'asyncio.run(..., loop_factory=asyncio.SelectorEventLoop(selectors.SelectSelector()))'", "module": "agent_factory", "function": "init_checkpointer", "line": 75}
{"timestamp": "2026-02-26 13:50:02,903", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2026-02-26 13:50:02,903", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 50}
{"timestamp": "2026-02-26 13:50:02,903", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始缓存预热", "module": "cache_warmup", "function": "warmup_all", "line": 157}
{"timestamp": "2026-02-26 13:50:02,974", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 2/2 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 59}
{"timestamp": "2026-02-26 13:50:02,977", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0/0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 100}
{"timestamp": "2026-02-26 13:50:02,985", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 71/71 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 152}
{"timestamp": "2026-02-26 13:50:02,986", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 缓存预热完成", "module": "cache_warmup", "function": "warmup_all", "line": 163}
{"timestamp": "2026-02-26 13:50:54,694", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.services.chat_service", "message": "[DB] Saved message id=629", "module": "chat_service", "function": "create_message", "line": 74}
{"timestamp": "2026-02-26 13:50:54,695", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.services.chat_service", "message": "[DB] Verify saved: id=629", "module": "chat_service", "function": "create_message", "line": 81}
{"timestamp": "2026-02-26 13:50:54,697", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[REDIS] Serialized value for messages:conversation:233:user:1:skip:0:limit:50", "module": "redis", "function": "set", "line": 53}
{"timestamp": "2026-02-26 13:50:54,697", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT] 开始生成流式响应: conversation_id=233, enable_thinking=False", "module": "chat_service", "function": "generate_response_stream", "line": 461}
{"timestamp": "2026-02-26 13:50:54,697", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT] 开始处理消息: conversation_id=233", "module": "chat_service", "function": "process_message", "line": 101}
{"timestamp": "2026-02-26 13:50:54,697", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT] 上下文准备完成，长度: 2", "module": "chat_service", "function": "process_message", "line": 115}
{"timestamp": "2026-02-26 13:50:54,698", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT] 创建Agent: is_expert=False, enable_thinking=False", "module": "chat_service", "function": "process_message", "line": 118}
{"timestamp": "2026-02-26 13:50:54,852", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] Initialized skills backend: F:\\code\\dragonai-v2-local\\app\\skills", "module": "agent_factory", "function": "_get_skills_backend", "line": 126}
{"timestamp": "2026-02-26 13:50:54,897", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] Created and cached agent: expert_False_thinking_False", "module": "agent_factory", "function": "create_chat_agent", "line": 182}
{"timestamp": "2026-02-26 13:50:54,897", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT] 开始流式执行Agent", "module": "chat_service", "function": "process_message", "line": 126}
{"timestamp": "2026-02-26 13:50:54,899", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.tracing", "message": "[REQUEST] method=POST path=/api/v1/chat/send status_code=200 request_id=d8bdbd8d-a88c-477f-9035-29ffa554e257", "module": "tracing", "function": "dispatch", "line": 36}
{"timestamp": "2026-02-26 13:50:54,903", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] updates data: {'SkillsMiddleware.before_agent': None}", "module": "chat_service", "function": "process_message", "line": 140}
{"timestamp": "2026-02-26 13:50:54,903", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] source=SkillsMiddleware.before_agent, update keys=<class 'NoneType'>", "module": "chat_service", "function": "process_message", "line": 142}
{"timestamp": "2026-02-26 13:50:55,953", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 1: 2 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 13:50:56,015", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 2: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 13:50:56,081", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 3: 4 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 13:50:56,170", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 4: 1 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 13:50:56,279", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 5: 10 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 13:50:56,295", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.api.v1.chat", "message": "[SSE] Sending chunk 6: 6 chars", "module": "chat", "function": "generate", "line": 123}
{"timestamp": "2026-02-26 13:50:56,310", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] updates data: {'model': {'messages': [AIMessage(content='你好！很高兴再次见到你～ 有什么问题或需要帮助的地方吗？😊', additional_kwargs={}, response_metadata={'finish_reason': 'stop', 'request_id': '38cfa2d3-4bb0-43bf-9348-18e8b674d62d', 'token_usage': {'input_tokens': 4087, 'output_tokens': 17, 'total_tokens': 4104, 'prompt_tokens_details': {'cached_tokens': 0}}}, id='lc_run--019c9a37-81ca-7b82-8329-09db099d6011', tool_calls=[], invalid_tool_calls=[])]}}", "module": "chat_service", "function": "process_message", "line": 140}
{"timestamp": "2026-02-26 13:50:56,311", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] source=model, update keys=dict_keys(['messages'])", "module": "chat_service", "function": "process_message", "line": 142}
{"timestamp": "2026-02-26 13:50:56,311", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT-DEBUG] formatted_list=[{'type': 'content', 'data': {'content': '你好！很高兴再次见到你～ 有什么问题或需要帮助的地方吗？😊'}}]", "module": "chat_service", "function": "process_message", "line": 145}
{"timestamp": "2026-02-26 13:50:56,313", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT] Agent流式执行完成", "module": "chat_service", "function": "process_message", "line": 155}
{"timestamp": "2026-02-26 13:50:56,314", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.api.v1.chat", "message": "[SSE] Stream complete, total chunks: 6, response length: 29", "module": "chat", "function": "generate", "line": 127}
{"timestamp": "2026-02-26 13:50:56,316", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.services.chat_service", "message": "[DB] Saved message id=630", "module": "chat_service", "function": "create_message", "line": 74}
{"timestamp": "2026-02-26 13:50:56,317", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.services.chat_service", "message": "[DB] Verify saved: id=630", "module": "chat_service", "function": "create_message", "line": 81}
{"timestamp": "2026-02-26 13:50:56,318", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.services.chat_service", "message": "[CACHE DELETE] 已删除消息缓存: conversation_id=233, keys=1", "module": "chat_service", "function": "_invalidate_messages_cache", "line": 542}
{"timestamp": "2026-02-26 13:53:15,985", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver connection closed", "module": "agent_factory", "function": "close_checkpointer", "line": 90}
{"timestamp": "2026-02-26 13:53:15,987", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool disposed. Pool size: 10  Connections in pool: 0 Current Overflow: -10 Current Checked out connections: 0", "module": "impl", "function": "dispose", "line": 228}
{"timestamp": "2026-02-26 13:53:15,988", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool recreating", "module": "impl", "function": "recreate", "line": 203}
{"timestamp": "2026-02-26 13:53:15,988", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 13:53:15,988", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 59}
{"timestamp": "2026-02-26 13:53:18,941", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 45}
{"timestamp": "2026-02-26 13:53:18,986", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver initialized", "module": "agent_factory", "function": "init_checkpointer", "line": 72}
{"timestamp": "2026-02-26 13:53:18,986", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2026-02-26 13:53:18,986", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 50}
{"timestamp": "2026-02-26 13:53:18,986", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始缓存预热", "module": "cache_warmup", "function": "warmup_all", "line": 163}
{"timestamp": "2026-02-26 13:53:18,986", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热会话列表缓存，限制 100 条", "module": "cache_warmup", "function": "warmup_conversations", "line": 26}
{"timestamp": "2026-02-26 13:53:19,050", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversations:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,050", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversations:user:2:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,051", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 2/2 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 61}
{"timestamp": "2026-02-26 13:53:19,051", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热置顶会话详情缓存", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 66}
{"timestamp": "2026-02-26 13:53:19,053", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0/0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 104}
{"timestamp": "2026-02-26 13:53:19,054", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热最近 24 小时活跃的会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 116}
{"timestamp": "2026-02-26 13:53:19,056", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:163:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,056", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:164:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,056", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:165:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,056", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:166:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,057", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:167:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,058", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:168:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,058", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:169:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,059", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:170:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,059", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:171:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,059", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:172:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,059", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:173:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,060", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:174:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,060", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:175:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,060", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:176:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,060", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:177:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,060", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:178:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,061", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:179:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,061", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:180:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,061", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:181:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,062", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:182:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,062", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:183:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,062", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:184:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,062", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:185:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,063", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:186:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,064", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:187:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,064", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:188:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,064", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:189:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,064", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:190:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,065", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:191:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,065", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:192:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,065", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:193:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,065", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:194:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,065", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:195:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,066", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:196:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,066", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:197:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,066", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:198:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,067", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:199:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,067", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:200:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,067", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:201:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,067", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:202:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,067", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:203:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,068", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:204:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,068", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:205:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,068", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:206:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,068", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:207:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,069", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:208:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,069", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:209:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,069", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:210:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,070", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:211:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,070", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:212:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,070", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:213:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,071", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:214:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,071", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:215:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,071", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:216:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,071", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:217:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,071", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:218:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,072", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:219:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,072", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:220:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,072", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:221:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,073", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:222:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,073", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:223:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,073", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:224:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,073", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:225:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,073", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:226:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,074", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:227:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,074", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:228:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,074", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:229:2", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,074", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:230:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,075", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:231:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,075", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:232:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,075", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:233:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:19,075", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 71/71 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 158}
{"timestamp": "2026-02-26 13:53:19,076", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 缓存预热完成", "module": "cache_warmup", "function": "warmup_all", "line": 169}
{"timestamp": "2026-02-26 13:53:34,748", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver connection closed", "module": "agent_factory", "function": "close_checkpointer", "line": 90}
{"timestamp": "2026-02-26 13:53:34,763", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool disposed. Pool size: 10  Connections in pool: 0 Current Overflow: -10 Current Checked out connections: 0", "module": "impl", "function": "dispose", "line": 228}
{"timestamp": "2026-02-26 13:53:34,764", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool recreating", "module": "impl", "function": "recreate", "line": 203}
{"timestamp": "2026-02-26 13:53:34,764", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 13:53:34,764", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 59}
{"timestamp": "2026-02-26 13:53:37,459", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 45}
{"timestamp": "2026-02-26 13:53:37,506", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver initialized", "module": "agent_factory", "function": "init_checkpointer", "line": 72}
{"timestamp": "2026-02-26 13:53:37,506", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2026-02-26 13:53:37,506", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 50}
{"timestamp": "2026-02-26 13:53:37,506", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始缓存预热", "module": "cache_warmup", "function": "warmup_all", "line": 163}
{"timestamp": "2026-02-26 13:53:37,507", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热会话列表缓存，限制 100 条", "module": "cache_warmup", "function": "warmup_conversations", "line": 26}
{"timestamp": "2026-02-26 13:53:37,568", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversations:user:1:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,569", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversations:user:2:skip:0:limit:100", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,569", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 2/2 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 61}
{"timestamp": "2026-02-26 13:53:37,570", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热置顶会话详情缓存", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 66}
{"timestamp": "2026-02-26 13:53:37,572", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0/0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 104}
{"timestamp": "2026-02-26 13:53:37,572", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始预热最近 24 小时活跃的会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 116}
{"timestamp": "2026-02-26 13:53:37,574", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:163:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,575", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:164:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,575", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:165:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,576", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:166:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,576", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:167:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,576", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:168:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,576", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:169:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,577", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:170:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,577", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:171:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,577", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:172:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,577", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:173:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,578", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:174:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,578", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:175:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,578", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:176:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,578", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:177:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,578", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:178:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,579", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:179:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,579", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:180:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,579", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:181:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,580", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:182:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,580", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:183:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,580", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:184:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,580", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:185:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,581", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:186:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,581", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:187:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,582", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:188:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,582", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:189:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,583", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:190:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,583", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:191:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,583", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:192:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,583", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:193:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,584", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:194:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,584", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:195:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,584", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:196:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,585", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:197:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,585", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:198:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,585", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:199:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,585", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:200:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,586", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:201:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,586", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:202:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,586", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:203:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,586", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:204:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,587", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:205:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,587", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:206:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,587", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:207:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,587", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:208:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,587", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:209:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,588", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:210:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,588", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:211:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,588", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:212:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,589", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:213:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,589", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:214:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,589", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:215:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,589", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:216:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,590", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:217:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,590", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:218:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,590", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:219:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,590", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:220:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,591", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:221:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,591", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:222:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,591", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:223:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,591", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:224:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,592", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:225:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,592", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:226:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,592", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:227:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,592", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:228:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,593", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:229:2", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,593", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:230:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,593", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:231:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,593", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:232:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,593", "level": "\u001b[36mDEBUG\u001b[0m", "logger": "app.core.redis", "message": "[CACHE HIT] 数据从缓存获取: conversation:233:1", "module": "redis", "function": "cache_aside", "line": 123}
{"timestamp": "2026-02-26 13:53:37,594", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 71/71 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 158}
{"timestamp": "2026-02-26 13:53:37,594", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 缓存预热完成", "module": "cache_warmup", "function": "warmup_all", "line": 169}
{"timestamp": "2026-02-26 13:54:35,179", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver connection closed", "module": "agent_factory", "function": "close_checkpointer", "line": 90}
{"timestamp": "2026-02-26 13:54:35,196", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool disposed. Pool size: 10  Connections in pool: 0 Current Overflow: -10 Current Checked out connections: 0", "module": "impl", "function": "dispose", "line": 228}
{"timestamp": "2026-02-26 13:54:35,197", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool recreating", "module": "impl", "function": "recreate", "line": 203}
{"timestamp": "2026-02-26 13:54:35,197", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 13:54:35,198", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 59}
{"timestamp": "2026-02-26 13:54:38,927", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 45}
{"timestamp": "2026-02-26 13:54:38,971", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver initialized", "module": "agent_factory", "function": "init_checkpointer", "line": 72}
{"timestamp": "2026-02-26 13:54:38,971", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2026-02-26 13:54:38,972", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 50}
{"timestamp": "2026-02-26 13:54:38,972", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始缓存预热", "module": "cache_warmup", "function": "warmup_all", "line": 163}
{"timestamp": "2026-02-26 13:54:39,033", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 2/2 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 61}
{"timestamp": "2026-02-26 13:54:39,036", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0/0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 104}
{"timestamp": "2026-02-26 13:54:39,042", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 71/71 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 158}
{"timestamp": "2026-02-26 13:54:39,042", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 缓存预热完成", "module": "cache_warmup", "function": "warmup_all", "line": 169}
{"timestamp": "2026-02-26 13:54:58,456", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT] 开始处理消息: conversation_id=233", "module": "chat_service", "function": "process_message", "line": 101}
{"timestamp": "2026-02-26 13:55:02,206", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT] Agent流式执行完成", "module": "chat_service", "function": "process_message", "line": 155}
{"timestamp": "2026-02-26 13:55:02,206", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.api.v1.chat", "message": "[SSE] Stream complete, total chunks: 27, response length: 187", "module": "chat", "function": "generate", "line": 127}
{"timestamp": "2026-02-26 13:55:27,521", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver connection closed", "module": "agent_factory", "function": "close_checkpointer", "line": 90}
{"timestamp": "2026-02-26 13:55:27,525", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool disposed. Pool size: 10  Connections in pool: 0 Current Overflow: -10 Current Checked out connections: 0", "module": "impl", "function": "dispose", "line": 228}
{"timestamp": "2026-02-26 13:55:27,525", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool recreating", "module": "impl", "function": "recreate", "line": 203}
{"timestamp": "2026-02-26 13:55:27,526", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 13:55:27,526", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 59}
{"timestamp": "2026-02-26 13:55:48,547", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 45}
{"timestamp": "2026-02-26 13:55:48,591", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver initialized", "module": "agent_factory", "function": "init_checkpointer", "line": 71}
{"timestamp": "2026-02-26 13:55:48,591", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2026-02-26 13:55:48,592", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 50}
{"timestamp": "2026-02-26 13:55:48,592", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始缓存预热", "module": "cache_warmup", "function": "warmup_all", "line": 163}
{"timestamp": "2026-02-26 13:55:48,655", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 2/2 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 61}
{"timestamp": "2026-02-26 13:55:48,657", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0/0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 104}
{"timestamp": "2026-02-26 13:55:48,669", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 71/71 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 158}
{"timestamp": "2026-02-26 13:55:48,669", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 缓存预热完成", "module": "cache_warmup", "function": "warmup_all", "line": 169}
{"timestamp": "2026-02-26 13:56:50,672", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT] 开始处理消息: conversation_id=233", "module": "chat_service", "function": "process_message", "line": 101}
{"timestamp": "2026-02-26 13:56:57,479", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT] Agent流式执行完成", "module": "chat_service", "function": "process_message", "line": 155}
{"timestamp": "2026-02-26 13:56:57,479", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.api.v1.chat", "message": "[SSE] Stream complete, total chunks: 60, response length: 475", "module": "chat", "function": "generate", "line": 127}
{"timestamp": "2026-02-26 13:58:14,592", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT] 开始处理消息: conversation_id=233", "module": "chat_service", "function": "process_message", "line": 101}
{"timestamp": "2026-02-26 13:58:27,775", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT] Agent流式执行完成", "module": "chat_service", "function": "process_message", "line": 155}
{"timestamp": "2026-02-26 13:58:27,776", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.api.v1.chat", "message": "[SSE] Stream complete, total chunks: 96, response length: 711", "module": "chat", "function": "generate", "line": 127}
{"timestamp": "2026-02-26 14:01:54,104", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT] 开始处理消息: conversation_id=233", "module": "chat_service", "function": "process_message", "line": 101}
{"timestamp": "2026-02-26 14:02:02,794", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT] Agent流式执行完成", "module": "chat_service", "function": "process_message", "line": 155}
{"timestamp": "2026-02-26 14:02:02,794", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.api.v1.chat", "message": "[SSE] Stream complete, total chunks: 80, response length: 661", "module": "chat", "function": "generate", "line": 127}
{"timestamp": "2026-02-26 14:03:55,768", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT] 开始处理消息: conversation_id=233", "module": "chat_service", "function": "process_message", "line": 101}
{"timestamp": "2026-02-26 14:04:06,594", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT] Agent流式执行完成", "module": "chat_service", "function": "process_message", "line": 155}
{"timestamp": "2026-02-26 14:04:06,594", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.api.v1.chat", "message": "[SSE] Stream complete, total chunks: 82, response length: 655", "module": "chat", "function": "generate", "line": 127}
{"timestamp": "2026-02-26 14:15:47,139", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver connection closed", "module": "agent_factory", "function": "close_checkpointer", "line": 89}
{"timestamp": "2026-02-26 14:15:47,154", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool disposed. Pool size: 10  Connections in pool: 0 Current Overflow: -10 Current Checked out connections: 0", "module": "impl", "function": "dispose", "line": 228}
{"timestamp": "2026-02-26 14:15:47,155", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool recreating", "module": "impl", "function": "recreate", "line": 203}
{"timestamp": "2026-02-26 14:15:47,155", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 14:15:47,155", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 59}
{"timestamp": "2026-02-26 14:15:49,824", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 45}
{"timestamp": "2026-02-26 14:15:49,874", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver initialized", "module": "agent_factory", "function": "init_checkpointer", "line": 72}
{"timestamp": "2026-02-26 14:15:49,875", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2026-02-26 14:15:49,875", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 50}
{"timestamp": "2026-02-26 14:15:49,875", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始缓存预热", "module": "cache_warmup", "function": "warmup_all", "line": 163}
{"timestamp": "2026-02-26 14:15:49,937", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 2/2 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 61}
{"timestamp": "2026-02-26 14:15:49,939", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0/0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 104}
{"timestamp": "2026-02-26 14:15:49,949", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 71/71 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 158}
{"timestamp": "2026-02-26 14:15:49,950", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 缓存预热完成", "module": "cache_warmup", "function": "warmup_all", "line": 169}
{"timestamp": "2026-02-26 14:16:09,269", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver connection closed", "module": "agent_factory", "function": "close_checkpointer", "line": 90}
{"timestamp": "2026-02-26 14:16:09,285", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool disposed. Pool size: 10  Connections in pool: 0 Current Overflow: -10 Current Checked out connections: 0", "module": "impl", "function": "dispose", "line": 228}
{"timestamp": "2026-02-26 14:16:09,285", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool recreating", "module": "impl", "function": "recreate", "line": 203}
{"timestamp": "2026-02-26 14:16:09,285", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 14:16:09,286", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 59}
{"timestamp": "2026-02-26 14:16:11,895", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 45}
{"timestamp": "2026-02-26 14:16:11,939", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver initialized", "module": "agent_factory", "function": "init_checkpointer", "line": 72}
{"timestamp": "2026-02-26 14:16:11,940", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2026-02-26 14:16:11,940", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 50}
{"timestamp": "2026-02-26 14:16:11,940", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始缓存预热", "module": "cache_warmup", "function": "warmup_all", "line": 163}
{"timestamp": "2026-02-26 14:16:12,000", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 2/2 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 61}
{"timestamp": "2026-02-26 14:16:12,003", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0/0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 104}
{"timestamp": "2026-02-26 14:16:12,009", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 71/71 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 158}
{"timestamp": "2026-02-26 14:16:12,009", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 缓存预热完成", "module": "cache_warmup", "function": "warmup_all", "line": 169}
{"timestamp": "2026-02-26 14:16:34,429", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver connection closed", "module": "agent_factory", "function": "close_checkpointer", "line": 90}
{"timestamp": "2026-02-26 14:16:34,446", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool disposed. Pool size: 10  Connections in pool: 0 Current Overflow: -10 Current Checked out connections: 0", "module": "impl", "function": "dispose", "line": 228}
{"timestamp": "2026-02-26 14:16:34,446", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool recreating", "module": "impl", "function": "recreate", "line": 203}
{"timestamp": "2026-02-26 14:16:34,446", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 14:16:34,446", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 59}
{"timestamp": "2026-02-26 14:16:37,128", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 45}
{"timestamp": "2026-02-26 14:16:37,172", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver initialized", "module": "agent_factory", "function": "init_checkpointer", "line": 72}
{"timestamp": "2026-02-26 14:16:37,172", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2026-02-26 14:16:37,173", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 50}
{"timestamp": "2026-02-26 14:16:37,173", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始缓存预热", "module": "cache_warmup", "function": "warmup_all", "line": 163}
{"timestamp": "2026-02-26 14:16:37,235", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 2/2 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 61}
{"timestamp": "2026-02-26 14:16:37,237", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0/0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 104}
{"timestamp": "2026-02-26 14:16:37,246", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 71/71 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 158}
{"timestamp": "2026-02-26 14:16:37,246", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 缓存预热完成", "module": "cache_warmup", "function": "warmup_all", "line": 169}
{"timestamp": "2026-02-26 14:20:16,710", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT] 开始处理消息: conversation_id=234", "module": "chat_service", "function": "process_message", "line": 101}
{"timestamp": "2026-02-26 14:20:37,509", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT] Agent流式执行完成", "module": "chat_service", "function": "process_message", "line": 155}
{"timestamp": "2026-02-26 14:20:37,510", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.api.v1.chat", "message": "[SSE] Stream complete, total chunks: 137, response length: 1073", "module": "chat", "function": "generate", "line": 127}
{"timestamp": "2026-02-26 14:21:20,162", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT] 开始处理消息: conversation_id=234", "module": "chat_service", "function": "process_message", "line": 101}
{"timestamp": "2026-02-26 14:21:23,711", "level": "\u001b[32mINFO\u001b[0m", "logger": "httpx", "message": "HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions \"HTTP/1.1 400 Bad Request\"", "module": "_client", "function": "_send_single_request", "line": 1740}
{"timestamp": "2026-02-26 14:21:23,719", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT] 处理消息时出错: Error code: 400 - {'error': {'message': '<400> InternalError.Algo.InvalidParameter: The provided URL does not appear to be valid. Ensure it is correctly formatted.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_parameter_error'}, 'id': 'chatcmpl-795a12e0-7262-97ca-9380-d5a387506c1c', 'request_id': '795a12e0-7262-97ca-9380-d5a387506c1c'}", "module": "chat_service", "function": "process_message", "line": 194, "exception": "Traceback (most recent call last):\n  File \"F:\\code\\dragonai-v2-local\\app\\services\\chat_service.py\", line 128, in process_message\n    async for stream_mode, data in agent.astream(\n    ...<24 lines>...\n                            yield formatted\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\langgraph\\pregel\\main.py\", line 2974, in astream\n    async for _ in runner.atick(\n    ...<13 lines>...\n            yield o\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\langgraph\\pregel\\_runner.py\", line 410, in atick\n    _panic_or_proceed(\n    ~~~~~~~~~~~~~~~~~^\n        futures.done.union(f for f, t in futures.items() if t is not None),\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        timeout_exc_cls=asyncio.TimeoutError,\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        panic=reraise,\n        ^^^^^^^^^^^^^^\n    )\n    ^\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\langgraph\\pregel\\_runner.py\", line 520, in _panic_or_proceed\n    raise exc\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\langgraph\\pregel\\_retry.py\", line 138, in arun_with_retry\n    return await task.proc.ainvoke(task.input, config)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\langgraph\\_internal\\_runnable.py\", line 705, in ainvoke\n    input = await asyncio.create_task(\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^\n        step.ainvoke(input, config, **kwargs), context=context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\langgraph\\_internal\\_runnable.py\", line 473, in ainvoke\n    ret = await self.afunc(*args, **kwargs)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\langgraph\\prebuilt\\tool_node.py\", line 846, in _afunc\n    outputs = await asyncio.gather(*coros)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\langgraph\\prebuilt\\tool_node.py\", line 1200, in _arun_one\n    content = _handle_tool_error(e, flag=self._handle_tool_errors)\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\langgraph\\prebuilt\\tool_node.py\", line 430, in _handle_tool_error\n    content = flag(e)  # type: ignore [assignment, call-arg]\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\langgraph\\prebuilt\\tool_node.py\", line 387, in _default_handle_tool_errors\n    raise e\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\langgraph\\prebuilt\\tool_node.py\", line 1191, in _arun_one\n    return await self._awrap_tool_call(tool_request, execute)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\deepagents\\middleware\\filesystem.py\", line 1341, in awrap_tool_call\n    tool_result = await handler(request)\n                  ^^^^^^^^^^^^^^^^^^^^^^\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\langgraph\\prebuilt\\tool_node.py\", line 1182, in execute\n    return await self._execute_tool_async(req, input_type, config)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\langgraph\\prebuilt\\tool_node.py\", line 1126, in _execute_tool_async\n    content = _handle_tool_error(e, flag=self._handle_tool_errors)\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\langgraph\\prebuilt\\tool_node.py\", line 430, in _handle_tool_error\n    content = flag(e)  # type: ignore [assignment, call-arg]\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\langgraph\\prebuilt\\tool_node.py\", line 387, in _default_handle_tool_errors\n    raise e\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\langgraph\\prebuilt\\tool_node.py\", line 1083, in _execute_tool_async\n    response = await tool.ainvoke(call_args, config)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\langchain_core\\tools\\structured.py\", line 70, in ainvoke\n    return await super().ainvoke(input, config, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\langchain_core\\tools\\base.py\", line 652, in ainvoke\n    return await self.arun(tool_input, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\langchain_core\\tools\\base.py\", line 1131, in arun\n    raise error_to_raise\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\langchain_core\\tools\\base.py\", line 1097, in arun\n    response = await coro_with_context(coro, context)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\langchain_core\\tools\\structured.py\", line 124, in _arun\n    return await self.coroutine(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"F:\\code\\dragonai-v2-local\\app\\tools\\multimodal_tool.py\", line 28, in understand_image\n    result = await model.ainvoke(messages)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"F:\\code\\dragonai-v2-local\\app\\llm\\model_factory.py\", line 66, in ainvoke\n    response = await client.chat.completions.create(**request_kwargs)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\openai\\resources\\chat\\completions\\completions.py\", line 2676, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n    ...<49 lines>...\n    )\n    ^\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\openai\\_base_client.py\", line 1884, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\openai\\_base_client.py\", line 1669, in request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.BadRequestError: Error code: 400 - {'error': {'message': '<400> InternalError.Algo.InvalidParameter: The provided URL does not appear to be valid. Ensure it is correctly formatted.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_parameter_error'}, 'id': 'chatcmpl-795a12e0-7262-97ca-9380-d5a387506c1c', 'request_id': '795a12e0-7262-97ca-9380-d5a387506c1c'}\nDuring task with name 'tools' and id '1b77797e-b9cf-1b71-50f1-7dbea192527c'"}
{"timestamp": "2026-02-26 14:21:23,733", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.api.v1.chat", "message": "[SSE] Stream complete, total chunks: 10, response length: 90", "module": "chat", "function": "generate", "line": 127}
{"timestamp": "2026-02-26 14:23:45,009", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT] 开始处理消息: conversation_id=234", "module": "chat_service", "function": "process_message", "line": 101}
{"timestamp": "2026-02-26 14:23:45,802", "level": "\u001b[33mWARNING\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT] 检测到无效的tool_calls，清理对话状态并重试", "module": "chat_service", "function": "process_message", "line": 159}
{"timestamp": "2026-02-26 14:24:09,266", "level": "\u001b[32mINFO\u001b[0m", "logger": "httpx", "message": "HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions \"HTTP/1.1 200 OK\"", "module": "_client", "function": "_send_single_request", "line": 1740}
{"timestamp": "2026-02-26 14:24:38,324", "level": "\u001b[32mINFO\u001b[0m", "logger": "httpx", "message": "HTTP Request: POST https://dashscope.aliyuncs.com/api/v1/services/aigc/multimodal-generation/generation \"HTTP/1.1 200 OK\"", "module": "_client", "function": "_send_single_request", "line": 1740}
{"timestamp": "2026-02-26 14:24:38,552", "level": "\u001b[32mINFO\u001b[0m", "logger": "httpx", "message": "HTTP Request: GET https://dashscope-result-sh.oss-cn-shanghai.aliyuncs.com/7d/57/20260226/17bff29b/a4f3be38-b816-46fa-a4e7-c1bf176a13d6-1.png?Expires=1772721678&OSSAccessKeyId=LTAI5tPxpiCM2hjmWrFXrym1&Signature=7TyIy2yEHqp8pHuotcKxIN5ZWRw%3D \"HTTP/1.1 200 OK\"", "module": "_client", "function": "_send_single_request", "line": 1740}
{"timestamp": "2026-02-26 14:24:42,401", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT] 重试执行成功", "module": "chat_service", "function": "process_message", "line": 187}
{"timestamp": "2026-02-26 14:24:42,402", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.api.v1.chat", "message": "[SSE] Stream complete, total chunks: 45, response length: 327", "module": "chat", "function": "generate", "line": 127}
{"timestamp": "2026-02-26 14:25:54,161", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT] 开始处理消息: conversation_id=234", "module": "chat_service", "function": "process_message", "line": 101}
{"timestamp": "2026-02-26 14:26:18,962", "level": "\u001b[32mINFO\u001b[0m", "logger": "httpx", "message": "HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions \"HTTP/1.1 200 OK\"", "module": "_client", "function": "_send_single_request", "line": 1740}
{"timestamp": "2026-02-26 14:26:43,088", "level": "\u001b[32mINFO\u001b[0m", "logger": "httpx", "message": "HTTP Request: POST https://dashscope.aliyuncs.com/api/v1/services/aigc/multimodal-generation/generation \"HTTP/1.1 200 OK\"", "module": "_client", "function": "_send_single_request", "line": 1740}
{"timestamp": "2026-02-26 14:26:43,306", "level": "\u001b[32mINFO\u001b[0m", "logger": "httpx", "message": "HTTP Request: GET https://dashscope-result-sh.oss-cn-shanghai.aliyuncs.com/7d/31/20260226/aa4f9372/091e474b-73c2-4193-bdb8-eec8763f4477-1.png?Expires=1772721803&OSSAccessKeyId=LTAI5tKPD3TMqf2Lna1fASuh&Signature=YP0Re0RwDNrgtZEMrP2cfpO44ig%3D \"HTTP/1.1 200 OK\"", "module": "_client", "function": "_send_single_request", "line": 1740}
{"timestamp": "2026-02-26 14:26:47,316", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT] Agent流式执行完成", "module": "chat_service", "function": "process_message", "line": 155}
{"timestamp": "2026-02-26 14:26:47,316", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.api.v1.chat", "message": "[SSE] Stream complete, total chunks: 42, response length: 318", "module": "chat", "function": "generate", "line": 127}
{"timestamp": "2026-02-26 14:28:28,339", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver connection closed", "module": "agent_factory", "function": "close_checkpointer", "line": 90}
{"timestamp": "2026-02-26 14:28:28,354", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool disposed. Pool size: 10  Connections in pool: 0 Current Overflow: -10 Current Checked out connections: 0", "module": "impl", "function": "dispose", "line": 228}
{"timestamp": "2026-02-26 14:28:28,354", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool recreating", "module": "impl", "function": "recreate", "line": 203}
{"timestamp": "2026-02-26 14:28:28,354", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 14:28:28,355", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 59}
{"timestamp": "2026-02-26 14:28:28,437", "level": "\u001b[31mERROR\u001b[0m", "logger": "dashscope", "message": "", "module": "http_request", "function": "_handle_request", "line": 500}
{"timestamp": "2026-02-26 14:28:46,090", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 45}
{"timestamp": "2026-02-26 14:28:46,134", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver initialized", "module": "agent_factory", "function": "init_checkpointer", "line": 72}
{"timestamp": "2026-02-26 14:28:46,135", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2026-02-26 14:28:46,135", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 50}
{"timestamp": "2026-02-26 14:28:46,135", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始缓存预热", "module": "cache_warmup", "function": "warmup_all", "line": 163}
{"timestamp": "2026-02-26 14:28:46,204", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 2/2 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 61}
{"timestamp": "2026-02-26 14:28:46,206", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0/0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 104}
{"timestamp": "2026-02-26 14:28:46,214", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 72/72 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 158}
{"timestamp": "2026-02-26 14:28:46,214", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 缓存预热完成", "module": "cache_warmup", "function": "warmup_all", "line": 169}
{"timestamp": "2026-02-26 14:29:38,176", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT] 开始处理消息: conversation_id=234", "module": "chat_service", "function": "process_message", "line": 101}
{"timestamp": "2026-02-26 14:30:07,749", "level": "\u001b[32mINFO\u001b[0m", "logger": "httpx", "message": "HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions \"HTTP/1.1 200 OK\"", "module": "_client", "function": "_send_single_request", "line": 1740}
{"timestamp": "2026-02-26 14:30:33,559", "level": "\u001b[32mINFO\u001b[0m", "logger": "httpx", "message": "HTTP Request: POST https://dashscope.aliyuncs.com/api/v1/services/aigc/multimodal-generation/generation \"HTTP/1.1 200 OK\"", "module": "_client", "function": "_send_single_request", "line": 1740}
{"timestamp": "2026-02-26 14:30:34,008", "level": "\u001b[32mINFO\u001b[0m", "logger": "httpx", "message": "HTTP Request: GET https://dashscope-result-sh.oss-cn-shanghai.aliyuncs.com/7d/d0/20260226/aa4f9372/33a0bf08-2ed9-45c6-b9d3-9e588b1ee823-1.png?Expires=1772722033&OSSAccessKeyId=LTAI5tKPD3TMqf2Lna1fASuh&Signature=Sh6My1WSAg%2Bqy%2Bfpvjjcnmmwd5w%3D \"HTTP/1.1 200 OK\"", "module": "_client", "function": "_send_single_request", "line": 1740}
{"timestamp": "2026-02-26 14:30:39,007", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT] Agent流式执行完成", "module": "chat_service", "function": "process_message", "line": 155}
{"timestamp": "2026-02-26 14:30:39,009", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.api.v1.chat", "message": "[SSE] Stream complete, total chunks: 54, response length: 407", "module": "chat", "function": "generate", "line": 127}
{"timestamp": "2026-02-26 14:32:19,262", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT] 开始处理消息: conversation_id=234", "module": "chat_service", "function": "process_message", "line": 101}
{"timestamp": "2026-02-26 14:32:22,949", "level": "\u001b[32mINFO\u001b[0m", "logger": "httpx", "message": "HTTP Request: POST https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions \"HTTP/1.1 400 Bad Request\"", "module": "_client", "function": "_send_single_request", "line": 1740}
{"timestamp": "2026-02-26 14:32:22,957", "level": "\u001b[31mERROR\u001b[0m", "logger": "app.services.chat_service", "message": "[CHAT] 处理消息时出错: Error code: 400 - {'error': {'message': '<400> InternalError.Algo.InvalidParameter: The image format is illegal and cannot be opened', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_parameter_error'}, 'id': 'chatcmpl-10840c5f-4cf8-9cb4-8151-bdc6859b99d9', 'request_id': '10840c5f-4cf8-9cb4-8151-bdc6859b99d9'}", "module": "chat_service", "function": "process_message", "line": 194, "exception": "Traceback (most recent call last):\n  File \"F:\\code\\dragonai-v2-local\\app\\services\\chat_service.py\", line 128, in process_message\n    async for stream_mode, data in agent.astream(\n    ...<24 lines>...\n                            yield formatted\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\langgraph\\pregel\\main.py\", line 2974, in astream\n    async for _ in runner.atick(\n    ...<13 lines>...\n            yield o\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\langgraph\\pregel\\_runner.py\", line 410, in atick\n    _panic_or_proceed(\n    ~~~~~~~~~~~~~~~~~^\n        futures.done.union(f for f, t in futures.items() if t is not None),\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        timeout_exc_cls=asyncio.TimeoutError,\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        panic=reraise,\n        ^^^^^^^^^^^^^^\n    )\n    ^\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\langgraph\\pregel\\_runner.py\", line 520, in _panic_or_proceed\n    raise exc\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\langgraph\\pregel\\_retry.py\", line 138, in arun_with_retry\n    return await task.proc.ainvoke(task.input, config)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\langgraph\\_internal\\_runnable.py\", line 705, in ainvoke\n    input = await asyncio.create_task(\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^\n        step.ainvoke(input, config, **kwargs), context=context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\langgraph\\_internal\\_runnable.py\", line 473, in ainvoke\n    ret = await self.afunc(*args, **kwargs)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\langgraph\\prebuilt\\tool_node.py\", line 846, in _afunc\n    outputs = await asyncio.gather(*coros)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\langgraph\\prebuilt\\tool_node.py\", line 1200, in _arun_one\n    content = _handle_tool_error(e, flag=self._handle_tool_errors)\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\langgraph\\prebuilt\\tool_node.py\", line 430, in _handle_tool_error\n    content = flag(e)  # type: ignore [assignment, call-arg]\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\langgraph\\prebuilt\\tool_node.py\", line 387, in _default_handle_tool_errors\n    raise e\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\langgraph\\prebuilt\\tool_node.py\", line 1191, in _arun_one\n    return await self._awrap_tool_call(tool_request, execute)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\deepagents\\middleware\\filesystem.py\", line 1341, in awrap_tool_call\n    tool_result = await handler(request)\n                  ^^^^^^^^^^^^^^^^^^^^^^\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\langgraph\\prebuilt\\tool_node.py\", line 1182, in execute\n    return await self._execute_tool_async(req, input_type, config)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\langgraph\\prebuilt\\tool_node.py\", line 1126, in _execute_tool_async\n    content = _handle_tool_error(e, flag=self._handle_tool_errors)\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\langgraph\\prebuilt\\tool_node.py\", line 430, in _handle_tool_error\n    content = flag(e)  # type: ignore [assignment, call-arg]\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\langgraph\\prebuilt\\tool_node.py\", line 387, in _default_handle_tool_errors\n    raise e\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\langgraph\\prebuilt\\tool_node.py\", line 1083, in _execute_tool_async\n    response = await tool.ainvoke(call_args, config)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\langchain_core\\tools\\structured.py\", line 70, in ainvoke\n    return await super().ainvoke(input, config, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\langchain_core\\tools\\base.py\", line 652, in ainvoke\n    return await self.arun(tool_input, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\langchain_core\\tools\\base.py\", line 1131, in arun\n    raise error_to_raise\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\langchain_core\\tools\\base.py\", line 1097, in arun\n    response = await coro_with_context(coro, context)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\langchain_core\\tools\\structured.py\", line 124, in _arun\n    return await self.coroutine(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"F:\\code\\dragonai-v2-local\\app\\tools\\multimodal_tool.py\", line 52, in ocr_document\n    result = await model.ainvoke(messages)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"F:\\code\\dragonai-v2-local\\app\\llm\\model_factory.py\", line 66, in ainvoke\n    response = await client.chat.completions.create(**request_kwargs)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\openai\\resources\\chat\\completions\\completions.py\", line 2676, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n    ...<49 lines>...\n    )\n    ^\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\openai\\_base_client.py\", line 1884, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"F:\\code\\dragonai-v2-local\\.venv\\Lib\\site-packages\\openai\\_base_client.py\", line 1669, in request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.BadRequestError: Error code: 400 - {'error': {'message': '<400> InternalError.Algo.InvalidParameter: The image format is illegal and cannot be opened', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_parameter_error'}, 'id': 'chatcmpl-10840c5f-4cf8-9cb4-8151-bdc6859b99d9', 'request_id': '10840c5f-4cf8-9cb4-8151-bdc6859b99d9'}\nDuring task with name 'tools' and id 'd4808776-cf47-0f0d-25f5-34260925db1f'"}
{"timestamp": "2026-02-26 14:32:22,998", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.api.v1.chat", "message": "[SSE] Stream complete, total chunks: 9, response length: 63", "module": "chat", "function": "generate", "line": 127}
{"timestamp": "2026-02-26 14:46:25,239", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver connection closed", "module": "agent_factory", "function": "close_checkpointer", "line": 90}
{"timestamp": "2026-02-26 14:46:25,255", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool disposed. Pool size: 10  Connections in pool: 0 Current Overflow: -10 Current Checked out connections: 0", "module": "impl", "function": "dispose", "line": 228}
{"timestamp": "2026-02-26 14:46:25,256", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool recreating", "module": "impl", "function": "recreate", "line": 203}
{"timestamp": "2026-02-26 14:46:25,256", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 14:46:25,256", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 59}
{"timestamp": "2026-02-26 14:46:28,258", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 45}
{"timestamp": "2026-02-26 14:46:28,300", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver initialized", "module": "agent_factory", "function": "init_checkpointer", "line": 72}
{"timestamp": "2026-02-26 14:46:28,301", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2026-02-26 14:46:28,301", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 50}
{"timestamp": "2026-02-26 14:46:28,301", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始缓存预热", "module": "cache_warmup", "function": "warmup_all", "line": 163}
{"timestamp": "2026-02-26 14:46:28,364", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 2/2 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 61}
{"timestamp": "2026-02-26 14:46:28,366", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0/0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 104}
{"timestamp": "2026-02-26 14:46:28,412", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 72/72 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 158}
{"timestamp": "2026-02-26 14:46:28,412", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 缓存预热完成", "module": "cache_warmup", "function": "warmup_all", "line": 169}
{"timestamp": "2026-02-26 14:46:48,098", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver connection closed", "module": "agent_factory", "function": "close_checkpointer", "line": 90}
{"timestamp": "2026-02-26 14:46:48,115", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool disposed. Pool size: 10  Connections in pool: 0 Current Overflow: -10 Current Checked out connections: 0", "module": "impl", "function": "dispose", "line": 228}
{"timestamp": "2026-02-26 14:46:48,115", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool recreating", "module": "impl", "function": "recreate", "line": 203}
{"timestamp": "2026-02-26 14:46:48,116", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 14:46:48,117", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 59}
{"timestamp": "2026-02-26 14:46:50,752", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 45}
{"timestamp": "2026-02-26 14:46:50,794", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver initialized", "module": "agent_factory", "function": "init_checkpointer", "line": 72}
{"timestamp": "2026-02-26 14:46:50,794", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2026-02-26 14:46:50,795", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 50}
{"timestamp": "2026-02-26 14:46:50,795", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始缓存预热", "module": "cache_warmup", "function": "warmup_all", "line": 163}
{"timestamp": "2026-02-26 14:46:50,857", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 2/2 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 61}
{"timestamp": "2026-02-26 14:46:50,860", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0/0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 104}
{"timestamp": "2026-02-26 14:46:50,869", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 72/72 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 158}
{"timestamp": "2026-02-26 14:46:50,869", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 缓存预热完成", "module": "cache_warmup", "function": "warmup_all", "line": 169}
{"timestamp": "2026-02-26 14:53:39,257", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver connection closed", "module": "agent_factory", "function": "close_checkpointer", "line": 90}
{"timestamp": "2026-02-26 14:53:39,274", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool disposed. Pool size: 10  Connections in pool: 0 Current Overflow: -10 Current Checked out connections: 0", "module": "impl", "function": "dispose", "line": 228}
{"timestamp": "2026-02-26 14:53:39,274", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool recreating", "module": "impl", "function": "recreate", "line": 203}
{"timestamp": "2026-02-26 14:53:39,275", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 14:53:39,275", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 59}
{"timestamp": "2026-02-26 14:53:42,050", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 45}
{"timestamp": "2026-02-26 14:53:42,095", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver initialized", "module": "agent_factory", "function": "init_checkpointer", "line": 72}
{"timestamp": "2026-02-26 14:53:42,095", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2026-02-26 14:53:42,095", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 50}
{"timestamp": "2026-02-26 14:53:42,095", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始缓存预热", "module": "cache_warmup", "function": "warmup_all", "line": 163}
{"timestamp": "2026-02-26 14:53:42,264", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 2/2 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 61}
{"timestamp": "2026-02-26 14:53:42,266", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0/0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 104}
{"timestamp": "2026-02-26 14:53:42,274", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 72/72 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 158}
{"timestamp": "2026-02-26 14:53:42,274", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 缓存预热完成", "module": "cache_warmup", "function": "warmup_all", "line": 169}
{"timestamp": "2026-02-26 14:54:22,768", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver connection closed", "module": "agent_factory", "function": "close_checkpointer", "line": 90}
{"timestamp": "2026-02-26 14:54:22,784", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool disposed. Pool size: 10  Connections in pool: 0 Current Overflow: -10 Current Checked out connections: 0", "module": "impl", "function": "dispose", "line": 228}
{"timestamp": "2026-02-26 14:54:22,784", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool recreating", "module": "impl", "function": "recreate", "line": 203}
{"timestamp": "2026-02-26 14:54:22,785", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 14:54:22,785", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 59}
{"timestamp": "2026-02-26 14:57:39,290", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 45}
{"timestamp": "2026-02-26 14:57:39,336", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver initialized", "module": "agent_factory", "function": "init_checkpointer", "line": 79}
{"timestamp": "2026-02-26 14:57:39,336", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2026-02-26 14:57:39,337", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 50}
{"timestamp": "2026-02-26 14:57:39,337", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始缓存预热", "module": "cache_warmup", "function": "warmup_all", "line": 163}
{"timestamp": "2026-02-26 14:57:39,402", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 2/2 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 61}
{"timestamp": "2026-02-26 14:57:39,405", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0/0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 104}
{"timestamp": "2026-02-26 14:57:39,420", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 72/72 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 158}
{"timestamp": "2026-02-26 14:57:39,420", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 缓存预热完成", "module": "cache_warmup", "function": "warmup_all", "line": 169}
{"timestamp": "2026-02-26 14:58:13,711", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver connection closed", "module": "agent_factory", "function": "close_checkpointer", "line": 97}
{"timestamp": "2026-02-26 14:58:13,728", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool disposed. Pool size: 10  Connections in pool: 0 Current Overflow: -10 Current Checked out connections: 0", "module": "impl", "function": "dispose", "line": 228}
{"timestamp": "2026-02-26 14:58:13,729", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool recreating", "module": "impl", "function": "recreate", "line": 203}
{"timestamp": "2026-02-26 14:58:13,729", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 14:58:13,730", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 59}
{"timestamp": "2026-02-26 14:58:16,384", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 45}
{"timestamp": "2026-02-26 14:58:16,427", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver initialized", "module": "agent_factory", "function": "init_checkpointer", "line": 79}
{"timestamp": "2026-02-26 14:58:16,428", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2026-02-26 14:58:16,428", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 50}
{"timestamp": "2026-02-26 14:58:16,428", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始缓存预热", "module": "cache_warmup", "function": "warmup_all", "line": 163}
{"timestamp": "2026-02-26 14:58:16,490", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 2/2 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 61}
{"timestamp": "2026-02-26 14:58:16,492", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0/0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 104}
{"timestamp": "2026-02-26 14:58:16,500", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 72/72 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 158}
{"timestamp": "2026-02-26 14:58:16,500", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 缓存预热完成", "module": "cache_warmup", "function": "warmup_all", "line": 169}
{"timestamp": "2026-02-26 15:02:16,571", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver connection closed", "module": "agent_factory", "function": "close_checkpointer", "line": 97}
{"timestamp": "2026-02-26 15:02:16,587", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool disposed. Pool size: 10  Connections in pool: 0 Current Overflow: -10 Current Checked out connections: 0", "module": "impl", "function": "dispose", "line": 228}
{"timestamp": "2026-02-26 15:02:16,587", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool recreating", "module": "impl", "function": "recreate", "line": 203}
{"timestamp": "2026-02-26 15:02:16,588", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 15:02:16,588", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 59}
{"timestamp": "2026-02-26 15:02:19,285", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 45}
{"timestamp": "2026-02-26 15:02:19,328", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver initialized", "module": "agent_factory", "function": "init_checkpointer", "line": 79}
{"timestamp": "2026-02-26 15:02:19,328", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2026-02-26 15:02:19,329", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 50}
{"timestamp": "2026-02-26 15:02:19,329", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始缓存预热", "module": "cache_warmup", "function": "warmup_all", "line": 163}
{"timestamp": "2026-02-26 15:02:19,390", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 2/2 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 61}
{"timestamp": "2026-02-26 15:02:19,393", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0/0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 104}
{"timestamp": "2026-02-26 15:02:19,399", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 72/72 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 158}
{"timestamp": "2026-02-26 15:02:19,399", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 缓存预热完成", "module": "cache_warmup", "function": "warmup_all", "line": 169}
{"timestamp": "2026-02-26 15:02:38,647", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver connection closed", "module": "agent_factory", "function": "close_checkpointer", "line": 97}
{"timestamp": "2026-02-26 15:02:38,663", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool disposed. Pool size: 10  Connections in pool: 0 Current Overflow: -10 Current Checked out connections: 0", "module": "impl", "function": "dispose", "line": 228}
{"timestamp": "2026-02-26 15:02:38,663", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool recreating", "module": "impl", "function": "recreate", "line": 203}
{"timestamp": "2026-02-26 15:02:38,663", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 15:02:38,663", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 59}
{"timestamp": "2026-02-26 15:02:41,308", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 45}
{"timestamp": "2026-02-26 15:02:41,352", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver initialized", "module": "agent_factory", "function": "init_checkpointer", "line": 79}
{"timestamp": "2026-02-26 15:02:41,352", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2026-02-26 15:02:41,352", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 50}
{"timestamp": "2026-02-26 15:02:41,352", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始缓存预热", "module": "cache_warmup", "function": "warmup_all", "line": 163}
{"timestamp": "2026-02-26 15:02:41,414", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 2/2 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 61}
{"timestamp": "2026-02-26 15:02:41,417", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0/0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 104}
{"timestamp": "2026-02-26 15:02:41,429", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 72/72 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 158}
{"timestamp": "2026-02-26 15:02:41,429", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 缓存预热完成", "module": "cache_warmup", "function": "warmup_all", "line": 169}
{"timestamp": "2026-02-26 15:02:58,379", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver connection closed", "module": "agent_factory", "function": "close_checkpointer", "line": 97}
{"timestamp": "2026-02-26 15:02:58,395", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool disposed. Pool size: 10  Connections in pool: 0 Current Overflow: -10 Current Checked out connections: 0", "module": "impl", "function": "dispose", "line": 228}
{"timestamp": "2026-02-26 15:02:58,395", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool recreating", "module": "impl", "function": "recreate", "line": 203}
{"timestamp": "2026-02-26 15:02:58,396", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 15:02:58,396", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 59}
{"timestamp": "2026-02-26 15:03:01,120", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 45}
{"timestamp": "2026-02-26 15:03:01,164", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver initialized", "module": "agent_factory", "function": "init_checkpointer", "line": 79}
{"timestamp": "2026-02-26 15:03:01,165", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2026-02-26 15:03:01,165", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 50}
{"timestamp": "2026-02-26 15:03:01,165", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始缓存预热", "module": "cache_warmup", "function": "warmup_all", "line": 163}
{"timestamp": "2026-02-26 15:03:01,228", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 2/2 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 61}
{"timestamp": "2026-02-26 15:03:01,231", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0/0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 104}
{"timestamp": "2026-02-26 15:03:01,236", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 72/72 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 158}
{"timestamp": "2026-02-26 15:03:01,237", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 缓存预热完成", "module": "cache_warmup", "function": "warmup_all", "line": 169}
{"timestamp": "2026-02-26 15:06:45,170", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver connection closed", "module": "agent_factory", "function": "close_checkpointer", "line": 97}
{"timestamp": "2026-02-26 15:06:45,200", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool disposed. Pool size: 10  Connections in pool: 0 Current Overflow: -10 Current Checked out connections: 0", "module": "impl", "function": "dispose", "line": 228}
{"timestamp": "2026-02-26 15:06:45,200", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool recreating", "module": "impl", "function": "recreate", "line": 203}
{"timestamp": "2026-02-26 15:06:45,200", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 15:06:45,201", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 59}
{"timestamp": "2026-02-26 15:06:47,893", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 45}
{"timestamp": "2026-02-26 15:06:47,942", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver initialized", "module": "agent_factory", "function": "init_checkpointer", "line": 79}
{"timestamp": "2026-02-26 15:06:47,943", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2026-02-26 15:06:47,943", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 50}
{"timestamp": "2026-02-26 15:06:47,943", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始缓存预热", "module": "cache_warmup", "function": "warmup_all", "line": 163}
{"timestamp": "2026-02-26 15:06:48,004", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 2/2 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 61}
{"timestamp": "2026-02-26 15:06:48,006", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0/0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 104}
{"timestamp": "2026-02-26 15:06:48,020", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 72/72 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 158}
{"timestamp": "2026-02-26 15:06:48,020", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 缓存预热完成", "module": "cache_warmup", "function": "warmup_all", "line": 169}
{"timestamp": "2026-02-26 15:07:31,316", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver connection closed", "module": "agent_factory", "function": "close_checkpointer", "line": 97}
{"timestamp": "2026-02-26 15:07:31,332", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool disposed. Pool size: 10  Connections in pool: 0 Current Overflow: -10 Current Checked out connections: 0", "module": "impl", "function": "dispose", "line": 228}
{"timestamp": "2026-02-26 15:07:31,333", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool recreating", "module": "impl", "function": "recreate", "line": 203}
{"timestamp": "2026-02-26 15:07:31,333", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 15:07:31,333", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 59}
{"timestamp": "2026-02-26 15:07:34,006", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 45}
{"timestamp": "2026-02-26 15:07:34,050", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver initialized", "module": "agent_factory", "function": "init_checkpointer", "line": 79}
{"timestamp": "2026-02-26 15:07:34,051", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2026-02-26 15:07:34,051", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 50}
{"timestamp": "2026-02-26 15:07:34,051", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始缓存预热", "module": "cache_warmup", "function": "warmup_all", "line": 163}
{"timestamp": "2026-02-26 15:07:34,113", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 2/2 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 61}
{"timestamp": "2026-02-26 15:07:34,115", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0/0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 104}
{"timestamp": "2026-02-26 15:07:34,132", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 72/72 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 158}
{"timestamp": "2026-02-26 15:07:34,132", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 缓存预热完成", "module": "cache_warmup", "function": "warmup_all", "line": 169}
{"timestamp": "2026-02-26 15:10:08,245", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver connection closed", "module": "agent_factory", "function": "close_checkpointer", "line": 97}
{"timestamp": "2026-02-26 15:10:08,259", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool disposed. Pool size: 10  Connections in pool: 0 Current Overflow: -10 Current Checked out connections: 0", "module": "impl", "function": "dispose", "line": 228}
{"timestamp": "2026-02-26 15:10:08,260", "level": "\u001b[32mINFO\u001b[0m", "logger": "sqlalchemy.pool.impl.AsyncAdaptedQueuePool", "message": "Pool recreating", "module": "impl", "function": "recreate", "line": 203}
{"timestamp": "2026-02-26 15:10:08,260", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.database", "message": "[DB] 数据库连接池已关闭", "module": "database", "function": "close_db", "line": 105}
{"timestamp": "2026-02-26 15:10:08,260", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Shutting down DragonAI", "module": "main", "function": "lifespan", "line": 59}
{"timestamp": "2026-02-26 15:10:10,921", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Starting DragonAI...", "module": "main", "function": "lifespan", "line": 45}
{"timestamp": "2026-02-26 15:10:10,965", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.agents.agent_factory", "message": "[AGENT] AsyncPostgresSaver initialized", "module": "agent_factory", "function": "init_checkpointer", "line": 79}
{"timestamp": "2026-02-26 15:10:10,966", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Checkpointer initialized", "module": "main", "function": "lifespan", "line": 48}
{"timestamp": "2026-02-26 15:10:10,966", "level": "\u001b[32mINFO\u001b[0m", "logger": "root", "message": "Redis connected", "module": "main", "function": "lifespan", "line": 50}
{"timestamp": "2026-02-26 15:10:10,966", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 开始缓存预热", "module": "cache_warmup", "function": "warmup_all", "line": 163}
{"timestamp": "2026-02-26 15:10:11,026", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 会话列表缓存预热完成，预热了 2/2 个用户", "module": "cache_warmup", "function": "warmup_conversations", "line": 61}
{"timestamp": "2026-02-26 15:10:11,028", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 置顶会话详情缓存预热完成，预热了 0/0 个会话", "module": "cache_warmup", "function": "warmup_pinned_conversations", "line": 104}
{"timestamp": "2026-02-26 15:10:11,034", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 最近活跃会话缓存预热完成，预热了 72/72 个会话", "module": "cache_warmup", "function": "warmup_recent_conversations", "line": 158}
{"timestamp": "2026-02-26 15:10:11,034", "level": "\u001b[32mINFO\u001b[0m", "logger": "app.core.cache_warmup", "message": "[CACHE WARMUP] 缓存预热完成", "module": "cache_warmup", "function": "warmup_all", "line": 169}
